var Gj=Object.defineProperty;var Qj=(t,e,n)=>e in t?Gj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ho=(t,e,n)=>Qj(t,typeof e!="symbol"?e+"":e,n);function Kj(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Ig(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var WS={exports:{}},xh={},HS={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vc=Symbol.for("react.element"),Yj=Symbol.for("react.portal"),Jj=Symbol.for("react.fragment"),Xj=Symbol.for("react.strict_mode"),Zj=Symbol.for("react.profiler"),e2=Symbol.for("react.provider"),t2=Symbol.for("react.context"),n2=Symbol.for("react.forward_ref"),s2=Symbol.for("react.suspense"),r2=Symbol.for("react.memo"),i2=Symbol.for("react.lazy"),L_=Symbol.iterator;function o2(t){return t===null||typeof t!="object"?null:(t=L_&&t[L_]||t["@@iterator"],typeof t=="function"?t:null)}var GS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QS=Object.assign,KS={};function fa(t,e,n){this.props=t,this.context=e,this.refs=KS,this.updater=n||GS}fa.prototype.isReactComponent={};fa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function YS(){}YS.prototype=fa.prototype;function Tg(t,e,n){this.props=t,this.context=e,this.refs=KS,this.updater=n||GS}var Ag=Tg.prototype=new YS;Ag.constructor=Tg;QS(Ag,fa.prototype);Ag.isPureReactComponent=!0;var M_=Array.isArray,JS=Object.prototype.hasOwnProperty,Pg={current:null},XS={key:!0,ref:!0,__self:!0,__source:!0};function ZS(t,e,n){var s,r={},i=null,a=null;if(e!=null)for(s in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)JS.call(e,s)&&!XS.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];r.children=u}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:vc,type:t,key:i,ref:a,props:r,_owner:Pg.current}}function a2(t,e){return{$$typeof:vc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rg(t){return typeof t=="object"&&t!==null&&t.$$typeof===vc}function l2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var U_=/\/+/g;function Ef(t,e){return typeof t=="object"&&t!==null&&t.key!=null?l2(""+t.key):e.toString(36)}function Lu(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case vc:case Yj:a=!0}}if(a)return a=t,r=r(a),t=s===""?"."+Ef(a,0):s,M_(r)?(n="",t!=null&&(n=t.replace(U_,"$&/")+"/"),Lu(r,e,n,"",function(d){return d})):r!=null&&(Rg(r)&&(r=a2(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(U_,"$&/")+"/")+t)),e.push(r)),1;if(a=0,s=s===""?".":s+":",M_(t))for(var l=0;l<t.length;l++){i=t[l];var u=s+Ef(i,l);a+=Lu(i,e,n,u,r)}else if(u=o2(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=s+Ef(i,l++),a+=Lu(i,e,n,u,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Zc(t,e,n){if(t==null)return t;var s=[],r=0;return Lu(t,s,"","",function(i){return e.call(n,i,r++)}),s}function c2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},Mu={transition:null},u2={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Mu,ReactCurrentOwner:Pg};function e1(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Zc,forEach:function(t,e,n){Zc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zc(t,function(){e++}),e},toArray:function(t){return Zc(t,function(e){return e})||[]},only:function(t){if(!Rg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=fa;xe.Fragment=Jj;xe.Profiler=Zj;xe.PureComponent=Tg;xe.StrictMode=Xj;xe.Suspense=s2;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u2;xe.act=e1;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=QS({},t.props),r=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Pg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)JS.call(e,u)&&!XS.hasOwnProperty(u)&&(s[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:vc,type:t.type,key:r,ref:i,props:s,_owner:a}};xe.createContext=function(t){return t={$$typeof:t2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:e2,_context:t},t.Consumer=t};xe.createElement=ZS;xe.createFactory=function(t){var e=ZS.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:n2,render:t}};xe.isValidElement=Rg;xe.lazy=function(t){return{$$typeof:i2,_payload:{_status:-1,_result:t},_init:c2}};xe.memo=function(t,e){return{$$typeof:r2,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=Mu.transition;Mu.transition={};try{t()}finally{Mu.transition=e}};xe.unstable_act=e1;xe.useCallback=function(t,e){return Gt.current.useCallback(t,e)};xe.useContext=function(t){return Gt.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};xe.useEffect=function(t,e){return Gt.current.useEffect(t,e)};xe.useId=function(){return Gt.current.useId()};xe.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return Gt.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};xe.useRef=function(t){return Gt.current.useRef(t)};xe.useState=function(t){return Gt.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return Gt.current.useTransition()};xe.version="18.3.1";HS.exports=xe;var D=HS.exports;const me=Ig(D),d2=Kj({__proto__:null,default:me},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h2=D,f2=Symbol.for("react.element"),p2=Symbol.for("react.fragment"),m2=Object.prototype.hasOwnProperty,g2=h2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y2={key:!0,ref:!0,__self:!0,__source:!0};function t1(t,e,n){var s,r={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)m2.call(e,s)&&!y2.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:f2,type:t,key:i,ref:a,props:r,_owner:g2.current}}xh.Fragment=p2;xh.jsx=t1;xh.jsxs=t1;WS.exports=xh;var o=WS.exports,$p={},n1={exports:{}},_n={},s1={exports:{}},r1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,B){var q=F.length;F.push(B);e:for(;0<q;){var Y=q-1>>>1,ee=F[Y];if(0<r(ee,B))F[Y]=B,F[q]=ee,q=Y;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var B=F[0],q=F.pop();if(q!==B){F[0]=q;e:for(var Y=0,ee=F.length,z=ee>>>1;Y<z;){var Q=2*(Y+1)-1,G=F[Q],W=Q+1,K=F[W];if(0>r(G,q))W<ee&&0>r(K,G)?(F[Y]=K,F[W]=q,Y=W):(F[Y]=G,F[Q]=q,Y=Q);else if(W<ee&&0>r(K,q))F[Y]=K,F[W]=q,Y=W;else break e}}return B}function r(F,B){var q=F.sortIndex-B.sortIndex;return q!==0?q:F.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],f=1,p=null,h=3,_=!1,C=!1,j=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(F){for(var B=n(d);B!==null;){if(B.callback===null)s(d);else if(B.startTime<=F)s(d),B.sortIndex=B.expirationTime,e(u,B);else break;B=n(d)}}function x(F){if(j=!1,y(F),!C)if(n(u)!==null)C=!0,M(P);else{var B=n(d);B!==null&&U(x,B.startTime-F)}}function P(F,B){C=!1,j&&(j=!1,S(g),g=-1),_=!0;var q=h;try{for(y(B),p=n(u);p!==null&&(!(p.expirationTime>B)||F&&!A());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,h=p.priorityLevel;var ee=Y(p.expirationTime<=B);B=t.unstable_now(),typeof ee=="function"?p.callback=ee:p===n(u)&&s(u),y(B)}else s(u);p=n(u)}if(p!==null)var z=!0;else{var Q=n(d);Q!==null&&U(x,Q.startTime-B),z=!1}return z}finally{p=null,h=q,_=!1}}var O=!1,v=null,g=-1,N=5,w=-1;function A(){return!(t.unstable_now()-w<N)}function T(){if(v!==null){var F=t.unstable_now();w=F;var B=!0;try{B=v(!0,F)}finally{B?I():(O=!1,v=null)}}else O=!1}var I;if(typeof E=="function")I=function(){E(T)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,V=L.port2;L.port1.onmessage=T,I=function(){V.postMessage(null)}}else I=function(){b(T,0)};function M(F){v=F,O||(O=!0,I())}function U(F,B){g=b(function(){F(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){C||_||(C=!0,M(P))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var q=h;h=B;try{return F()}finally{h=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,B){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var q=h;h=F;try{return B()}finally{h=q}},t.unstable_scheduleCallback=function(F,B,q){var Y=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Y+q:Y):q=Y,F){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=q+ee,F={id:f++,callback:B,priorityLevel:F,startTime:q,expirationTime:ee,sortIndex:-1},q>Y?(F.sortIndex=q,e(d,F),n(u)===null&&F===n(d)&&(j?(S(g),g=-1):j=!0,U(x,q-Y))):(F.sortIndex=ee,e(u,F),C||_||(C=!0,M(P))),F},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(F){var B=h;return function(){var q=h;h=B;try{return F.apply(this,arguments)}finally{h=q}}}})(r1);s1.exports=r1;var v2=s1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _2=D,vn=v2;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i1=new Set,Tl={};function eo(t,e){Ko(t,e),Ko(t+"Capture",e)}function Ko(t,e){for(Tl[t]=e,t=0;t<e.length;t++)i1.add(e[t])}var Gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vp=Object.prototype.hasOwnProperty,x2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,F_={},z_={};function w2(t){return Vp.call(z_,t)?!0:Vp.call(F_,t)?!1:x2.test(t)?z_[t]=!0:(F_[t]=!0,!1)}function S2(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function b2(t,e,n,s){if(e===null||typeof e>"u"||S2(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,s,r,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Og=/[\-:]([a-z])/g;function Dg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Og,Dg);Tt[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Og,Dg);Tt[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Og,Dg);Tt[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lg(t,e,n,s){var r=Tt.hasOwnProperty(e)?Tt[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(b2(e,n,r,s)&&(n=null),s||r===null?w2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var sr=_2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eu=Symbol.for("react.element"),_o=Symbol.for("react.portal"),xo=Symbol.for("react.fragment"),Mg=Symbol.for("react.strict_mode"),qp=Symbol.for("react.profiler"),o1=Symbol.for("react.provider"),a1=Symbol.for("react.context"),Ug=Symbol.for("react.forward_ref"),Wp=Symbol.for("react.suspense"),Hp=Symbol.for("react.suspense_list"),Fg=Symbol.for("react.memo"),yr=Symbol.for("react.lazy"),l1=Symbol.for("react.offscreen"),B_=Symbol.iterator;function La(t){return t===null||typeof t!="object"?null:(t=B_&&t[B_]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,kf;function el(t){if(kf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kf=e&&e[1]||""}return`
`+kf+t}var jf=!1;function If(t,e){if(!t||jf)return"";jf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=s.stack.split(`
`),a=r.length-1,l=i.length-1;1<=a&&0<=l&&r[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==i[l]){var u=`
`+r[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{jf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?el(t):""}function N2(t){switch(t.tag){case 5:return el(t.type);case 16:return el("Lazy");case 13:return el("Suspense");case 19:return el("SuspenseList");case 0:case 2:case 15:return t=If(t.type,!1),t;case 11:return t=If(t.type.render,!1),t;case 1:return t=If(t.type,!0),t;default:return""}}function Gp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xo:return"Fragment";case _o:return"Portal";case qp:return"Profiler";case Mg:return"StrictMode";case Wp:return"Suspense";case Hp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case a1:return(t.displayName||"Context")+".Consumer";case o1:return(t._context.displayName||"Context")+".Provider";case Ug:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fg:return e=t.displayName||null,e!==null?e:Gp(t.type)||"Memo";case yr:e=t._payload,t=t._init;try{return Gp(t(e))}catch{}}return null}function C2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gp(e);case 8:return e===Mg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function c1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function E2(t){var e=c1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tu(t){t._valueTracker||(t._valueTracker=E2(t))}function u1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=c1(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function fd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qp(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $_(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Br(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function d1(t,e){e=e.checked,e!=null&&Lg(t,"checked",e,!1)}function Kp(t,e){d1(t,e);var n=Br(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yp(t,e.type,Br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function V_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yp(t,e,n){(e!=="number"||fd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var tl=Array.isArray;function Ro(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Br(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Jp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function q_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(tl(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Br(n)}}function h1(t,e){var n=Br(e.value),s=Br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function W_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function f1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?f1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nu,p1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(nu=nu||document.createElement("div"),nu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Al(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var al={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k2=["Webkit","ms","Moz","O"];Object.keys(al).forEach(function(t){k2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),al[e]=al[t]})});function m1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||al.hasOwnProperty(t)&&al[t]?(""+e).trim():e+"px"}function g1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=m1(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var j2=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zp(t,e){if(e){if(j2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function em(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tm=null;function zg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nm=null,Oo=null,Do=null;function H_(t){if(t=wc(t)){if(typeof nm!="function")throw Error(J(280));var e=t.stateNode;e&&(e=Ch(e),nm(t.stateNode,t.type,e))}}function y1(t){Oo?Do?Do.push(t):Do=[t]:Oo=t}function v1(){if(Oo){var t=Oo,e=Do;if(Do=Oo=null,H_(t),e)for(t=0;t<e.length;t++)H_(e[t])}}function _1(t,e){return t(e)}function x1(){}var Tf=!1;function w1(t,e,n){if(Tf)return t(e,n);Tf=!0;try{return _1(t,e,n)}finally{Tf=!1,(Oo!==null||Do!==null)&&(x1(),v1())}}function Pl(t,e){var n=t.stateNode;if(n===null)return null;var s=Ch(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var sm=!1;if(Gs)try{var Ma={};Object.defineProperty(Ma,"passive",{get:function(){sm=!0}}),window.addEventListener("test",Ma,Ma),window.removeEventListener("test",Ma,Ma)}catch{sm=!1}function I2(t,e,n,s,r,i,a,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ll=!1,pd=null,md=!1,rm=null,T2={onError:function(t){ll=!0,pd=t}};function A2(t,e,n,s,r,i,a,l,u){ll=!1,pd=null,I2.apply(T2,arguments)}function P2(t,e,n,s,r,i,a,l,u){if(A2.apply(this,arguments),ll){if(ll){var d=pd;ll=!1,pd=null}else throw Error(J(198));md||(md=!0,rm=d)}}function to(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function S1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function G_(t){if(to(t)!==t)throw Error(J(188))}function R2(t){var e=t.alternate;if(!e){if(e=to(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return G_(r),t;if(i===s)return G_(r),e;i=i.sibling}throw Error(J(188))}if(n.return!==s.return)n=r,s=i;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,s=i;break}if(l===s){a=!0,s=r,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,s=r;break}if(l===s){a=!0,s=i,n=r;break}l=l.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==s)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function b1(t){return t=R2(t),t!==null?N1(t):null}function N1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=N1(t);if(e!==null)return e;t=t.sibling}return null}var C1=vn.unstable_scheduleCallback,Q_=vn.unstable_cancelCallback,O2=vn.unstable_shouldYield,D2=vn.unstable_requestPaint,rt=vn.unstable_now,L2=vn.unstable_getCurrentPriorityLevel,Bg=vn.unstable_ImmediatePriority,E1=vn.unstable_UserBlockingPriority,gd=vn.unstable_NormalPriority,M2=vn.unstable_LowPriority,k1=vn.unstable_IdlePriority,wh=null,fs=null;function U2(t){if(fs&&typeof fs.onCommitFiberRoot=="function")try{fs.onCommitFiberRoot(wh,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:B2,F2=Math.log,z2=Math.LN2;function B2(t){return t>>>=0,t===0?32:31-(F2(t)/z2|0)|0}var su=64,ru=4194304;function nl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yd(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~r;l!==0?s=nl(l):(i&=a,i!==0&&(s=nl(i)))}else a=n&~r,a!==0?s=nl(a):i!==0&&(s=nl(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Kn(e),r=1<<n,s|=t[n],e&=~r;return s}function $2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V2(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Kn(i),l=1<<a,u=r[a];u===-1?(!(l&n)||l&s)&&(r[a]=$2(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function im(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function j1(){var t=su;return su<<=1,!(su&4194240)&&(su=64),t}function Af(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _c(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kn(e),t[e]=n}function q2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Kn(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function $g(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Kn(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var Re=0;function I1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var T1,Vg,A1,P1,R1,om=!1,iu=[],Tr=null,Ar=null,Pr=null,Rl=new Map,Ol=new Map,_r=[],W2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K_(t,e){switch(t){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":Rl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(e.pointerId)}}function Ua(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=wc(e),e!==null&&Vg(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function H2(t,e,n,s,r){switch(e){case"focusin":return Tr=Ua(Tr,t,e,n,s,r),!0;case"dragenter":return Ar=Ua(Ar,t,e,n,s,r),!0;case"mouseover":return Pr=Ua(Pr,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Rl.set(i,Ua(Rl.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Ol.set(i,Ua(Ol.get(i)||null,t,e,n,s,r)),!0}return!1}function O1(t){var e=_i(t.target);if(e!==null){var n=to(e);if(n!==null){if(e=n.tag,e===13){if(e=S1(n),e!==null){t.blockedOn=e,R1(t.priority,function(){A1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=am(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);tm=s,n.target.dispatchEvent(s),tm=null}else return e=wc(n),e!==null&&Vg(e),t.blockedOn=n,!1;e.shift()}return!0}function Y_(t,e,n){Uu(t)&&n.delete(e)}function G2(){om=!1,Tr!==null&&Uu(Tr)&&(Tr=null),Ar!==null&&Uu(Ar)&&(Ar=null),Pr!==null&&Uu(Pr)&&(Pr=null),Rl.forEach(Y_),Ol.forEach(Y_)}function Fa(t,e){t.blockedOn===e&&(t.blockedOn=null,om||(om=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,G2)))}function Dl(t){function e(r){return Fa(r,t)}if(0<iu.length){Fa(iu[0],t);for(var n=1;n<iu.length;n++){var s=iu[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Tr!==null&&Fa(Tr,t),Ar!==null&&Fa(Ar,t),Pr!==null&&Fa(Pr,t),Rl.forEach(e),Ol.forEach(e),n=0;n<_r.length;n++)s=_r[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<_r.length&&(n=_r[0],n.blockedOn===null);)O1(n),n.blockedOn===null&&_r.shift()}var Lo=sr.ReactCurrentBatchConfig,vd=!0;function Q2(t,e,n,s){var r=Re,i=Lo.transition;Lo.transition=null;try{Re=1,qg(t,e,n,s)}finally{Re=r,Lo.transition=i}}function K2(t,e,n,s){var r=Re,i=Lo.transition;Lo.transition=null;try{Re=4,qg(t,e,n,s)}finally{Re=r,Lo.transition=i}}function qg(t,e,n,s){if(vd){var r=am(t,e,n,s);if(r===null)Bf(t,e,s,_d,n),K_(t,s);else if(H2(r,t,e,n,s))s.stopPropagation();else if(K_(t,s),e&4&&-1<W2.indexOf(t)){for(;r!==null;){var i=wc(r);if(i!==null&&T1(i),i=am(t,e,n,s),i===null&&Bf(t,e,s,_d,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else Bf(t,e,s,null,n)}}var _d=null;function am(t,e,n,s){if(_d=null,t=zg(s),t=_i(t),t!==null)if(e=to(t),e===null)t=null;else if(n=e.tag,n===13){if(t=S1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _d=t,null}function D1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(L2()){case Bg:return 1;case E1:return 4;case gd:case M2:return 16;case k1:return 536870912;default:return 16}default:return 16}}var Cr=null,Wg=null,Fu=null;function L1(){if(Fu)return Fu;var t,e=Wg,n=e.length,s,r="value"in Cr?Cr.value:Cr.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(s=1;s<=a&&e[n-s]===r[i-s];s++);return Fu=r.slice(t,1<s?1-s:void 0)}function zu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ou(){return!0}function J_(){return!1}function xn(t){function e(n,s,r,i,a){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ou:J_,this.isPropagationStopped=J_,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ou)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ou)},persist:function(){},isPersistent:ou}),e}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hg=xn(pa),xc=Ye({},pa,{view:0,detail:0}),Y2=xn(xc),Pf,Rf,za,Sh=Ye({},xc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==za&&(za&&t.type==="mousemove"?(Pf=t.screenX-za.screenX,Rf=t.screenY-za.screenY):Rf=Pf=0,za=t),Pf)},movementY:function(t){return"movementY"in t?t.movementY:Rf}}),X_=xn(Sh),J2=Ye({},Sh,{dataTransfer:0}),X2=xn(J2),Z2=Ye({},xc,{relatedTarget:0}),Of=xn(Z2),eI=Ye({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),tI=xn(eI),nI=Ye({},pa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sI=xn(nI),rI=Ye({},pa,{data:0}),Z_=xn(rI),iI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aI[t])?!!e[t]:!1}function Gg(){return lI}var cI=Ye({},xc,{key:function(t){if(t.key){var e=iI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gg,charCode:function(t){return t.type==="keypress"?zu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uI=xn(cI),dI=Ye({},Sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ex=xn(dI),hI=Ye({},xc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gg}),fI=xn(hI),pI=Ye({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),mI=xn(pI),gI=Ye({},Sh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yI=xn(gI),vI=[9,13,27,32],Qg=Gs&&"CompositionEvent"in window,cl=null;Gs&&"documentMode"in document&&(cl=document.documentMode);var _I=Gs&&"TextEvent"in window&&!cl,M1=Gs&&(!Qg||cl&&8<cl&&11>=cl),tx=" ",nx=!1;function U1(t,e){switch(t){case"keyup":return vI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wo=!1;function xI(t,e){switch(t){case"compositionend":return F1(e);case"keypress":return e.which!==32?null:(nx=!0,tx);case"textInput":return t=e.data,t===tx&&nx?null:t;default:return null}}function wI(t,e){if(wo)return t==="compositionend"||!Qg&&U1(t,e)?(t=L1(),Fu=Wg=Cr=null,wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return M1&&e.locale!=="ko"?null:e.data;default:return null}}var SI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SI[t.type]:e==="textarea"}function z1(t,e,n,s){y1(s),e=xd(e,"onChange"),0<e.length&&(n=new Hg("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var ul=null,Ll=null;function bI(t){J1(t,0)}function bh(t){var e=No(t);if(u1(e))return t}function NI(t,e){if(t==="change")return e}var B1=!1;if(Gs){var Df;if(Gs){var Lf="oninput"in document;if(!Lf){var rx=document.createElement("div");rx.setAttribute("oninput","return;"),Lf=typeof rx.oninput=="function"}Df=Lf}else Df=!1;B1=Df&&(!document.documentMode||9<document.documentMode)}function ix(){ul&&(ul.detachEvent("onpropertychange",$1),Ll=ul=null)}function $1(t){if(t.propertyName==="value"&&bh(Ll)){var e=[];z1(e,Ll,t,zg(t)),w1(bI,e)}}function CI(t,e,n){t==="focusin"?(ix(),ul=e,Ll=n,ul.attachEvent("onpropertychange",$1)):t==="focusout"&&ix()}function EI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bh(Ll)}function kI(t,e){if(t==="click")return bh(e)}function jI(t,e){if(t==="input"||t==="change")return bh(e)}function II(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var es=typeof Object.is=="function"?Object.is:II;function Ml(t,e){if(es(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Vp.call(e,r)||!es(t[r],e[r]))return!1}return!0}function ox(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ax(t,e){var n=ox(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ox(n)}}function V1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?V1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function q1(){for(var t=window,e=fd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fd(t.document)}return e}function Kg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TI(t){var e=q1(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&V1(n.ownerDocument.documentElement,n)){if(s!==null&&Kg(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=ax(n,i);var a=ax(n,s);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AI=Gs&&"documentMode"in document&&11>=document.documentMode,So=null,lm=null,dl=null,cm=!1;function lx(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cm||So==null||So!==fd(s)||(s=So,"selectionStart"in s&&Kg(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),dl&&Ml(dl,s)||(dl=s,s=xd(lm,"onSelect"),0<s.length&&(e=new Hg("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=So)))}function au(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bo={animationend:au("Animation","AnimationEnd"),animationiteration:au("Animation","AnimationIteration"),animationstart:au("Animation","AnimationStart"),transitionend:au("Transition","TransitionEnd")},Mf={},W1={};Gs&&(W1=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function Nh(t){if(Mf[t])return Mf[t];if(!bo[t])return t;var e=bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in W1)return Mf[t]=e[n];return t}var H1=Nh("animationend"),G1=Nh("animationiteration"),Q1=Nh("animationstart"),K1=Nh("transitionend"),Y1=new Map,cx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(t,e){Y1.set(t,e),eo(e,[t])}for(var Uf=0;Uf<cx.length;Uf++){var Ff=cx[Uf],PI=Ff.toLowerCase(),RI=Ff[0].toUpperCase()+Ff.slice(1);Jr(PI,"on"+RI)}Jr(H1,"onAnimationEnd");Jr(G1,"onAnimationIteration");Jr(Q1,"onAnimationStart");Jr("dblclick","onDoubleClick");Jr("focusin","onFocus");Jr("focusout","onBlur");Jr(K1,"onTransitionEnd");Ko("onMouseEnter",["mouseout","mouseover"]);Ko("onMouseLeave",["mouseout","mouseover"]);Ko("onPointerEnter",["pointerout","pointerover"]);Ko("onPointerLeave",["pointerout","pointerover"]);eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OI=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function ux(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,P2(s,e,void 0,t),t.currentTarget=null}function J1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var a=s.length-1;0<=a;a--){var l=s[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&r.isPropagationStopped())break e;ux(r,l,d),i=u}else for(a=0;a<s.length;a++){if(l=s[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&r.isPropagationStopped())break e;ux(r,l,d),i=u}}}if(md)throw t=rm,md=!1,rm=null,t}function ze(t,e){var n=e[pm];n===void 0&&(n=e[pm]=new Set);var s=t+"__bubble";n.has(s)||(X1(e,t,2,!1),n.add(s))}function zf(t,e,n){var s=0;e&&(s|=4),X1(n,t,s,e)}var lu="_reactListening"+Math.random().toString(36).slice(2);function Ul(t){if(!t[lu]){t[lu]=!0,i1.forEach(function(n){n!=="selectionchange"&&(OI.has(n)||zf(n,!1,t),zf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[lu]||(e[lu]=!0,zf("selectionchange",!1,e))}}function X1(t,e,n,s){switch(D1(e)){case 1:var r=Q2;break;case 4:r=K2;break;default:r=qg}n=r.bind(null,e,n,t),r=void 0,!sm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Bf(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=s.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;a=a.return}for(;l!==null;){if(a=_i(l),a===null)return;if(u=a.tag,u===5||u===6){s=i=a;continue e}l=l.parentNode}}s=s.return}w1(function(){var d=i,f=zg(n),p=[];e:{var h=Y1.get(t);if(h!==void 0){var _=Hg,C=t;switch(t){case"keypress":if(zu(n)===0)break e;case"keydown":case"keyup":_=uI;break;case"focusin":C="focus",_=Of;break;case"focusout":C="blur",_=Of;break;case"beforeblur":case"afterblur":_=Of;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=X_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=X2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=fI;break;case H1:case G1:case Q1:_=tI;break;case K1:_=mI;break;case"scroll":_=Y2;break;case"wheel":_=yI;break;case"copy":case"cut":case"paste":_=sI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=ex}var j=(e&4)!==0,b=!j&&t==="scroll",S=j?h!==null?h+"Capture":null:h;j=[];for(var E=d,y;E!==null;){y=E;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,S!==null&&(x=Pl(E,S),x!=null&&j.push(Fl(E,x,y)))),b)break;E=E.return}0<j.length&&(h=new _(h,C,null,n,f),p.push({event:h,listeners:j}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",h&&n!==tm&&(C=n.relatedTarget||n.fromElement)&&(_i(C)||C[Qs]))break e;if((_||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,_?(C=n.relatedTarget||n.toElement,_=d,C=C?_i(C):null,C!==null&&(b=to(C),C!==b||C.tag!==5&&C.tag!==6)&&(C=null)):(_=null,C=d),_!==C)){if(j=X_,x="onMouseLeave",S="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(j=ex,x="onPointerLeave",S="onPointerEnter",E="pointer"),b=_==null?h:No(_),y=C==null?h:No(C),h=new j(x,E+"leave",_,n,f),h.target=b,h.relatedTarget=y,x=null,_i(f)===d&&(j=new j(S,E+"enter",C,n,f),j.target=y,j.relatedTarget=b,x=j),b=x,_&&C)t:{for(j=_,S=C,E=0,y=j;y;y=fo(y))E++;for(y=0,x=S;x;x=fo(x))y++;for(;0<E-y;)j=fo(j),E--;for(;0<y-E;)S=fo(S),y--;for(;E--;){if(j===S||S!==null&&j===S.alternate)break t;j=fo(j),S=fo(S)}j=null}else j=null;_!==null&&dx(p,h,_,j,!1),C!==null&&b!==null&&dx(p,b,C,j,!0)}}e:{if(h=d?No(d):window,_=h.nodeName&&h.nodeName.toLowerCase(),_==="select"||_==="input"&&h.type==="file")var P=NI;else if(sx(h))if(B1)P=jI;else{P=EI;var O=CI}else(_=h.nodeName)&&_.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(P=kI);if(P&&(P=P(t,d))){z1(p,P,n,f);break e}O&&O(t,h,d),t==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&Yp(h,"number",h.value)}switch(O=d?No(d):window,t){case"focusin":(sx(O)||O.contentEditable==="true")&&(So=O,lm=d,dl=null);break;case"focusout":dl=lm=So=null;break;case"mousedown":cm=!0;break;case"contextmenu":case"mouseup":case"dragend":cm=!1,lx(p,n,f);break;case"selectionchange":if(AI)break;case"keydown":case"keyup":lx(p,n,f)}var v;if(Qg)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else wo?U1(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(M1&&n.locale!=="ko"&&(wo||g!=="onCompositionStart"?g==="onCompositionEnd"&&wo&&(v=L1()):(Cr=f,Wg="value"in Cr?Cr.value:Cr.textContent,wo=!0)),O=xd(d,g),0<O.length&&(g=new Z_(g,t,null,n,f),p.push({event:g,listeners:O}),v?g.data=v:(v=F1(n),v!==null&&(g.data=v)))),(v=_I?xI(t,n):wI(t,n))&&(d=xd(d,"onBeforeInput"),0<d.length&&(f=new Z_("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=v))}J1(p,e)})}function Fl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xd(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Pl(t,n),i!=null&&s.unshift(Fl(t,i,r)),i=Pl(t,e),i!=null&&s.push(Fl(t,i,r))),t=t.return}return s}function fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dx(t,e,n,s,r){for(var i=e._reactName,a=[];n!==null&&n!==s;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===s)break;l.tag===5&&d!==null&&(l=d,r?(u=Pl(n,i),u!=null&&a.unshift(Fl(n,u,l))):r||(u=Pl(n,i),u!=null&&a.push(Fl(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var DI=/\r\n?/g,LI=/\u0000|\uFFFD/g;function hx(t){return(typeof t=="string"?t:""+t).replace(DI,`
`).replace(LI,"")}function cu(t,e,n){if(e=hx(e),hx(t)!==e&&n)throw Error(J(425))}function wd(){}var um=null,dm=null;function hm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fm=typeof setTimeout=="function"?setTimeout:void 0,MI=typeof clearTimeout=="function"?clearTimeout:void 0,fx=typeof Promise=="function"?Promise:void 0,UI=typeof queueMicrotask=="function"?queueMicrotask:typeof fx<"u"?function(t){return fx.resolve(null).then(t).catch(FI)}:fm;function FI(t){setTimeout(function(){throw t})}function $f(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),Dl(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Dl(e)}function Rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function px(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ma=Math.random().toString(36).slice(2),ds="__reactFiber$"+ma,zl="__reactProps$"+ma,Qs="__reactContainer$"+ma,pm="__reactEvents$"+ma,zI="__reactListeners$"+ma,BI="__reactHandles$"+ma;function _i(t){var e=t[ds];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qs]||n[ds]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=px(t);t!==null;){if(n=t[ds])return n;t=px(t)}return e}t=n,n=t.parentNode}return null}function wc(t){return t=t[ds]||t[Qs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function No(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function Ch(t){return t[zl]||null}var mm=[],Co=-1;function Xr(t){return{current:t}}function Ve(t){0>Co||(t.current=mm[Co],mm[Co]=null,Co--)}function Ue(t,e){Co++,mm[Co]=t.current,t.current=e}var $r={},Ut=Xr($r),nn=Xr(!1),Li=$r;function Yo(t,e){var n=t.type.contextTypes;if(!n)return $r;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function sn(t){return t=t.childContextTypes,t!=null}function Sd(){Ve(nn),Ve(Ut)}function mx(t,e,n){if(Ut.current!==$r)throw Error(J(168));Ue(Ut,e),Ue(nn,n)}function Z1(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(J(108,C2(t)||"Unknown",r));return Ye({},n,s)}function bd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$r,Li=Ut.current,Ue(Ut,t),Ue(nn,nn.current),!0}function gx(t,e,n){var s=t.stateNode;if(!s)throw Error(J(169));n?(t=Z1(t,e,Li),s.__reactInternalMemoizedMergedChildContext=t,Ve(nn),Ve(Ut),Ue(Ut,t)):Ve(nn),Ue(nn,n)}var Ls=null,Eh=!1,Vf=!1;function eb(t){Ls===null?Ls=[t]:Ls.push(t)}function $I(t){Eh=!0,eb(t)}function Zr(){if(!Vf&&Ls!==null){Vf=!0;var t=0,e=Re;try{var n=Ls;for(Re=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Ls=null,Eh=!1}catch(r){throw Ls!==null&&(Ls=Ls.slice(t+1)),C1(Bg,Zr),r}finally{Re=e,Vf=!1}}return null}var Eo=[],ko=0,Nd=null,Cd=0,Cn=[],En=0,Mi=null,Fs=1,zs="";function fi(t,e){Eo[ko++]=Cd,Eo[ko++]=Nd,Nd=t,Cd=e}function tb(t,e,n){Cn[En++]=Fs,Cn[En++]=zs,Cn[En++]=Mi,Mi=t;var s=Fs;t=zs;var r=32-Kn(s)-1;s&=~(1<<r),n+=1;var i=32-Kn(e)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,Fs=1<<32-Kn(e)+r|n<<r|s,zs=i+t}else Fs=1<<i|n<<r|s,zs=t}function Yg(t){t.return!==null&&(fi(t,1),tb(t,1,0))}function Jg(t){for(;t===Nd;)Nd=Eo[--ko],Eo[ko]=null,Cd=Eo[--ko],Eo[ko]=null;for(;t===Mi;)Mi=Cn[--En],Cn[En]=null,zs=Cn[--En],Cn[En]=null,Fs=Cn[--En],Cn[En]=null}var mn=null,pn=null,We=!1,Bn=null;function nb(t,e){var n=kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,pn=Rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mi!==null?{id:Fs,overflow:zs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mn=t,pn=null,!0):!1;default:return!1}}function gm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ym(t){if(We){var e=pn;if(e){var n=e;if(!yx(t,e)){if(gm(t))throw Error(J(418));e=Rr(n.nextSibling);var s=mn;e&&yx(t,e)?nb(s,n):(t.flags=t.flags&-4097|2,We=!1,mn=t)}}else{if(gm(t))throw Error(J(418));t.flags=t.flags&-4097|2,We=!1,mn=t}}}function vx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function uu(t){if(t!==mn)return!1;if(!We)return vx(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hm(t.type,t.memoizedProps)),e&&(e=pn)){if(gm(t))throw sb(),Error(J(418));for(;e;)nb(t,e),e=Rr(e.nextSibling)}if(vx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pn=Rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pn=null}}else pn=mn?Rr(t.stateNode.nextSibling):null;return!0}function sb(){for(var t=pn;t;)t=Rr(t.nextSibling)}function Jo(){pn=mn=null,We=!1}function Xg(t){Bn===null?Bn=[t]:Bn.push(t)}var VI=sr.ReactCurrentBatchConfig;function Ba(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var s=n.stateNode}if(!s)throw Error(J(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=r.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function du(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _x(t){var e=t._init;return e(t._payload)}function rb(t){function e(S,E){if(t){var y=S.deletions;y===null?(S.deletions=[E],S.flags|=16):y.push(E)}}function n(S,E){if(!t)return null;for(;E!==null;)e(S,E),E=E.sibling;return null}function s(S,E){for(S=new Map;E!==null;)E.key!==null?S.set(E.key,E):S.set(E.index,E),E=E.sibling;return S}function r(S,E){return S=Mr(S,E),S.index=0,S.sibling=null,S}function i(S,E,y){return S.index=y,t?(y=S.alternate,y!==null?(y=y.index,y<E?(S.flags|=2,E):y):(S.flags|=2,E)):(S.flags|=1048576,E)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,E,y,x){return E===null||E.tag!==6?(E=Yf(y,S.mode,x),E.return=S,E):(E=r(E,y),E.return=S,E)}function u(S,E,y,x){var P=y.type;return P===xo?f(S,E,y.props.children,x,y.key):E!==null&&(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===yr&&_x(P)===E.type)?(x=r(E,y.props),x.ref=Ba(S,E,y),x.return=S,x):(x=Gu(y.type,y.key,y.props,null,S.mode,x),x.ref=Ba(S,E,y),x.return=S,x)}function d(S,E,y,x){return E===null||E.tag!==4||E.stateNode.containerInfo!==y.containerInfo||E.stateNode.implementation!==y.implementation?(E=Jf(y,S.mode,x),E.return=S,E):(E=r(E,y.children||[]),E.return=S,E)}function f(S,E,y,x,P){return E===null||E.tag!==7?(E=Ii(y,S.mode,x,P),E.return=S,E):(E=r(E,y),E.return=S,E)}function p(S,E,y){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Yf(""+E,S.mode,y),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case eu:return y=Gu(E.type,E.key,E.props,null,S.mode,y),y.ref=Ba(S,null,E),y.return=S,y;case _o:return E=Jf(E,S.mode,y),E.return=S,E;case yr:var x=E._init;return p(S,x(E._payload),y)}if(tl(E)||La(E))return E=Ii(E,S.mode,y,null),E.return=S,E;du(S,E)}return null}function h(S,E,y,x){var P=E!==null?E.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return P!==null?null:l(S,E,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case eu:return y.key===P?u(S,E,y,x):null;case _o:return y.key===P?d(S,E,y,x):null;case yr:return P=y._init,h(S,E,P(y._payload),x)}if(tl(y)||La(y))return P!==null?null:f(S,E,y,x,null);du(S,y)}return null}function _(S,E,y,x,P){if(typeof x=="string"&&x!==""||typeof x=="number")return S=S.get(y)||null,l(E,S,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case eu:return S=S.get(x.key===null?y:x.key)||null,u(E,S,x,P);case _o:return S=S.get(x.key===null?y:x.key)||null,d(E,S,x,P);case yr:var O=x._init;return _(S,E,y,O(x._payload),P)}if(tl(x)||La(x))return S=S.get(y)||null,f(E,S,x,P,null);du(E,x)}return null}function C(S,E,y,x){for(var P=null,O=null,v=E,g=E=0,N=null;v!==null&&g<y.length;g++){v.index>g?(N=v,v=null):N=v.sibling;var w=h(S,v,y[g],x);if(w===null){v===null&&(v=N);break}t&&v&&w.alternate===null&&e(S,v),E=i(w,E,g),O===null?P=w:O.sibling=w,O=w,v=N}if(g===y.length)return n(S,v),We&&fi(S,g),P;if(v===null){for(;g<y.length;g++)v=p(S,y[g],x),v!==null&&(E=i(v,E,g),O===null?P=v:O.sibling=v,O=v);return We&&fi(S,g),P}for(v=s(S,v);g<y.length;g++)N=_(v,S,g,y[g],x),N!==null&&(t&&N.alternate!==null&&v.delete(N.key===null?g:N.key),E=i(N,E,g),O===null?P=N:O.sibling=N,O=N);return t&&v.forEach(function(A){return e(S,A)}),We&&fi(S,g),P}function j(S,E,y,x){var P=La(y);if(typeof P!="function")throw Error(J(150));if(y=P.call(y),y==null)throw Error(J(151));for(var O=P=null,v=E,g=E=0,N=null,w=y.next();v!==null&&!w.done;g++,w=y.next()){v.index>g?(N=v,v=null):N=v.sibling;var A=h(S,v,w.value,x);if(A===null){v===null&&(v=N);break}t&&v&&A.alternate===null&&e(S,v),E=i(A,E,g),O===null?P=A:O.sibling=A,O=A,v=N}if(w.done)return n(S,v),We&&fi(S,g),P;if(v===null){for(;!w.done;g++,w=y.next())w=p(S,w.value,x),w!==null&&(E=i(w,E,g),O===null?P=w:O.sibling=w,O=w);return We&&fi(S,g),P}for(v=s(S,v);!w.done;g++,w=y.next())w=_(v,S,g,w.value,x),w!==null&&(t&&w.alternate!==null&&v.delete(w.key===null?g:w.key),E=i(w,E,g),O===null?P=w:O.sibling=w,O=w);return t&&v.forEach(function(T){return e(S,T)}),We&&fi(S,g),P}function b(S,E,y,x){if(typeof y=="object"&&y!==null&&y.type===xo&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case eu:e:{for(var P=y.key,O=E;O!==null;){if(O.key===P){if(P=y.type,P===xo){if(O.tag===7){n(S,O.sibling),E=r(O,y.props.children),E.return=S,S=E;break e}}else if(O.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===yr&&_x(P)===O.type){n(S,O.sibling),E=r(O,y.props),E.ref=Ba(S,O,y),E.return=S,S=E;break e}n(S,O);break}else e(S,O);O=O.sibling}y.type===xo?(E=Ii(y.props.children,S.mode,x,y.key),E.return=S,S=E):(x=Gu(y.type,y.key,y.props,null,S.mode,x),x.ref=Ba(S,E,y),x.return=S,S=x)}return a(S);case _o:e:{for(O=y.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===y.containerInfo&&E.stateNode.implementation===y.implementation){n(S,E.sibling),E=r(E,y.children||[]),E.return=S,S=E;break e}else{n(S,E);break}else e(S,E);E=E.sibling}E=Jf(y,S.mode,x),E.return=S,S=E}return a(S);case yr:return O=y._init,b(S,E,O(y._payload),x)}if(tl(y))return C(S,E,y,x);if(La(y))return j(S,E,y,x);du(S,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,E!==null&&E.tag===6?(n(S,E.sibling),E=r(E,y),E.return=S,S=E):(n(S,E),E=Yf(y,S.mode,x),E.return=S,S=E),a(S)):n(S,E)}return b}var Xo=rb(!0),ib=rb(!1),Ed=Xr(null),kd=null,jo=null,Zg=null;function ey(){Zg=jo=kd=null}function ty(t){var e=Ed.current;Ve(Ed),t._currentValue=e}function vm(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Mo(t,e){kd=t,Zg=jo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function In(t){var e=t._currentValue;if(Zg!==t)if(t={context:t,memoizedValue:e,next:null},jo===null){if(kd===null)throw Error(J(308));jo=t,kd.dependencies={lanes:0,firstContext:t}}else jo=jo.next=t;return e}var xi=null;function ny(t){xi===null?xi=[t]:xi.push(t)}function ob(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,ny(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ks(t,s)}function Ks(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vr=!1;function sy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ab(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Or(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Ee&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Ks(t,n)}return r=s.interleaved,r===null?(e.next=e,ny(s)):(e.next=r.next,r.next=e),s.interleaved=e,Ks(t,n)}function Bu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,$g(t,n)}}function xx(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jd(t,e,n,s){var r=t.updateQueue;vr=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=r.baseState;a=0,f=d=u=null,l=i;do{var h=l.lane,_=l.eventTime;if((s&h)===h){f!==null&&(f=f.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,j=l;switch(h=e,_=n,j.tag){case 1:if(C=j.payload,typeof C=="function"){p=C.call(_,p,h);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=j.payload,h=typeof C=="function"?C.call(_,p,h):C,h==null)break e;p=Ye({},p,h);break e;case 2:vr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[l]:h.push(l))}else _={eventTime:_,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=_,u=p):f=f.next=_,a|=h;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;h=l,l=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(f===null&&(u=p),r.baseState=u,r.firstBaseUpdate=d,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Fi|=a,t.lanes=a,t.memoizedState=p}}function wx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(J(191,r));r.call(s)}}}var Sc={},ps=Xr(Sc),Bl=Xr(Sc),$l=Xr(Sc);function wi(t){if(t===Sc)throw Error(J(174));return t}function ry(t,e){switch(Ue($l,e),Ue(Bl,t),Ue(ps,Sc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xp(e,t)}Ve(ps),Ue(ps,e)}function Zo(){Ve(ps),Ve(Bl),Ve($l)}function lb(t){wi($l.current);var e=wi(ps.current),n=Xp(e,t.type);e!==n&&(Ue(Bl,t),Ue(ps,n))}function iy(t){Bl.current===t&&(Ve(ps),Ve(Bl))}var Qe=Xr(0);function Id(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qf=[];function oy(){for(var t=0;t<qf.length;t++)qf[t]._workInProgressVersionPrimary=null;qf.length=0}var $u=sr.ReactCurrentDispatcher,Wf=sr.ReactCurrentBatchConfig,Ui=0,Ke=null,ht=null,vt=null,Td=!1,hl=!1,Vl=0,qI=0;function Ot(){throw Error(J(321))}function ay(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!es(t[n],e[n]))return!1;return!0}function ly(t,e,n,s,r,i){if(Ui=i,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$u.current=t===null||t.memoizedState===null?QI:KI,t=n(s,r),hl){i=0;do{if(hl=!1,Vl=0,25<=i)throw Error(J(301));i+=1,vt=ht=null,e.updateQueue=null,$u.current=YI,t=n(s,r)}while(hl)}if($u.current=Ad,e=ht!==null&&ht.next!==null,Ui=0,vt=ht=Ke=null,Td=!1,e)throw Error(J(300));return t}function cy(){var t=Vl!==0;return Vl=0,t}function ls(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ke.memoizedState=vt=t:vt=vt.next=t,vt}function Tn(){if(ht===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=vt===null?Ke.memoizedState:vt.next;if(e!==null)vt=e,ht=t;else{if(t===null)throw Error(J(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},vt===null?Ke.memoizedState=vt=t:vt=vt.next=t}return vt}function ql(t,e){return typeof e=="function"?e(t):e}function Hf(t){var e=Tn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var s=ht,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=a=null,u=null,d=i;do{var f=d.lane;if((Ui&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,a=s):u=u.next=p,Ke.lanes|=f,Fi|=f}d=d.next}while(d!==null&&d!==i);u===null?a=s:u.next=l,es(s,e.memoizedState)||(Zt=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=u,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,Ke.lanes|=i,Fi|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gf(t){var e=Tn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do i=t(i,a.action),a=a.next;while(a!==r);es(i,e.memoizedState)||(Zt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function cb(){}function ub(t,e){var n=Ke,s=Tn(),r=e(),i=!es(s.memoizedState,r);if(i&&(s.memoizedState=r,Zt=!0),s=s.queue,uy(fb.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,Wl(9,hb.bind(null,n,s,r,e),void 0,null),wt===null)throw Error(J(349));Ui&30||db(n,e,r)}return r}function db(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hb(t,e,n,s){e.value=n,e.getSnapshot=s,pb(e)&&mb(t)}function fb(t,e,n){return n(function(){pb(e)&&mb(t)})}function pb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!es(t,n)}catch{return!0}}function mb(t){var e=Ks(t,1);e!==null&&Yn(e,t,1,-1)}function Sx(t){var e=ls();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ql,lastRenderedState:t},e.queue=t,t=t.dispatch=GI.bind(null,Ke,t),[e.memoizedState,t]}function Wl(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function gb(){return Tn().memoizedState}function Vu(t,e,n,s){var r=ls();Ke.flags|=t,r.memoizedState=Wl(1|e,n,void 0,s===void 0?null:s)}function kh(t,e,n,s){var r=Tn();s=s===void 0?null:s;var i=void 0;if(ht!==null){var a=ht.memoizedState;if(i=a.destroy,s!==null&&ay(s,a.deps)){r.memoizedState=Wl(e,n,i,s);return}}Ke.flags|=t,r.memoizedState=Wl(1|e,n,i,s)}function bx(t,e){return Vu(8390656,8,t,e)}function uy(t,e){return kh(2048,8,t,e)}function yb(t,e){return kh(4,2,t,e)}function vb(t,e){return kh(4,4,t,e)}function _b(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xb(t,e,n){return n=n!=null?n.concat([t]):null,kh(4,4,_b.bind(null,e,t),n)}function dy(){}function wb(t,e){var n=Tn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&ay(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Sb(t,e){var n=Tn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&ay(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function bb(t,e,n){return Ui&21?(es(n,e)||(n=j1(),Ke.lanes|=n,Fi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function WI(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var s=Wf.transition;Wf.transition={};try{t(!1),e()}finally{Re=n,Wf.transition=s}}function Nb(){return Tn().memoizedState}function HI(t,e,n){var s=Lr(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Cb(t))Eb(e,n);else if(n=ob(t,e,n,s),n!==null){var r=qt();Yn(n,t,s,r),kb(n,e,s)}}function GI(t,e,n){var s=Lr(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cb(t))Eb(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(r.hasEagerState=!0,r.eagerState=l,es(l,a)){var u=e.interleaved;u===null?(r.next=r,ny(e)):(r.next=u.next,u.next=r),e.interleaved=r;return}}catch{}finally{}n=ob(t,e,r,s),n!==null&&(r=qt(),Yn(n,t,s,r),kb(n,e,s))}}function Cb(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function Eb(t,e){hl=Td=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kb(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,$g(t,n)}}var Ad={readContext:In,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},QI={readContext:In,useCallback:function(t,e){return ls().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:bx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vu(4194308,4,_b.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vu(4,2,t,e)},useMemo:function(t,e){var n=ls();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=ls();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=HI.bind(null,Ke,t),[s.memoizedState,t]},useRef:function(t){var e=ls();return t={current:t},e.memoizedState=t},useState:Sx,useDebugValue:dy,useDeferredValue:function(t){return ls().memoizedState=t},useTransition:function(){var t=Sx(!1),e=t[0];return t=WI.bind(null,t[1]),ls().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Ke,r=ls();if(We){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),wt===null)throw Error(J(349));Ui&30||db(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,bx(fb.bind(null,s,i,t),[t]),s.flags|=2048,Wl(9,hb.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=ls(),e=wt.identifierPrefix;if(We){var n=zs,s=Fs;n=(s&~(1<<32-Kn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KI={readContext:In,useCallback:wb,useContext:In,useEffect:uy,useImperativeHandle:xb,useInsertionEffect:yb,useLayoutEffect:vb,useMemo:Sb,useReducer:Hf,useRef:gb,useState:function(){return Hf(ql)},useDebugValue:dy,useDeferredValue:function(t){var e=Tn();return bb(e,ht.memoizedState,t)},useTransition:function(){var t=Hf(ql)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:cb,useSyncExternalStore:ub,useId:Nb,unstable_isNewReconciler:!1},YI={readContext:In,useCallback:wb,useContext:In,useEffect:uy,useImperativeHandle:xb,useInsertionEffect:yb,useLayoutEffect:vb,useMemo:Sb,useReducer:Gf,useRef:gb,useState:function(){return Gf(ql)},useDebugValue:dy,useDeferredValue:function(t){var e=Tn();return ht===null?e.memoizedState=t:bb(e,ht.memoizedState,t)},useTransition:function(){var t=Gf(ql)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:cb,useSyncExternalStore:ub,useId:Nb,unstable_isNewReconciler:!1};function Un(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _m(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jh={isMounted:function(t){return(t=t._reactInternals)?to(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=qt(),r=Lr(t),i=qs(s,r);i.payload=e,n!=null&&(i.callback=n),e=Or(t,i,r),e!==null&&(Yn(e,t,r,s),Bu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=qt(),r=Lr(t),i=qs(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Or(t,i,r),e!==null&&(Yn(e,t,r,s),Bu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),s=Lr(t),r=qs(n,s);r.tag=2,e!=null&&(r.callback=e),e=Or(t,r,s),e!==null&&(Yn(e,t,s,n),Bu(e,t,s))}};function Nx(t,e,n,s,r,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ml(n,s)||!Ml(r,i):!0}function jb(t,e,n){var s=!1,r=$r,i=e.contextType;return typeof i=="object"&&i!==null?i=In(i):(r=sn(e)?Li:Ut.current,s=e.contextTypes,i=(s=s!=null)?Yo(t,r):$r),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jh,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Cx(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&jh.enqueueReplaceState(e,e.state,null)}function xm(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},sy(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=In(i):(i=sn(e)?Li:Ut.current,r.context=Yo(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(_m(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&jh.enqueueReplaceState(r,r.state,null),jd(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ea(t,e){try{var n="",s=e;do n+=N2(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function Qf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var JI=typeof WeakMap=="function"?WeakMap:Map;function Ib(t,e,n){n=qs(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Rd||(Rd=!0,Am=s),wm(t,e)},n}function Tb(t,e,n){n=qs(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){wm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){wm(t,e),typeof s!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Ex(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new JI;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=dT.bind(null,t,e,n),e.then(t,t))}function kx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jx(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qs(-1,1),e.tag=2,Or(n,e,1))),n.lanes|=1),t)}var XI=sr.ReactCurrentOwner,Zt=!1;function $t(t,e,n,s){e.child=t===null?ib(e,null,n,s):Xo(e,t.child,n,s)}function Ix(t,e,n,s,r){n=n.render;var i=e.ref;return Mo(e,r),s=ly(t,e,n,s,i,r),n=cy(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ys(t,e,r)):(We&&n&&Yg(e),e.flags|=1,$t(t,e,s,r),e.child)}function Tx(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!_y(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ab(t,e,i,s,r)):(t=Gu(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ml,n(a,s)&&t.ref===e.ref)return Ys(t,e,r)}return e.flags|=1,t=Mr(i,s),t.ref=e.ref,t.return=e,e.child=t}function Ab(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Ml(i,s)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,Ys(t,e,r)}return Sm(t,e,n,s,r)}function Pb(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(To,fn),fn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ue(To,fn),fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Ue(To,fn),fn|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,Ue(To,fn),fn|=s;return $t(t,e,r,n),e.child}function Rb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sm(t,e,n,s,r){var i=sn(n)?Li:Ut.current;return i=Yo(e,i),Mo(e,r),n=ly(t,e,n,s,i,r),s=cy(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ys(t,e,r)):(We&&s&&Yg(e),e.flags|=1,$t(t,e,n,r),e.child)}function Ax(t,e,n,s,r){if(sn(n)){var i=!0;bd(e)}else i=!1;if(Mo(e,r),e.stateNode===null)qu(t,e),jb(e,n,s),xm(e,n,s,r),s=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=In(d):(d=sn(n)?Li:Ut.current,d=Yo(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==s||u!==d)&&Cx(e,a,s,d),vr=!1;var h=e.memoizedState;a.state=h,jd(e,s,a,r),u=e.memoizedState,l!==s||h!==u||nn.current||vr?(typeof f=="function"&&(_m(e,n,f,s),u=e.memoizedState),(l=vr||Nx(e,n,l,s,h,u,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=u),a.props=s,a.state=u,a.context=d,s=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,ab(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Un(e.type,l),a.props=d,p=e.pendingProps,h=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=In(u):(u=sn(n)?Li:Ut.current,u=Yo(e,u));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||h!==u)&&Cx(e,a,s,u),vr=!1,h=e.memoizedState,a.state=h,jd(e,s,a,r);var C=e.memoizedState;l!==p||h!==C||nn.current||vr?(typeof _=="function"&&(_m(e,n,_,s),C=e.memoizedState),(d=vr||Nx(e,n,d,s,h,C,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,C,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,C,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=C),a.props=s,a.state=C,a.context=u,s=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),s=!1)}return bm(t,e,n,s,i,r)}function bm(t,e,n,s,r,i){Rb(t,e);var a=(e.flags&128)!==0;if(!s&&!a)return r&&gx(e,n,!1),Ys(t,e,i);s=e.stateNode,XI.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&a?(e.child=Xo(e,t.child,null,i),e.child=Xo(e,null,l,i)):$t(t,e,l,i),e.memoizedState=s.state,r&&gx(e,n,!0),e.child}function Ob(t){var e=t.stateNode;e.pendingContext?mx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mx(t,e.context,!1),ry(t,e.containerInfo)}function Px(t,e,n,s,r){return Jo(),Xg(r),e.flags|=256,$t(t,e,n,s),e.child}var Nm={dehydrated:null,treeContext:null,retryLane:0};function Cm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Db(t,e,n){var s=e.pendingProps,r=Qe.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ue(Qe,r&1),t===null)return ym(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=s.children,t=s.fallback,i?(s=e.mode,i=e.child,a={mode:"hidden",children:a},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ah(a,s,0,null),t=Ii(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Cm(n),e.memoizedState=Nm,t):hy(e,a));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return ZI(t,e,a,s,l,r,n);if(i){i=s.fallback,a=e.mode,r=t.child,l=r.sibling;var u={mode:"hidden",children:s.children};return!(a&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=u,e.deletions=null):(s=Mr(r,u),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=Mr(l,i):(i=Ii(i,a,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,a=t.child.memoizedState,a=a===null?Cm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Nm,s}return i=t.child,t=i.sibling,s=Mr(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function hy(t,e){return e=Ah({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hu(t,e,n,s){return s!==null&&Xg(s),Xo(e,t.child,null,n),t=hy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZI(t,e,n,s,r,i,a){if(n)return e.flags&256?(e.flags&=-257,s=Qf(Error(J(422))),hu(t,e,a,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=Ah({mode:"visible",children:s.children},r,0,null),i=Ii(i,r,a,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Xo(e,t.child,null,a),e.child.memoizedState=Cm(a),e.memoizedState=Nm,i);if(!(e.mode&1))return hu(t,e,a,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(J(419)),s=Qf(i,s,void 0),hu(t,e,a,s)}if(l=(a&t.childLanes)!==0,Zt||l){if(s=wt,s!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Ks(t,r),Yn(s,t,r,-1))}return vy(),s=Qf(Error(J(421))),hu(t,e,a,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=hT.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,pn=Rr(r.nextSibling),mn=e,We=!0,Bn=null,t!==null&&(Cn[En++]=Fs,Cn[En++]=zs,Cn[En++]=Mi,Fs=t.id,zs=t.overflow,Mi=e),e=hy(e,s.children),e.flags|=4096,e)}function Rx(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),vm(t.return,e,n)}function Kf(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Lb(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if($t(t,e,s.children,n),s=Qe.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rx(t,n,e);else if(t.tag===19)Rx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Ue(Qe,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Id(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Kf(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Id(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Kf(e,!0,n,null,i);break;case"together":Kf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ys(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eT(t,e,n){switch(e.tag){case 3:Ob(e),Jo();break;case 5:lb(e);break;case 1:sn(e.type)&&bd(e);break;case 4:ry(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Ue(Ed,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Ue(Qe,Qe.current&1),e.flags|=128,null):n&e.child.childLanes?Db(t,e,n):(Ue(Qe,Qe.current&1),t=Ys(t,e,n),t!==null?t.sibling:null);Ue(Qe,Qe.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return Lb(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ue(Qe,Qe.current),s)break;return null;case 22:case 23:return e.lanes=0,Pb(t,e,n)}return Ys(t,e,n)}var Mb,Em,Ub,Fb;Mb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Em=function(){};Ub=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,wi(ps.current);var i=null;switch(n){case"input":r=Qp(t,r),s=Qp(t,s),i=[];break;case"select":r=Ye({},r,{value:void 0}),s=Ye({},s,{value:void 0}),i=[];break;case"textarea":r=Jp(t,r),s=Jp(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=wd)}Zp(n,s);var a;n=null;for(d in r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Tl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var u=s[d];if(l=r!=null?r[d]:void 0,s.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Tl.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ze("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Fb=function(t,e,n,s){n!==s&&(e.flags|=4)};function $a(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function tT(t,e,n){var s=e.pendingProps;switch(Jg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return sn(e.type)&&Sd(),Dt(e),null;case 3:return s=e.stateNode,Zo(),Ve(nn),Ve(Ut),oy(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(uu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bn!==null&&(Om(Bn),Bn=null))),Em(t,e),Dt(e),null;case 5:iy(e);var r=wi($l.current);if(n=e.type,t!==null&&e.stateNode!=null)Ub(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(J(166));return Dt(e),null}if(t=wi(ps.current),uu(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[ds]=e,s[zl]=i,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":case"embed":ze("load",s);break;case"video":case"audio":for(r=0;r<sl.length;r++)ze(sl[r],s);break;case"source":ze("error",s);break;case"img":case"image":case"link":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"input":$_(s,i),ze("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},ze("invalid",s);break;case"textarea":q_(s,i),ze("invalid",s)}Zp(n,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&cu(s.textContent,l,t),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&cu(s.textContent,l,t),r=["children",""+l]):Tl.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ze("scroll",s)}switch(n){case"input":tu(s),V_(s,i,!0);break;case"textarea":tu(s),W_(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=wd)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=f1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=a.createElement(n,{is:s.is}):(t=a.createElement(n),n==="select"&&(a=t,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):t=a.createElementNS(t,n),t[ds]=e,t[zl]=s,Mb(t,e,!1,!1),e.stateNode=t;e:{switch(a=em(n,s),n){case"dialog":ze("cancel",t),ze("close",t),r=s;break;case"iframe":case"object":case"embed":ze("load",t),r=s;break;case"video":case"audio":for(r=0;r<sl.length;r++)ze(sl[r],t);r=s;break;case"source":ze("error",t),r=s;break;case"img":case"image":case"link":ze("error",t),ze("load",t),r=s;break;case"details":ze("toggle",t),r=s;break;case"input":$_(t,s),r=Qp(t,s),ze("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Ye({},s,{value:void 0}),ze("invalid",t);break;case"textarea":q_(t,s),r=Jp(t,s),ze("invalid",t);break;default:r=s}Zp(n,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?g1(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&p1(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Al(t,u):typeof u=="number"&&Al(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Tl.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ze("scroll",t):u!=null&&Lg(t,i,u,a))}switch(n){case"input":tu(t),V_(t,s,!1);break;case"textarea":tu(t),W_(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Br(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?Ro(t,!!s.multiple,i,!1):s.defaultValue!=null&&Ro(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=wd)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)Fb(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(J(166));if(n=wi($l.current),wi(ps.current),uu(e)){if(s=e.stateNode,n=e.memoizedProps,s[ds]=e,(i=s.nodeValue!==n)&&(t=mn,t!==null))switch(t.tag){case 3:cu(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cu(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[ds]=e,e.stateNode=s}return Dt(e),null;case 13:if(Ve(Qe),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&pn!==null&&e.mode&1&&!(e.flags&128))sb(),Jo(),e.flags|=98560,i=!1;else if(i=uu(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(J(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[ds]=e}else Jo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),i=!1}else Bn!==null&&(Om(Bn),Bn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?pt===0&&(pt=3):vy())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return Zo(),Em(t,e),t===null&&Ul(e.stateNode.containerInfo),Dt(e),null;case 10:return ty(e.type._context),Dt(e),null;case 17:return sn(e.type)&&Sd(),Dt(e),null;case 19:if(Ve(Qe),i=e.memoizedState,i===null)return Dt(e),null;if(s=(e.flags&128)!==0,a=i.rendering,a===null)if(s)$a(i,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Id(t),a!==null){for(e.flags|=128,$a(i,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ue(Qe,Qe.current&1|2),e.child}t=t.sibling}i.tail!==null&&rt()>ta&&(e.flags|=128,s=!0,$a(i,!1),e.lanes=4194304)}else{if(!s)if(t=Id(a),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$a(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!We)return Dt(e),null}else 2*rt()-i.renderingStartTime>ta&&n!==1073741824&&(e.flags|=128,s=!0,$a(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=rt(),e.sibling=null,n=Qe.current,Ue(Qe,s?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return yy(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?fn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function nT(t,e){switch(Jg(e),e.tag){case 1:return sn(e.type)&&Sd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zo(),Ve(nn),Ve(Ut),oy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return iy(e),null;case 13:if(Ve(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Jo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(Qe),null;case 4:return Zo(),null;case 10:return ty(e.type._context),null;case 22:case 23:return yy(),null;case 24:return null;default:return null}}var fu=!1,Lt=!1,sT=typeof WeakSet=="function"?WeakSet:Set,se=null;function Io(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){tt(t,e,s)}else n.current=null}function km(t,e,n){try{n()}catch(s){tt(t,e,s)}}var Ox=!1;function rT(t,e){if(um=vd,t=q1(),Kg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,d=0,f=0,p=t,h=null;t:for(;;){for(var _;p!==n||r!==0&&p.nodeType!==3||(l=a+r),p!==i||s!==0&&p.nodeType!==3||(u=a+s),p.nodeType===3&&(a+=p.nodeValue.length),(_=p.firstChild)!==null;)h=p,p=_;for(;;){if(p===t)break t;if(h===n&&++d===r&&(l=a),h===i&&++f===s&&(u=a),(_=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(dm={focusedElem:t,selectionRange:n},vd=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var j=C.memoizedProps,b=C.memoizedState,S=e.stateNode,E=S.getSnapshotBeforeUpdate(e.elementType===e.type?j:Un(e.type,j),b);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(x){tt(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return C=Ox,Ox=!1,C}function fl(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&km(e,n,i)}r=r.next}while(r!==s)}}function Ih(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zb(t){var e=t.alternate;e!==null&&(t.alternate=null,zb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ds],delete e[zl],delete e[pm],delete e[zI],delete e[BI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bb(t){return t.tag===5||t.tag===3||t.tag===4}function Dx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Im(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wd));else if(s!==4&&(t=t.child,t!==null))for(Im(t,e,n),t=t.sibling;t!==null;)Im(t,e,n),t=t.sibling}function Tm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Tm(t,e,n),t=t.sibling;t!==null;)Tm(t,e,n),t=t.sibling}var Et=null,zn=!1;function mr(t,e,n){for(n=n.child;n!==null;)$b(t,e,n),n=n.sibling}function $b(t,e,n){if(fs&&typeof fs.onCommitFiberUnmount=="function")try{fs.onCommitFiberUnmount(wh,n)}catch{}switch(n.tag){case 5:Lt||Io(n,e);case 6:var s=Et,r=zn;Et=null,mr(t,e,n),Et=s,zn=r,Et!==null&&(zn?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(zn?(t=Et,n=n.stateNode,t.nodeType===8?$f(t.parentNode,n):t.nodeType===1&&$f(t,n),Dl(t)):$f(Et,n.stateNode));break;case 4:s=Et,r=zn,Et=n.stateNode.containerInfo,zn=!0,mr(t,e,n),Et=s,zn=r;break;case 0:case 11:case 14:case 15:if(!Lt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&km(n,e,a),r=r.next}while(r!==s)}mr(t,e,n);break;case 1:if(!Lt&&(Io(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){tt(n,e,l)}mr(t,e,n);break;case 21:mr(t,e,n);break;case 22:n.mode&1?(Lt=(s=Lt)||n.memoizedState!==null,mr(t,e,n),Lt=s):mr(t,e,n);break;default:mr(t,e,n)}}function Lx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sT),e.forEach(function(s){var r=fT.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Mn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Et=l.stateNode,zn=!1;break e;case 3:Et=l.stateNode.containerInfo,zn=!0;break e;case 4:Et=l.stateNode.containerInfo,zn=!0;break e}l=l.return}if(Et===null)throw Error(J(160));$b(i,a,r),Et=null,zn=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(d){tt(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Vb(e,t),e=e.sibling}function Vb(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(e,t),as(t),s&4){try{fl(3,t,t.return),Ih(3,t)}catch(j){tt(t,t.return,j)}try{fl(5,t,t.return)}catch(j){tt(t,t.return,j)}}break;case 1:Mn(e,t),as(t),s&512&&n!==null&&Io(n,n.return);break;case 5:if(Mn(e,t),as(t),s&512&&n!==null&&Io(n,n.return),t.flags&32){var r=t.stateNode;try{Al(r,"")}catch(j){tt(t,t.return,j)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&d1(r,i),em(l,a);var d=em(l,i);for(a=0;a<u.length;a+=2){var f=u[a],p=u[a+1];f==="style"?g1(r,p):f==="dangerouslySetInnerHTML"?p1(r,p):f==="children"?Al(r,p):Lg(r,f,p,d)}switch(l){case"input":Kp(r,i);break;case"textarea":h1(r,i);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?Ro(r,!!i.multiple,_,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ro(r,!!i.multiple,i.defaultValue,!0):Ro(r,!!i.multiple,i.multiple?[]:"",!1))}r[zl]=i}catch(j){tt(t,t.return,j)}}break;case 6:if(Mn(e,t),as(t),s&4){if(t.stateNode===null)throw Error(J(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(j){tt(t,t.return,j)}}break;case 3:if(Mn(e,t),as(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Dl(e.containerInfo)}catch(j){tt(t,t.return,j)}break;case 4:Mn(e,t),as(t);break;case 13:Mn(e,t),as(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(my=rt())),s&4&&Lx(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(d=Lt)||f,Mn(e,t),Lt=d):Mn(e,t),as(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(se=t,f=t.child;f!==null;){for(p=se=f;se!==null;){switch(h=se,_=h.child,h.tag){case 0:case 11:case 14:case 15:fl(4,h,h.return);break;case 1:Io(h,h.return);var C=h.stateNode;if(typeof C.componentWillUnmount=="function"){s=h,n=h.return;try{e=s,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(j){tt(s,n,j)}}break;case 5:Io(h,h.return);break;case 22:if(h.memoizedState!==null){Ux(p);continue}}_!==null?(_.return=h,se=_):Ux(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{r=p.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=m1("display",a))}catch(j){tt(t,t.return,j)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(j){tt(t,t.return,j)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Mn(e,t),as(t),s&4&&Lx(t);break;case 21:break;default:Mn(e,t),as(t)}}function as(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Bb(n)){var s=n;break e}n=n.return}throw Error(J(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Al(r,""),s.flags&=-33);var i=Dx(t);Tm(t,i,r);break;case 3:case 4:var a=s.stateNode.containerInfo,l=Dx(t);Im(t,l,a);break;default:throw Error(J(161))}}catch(u){tt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iT(t,e,n){se=t,qb(t)}function qb(t,e,n){for(var s=(t.mode&1)!==0;se!==null;){var r=se,i=r.child;if(r.tag===22&&s){var a=r.memoizedState!==null||fu;if(!a){var l=r.alternate,u=l!==null&&l.memoizedState!==null||Lt;l=fu;var d=Lt;if(fu=a,(Lt=u)&&!d)for(se=r;se!==null;)a=se,u=a.child,a.tag===22&&a.memoizedState!==null?Fx(r):u!==null?(u.return=a,se=u):Fx(r);for(;i!==null;)se=i,qb(i),i=i.sibling;se=r,fu=l,Lt=d}Mx(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,se=i):Mx(t)}}function Mx(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||Ih(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Lt)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Un(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&wx(e,i,s);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wx(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Dl(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Lt||e.flags&512&&jm(e)}catch(h){tt(e,e.return,h)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function Ux(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function Fx(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ih(4,e)}catch(u){tt(e,n,u)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(u){tt(e,r,u)}}var i=e.return;try{jm(e)}catch(u){tt(e,i,u)}break;case 5:var a=e.return;try{jm(e)}catch(u){tt(e,a,u)}}}catch(u){tt(e,e.return,u)}if(e===t){se=null;break}var l=e.sibling;if(l!==null){l.return=e.return,se=l;break}se=e.return}}var oT=Math.ceil,Pd=sr.ReactCurrentDispatcher,fy=sr.ReactCurrentOwner,jn=sr.ReactCurrentBatchConfig,Ee=0,wt=null,ct=null,It=0,fn=0,To=Xr(0),pt=0,Hl=null,Fi=0,Th=0,py=0,pl=null,Xt=null,my=0,ta=1/0,Os=null,Rd=!1,Am=null,Dr=null,pu=!1,Er=null,Od=0,ml=0,Pm=null,Wu=-1,Hu=0;function qt(){return Ee&6?rt():Wu!==-1?Wu:Wu=rt()}function Lr(t){return t.mode&1?Ee&2&&It!==0?It&-It:VI.transition!==null?(Hu===0&&(Hu=j1()),Hu):(t=Re,t!==0||(t=window.event,t=t===void 0?16:D1(t.type)),t):1}function Yn(t,e,n,s){if(50<ml)throw ml=0,Pm=null,Error(J(185));_c(t,n,s),(!(Ee&2)||t!==wt)&&(t===wt&&(!(Ee&2)&&(Th|=n),pt===4&&xr(t,It)),rn(t,s),n===1&&Ee===0&&!(e.mode&1)&&(ta=rt()+500,Eh&&Zr()))}function rn(t,e){var n=t.callbackNode;V2(t,e);var s=yd(t,t===wt?It:0);if(s===0)n!==null&&Q_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&Q_(n),e===1)t.tag===0?$I(zx.bind(null,t)):eb(zx.bind(null,t)),UI(function(){!(Ee&6)&&Zr()}),n=null;else{switch(I1(s)){case 1:n=Bg;break;case 4:n=E1;break;case 16:n=gd;break;case 536870912:n=k1;break;default:n=gd}n=Xb(n,Wb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Wb(t,e){if(Wu=-1,Hu=0,Ee&6)throw Error(J(327));var n=t.callbackNode;if(Uo()&&t.callbackNode!==n)return null;var s=yd(t,t===wt?It:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Dd(t,s);else{e=s;var r=Ee;Ee|=2;var i=Gb();(wt!==t||It!==e)&&(Os=null,ta=rt()+500,ji(t,e));do try{cT();break}catch(l){Hb(t,l)}while(!0);ey(),Pd.current=i,Ee=r,ct!==null?e=0:(wt=null,It=0,e=pt)}if(e!==0){if(e===2&&(r=im(t),r!==0&&(s=r,e=Rm(t,r))),e===1)throw n=Hl,ji(t,0),xr(t,s),rn(t,rt()),n;if(e===6)xr(t,s);else{if(r=t.current.alternate,!(s&30)&&!aT(r)&&(e=Dd(t,s),e===2&&(i=im(t),i!==0&&(s=i,e=Rm(t,i))),e===1))throw n=Hl,ji(t,0),xr(t,s),rn(t,rt()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(J(345));case 2:pi(t,Xt,Os);break;case 3:if(xr(t,s),(s&130023424)===s&&(e=my+500-rt(),10<e)){if(yd(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){qt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=fm(pi.bind(null,t,Xt,Os),e);break}pi(t,Xt,Os);break;case 4:if(xr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var a=31-Kn(s);i=1<<a,a=e[a],a>r&&(r=a),s&=~i}if(s=r,s=rt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*oT(s/1960))-s,10<s){t.timeoutHandle=fm(pi.bind(null,t,Xt,Os),s);break}pi(t,Xt,Os);break;case 5:pi(t,Xt,Os);break;default:throw Error(J(329))}}}return rn(t,rt()),t.callbackNode===n?Wb.bind(null,t):null}function Rm(t,e){var n=pl;return t.current.memoizedState.isDehydrated&&(ji(t,e).flags|=256),t=Dd(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&Om(e)),t}function Om(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function aT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!es(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xr(t,e){for(e&=~py,e&=~Th,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kn(e),s=1<<n;t[n]=-1,e&=~s}}function zx(t){if(Ee&6)throw Error(J(327));Uo();var e=yd(t,0);if(!(e&1))return rn(t,rt()),null;var n=Dd(t,e);if(t.tag!==0&&n===2){var s=im(t);s!==0&&(e=s,n=Rm(t,s))}if(n===1)throw n=Hl,ji(t,0),xr(t,e),rn(t,rt()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,pi(t,Xt,Os),rn(t,rt()),null}function gy(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(ta=rt()+500,Eh&&Zr())}}function zi(t){Er!==null&&Er.tag===0&&!(Ee&6)&&Uo();var e=Ee;Ee|=1;var n=jn.transition,s=Re;try{if(jn.transition=null,Re=1,t)return t()}finally{Re=s,jn.transition=n,Ee=e,!(Ee&6)&&Zr()}}function yy(){fn=To.current,Ve(To)}function ji(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,MI(n)),ct!==null)for(n=ct.return;n!==null;){var s=n;switch(Jg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Sd();break;case 3:Zo(),Ve(nn),Ve(Ut),oy();break;case 5:iy(s);break;case 4:Zo();break;case 13:Ve(Qe);break;case 19:Ve(Qe);break;case 10:ty(s.type._context);break;case 22:case 23:yy()}n=n.return}if(wt=t,ct=t=Mr(t.current,null),It=fn=e,pt=0,Hl=null,py=Th=Fi=0,Xt=pl=null,xi!==null){for(e=0;e<xi.length;e++)if(n=xi[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var a=i.next;i.next=r,s.next=a}n.pending=s}xi=null}return t}function Hb(t,e){do{var n=ct;try{if(ey(),$u.current=Ad,Td){for(var s=Ke.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Td=!1}if(Ui=0,vt=ht=Ke=null,hl=!1,Vl=0,fy.current=null,n===null||n.return===null){pt=1,Hl=e,ct=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=It,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=kx(a);if(_!==null){_.flags&=-257,jx(_,a,l,i,e),_.mode&1&&Ex(i,d,e),e=_,u=d;var C=e.updateQueue;if(C===null){var j=new Set;j.add(u),e.updateQueue=j}else C.add(u);break e}else{if(!(e&1)){Ex(i,d,e),vy();break e}u=Error(J(426))}}else if(We&&l.mode&1){var b=kx(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),jx(b,a,l,i,e),Xg(ea(u,l));break e}}i=u=ea(u,l),pt!==4&&(pt=2),pl===null?pl=[i]:pl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=Ib(i,u,e);xx(i,S);break e;case 1:l=u;var E=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Dr===null||!Dr.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=Tb(i,l,e);xx(i,x);break e}}i=i.return}while(i!==null)}Kb(n)}catch(P){e=P,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function Gb(){var t=Pd.current;return Pd.current=Ad,t===null?Ad:t}function vy(){(pt===0||pt===3||pt===2)&&(pt=4),wt===null||!(Fi&268435455)&&!(Th&268435455)||xr(wt,It)}function Dd(t,e){var n=Ee;Ee|=2;var s=Gb();(wt!==t||It!==e)&&(Os=null,ji(t,e));do try{lT();break}catch(r){Hb(t,r)}while(!0);if(ey(),Ee=n,Pd.current=s,ct!==null)throw Error(J(261));return wt=null,It=0,pt}function lT(){for(;ct!==null;)Qb(ct)}function cT(){for(;ct!==null&&!O2();)Qb(ct)}function Qb(t){var e=Jb(t.alternate,t,fn);t.memoizedProps=t.pendingProps,e===null?Kb(t):ct=e,fy.current=null}function Kb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nT(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ct=null;return}}else if(n=tT(n,e,fn),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);pt===0&&(pt=5)}function pi(t,e,n){var s=Re,r=jn.transition;try{jn.transition=null,Re=1,uT(t,e,n,s)}finally{jn.transition=r,Re=s}return null}function uT(t,e,n,s){do Uo();while(Er!==null);if(Ee&6)throw Error(J(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(q2(t,i),t===wt&&(ct=wt=null,It=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pu||(pu=!0,Xb(gd,function(){return Uo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=jn.transition,jn.transition=null;var a=Re;Re=1;var l=Ee;Ee|=4,fy.current=null,rT(t,n),Vb(n,t),TI(dm),vd=!!um,dm=um=null,t.current=n,iT(n),D2(),Ee=l,Re=a,jn.transition=i}else t.current=n;if(pu&&(pu=!1,Er=t,Od=r),i=t.pendingLanes,i===0&&(Dr=null),U2(n.stateNode),rn(t,rt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Rd)throw Rd=!1,t=Am,Am=null,t;return Od&1&&t.tag!==0&&Uo(),i=t.pendingLanes,i&1?t===Pm?ml++:(ml=0,Pm=t):ml=0,Zr(),null}function Uo(){if(Er!==null){var t=I1(Od),e=jn.transition,n=Re;try{if(jn.transition=null,Re=16>t?16:t,Er===null)var s=!1;else{if(t=Er,Er=null,Od=0,Ee&6)throw Error(J(331));var r=Ee;for(Ee|=4,se=t.current;se!==null;){var i=se,a=i.child;if(se.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(se=d;se!==null;){var f=se;switch(f.tag){case 0:case 11:case 15:fl(8,f,i)}var p=f.child;if(p!==null)p.return=f,se=p;else for(;se!==null;){f=se;var h=f.sibling,_=f.return;if(zb(f),f===d){se=null;break}if(h!==null){h.return=_,se=h;break}se=_}}}var C=i.alternate;if(C!==null){var j=C.child;if(j!==null){C.child=null;do{var b=j.sibling;j.sibling=null,j=b}while(j!==null)}}se=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,se=a;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fl(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,se=S;break e}se=i.return}}var E=t.current;for(se=E;se!==null;){a=se;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,se=y;else e:for(a=E;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ih(9,l)}}catch(P){tt(l,l.return,P)}if(l===a){se=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,se=x;break e}se=l.return}}if(Ee=r,Zr(),fs&&typeof fs.onPostCommitFiberRoot=="function")try{fs.onPostCommitFiberRoot(wh,t)}catch{}s=!0}return s}finally{Re=n,jn.transition=e}}return!1}function Bx(t,e,n){e=ea(n,e),e=Ib(t,e,1),t=Or(t,e,1),e=qt(),t!==null&&(_c(t,1,e),rn(t,e))}function tt(t,e,n){if(t.tag===3)Bx(t,t,n);else for(;e!==null;){if(e.tag===3){Bx(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Dr===null||!Dr.has(s))){t=ea(n,t),t=Tb(e,t,1),e=Or(e,t,1),t=qt(),e!==null&&(_c(e,1,t),rn(e,t));break}}e=e.return}}function dT(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(It&n)===n&&(pt===4||pt===3&&(It&130023424)===It&&500>rt()-my?ji(t,0):py|=n),rn(t,e)}function Yb(t,e){e===0&&(t.mode&1?(e=ru,ru<<=1,!(ru&130023424)&&(ru=4194304)):e=1);var n=qt();t=Ks(t,e),t!==null&&(_c(t,e,n),rn(t,n))}function hT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Yb(t,n)}function fT(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(J(314))}s!==null&&s.delete(e),Yb(t,n)}var Jb;Jb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,eT(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,We&&e.flags&1048576&&tb(e,Cd,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;qu(t,e),t=e.pendingProps;var r=Yo(e,Ut.current);Mo(e,n),r=ly(null,e,s,t,r,n);var i=cy();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sn(s)?(i=!0,bd(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,sy(e),r.updater=jh,e.stateNode=r,r._reactInternals=e,xm(e,s,t,n),e=bm(null,e,s,!0,i,n)):(e.tag=0,We&&i&&Yg(e),$t(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(qu(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=mT(s),t=Un(s,t),r){case 0:e=Sm(null,e,s,t,n);break e;case 1:e=Ax(null,e,s,t,n);break e;case 11:e=Ix(null,e,s,t,n);break e;case 14:e=Tx(null,e,s,Un(s.type,t),n);break e}throw Error(J(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Un(s,r),Sm(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Un(s,r),Ax(t,e,s,r,n);case 3:e:{if(Ob(e),t===null)throw Error(J(387));s=e.pendingProps,i=e.memoizedState,r=i.element,ab(t,e),jd(e,s,null,n);var a=e.memoizedState;if(s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=ea(Error(J(423)),e),e=Px(t,e,s,n,r);break e}else if(s!==r){r=ea(Error(J(424)),e),e=Px(t,e,s,n,r);break e}else for(pn=Rr(e.stateNode.containerInfo.firstChild),mn=e,We=!0,Bn=null,n=ib(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jo(),s===r){e=Ys(t,e,n);break e}$t(t,e,s,n)}e=e.child}return e;case 5:return lb(e),t===null&&ym(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,a=r.children,hm(s,r)?a=null:i!==null&&hm(s,i)&&(e.flags|=32),Rb(t,e),$t(t,e,a,n),e.child;case 6:return t===null&&ym(e),null;case 13:return Db(t,e,n);case 4:return ry(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Xo(e,null,s,n):$t(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Un(s,r),Ix(t,e,s,r,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,a=r.value,Ue(Ed,s._currentValue),s._currentValue=a,i!==null)if(es(i.value,a)){if(i.children===r.children&&!nn.current){e=Ys(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===s){if(i.tag===1){u=qs(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),vm(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(J(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),vm(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}$t(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Mo(e,n),r=In(r),s=s(r),e.flags|=1,$t(t,e,s,n),e.child;case 14:return s=e.type,r=Un(s,e.pendingProps),r=Un(s.type,r),Tx(t,e,s,r,n);case 15:return Ab(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Un(s,r),qu(t,e),e.tag=1,sn(s)?(t=!0,bd(e)):t=!1,Mo(e,n),jb(e,s,r),xm(e,s,r,n),bm(null,e,s,!0,t,n);case 19:return Lb(t,e,n);case 22:return Pb(t,e,n)}throw Error(J(156,e.tag))};function Xb(t,e){return C1(t,e)}function pT(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,e,n,s){return new pT(t,e,n,s)}function _y(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mT(t){if(typeof t=="function")return _y(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ug)return 11;if(t===Fg)return 14}return 2}function Mr(t,e){var n=t.alternate;return n===null?(n=kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gu(t,e,n,s,r,i){var a=2;if(s=t,typeof t=="function")_y(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case xo:return Ii(n.children,r,i,e);case Mg:a=8,r|=8;break;case qp:return t=kn(12,n,e,r|2),t.elementType=qp,t.lanes=i,t;case Wp:return t=kn(13,n,e,r),t.elementType=Wp,t.lanes=i,t;case Hp:return t=kn(19,n,e,r),t.elementType=Hp,t.lanes=i,t;case l1:return Ah(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case o1:a=10;break e;case a1:a=9;break e;case Ug:a=11;break e;case Fg:a=14;break e;case yr:a=16,s=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=kn(a,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function Ii(t,e,n,s){return t=kn(7,t,s,e),t.lanes=n,t}function Ah(t,e,n,s){return t=kn(22,t,s,e),t.elementType=l1,t.lanes=n,t.stateNode={isHidden:!1},t}function Yf(t,e,n){return t=kn(6,t,null,e),t.lanes=n,t}function Jf(t,e,n){return e=kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gT(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Af(0),this.expirationTimes=Af(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Af(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function xy(t,e,n,s,r,i,a,l,u){return t=new gT(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=kn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sy(i),t}function yT(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_o,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function Zb(t){if(!t)return $r;t=t._reactInternals;e:{if(to(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(sn(n))return Z1(t,n,e)}return e}function eN(t,e,n,s,r,i,a,l,u){return t=xy(n,s,!0,t,r,i,a,l,u),t.context=Zb(null),n=t.current,s=qt(),r=Lr(n),i=qs(s,r),i.callback=e??null,Or(n,i,r),t.current.lanes=r,_c(t,r,s),rn(t,s),t}function Ph(t,e,n,s){var r=e.current,i=qt(),a=Lr(r);return n=Zb(n),e.context===null?e.context=n:e.pendingContext=n,e=qs(i,a),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Or(r,e,a),t!==null&&(Yn(t,r,a,i),Bu(t,r,a)),a}function Ld(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $x(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wy(t,e){$x(t,e),(t=t.alternate)&&$x(t,e)}function vT(){return null}var tN=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sy(t){this._internalRoot=t}Rh.prototype.render=Sy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Ph(t,e,null,null)};Rh.prototype.unmount=Sy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zi(function(){Ph(null,t,null,null)}),e[Qs]=null}};function Rh(t){this._internalRoot=t}Rh.prototype.unstable_scheduleHydration=function(t){if(t){var e=P1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_r.length&&e!==0&&e<_r[n].priority;n++);_r.splice(n,0,t),n===0&&O1(t)}};function by(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vx(){}function _T(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var d=Ld(a);i.call(d)}}var a=eN(e,s,t,0,null,!1,!1,"",Vx);return t._reactRootContainer=a,t[Qs]=a.current,Ul(t.nodeType===8?t.parentNode:t),zi(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var d=Ld(u);l.call(d)}}var u=xy(t,0,!1,null,null,!1,!1,"",Vx);return t._reactRootContainer=u,t[Qs]=u.current,Ul(t.nodeType===8?t.parentNode:t),zi(function(){Ph(e,u,n,s)}),u}function Dh(t,e,n,s,r){var i=n._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var l=r;r=function(){var u=Ld(a);l.call(u)}}Ph(e,a,t,r)}else a=_T(n,e,t,r,s);return Ld(a)}T1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nl(e.pendingLanes);n!==0&&($g(e,n|1),rn(e,rt()),!(Ee&6)&&(ta=rt()+500,Zr()))}break;case 13:zi(function(){var s=Ks(t,1);if(s!==null){var r=qt();Yn(s,t,1,r)}}),wy(t,1)}};Vg=function(t){if(t.tag===13){var e=Ks(t,134217728);if(e!==null){var n=qt();Yn(e,t,134217728,n)}wy(t,134217728)}};A1=function(t){if(t.tag===13){var e=Lr(t),n=Ks(t,e);if(n!==null){var s=qt();Yn(n,t,e,s)}wy(t,e)}};P1=function(){return Re};R1=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};nm=function(t,e,n){switch(e){case"input":if(Kp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Ch(s);if(!r)throw Error(J(90));u1(s),Kp(s,r)}}}break;case"textarea":h1(t,n);break;case"select":e=n.value,e!=null&&Ro(t,!!n.multiple,e,!1)}};_1=gy;x1=zi;var xT={usingClientEntryPoint:!1,Events:[wc,No,Ch,y1,v1,gy]},Va={findFiberByHostInstance:_i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wT={bundleType:Va.bundleType,version:Va.version,rendererPackageName:Va.rendererPackageName,rendererConfig:Va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=b1(t),t===null?null:t.stateNode},findFiberByHostInstance:Va.findFiberByHostInstance||vT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mu.isDisabled&&mu.supportsFiber)try{wh=mu.inject(wT),fs=mu}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xT;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!by(e))throw Error(J(200));return yT(t,e,null,n)};_n.createRoot=function(t,e){if(!by(t))throw Error(J(299));var n=!1,s="",r=tN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=xy(t,1,!1,null,null,n,!1,s,r),t[Qs]=e.current,Ul(t.nodeType===8?t.parentNode:t),new Sy(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=b1(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return zi(t)};_n.hydrate=function(t,e,n){if(!Oh(e))throw Error(J(200));return Dh(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!by(t))throw Error(J(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",a=tN;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=eN(e,null,t,1,n??null,r,!1,i,a),t[Qs]=e.current,Ul(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Rh(e)};_n.render=function(t,e,n){if(!Oh(e))throw Error(J(200));return Dh(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!Oh(t))throw Error(J(40));return t._reactRootContainer?(zi(function(){Dh(null,null,t,!1,function(){t._reactRootContainer=null,t[Qs]=null})}),!0):!1};_n.unstable_batchedUpdates=gy;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Oh(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Dh(t,e,n,!1,s)};_n.version="18.3.1-next-f1338f8080-20240426";function nN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nN)}catch(t){console.error(t)}}nN(),n1.exports=_n;var ST=n1.exports,qx=ST;$p.createRoot=qx.createRoot,$p.hydrateRoot=qx.hydrateRoot;var sN={exports:{}},rN={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bc=D;function bT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var NT=typeof Object.is=="function"?Object.is:bT,CT=bc.useSyncExternalStore,ET=bc.useRef,kT=bc.useEffect,jT=bc.useMemo,IT=bc.useDebugValue;rN.useSyncExternalStoreWithSelector=function(t,e,n,s,r){var i=ET(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=jT(function(){function u(_){if(!d){if(d=!0,f=_,_=s(_),r!==void 0&&a.hasValue){var C=a.value;if(r(C,_))return p=C}return p=_}if(C=p,NT(f,_))return C;var j=s(_);return r!==void 0&&r(C,j)?(f=_,C):(f=_,p=j)}var d=!1,f,p,h=n===void 0?null:n;return[function(){return u(e())},h===null?void 0:function(){return u(h())}]},[e,n,s,r]);var l=CT(t,i[0],i[1]);return kT(function(){a.hasValue=!0,a.value=l},[l]),IT(l),l};sN.exports=rN;var TT=sN.exports;function iN(t){t()}function AT(){let t=null,e=null;return{clear(){t=null,e=null},notify(){iN(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=t;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const r=e={callback:n,next:null,prev:e};return r.prev?r.prev.next=r:t=r,function(){!s||t===null||(s=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var Wx={notify(){},get:()=>[]};function PT(t,e){let n,s=Wx,r=0,i=!1;function a(j){f();const b=s.subscribe(j);let S=!1;return()=>{S||(S=!0,b(),p())}}function l(){s.notify()}function u(){C.onStateChange&&C.onStateChange()}function d(){return i}function f(){r++,n||(n=t.subscribe(u),s=AT())}function p(){r--,n&&r===0&&(n(),n=void 0,s.clear(),s=Wx)}function h(){i||(i=!0,f())}function _(){i&&(i=!1,p())}const C={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:d,trySubscribe:h,tryUnsubscribe:_,getListeners:()=>s};return C}var RT=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OT=RT(),DT=()=>typeof navigator<"u"&&navigator.product==="ReactNative",LT=DT(),MT=()=>OT||LT?D.useLayoutEffect:D.useEffect,UT=MT();function Hx(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function gl(t,e){if(Hx(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Hx(t[n[r]],e[n[r]]))return!1;return!0}var Xf=Symbol.for("react-redux-context"),Zf=typeof globalThis<"u"?globalThis:{};function FT(){if(!D.createContext)return{};const t=Zf[Xf]??(Zf[Xf]=new Map);let e=t.get(D.createContext);return e||(e=D.createContext(null),t.set(D.createContext,e)),e}var Vr=FT();function zT(t){const{children:e,context:n,serverState:s,store:r}=t,i=D.useMemo(()=>{const u=PT(r);return{store:r,subscription:u,getServerState:s?()=>s:void 0}},[r,s]),a=D.useMemo(()=>r.getState(),[r]);UT(()=>{const{subscription:u}=i;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==r.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[i,a]);const l=n||Vr;return D.createElement(l.Provider,{value:i},e)}var BT=zT;function Ny(t=Vr){return function(){return D.useContext(t)}}var oN=Ny();function aN(t=Vr){const e=t===Vr?oN:Ny(t),n=()=>{const{store:s}=e();return s};return Object.assign(n,{withTypes:()=>n}),n}var lN=aN();function $T(t=Vr){const e=t===Vr?lN:aN(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var xs=$T(),VT=(t,e)=>t===e;function qT(t=Vr){const e=t===Vr?oN:Ny(t),n=(s,r={})=>{const{equalityFn:i=VT}=typeof r=="function"?{equalityFn:r}:r,a=e(),{store:l,subscription:u,getServerState:d}=a;D.useRef(!0);const f=D.useCallback({[s.name](h){return s(h)}}[s.name],[s]),p=TT.useSyncExternalStoreWithSelector(u.addNestedSub,l.getState,d||l.getState,f,i);return D.useDebugValue(p),p};return Object.assign(n,{withTypes:()=>n}),n}var Se=qT(),WT=iN;function Ct(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var HT=typeof Symbol=="function"&&Symbol.observable||"@@observable",Gx=HT,ep=()=>Math.random().toString(36).substring(7).split("").join("."),GT={INIT:`@@redux/INIT${ep()}`,REPLACE:`@@redux/REPLACE${ep()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ep()}`},Md=GT;function qr(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function cN(t,e,n){if(typeof t!="function")throw new Error(Ct(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ct(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ct(1));return n(cN)(t,e)}let s=t,r=e,i=new Map,a=i,l=0,u=!1;function d(){a===i&&(a=new Map,i.forEach((b,S)=>{a.set(S,b)}))}function f(){if(u)throw new Error(Ct(3));return r}function p(b){if(typeof b!="function")throw new Error(Ct(4));if(u)throw new Error(Ct(5));let S=!0;d();const E=l++;return a.set(E,b),function(){if(S){if(u)throw new Error(Ct(6));S=!1,d(),a.delete(E),i=null}}}function h(b){if(!qr(b))throw new Error(Ct(7));if(typeof b.type>"u")throw new Error(Ct(8));if(typeof b.type!="string")throw new Error(Ct(17));if(u)throw new Error(Ct(9));try{u=!0,r=s(r,b)}finally{u=!1}return(i=a).forEach(E=>{E()}),b}function _(b){if(typeof b!="function")throw new Error(Ct(10));s=b,h({type:Md.REPLACE})}function C(){const b=p;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Ct(11));function E(){const x=S;x.next&&x.next(f())}return E(),{unsubscribe:b(E)}},[Gx](){return this}}}return h({type:Md.INIT}),{dispatch:h,subscribe:p,getState:f,replaceReducer:_,[Gx]:C}}function QT(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Md.INIT})>"u")throw new Error(Ct(12));if(typeof n(void 0,{type:Md.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ct(13))})}function uN(t){const e=Object.keys(t),n={};for(let i=0;i<e.length;i++){const a=e[i];typeof t[a]=="function"&&(n[a]=t[a])}const s=Object.keys(n);let r;try{QT(n)}catch(i){r=i}return function(a={},l){if(r)throw r;let u=!1;const d={};for(let f=0;f<s.length;f++){const p=s[f],h=n[p],_=a[p],C=h(_,l);if(typeof C>"u")throw l&&l.type,new Error(Ct(14));d[p]=C,u=u||C!==_}return u=u||s.length!==Object.keys(a).length,u?d:a}}function Ud(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...s)=>e(n(...s)))}function KT(...t){return e=>(n,s)=>{const r=e(n,s);let i=()=>{throw new Error(Ct(15))};const a={getState:r.getState,dispatch:(u,...d)=>i(u,...d)},l=t.map(u=>u(a));return i=Ud(...l)(r.dispatch),{...r,dispatch:i}}}function dN(t){return qr(t)&&"type"in t&&typeof t.type=="string"}var Cy=Symbol.for("immer-nothing"),yl=Symbol.for("immer-draftable"),ln=Symbol.for("immer-state");function jt(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Bi=Object.getPrototypeOf;function vs(t){return!!t&&!!t[ln]}function ts(t){var e;return t?hN(t)||Array.isArray(t)||!!t[yl]||!!((e=t.constructor)!=null&&e[yl])||ga(t)||Nc(t):!1}var YT=Object.prototype.constructor.toString();function hN(t){if(!t||typeof t!="object")return!1;const e=Bi(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===YT}function JT(t){return vs(t)||jt(15,t),t[ln].base_}function Gl(t,e){$i(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,s)=>e(s,n,t))}function $i(t){const e=t[ln];return e?e.type_:Array.isArray(t)?1:ga(t)?2:Nc(t)?3:0}function Ql(t,e){return $i(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function tp(t,e){return $i(t)===2?t.get(e):t[e]}function fN(t,e,n){const s=$i(t);s===2?t.set(e,n):s===3?t.add(n):t[e]=n}function XT(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function ga(t){return t instanceof Map}function Nc(t){return t instanceof Set}function mi(t){return t.copy_||t.base_}function Dm(t,e){if(ga(t))return new Map(t);if(Nc(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=hN(t);if(e===!0||e==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(t);delete s[ln];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const a=r[i],l=s[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[a]})}return Object.create(Bi(t),s)}else{const s=Bi(t);if(s!==null&&n)return{...t};const r=Object.create(s);return Object.assign(r,t)}}function Ey(t,e=!1){return Lh(t)||vs(t)||!ts(t)||($i(t)>1&&Object.defineProperties(t,{set:{value:gu},add:{value:gu},clear:{value:gu},delete:{value:gu}}),Object.freeze(t),e&&Object.values(t).forEach(n=>Ey(n,!0))),t}function gu(){jt(2)}function Lh(t){return Object.isFrozen(t)}var Lm={};function Vi(t){const e=Lm[t];return e||jt(0,t),e}function ZT(t,e){Lm[t]||(Lm[t]=e)}var Kl;function pN(){return Kl}function eA(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Qx(t,e){e&&(Vi("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Mm(t){Um(t),t.drafts_.forEach(tA),t.drafts_=null}function Um(t){t===Kl&&(Kl=t.parent_)}function Kx(t){return Kl=eA(Kl,t)}function tA(t){const e=t[ln];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Yx(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ln].modified_&&(Mm(e),jt(4)),ts(t)&&(t=Fd(e,t),e.parent_||zd(e,t)),e.patches_&&Vi("Patches").generateReplacementPatches_(n[ln].base_,t,e.patches_,e.inversePatches_)):t=Fd(e,n,[]),Mm(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Cy?t:void 0}function Fd(t,e,n){if(Lh(e))return e;const s=e[ln];if(!s)return Gl(e,(r,i)=>Jx(t,s,e,r,i,n)),e;if(s.scope_!==t)return e;if(!s.modified_)return zd(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const r=s.copy_;let i=r,a=!1;s.type_===3&&(i=new Set(r),r.clear(),a=!0),Gl(i,(l,u)=>Jx(t,s,r,l,u,n,a)),zd(t,r,!1),n&&t.patches_&&Vi("Patches").generatePatches_(s,n,t.patches_,t.inversePatches_)}return s.copy_}function Jx(t,e,n,s,r,i,a){if(vs(r)){const l=i&&e&&e.type_!==3&&!Ql(e.assigned_,s)?i.concat(s):void 0,u=Fd(t,r,l);if(fN(n,s,u),vs(u))t.canAutoFreeze_=!1;else return}else a&&n.add(r);if(ts(r)&&!Lh(r)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Fd(t,r),(!e||!e.scope_.parent_)&&typeof s!="symbol"&&(ga(n)?n.has(s):Object.prototype.propertyIsEnumerable.call(n,s))&&zd(t,r)}}function zd(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Ey(e,n)}function nA(t,e){const n=Array.isArray(t),s={type_:n?1:0,scope_:e?e.scope_:pN(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,i=ky;n&&(r=[s],i=Yl);const{revoke:a,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=a,l}var ky={get(t,e){if(e===ln)return t;const n=mi(t);if(!Ql(n,e))return sA(t,n,e);const s=n[e];return t.finalized_||!ts(s)?s:s===np(t.base_,e)?(sp(t),t.copy_[e]=zm(s,t)):s},has(t,e){return e in mi(t)},ownKeys(t){return Reflect.ownKeys(mi(t))},set(t,e,n){const s=mN(mi(t),e);if(s!=null&&s.set)return s.set.call(t.draft_,n),!0;if(!t.modified_){const r=np(mi(t),e),i=r==null?void 0:r[ln];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(XT(n,r)&&(n!==void 0||Ql(t.base_,e)))return!0;sp(t),Fm(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return np(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,sp(t),Fm(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=mi(t),s=Reflect.getOwnPropertyDescriptor(n,e);return s&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:s.enumerable,value:n[e]}},defineProperty(){jt(11)},getPrototypeOf(t){return Bi(t.base_)},setPrototypeOf(){jt(12)}},Yl={};Gl(ky,(t,e)=>{Yl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Yl.deleteProperty=function(t,e){return Yl.set.call(this,t,e,void 0)};Yl.set=function(t,e,n){return ky.set.call(this,t[0],e,n,t[0])};function np(t,e){const n=t[ln];return(n?mi(n):t)[e]}function sA(t,e,n){var r;const s=mN(e,n);return s?"value"in s?s.value:(r=s.get)==null?void 0:r.call(t.draft_):void 0}function mN(t,e){if(!(e in t))return;let n=Bi(t);for(;n;){const s=Object.getOwnPropertyDescriptor(n,e);if(s)return s;n=Bi(n)}}function Fm(t){t.modified_||(t.modified_=!0,t.parent_&&Fm(t.parent_))}function sp(t){t.copy_||(t.copy_=Dm(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var rA=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,s)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const a=this;return function(u=i,...d){return a.produce(u,f=>n.call(this,f,...d))}}typeof n!="function"&&jt(6),s!==void 0&&typeof s!="function"&&jt(7);let r;if(ts(e)){const i=Kx(this),a=zm(e,void 0);let l=!0;try{r=n(a),l=!1}finally{l?Mm(i):Um(i)}return Qx(i,s),Yx(r,i)}else if(!e||typeof e!="object"){if(r=n(e),r===void 0&&(r=e),r===Cy&&(r=void 0),this.autoFreeze_&&Ey(r,!0),s){const i=[],a=[];Vi("Patches").generateReplacementPatches_(e,r,i,a),s(i,a)}return r}else jt(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,u=>e(u,...l));let s,r;return[this.produce(e,n,(a,l)=>{s=a,r=l}),s,r]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ts(t)||jt(8),vs(t)&&(t=iA(t));const e=Kx(this),n=zm(t,void 0);return n[ln].isManual_=!0,Um(e),n}finishDraft(t,e){const n=t&&t[ln];(!n||!n.isManual_)&&jt(9);const{scope_:s}=n;return Qx(s,e),Yx(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}n>-1&&(e=e.slice(n+1));const s=Vi("Patches").applyPatches_;return vs(t)?s(t,e):this.produce(t,r=>s(r,e))}};function zm(t,e){const n=ga(t)?Vi("MapSet").proxyMap_(t,e):Nc(t)?Vi("MapSet").proxySet_(t,e):nA(t,e);return(e?e.scope_:pN()).drafts_.push(n),n}function iA(t){return vs(t)||jt(10,t),gN(t)}function gN(t){if(!ts(t)||Lh(t))return t;const e=t[ln];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Dm(t,e.scope_.immer_.useStrictShallowCopy_)}else n=Dm(t,!0);return Gl(n,(s,r)=>{fN(n,s,gN(r))}),e&&(e.finalized_=!1),n}function oA(){const e="replace",n="add",s="remove";function r(h,_,C,j){switch(h.type_){case 0:case 2:return a(h,_,C,j);case 1:return i(h,_,C,j);case 3:return l(h,_,C,j)}}function i(h,_,C,j){let{base_:b,assigned_:S}=h,E=h.copy_;E.length<b.length&&([b,E]=[E,b],[C,j]=[j,C]);for(let y=0;y<b.length;y++)if(S[y]&&E[y]!==b[y]){const x=_.concat([y]);C.push({op:e,path:x,value:p(E[y])}),j.push({op:e,path:x,value:p(b[y])})}for(let y=b.length;y<E.length;y++){const x=_.concat([y]);C.push({op:n,path:x,value:p(E[y])})}for(let y=E.length-1;b.length<=y;--y){const x=_.concat([y]);j.push({op:s,path:x})}}function a(h,_,C,j){const{base_:b,copy_:S}=h;Gl(h.assigned_,(E,y)=>{const x=tp(b,E),P=tp(S,E),O=y?Ql(b,E)?e:n:s;if(x===P&&O===e)return;const v=_.concat(E);C.push(O===s?{op:O,path:v}:{op:O,path:v,value:P}),j.push(O===n?{op:s,path:v}:O===s?{op:n,path:v,value:p(x)}:{op:e,path:v,value:p(x)})})}function l(h,_,C,j){let{base_:b,copy_:S}=h,E=0;b.forEach(y=>{if(!S.has(y)){const x=_.concat([E]);C.push({op:s,path:x,value:y}),j.unshift({op:n,path:x,value:y})}E++}),E=0,S.forEach(y=>{if(!b.has(y)){const x=_.concat([E]);C.push({op:n,path:x,value:y}),j.unshift({op:s,path:x,value:y})}E++})}function u(h,_,C,j){C.push({op:e,path:[],value:_===Cy?void 0:_}),j.push({op:e,path:[],value:h})}function d(h,_){return _.forEach(C=>{const{path:j,op:b}=C;let S=h;for(let P=0;P<j.length-1;P++){const O=$i(S);let v=j[P];typeof v!="string"&&typeof v!="number"&&(v=""+v),(O===0||O===1)&&(v==="__proto__"||v==="constructor")&&jt(19),typeof S=="function"&&v==="prototype"&&jt(19),S=tp(S,v),typeof S!="object"&&jt(18,j.join("/"))}const E=$i(S),y=f(C.value),x=j[j.length-1];switch(b){case e:switch(E){case 2:return S.set(x,y);case 3:jt(16);default:return S[x]=y}case n:switch(E){case 1:return x==="-"?S.push(y):S.splice(x,0,y);case 2:return S.set(x,y);case 3:return S.add(y);default:return S[x]=y}case s:switch(E){case 1:return S.splice(x,1);case 2:return S.delete(x);case 3:return S.delete(C.value);default:return delete S[x]}default:jt(17,b)}}),h}function f(h){if(!ts(h))return h;if(Array.isArray(h))return h.map(f);if(ga(h))return new Map(Array.from(h.entries()).map(([C,j])=>[C,f(j)]));if(Nc(h))return new Set(Array.from(h).map(f));const _=Object.create(Bi(h));for(const C in h)_[C]=f(h[C]);return Ql(h,yl)&&(_[yl]=h[yl]),_}function p(h){return vs(h)?f(h):h}ZT("Patches",{applyPatches_:d,generatePatches_:r,generateReplacementPatches_:u})}var Jl=new rA,Cc=Jl.produce,yN=Jl.produceWithPatches.bind(Jl),Xx=Jl.applyPatches.bind(Jl);function aA(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function lA(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function cA(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${e}[${n}]`)}}var Zx=t=>Array.isArray(t)?t:[t];function uA(t){const e=Array.isArray(t[0])?t[0]:t;return cA(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function dA(t,e){const n=[],{length:s}=t;for(let r=0;r<s;r++)n.push(t[r].apply(null,e));return n}var hA=class{constructor(t){this.value=t}deref(){return this.value}},fA=typeof WeakRef<"u"?WeakRef:hA,pA=0,e0=1;function yu(){return{s:pA,v:void 0,o:null,p:null}}function Bd(t,e={}){let n=yu();const{resultEqualityCheck:s}=e;let r,i=0;function a(){var p;let l=n;const{length:u}=arguments;for(let h=0,_=u;h<_;h++){const C=arguments[h];if(typeof C=="function"||typeof C=="object"&&C!==null){let j=l.o;j===null&&(l.o=j=new WeakMap);const b=j.get(C);b===void 0?(l=yu(),j.set(C,l)):l=b}else{let j=l.p;j===null&&(l.p=j=new Map);const b=j.get(C);b===void 0?(l=yu(),j.set(C,l)):l=b}}const d=l;let f;if(l.s===e0)f=l.v;else if(f=t.apply(null,arguments),i++,s){const h=((p=r==null?void 0:r.deref)==null?void 0:p.call(r))??r;h!=null&&s(h,f)&&(f=h,i!==0&&i--),r=typeof f=="object"&&f!==null||typeof f=="function"?new fA(f):f}return d.s=e0,d.v=f,f}return a.clearCache=()=>{n=yu(),a.resetResultsCount()},a.resultsCount=()=>i,a.resetResultsCount=()=>{i=0},a}function mA(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,s=(...r)=>{let i=0,a=0,l,u={},d=r.pop();typeof d=="object"&&(u=d,d=r.pop()),aA(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...n,...u},{memoize:p,memoizeOptions:h=[],argsMemoize:_=Bd,argsMemoizeOptions:C=[]}=f,j=Zx(h),b=Zx(C),S=uA(r),E=p(function(){return i++,d.apply(null,arguments)},...j),y=_(function(){a++;const P=dA(S,arguments);return l=E.apply(null,P),l},...b);return Object.assign(y,{resultFunc:d,memoizedResultFunc:E,dependencies:S,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:_})};return Object.assign(s,{withTypes:()=>s}),s}var jy=mA(Bd),gA=Object.assign((t,e=jy)=>{lA(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),s=n.map(i=>t[i]);return e(s,(...i)=>i.reduce((a,l,u)=>(a[n[u]]=l,a),{}))},{withTypes:()=>gA});function vN(t){return({dispatch:n,getState:s})=>r=>i=>typeof i=="function"?i(n,s,t):r(i)}var yA=vN(),vA=vN,_A=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ud:Ud.apply(null,arguments)},xA=t=>t&&typeof t.match=="function";function Jn(t,e){function n(...s){if(e){let r=e(...s);if(!r)throw new Error(Xn(0));return{type:t,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:t,payload:s[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=s=>dN(s)&&s.type===t,n}var _N=class rl extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,rl.prototype)}static get[Symbol.species](){return rl}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new rl(...e[0].concat(this)):new rl(...e.concat(this))}};function t0(t){return ts(t)?Cc(t,()=>{}):t}function vu(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function wA(t){return typeof t=="boolean"}var SA=()=>function(e){const{thunk:n=!0,immutableCheck:s=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=e??{};let a=new _N;return n&&(wA(n)?a.push(yA):a.push(vA(n.extraArgument))),a},Mh="RTK_autoBatch",qa=()=>t=>({payload:t,meta:{[Mh]:!0}}),n0=t=>e=>{setTimeout(e,t)},bA=(t={type:"raf"})=>e=>(...n)=>{const s=e(...n);let r=!0,i=!1,a=!1;const l=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:n0(10):t.type==="callback"?t.queueNotification:n0(t.timeout),d=()=>{a=!1,i&&(i=!1,l.forEach(f=>f()))};return Object.assign({},s,{subscribe(f){const p=()=>r&&f(),h=s.subscribe(p);return l.add(f),()=>{h(),l.delete(f)}},dispatch(f){var p;try{return r=!((p=f==null?void 0:f.meta)!=null&&p[Mh]),i=!r,i&&(a||(a=!0,u(d))),s.dispatch(f)}finally{r=!0}}})},NA=t=>function(n){const{autoBatch:s=!0}=n??{};let r=new _N(t);return s&&r.push(bA(typeof s=="object"?s:void 0)),r};function CA(t){const e=SA(),{reducer:n=void 0,middleware:s,devTools:r=!0,preloadedState:i=void 0,enhancers:a=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(qr(n))l=uN(n);else throw new Error(Xn(1));let u;typeof s=="function"?u=s(e):u=e();let d=Ud;r&&(d=_A({trace:!1,...typeof r=="object"&&r}));const f=KT(...u),p=NA(f);let h=typeof a=="function"?a(p):p();const _=d(...h);return cN(l,i,_)}function xN(t){const e={},n=[];let s;const r={addCase(i,a){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Xn(28));if(l in e)throw new Error(Xn(29));return e[l]=a,r},addAsyncThunk(i,a){return a.pending&&(e[i.pending.type]=a.pending),a.rejected&&(e[i.rejected.type]=a.rejected),a.fulfilled&&(e[i.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:i.settled,reducer:a.settled}),r},addMatcher(i,a){return n.push({matcher:i,reducer:a}),r},addDefaultCase(i){return s=i,r}};return t(r),[e,n,s]}function EA(t){return typeof t=="function"}function kA(t,e){let[n,s,r]=xN(e),i;if(EA(t))i=()=>t0(t());else{const l=t0(t);i=()=>l}function a(l=i(),u){let d=[n[u.type],...s.filter(({matcher:f})=>f(u)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[r]),d.reduce((f,p)=>{if(p)if(vs(f)){const _=p(f,u);return _===void 0?f:_}else{if(ts(f))return Cc(f,h=>p(h,u));{const h=p(f,u);if(h===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return f},l)}return a.getInitialState=i,a}var wN=(t,e)=>xA(t)?t.match(e):t(e);function Js(...t){return e=>t.some(n=>wN(n,e))}function vl(...t){return e=>t.every(n=>wN(n,e))}function Uh(t,e){if(!t||!t.meta)return!1;const n=typeof t.meta.requestId=="string",s=e.indexOf(t.meta.requestStatus)>-1;return n&&s}function Ec(t){return typeof t[0]=="function"&&"pending"in t[0]&&"fulfilled"in t[0]&&"rejected"in t[0]}function Iy(...t){return t.length===0?e=>Uh(e,["pending"]):Ec(t)?Js(...t.map(e=>e.pending)):Iy()(t[0])}function na(...t){return t.length===0?e=>Uh(e,["rejected"]):Ec(t)?Js(...t.map(e=>e.rejected)):na()(t[0])}function Fh(...t){const e=n=>n&&n.meta&&n.meta.rejectedWithValue;return t.length===0?vl(na(...t),e):Ec(t)?vl(na(...t),e):Fh()(t[0])}function Wr(...t){return t.length===0?e=>Uh(e,["fulfilled"]):Ec(t)?Js(...t.map(e=>e.fulfilled)):Wr()(t[0])}function Bm(...t){return t.length===0?e=>Uh(e,["pending","fulfilled","rejected"]):Ec(t)?Js(...t.flatMap(e=>[e.pending,e.rejected,e.fulfilled])):Bm()(t[0])}var jA="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Ty=(t=21)=>{let e="",n=t;for(;n--;)e+=jA[Math.random()*64|0];return e},IA=["name","message","stack","code"],rp=class{constructor(t,e){ho(this,"_type");this.payload=t,this.meta=e}},s0=class{constructor(t,e){ho(this,"_type");this.payload=t,this.meta=e}},TA=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of IA)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},r0="External signal was aborted",i0=(()=>{function t(e,n,s){const r=Jn(e+"/fulfilled",(u,d,f,p)=>({payload:u,meta:{...p||{},arg:f,requestId:d,requestStatus:"fulfilled"}})),i=Jn(e+"/pending",(u,d,f)=>({payload:void 0,meta:{...f||{},arg:d,requestId:u,requestStatus:"pending"}})),a=Jn(e+"/rejected",(u,d,f,p,h)=>({payload:p,error:(s&&s.serializeError||TA)(u||"Rejected"),meta:{...h||{},arg:f,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"}}));function l(u,{signal:d}={}){return(f,p,h)=>{const _=s!=null&&s.idGenerator?s.idGenerator(u):Ty(),C=new AbortController;let j,b;function S(y){b=y,C.abort()}d&&(d.aborted?S(r0):d.addEventListener("abort",()=>S(r0),{once:!0}));const E=async function(){var P,O;let y;try{let v=(P=s==null?void 0:s.condition)==null?void 0:P.call(s,u,{getState:p,extra:h});if(PA(v)&&(v=await v),v===!1||C.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const g=new Promise((N,w)=>{j=()=>{w({name:"AbortError",message:b||"Aborted"})},C.signal.addEventListener("abort",j)});f(i(_,u,(O=s==null?void 0:s.getPendingMeta)==null?void 0:O.call(s,{requestId:_,arg:u},{getState:p,extra:h}))),y=await Promise.race([g,Promise.resolve(n(u,{dispatch:f,getState:p,extra:h,requestId:_,signal:C.signal,abort:S,rejectWithValue:(N,w)=>new rp(N,w),fulfillWithValue:(N,w)=>new s0(N,w)})).then(N=>{if(N instanceof rp)throw N;return N instanceof s0?r(N.payload,_,u,N.meta):r(N,_,u)})])}catch(v){y=v instanceof rp?a(null,_,u,v.payload,v.meta):a(v,_,u)}finally{j&&C.signal.removeEventListener("abort",j)}return s&&!s.dispatchConditionRejection&&a.match(y)&&y.meta.condition||f(y),y}();return Object.assign(E,{abort:S,requestId:_,arg:u,unwrap(){return E.then(AA)}})}}return Object.assign(l,{pending:i,rejected:a,fulfilled:r,settled:Js(a,r),typePrefix:e})}return t.withTypes=()=>t,t})();function AA(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function PA(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var RA=Symbol.for("rtk-slice-createasyncthunk");function OA(t,e){return`${t}/${e}`}function DA({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[RA];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(Xn(11));const l=(typeof r.reducers=="function"?r.reducers(MA()):r.reducers)||{},u=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(x,P){const O=typeof x=="string"?x:x.type;if(!O)throw new Error(Xn(12));if(O in d.sliceCaseReducersByType)throw new Error(Xn(13));return d.sliceCaseReducersByType[O]=P,f},addMatcher(x,P){return d.sliceMatchers.push({matcher:x,reducer:P}),f},exposeAction(x,P){return d.actionCreators[x]=P,f},exposeCaseReducer(x,P){return d.sliceCaseReducersByName[x]=P,f}};u.forEach(x=>{const P=l[x],O={reducerName:x,type:OA(i,x),createNotation:typeof r.reducers=="function"};FA(P)?BA(O,P,f,e):UA(O,P,f)});function p(){const[x={},P=[],O=void 0]=typeof r.extraReducers=="function"?xN(r.extraReducers):[r.extraReducers],v={...x,...d.sliceCaseReducersByType};return kA(r.initialState,g=>{for(let N in v)g.addCase(N,v[N]);for(let N of d.sliceMatchers)g.addMatcher(N.matcher,N.reducer);for(let N of P)g.addMatcher(N.matcher,N.reducer);O&&g.addDefaultCase(O)})}const h=x=>x,_=new Map,C=new WeakMap;let j;function b(x,P){return j||(j=p()),j(x,P)}function S(){return j||(j=p()),j.getInitialState()}function E(x,P=!1){function O(g){let N=g[x];return typeof N>"u"&&P&&(N=vu(C,O,S)),N}function v(g=h){const N=vu(_,P,()=>new WeakMap);return vu(N,g,()=>{const w={};for(const[A,T]of Object.entries(r.selectors??{}))w[A]=LA(T,g,()=>vu(C,g,S),P);return w})}return{reducerPath:x,getSelectors:v,get selectors(){return v(O)},selectSlice:O}}const y={name:i,reducer:b,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:S,...E(a),injectInto(x,{reducerPath:P,...O}={}){const v=P??a;return x.inject({reducerPath:v,reducer:b},O),{...y,...E(v,!0)}}};return y}}function LA(t,e,n,s){function r(i,...a){let l=e(i);return typeof l>"u"&&s&&(l=n()),t(l,...a)}return r.unwrapped=t,r}var Ms=DA();function MA(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function UA({type:t,reducerName:e,createNotation:n},s,r){let i,a;if("reducer"in s){if(n&&!zA(s))throw new Error(Xn(17));i=s.reducer,a=s.prepare}else i=s;r.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,a?Jn(t,a):Jn(t))}function FA(t){return t._reducerDefinitionType==="asyncThunk"}function zA(t){return t._reducerDefinitionType==="reducerWithPrepare"}function BA({type:t,reducerName:e},n,s,r){if(!r)throw new Error(Xn(18));const{payloadCreator:i,fulfilled:a,pending:l,rejected:u,settled:d,options:f}=n,p=r(t,i,f);s.exposeAction(e,p),a&&s.addCase(p.fulfilled,a),l&&s.addCase(p.pending,l),u&&s.addCase(p.rejected,u),d&&s.addMatcher(p.settled,d),s.exposeCaseReducer(e,{fulfilled:a||_u,pending:l||_u,rejected:u||_u,settled:d||_u})}function _u(){}function Xn(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var $A=class extends Error{constructor(e){super(e[0].message);ho(this,"issues");this.name="SchemaError",this.issues=e}},SN=(t=>(t.uninitialized="uninitialized",t.pending="pending",t.fulfilled="fulfilled",t.rejected="rejected",t))(SN||{});function o0(t){return{status:t,isUninitialized:t==="uninitialized",isLoading:t==="pending",isSuccess:t==="fulfilled",isError:t==="rejected"}}var a0=qr;function Ay(t,e){if(t===e||!(a0(t)&&a0(e)||Array.isArray(t)&&Array.isArray(e)))return e;const n=Object.keys(e),s=Object.keys(t);let r=n.length===s.length;const i=Array.isArray(e)?[]:{};for(const a of n)i[a]=Ay(t[a],e[a]),r&&(r=t[a]===i[a]);return r?t:i}function ip(t){let e=0;for(const n in t)e++;return e}var l0=t=>[].concat(...t);function VA(t){return new RegExp("(^|:)//").test(t)}function qA(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function $d(t){return t!=null}function WA(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var HA=t=>t.replace(/\/$/,""),GA=t=>t.replace(/^\//,"");function QA(t,e){if(!t)return e;if(!e)return t;if(VA(e))return e;const n=t.endsWith("/")||!e.startsWith("?")?"/":"";return t=HA(t),e=GA(e),`${t}${n}${e}`}function KA(t,e,n){return t.has(e)?t.get(e):t.set(e,n).get(e)}function $m(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}var Vm=()=>new Map,c0=(...t)=>fetch(...t),YA=t=>t.status>=200&&t.status<=299,JA=t=>/ion\/(vnd\.api\+)?json/.test(t.get("content-type")||"");function u0(t){if(!qr(t))return t;const e={...t};for(const[n,s]of Object.entries(e))s===void 0&&delete e[n];return e}function ws({baseUrl:t,prepareHeaders:e=p=>p,fetchFn:n=c0,paramsSerializer:s,isJsonContentType:r=JA,jsonContentType:i="application/json",jsonReplacer:a,timeout:l,responseHandler:u,validateStatus:d,...f}={}){return typeof fetch>"u"&&n===c0&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(h,_,C)=>{const{getState:j,extra:b,endpoint:S,forced:E,type:y}=_;let x,{url:P,headers:O=new Headers(f.headers),params:v=void 0,responseHandler:g=u??"json",validateStatus:N=d??YA,timeout:w=l,...A}=typeof h=="string"?{url:h}:h,T,I=_.signal;w&&(T=new AbortController,_.signal.addEventListener("abort",T.abort),I=T.signal);let L={...f,signal:I,...A};O=new Headers(u0(O)),L.headers=await e(O,{getState:j,arg:h,extra:b,endpoint:S,forced:E,type:y,extraOptions:C})||O;const V=Q=>typeof Q=="object"&&(qr(Q)||Array.isArray(Q)||typeof Q.toJSON=="function");if(!L.headers.has("content-type")&&V(L.body)&&L.headers.set("content-type",i),V(L.body)&&r(L.headers)&&(L.body=JSON.stringify(L.body,a)),v){const Q=~P.indexOf("?")?"&":"?",G=s?s(v):new URLSearchParams(u0(v));P+=Q+G}P=QA(t,P);const M=new Request(P,L);x={request:new Request(P,L)};let F,B=!1,q=T&&setTimeout(()=>{B=!0,T.abort()},w);try{F=await n(M)}catch(Q){return{error:{status:B?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(Q)},meta:x}}finally{q&&clearTimeout(q),T==null||T.signal.removeEventListener("abort",T.abort)}const Y=F.clone();x.response=Y;let ee,z="";try{let Q;if(await Promise.all([p(F,g).then(G=>ee=G,G=>Q=G),Y.text().then(G=>z=G,()=>{})]),Q)throw Q}catch(Q){return{error:{status:"PARSING_ERROR",originalStatus:F.status,data:z,error:String(Q)},meta:x}}return N(F,ee)?{data:ee,meta:x}:{error:{status:F.status,data:ee},meta:x}};async function p(h,_){if(typeof _=="function")return _(h);if(_==="content-type"&&(_=r(h.headers)?"json":"text"),_==="json"){const C=await h.text();return C.length?JSON.parse(C):null}return h.text()}}var d0=class{constructor(t,e=void 0){this.value=t,this.meta=e}},zh=Jn("__rtkq/focused"),Py=Jn("__rtkq/unfocused"),Bh=Jn("__rtkq/online"),Ry=Jn("__rtkq/offline"),op=!1;function XA(t,e){function n(){const s=()=>t(zh()),r=()=>t(Py()),i=()=>t(Bh()),a=()=>t(Ry()),l=()=>{window.document.visibilityState==="visible"?s():r()};return op||typeof window<"u"&&window.addEventListener&&(window.addEventListener("visibilitychange",l,!1),window.addEventListener("focus",s,!1),window.addEventListener("online",i,!1),window.addEventListener("offline",a,!1),op=!0),()=>{window.removeEventListener("focus",s),window.removeEventListener("visibilitychange",l),window.removeEventListener("online",i),window.removeEventListener("offline",a),op=!1}}return n()}function $h(t){return t.type==="query"}function ZA(t){return t.type==="mutation"}function Vh(t){return t.type==="infinitequery"}function Vd(t){return $h(t)||Vh(t)}function Oy(t,e,n,s,r,i){return eP(t)?t(e,n,s,r).filter($d).map(qm).map(i):Array.isArray(t)?t.map(qm).map(i):[]}function eP(t){return typeof t=="function"}function qm(t){return typeof t=="string"?{type:t}:t}function tP(t,e){return t.catch(e)}var Xl=Symbol("forceQueryFn"),Wm=t=>typeof t[Xl]=="function";function nP({serializeQueryArgs:t,queryThunk:e,infiniteQueryThunk:n,mutationThunk:s,api:r,context:i,internalState:a}){const{runningQueries:l,runningMutations:u}=a,{unsubscribeQueryResult:d,removeMutationResult:f,updateSubscriptionOptions:p}=r.internalActions;return{buildInitiateQuery:S,buildInitiateInfiniteQuery:E,buildInitiateMutation:y,getRunningQueryThunk:h,getRunningMutationThunk:_,getRunningQueriesThunk:C,getRunningMutationsThunk:j};function h(x,P){return O=>{var N;const v=i.endpointDefinitions[x],g=t({queryArgs:P,endpointDefinition:v,endpointName:x});return(N=l.get(O))==null?void 0:N[g]}}function _(x,P){return O=>{var v;return(v=u.get(O))==null?void 0:v[P]}}function C(){return x=>Object.values(l.get(x)||{}).filter($d)}function j(){return x=>Object.values(u.get(x)||{}).filter($d)}function b(x,P){const O=(v,{subscribe:g=!0,forceRefetch:N,subscriptionOptions:w,[Xl]:A,...T}={})=>(I,L)=>{var K;const V=t({queryArgs:v,endpointDefinition:P,endpointName:x});let M;const U={...T,type:"query",subscribe:g,forceRefetch:N,subscriptionOptions:w,endpointName:x,originalArgs:v,queryCacheKey:V,[Xl]:A};if($h(P))M=e(U);else{const{direction:ne,initialPageParam:oe}=T;M=n({...U,direction:ne,initialPageParam:oe})}const F=r.endpoints[x].select(v),B=I(M),q=F(L()),{requestId:Y,abort:ee}=B,z=q.requestId!==Y,Q=(K=l.get(I))==null?void 0:K[V],G=()=>F(L()),W=Object.assign(A?B.then(G):z&&!Q?Promise.resolve(q):Promise.all([Q,B]).then(G),{arg:v,requestId:Y,subscriptionOptions:w,queryCacheKey:V,abort:ee,async unwrap(){const ne=await W;if(ne.isError)throw ne.error;return ne.data},refetch:()=>I(O(v,{subscribe:!1,forceRefetch:!0})),unsubscribe(){g&&I(d({queryCacheKey:V,requestId:Y}))},updateSubscriptionOptions(ne){W.subscriptionOptions=ne,I(p({endpointName:x,requestId:Y,queryCacheKey:V,options:ne}))}});if(!Q&&!z&&!A){const ne=KA(l,I,{});ne[V]=W,W.then(()=>{delete ne[V],ip(ne)||l.delete(I)})}return W};return O}function S(x,P){return b(x,P)}function E(x,P){return b(x,P)}function y(x){return(P,{track:O=!0,fixedCacheKey:v}={})=>(g,N)=>{const w=s({type:"mutation",endpointName:x,originalArgs:P,track:O,fixedCacheKey:v}),A=g(w),{requestId:T,abort:I,unwrap:L}=A,V=tP(A.unwrap().then(B=>({data:B})),B=>({error:B})),M=()=>{g(f({requestId:T,fixedCacheKey:v}))},U=Object.assign(V,{arg:A.arg,requestId:T,abort:I,unwrap:L,reset:M}),F=u.get(g)||{};return u.set(g,F),F[T]=U,U.then(()=>{delete F[T],ip(F)||u.delete(g)}),v&&(F[v]=U,U.then(()=>{F[v]===U&&(delete F[v],ip(F)||u.delete(g))})),U}}}var bN=class extends $A{constructor(t,e,n,s){super(t),this.value=e,this.schemaName=n,this._bqMeta=s}},ui=(t,e)=>Array.isArray(t)?t.includes(e):!!t;async function di(t,e,n,s){const r=await t["~standard"].validate(e);if(r.issues)throw new bN(r.issues,e,n,s);return r.value}function h0(t){return t}var Wa=(t={})=>({...t,[Mh]:!0});function sP({reducerPath:t,baseQuery:e,context:{endpointDefinitions:n},serializeQueryArgs:s,api:r,assertTagType:i,selectors:a,onSchemaFailure:l,catchSchemaFailure:u,skipSchemaValidation:d}){const f=(A,T,I,L)=>(V,M)=>{const U=n[A],F=s({queryArgs:T,endpointDefinition:U,endpointName:A});if(V(r.internalActions.queryResultPatched({queryCacheKey:F,patches:I})),!L)return;const B=r.endpoints[A].select(T)(M()),q=Oy(U.providesTags,B.data,void 0,T,{},i);V(r.internalActions.updateProvidedBy([{queryCacheKey:F,providedTags:q}]))};function p(A,T,I=0){const L=[T,...A];return I&&L.length>I?L.slice(0,-1):L}function h(A,T,I=0){const L=[...A,T];return I&&L.length>I?L.slice(1):L}const _=(A,T,I,L=!0)=>(V,M)=>{const F=r.endpoints[A].select(T)(M()),B={patches:[],inversePatches:[],undo:()=>V(r.util.patchQueryData(A,T,B.inversePatches,L))};if(F.status==="uninitialized")return B;let q;if("data"in F)if(ts(F.data)){const[Y,ee,z]=yN(F.data,I);B.patches.push(...ee),B.inversePatches.push(...z),q=Y}else q=I(F.data),B.patches.push({op:"replace",path:[],value:q}),B.inversePatches.push({op:"replace",path:[],value:F.data});return B.patches.length===0||V(r.util.patchQueryData(A,T,B.patches,L)),B},C=(A,T,I)=>L=>L(r.endpoints[A].initiate(T,{subscribe:!1,forceRefetch:!0,[Xl]:()=>({data:I})})),j=(A,T)=>A.query&&A[T]?A[T]:h0,b=async(A,{signal:T,abort:I,rejectWithValue:L,fulfillWithValue:V,dispatch:M,getState:U,extra:F})=>{var ee,z;const B=n[A.endpointName],{metaSchema:q,skipSchemaValidation:Y=d}=B;try{let Q=h0;const G={signal:T,abort:I,dispatch:M,getState:U,extra:F,endpoint:A.endpointName,type:A.type,forced:A.type==="query"?S(A,U()):void 0,queryCacheKey:A.type==="query"?A.queryCacheKey:void 0},W=A.type==="query"?A[Xl]:void 0;let K;const ne=async(ae,de,Ce,St)=>{if(de==null&&ae.pages.length)return Promise.resolve({data:ae});const Ie={queryArg:A.originalArgs,pageParam:de},mt=await oe(Ie),re=St?p:h;return{data:{pages:re(ae.pages,mt.data,Ce),pageParams:re(ae.pageParams,de,Ce)},meta:mt.meta}};async function oe(ae){let de;const{extraOptions:Ce,argSchema:St,rawResponseSchema:Ie,responseSchema:mt}=B;if(St&&!ui(Y,"arg")&&(ae=await di(St,ae,"argSchema",{})),W?de=W():B.query?(Q=j(B,"transformResponse"),de=await e(B.query(ae),G,Ce)):de=await B.queryFn(ae,G,Ce,pe=>e(pe,G,Ce)),typeof process<"u",de.error)throw new d0(de.error,de.meta);let{data:re}=de;Ie&&!ui(Y,"rawResponse")&&(re=await di(Ie,de.data,"rawResponseSchema",de.meta));let fe=await Q(re,de.meta,ae);return mt&&!ui(Y,"response")&&(fe=await di(mt,fe,"responseSchema",de.meta)),{...de,data:fe}}if(A.type==="query"&&"infiniteQueryOptions"in B){const{infiniteQueryOptions:ae}=B,{maxPages:de=1/0}=ae;let Ce;const St={pages:[],pageParams:[]},Ie=(ee=a.selectQueryEntry(U(),A.queryCacheKey))==null?void 0:ee.data,re=S(A,U())&&!A.direction||!Ie?St:Ie;if("direction"in A&&A.direction&&re.pages.length){const fe=A.direction==="backward",zt=(fe?NN:Hm)(ae,re,A.originalArgs);Ce=await ne(re,zt,de,fe)}else{const{initialPageParam:fe=ae.initialPageParam}=A,pe=(Ie==null?void 0:Ie.pageParams)??[],zt=pe[0]??fe,Kt=pe.length;Ce=await ne(re,zt,de),W&&(Ce={data:Ce.data.pages[0]});for(let Yt=1;Yt<Kt;Yt++){const Es=Hm(ae,Ce.data,A.originalArgs);Ce=await ne(Ce.data,Es,de)}}K=Ce}else K=await oe(A.originalArgs);return q&&!ui(Y,"meta")&&K.meta&&(K.meta=await di(q,K.meta,"metaSchema",K.meta)),V(K.data,Wa({fulfilledTimeStamp:Date.now(),baseQueryMeta:K.meta}))}catch(Q){let G=Q;if(G instanceof d0){let W=j(B,"transformErrorResponse");const{rawErrorResponseSchema:K,errorResponseSchema:ne}=B;let{value:oe,meta:ae}=G;try{K&&!ui(Y,"rawErrorResponse")&&(oe=await di(K,oe,"rawErrorResponseSchema",ae)),q&&!ui(Y,"meta")&&(ae=await di(q,ae,"metaSchema",ae));let de=await W(oe,ae,A.originalArgs);return ne&&!ui(Y,"errorResponse")&&(de=await di(ne,de,"errorResponseSchema",ae)),L(de,Wa({baseQueryMeta:ae}))}catch(de){G=de}}try{if(G instanceof bN){const W={endpoint:A.endpointName,arg:A.originalArgs,type:A.type,queryCacheKey:A.type==="query"?A.queryCacheKey:void 0};(z=B.onSchemaFailure)==null||z.call(B,G,W),l==null||l(G,W);const{catchSchemaFailure:K=u}=B;if(K)return L(K(G,W),Wa({baseQueryMeta:G._bqMeta}))}}catch(W){G=W}throw console.error(G),G}};function S(A,T){const I=a.selectQueryEntry(T,A.queryCacheKey),L=a.selectConfig(T).refetchOnMountOrArgChange,V=I==null?void 0:I.fulfilledTimeStamp,M=A.forceRefetch??(A.subscribe&&L);return M?M===!0||(Number(new Date)-Number(V))/1e3>=M:!1}const E=()=>i0(`${t}/executeQuery`,b,{getPendingMeta({arg:T}){const I=n[T.endpointName];return Wa({startedTimeStamp:Date.now(),...Vh(I)?{direction:T.direction}:{}})},condition(T,{getState:I}){var Y;const L=I(),V=a.selectQueryEntry(L,T.queryCacheKey),M=V==null?void 0:V.fulfilledTimeStamp,U=T.originalArgs,F=V==null?void 0:V.originalArgs,B=n[T.endpointName],q=T.direction;return Wm(T)?!0:(V==null?void 0:V.status)==="pending"?!1:S(T,L)||$h(B)&&((Y=B==null?void 0:B.forceRefetch)!=null&&Y.call(B,{currentArg:U,previousArg:F,endpointState:V,state:L}))?!0:!(M&&!q)},dispatchConditionRejection:!0}),y=E(),x=E(),P=i0(`${t}/executeMutation`,b,{getPendingMeta(){return Wa({startedTimeStamp:Date.now()})}}),O=A=>"force"in A,v=A=>"ifOlderThan"in A,g=(A,T,I)=>(L,V)=>{const M=O(I)&&I.force,U=v(I)&&I.ifOlderThan,F=(q=!0)=>{const Y={forceRefetch:q,isPrefetch:!0};return r.endpoints[A].initiate(T,Y)},B=r.endpoints[A].select(T)(V());if(M)L(F());else if(U){const q=B==null?void 0:B.fulfilledTimeStamp;if(!q){L(F());return}(Number(new Date)-Number(new Date(q)))/1e3>=U&&L(F())}else L(F(!1))};function N(A){return T=>{var I,L;return((L=(I=T==null?void 0:T.meta)==null?void 0:I.arg)==null?void 0:L.endpointName)===A}}function w(A,T){return{matchPending:vl(Iy(A),N(T)),matchFulfilled:vl(Wr(A),N(T)),matchRejected:vl(na(A),N(T))}}return{queryThunk:y,mutationThunk:P,infiniteQueryThunk:x,prefetch:g,updateQueryData:_,upsertQueryData:C,patchQueryData:f,buildMatchThunkActions:w}}function Hm(t,{pages:e,pageParams:n},s){const r=e.length-1;return t.getNextPageParam(e[r],e,n[r],n,s)}function NN(t,{pages:e,pageParams:n},s){var r;return(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n,s)}function CN(t,e,n,s){return Oy(n[t.meta.arg.endpointName][e],Wr(t)?t.payload:void 0,Fh(t)?t.payload:void 0,t.meta.arg.originalArgs,"baseQueryMeta"in t.meta?t.meta.baseQueryMeta:void 0,s)}function xu(t,e,n){const s=t[e];s&&n(s)}function Zl(t){return("arg"in t?t.arg.fixedCacheKey:t.fixedCacheKey)??t.requestId}function f0(t,e,n){const s=t[Zl(e)];s&&n(s)}var wu={};function rP({reducerPath:t,queryThunk:e,mutationThunk:n,serializeQueryArgs:s,context:{endpointDefinitions:r,apiUid:i,extractRehydrationInfo:a,hasRehydrationInfo:l},assertTagType:u,config:d}){const f=Jn(`${t}/resetApiState`);function p(N,w,A,T){var I;N[I=w.queryCacheKey]??(N[I]={status:"uninitialized",endpointName:w.endpointName}),xu(N,w.queryCacheKey,L=>{L.status="pending",L.requestId=A&&L.requestId?L.requestId:T.requestId,w.originalArgs!==void 0&&(L.originalArgs=w.originalArgs),L.startedTimeStamp=T.startedTimeStamp;const V=r[T.arg.endpointName];Vh(V)&&"direction"in w&&(L.direction=w.direction)})}function h(N,w,A,T){xu(N,w.arg.queryCacheKey,I=>{if(I.requestId!==w.requestId&&!T)return;const{merge:L}=r[w.arg.endpointName];if(I.status="fulfilled",L)if(I.data!==void 0){const{fulfilledTimeStamp:V,arg:M,baseQueryMeta:U,requestId:F}=w;let B=Cc(I.data,q=>L(q,A,{arg:M.originalArgs,baseQueryMeta:U,fulfilledTimeStamp:V,requestId:F}));I.data=B}else I.data=A;else I.data=r[w.arg.endpointName].structuralSharing??!0?Ay(vs(I.data)?JT(I.data):I.data,A):A;delete I.error,I.fulfilledTimeStamp=w.fulfilledTimeStamp})}const _=Ms({name:`${t}/queries`,initialState:wu,reducers:{removeQueryResult:{reducer(N,{payload:{queryCacheKey:w}}){delete N[w]},prepare:qa()},cacheEntriesUpserted:{reducer(N,w){for(const A of w.payload){const{queryDescription:T,value:I}=A;p(N,T,!0,{arg:T,requestId:w.meta.requestId,startedTimeStamp:w.meta.timestamp}),h(N,{arg:T,requestId:w.meta.requestId,fulfilledTimeStamp:w.meta.timestamp,baseQueryMeta:{}},I,!0)}},prepare:N=>({payload:N.map(T=>{const{endpointName:I,arg:L,value:V}=T,M=r[I];return{queryDescription:{type:"query",endpointName:I,originalArgs:T.arg,queryCacheKey:s({queryArgs:L,endpointDefinition:M,endpointName:I})},value:V}}),meta:{[Mh]:!0,requestId:Ty(),timestamp:Date.now()}})},queryResultPatched:{reducer(N,{payload:{queryCacheKey:w,patches:A}}){xu(N,w,T=>{T.data=Xx(T.data,A.concat())})},prepare:qa()}},extraReducers(N){N.addCase(e.pending,(w,{meta:A,meta:{arg:T}})=>{const I=Wm(T);p(w,T,I,A)}).addCase(e.fulfilled,(w,{meta:A,payload:T})=>{const I=Wm(A.arg);h(w,A,T,I)}).addCase(e.rejected,(w,{meta:{condition:A,arg:T,requestId:I},error:L,payload:V})=>{xu(w,T.queryCacheKey,M=>{if(!A){if(M.requestId!==I)return;M.status="rejected",M.error=V??L}})}).addMatcher(l,(w,A)=>{const{queries:T}=a(A);for(const[I,L]of Object.entries(T))((L==null?void 0:L.status)==="fulfilled"||(L==null?void 0:L.status)==="rejected")&&(w[I]=L)})}}),C=Ms({name:`${t}/mutations`,initialState:wu,reducers:{removeMutationResult:{reducer(N,{payload:w}){const A=Zl(w);A in N&&delete N[A]},prepare:qa()}},extraReducers(N){N.addCase(n.pending,(w,{meta:A,meta:{requestId:T,arg:I,startedTimeStamp:L}})=>{I.track&&(w[Zl(A)]={requestId:T,status:"pending",endpointName:I.endpointName,startedTimeStamp:L})}).addCase(n.fulfilled,(w,{payload:A,meta:T})=>{T.arg.track&&f0(w,T,I=>{I.requestId===T.requestId&&(I.status="fulfilled",I.data=A,I.fulfilledTimeStamp=T.fulfilledTimeStamp)})}).addCase(n.rejected,(w,{payload:A,error:T,meta:I})=>{I.arg.track&&f0(w,I,L=>{L.requestId===I.requestId&&(L.status="rejected",L.error=A??T)})}).addMatcher(l,(w,A)=>{const{mutations:T}=a(A);for(const[I,L]of Object.entries(T))((L==null?void 0:L.status)==="fulfilled"||(L==null?void 0:L.status)==="rejected")&&I!==(L==null?void 0:L.requestId)&&(w[I]=L)})}}),j={tags:{},keys:{}},b=Ms({name:`${t}/invalidation`,initialState:j,reducers:{updateProvidedBy:{reducer(N,w){var A,T,I;for(const{queryCacheKey:L,providedTags:V}of w.payload){S(N,L);for(const{type:M,id:U}of V){const F=(T=(A=N.tags)[M]??(A[M]={}))[I=U||"__internal_without_id"]??(T[I]=[]);F.includes(L)||F.push(L)}N.keys[L]=V}},prepare:qa()}},extraReducers(N){N.addCase(_.actions.removeQueryResult,(w,{payload:{queryCacheKey:A}})=>{S(w,A)}).addMatcher(l,(w,A)=>{var I,L,V;const{provided:T}=a(A);for(const[M,U]of Object.entries(T.tags??{}))for(const[F,B]of Object.entries(U)){const q=(L=(I=w.tags)[M]??(I[M]={}))[V=F||"__internal_without_id"]??(L[V]=[]);for(const Y of B)q.includes(Y)||q.push(Y),w.keys[Y]=T.keys[Y]}}).addMatcher(Js(Wr(e),Fh(e)),(w,A)=>{E(w,[A])}).addMatcher(_.actions.cacheEntriesUpserted.match,(w,A)=>{const T=A.payload.map(({queryDescription:I,value:L})=>({type:"UNKNOWN",payload:L,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:I}}));E(w,T)})}});function S(N,w){var T;const A=N.keys[w]??[];for(const I of A){const L=I.type,V=I.id??"__internal_without_id",M=(T=N.tags[L])==null?void 0:T[V];M&&(N.tags[L][V]=M.filter(U=>U!==w))}delete N.keys[w]}function E(N,w){const A=w.map(T=>{const I=CN(T,"providesTags",r,u),{queryCacheKey:L}=T.meta.arg;return{queryCacheKey:L,providedTags:I}});b.caseReducers.updateProvidedBy(N,b.actions.updateProvidedBy(A))}const y=Ms({name:`${t}/subscriptions`,initialState:wu,reducers:{updateSubscriptionOptions(N,w){},unsubscribeQueryResult(N,w){},internal_getRTKQSubscriptions(){}}}),x=Ms({name:`${t}/internalSubscriptions`,initialState:wu,reducers:{subscriptionsUpdated:{reducer(N,w){return Xx(N,w.payload)},prepare:qa()}}}),P=Ms({name:`${t}/config`,initialState:{online:WA(),focused:qA(),middlewareRegistered:!1,...d},reducers:{middlewareRegistered(N,{payload:w}){N.middlewareRegistered=N.middlewareRegistered==="conflict"||i!==w?"conflict":!0}},extraReducers:N=>{N.addCase(Bh,w=>{w.online=!0}).addCase(Ry,w=>{w.online=!1}).addCase(zh,w=>{w.focused=!0}).addCase(Py,w=>{w.focused=!1}).addMatcher(l,w=>({...w}))}}),O=uN({queries:_.reducer,mutations:C.reducer,provided:b.reducer,subscriptions:x.reducer,config:P.reducer}),v=(N,w)=>O(f.match(w)?void 0:N,w),g={...P.actions,..._.actions,...y.actions,...x.actions,...C.actions,...b.actions,resetApiState:f};return{reducer:v,actions:g}}var Fn=Symbol.for("RTKQ/skipToken"),EN={status:"uninitialized"},p0=Cc(EN,()=>{}),m0=Cc(EN,()=>{});function iP({serializeQueryArgs:t,reducerPath:e,createSelector:n}){const s=y=>p0,r=y=>m0;return{buildQuerySelector:h,buildInfiniteQuerySelector:_,buildMutationSelector:C,selectInvalidatedBy:j,selectCachedArgsForQuery:b,selectApiState:a,selectQueries:l,selectMutations:d,selectQueryEntry:u,selectConfig:f};function i(y){return{...y,...o0(y.status)}}function a(y){return y[e]}function l(y){var x;return(x=a(y))==null?void 0:x.queries}function u(y,x){var P;return(P=l(y))==null?void 0:P[x]}function d(y){var x;return(x=a(y))==null?void 0:x.mutations}function f(y){var x;return(x=a(y))==null?void 0:x.config}function p(y,x,P){return O=>{if(O===Fn)return n(s,P);const v=t({queryArgs:O,endpointDefinition:x,endpointName:y});return n(N=>u(N,v)??p0,P)}}function h(y,x){return p(y,x,i)}function _(y,x){const{infiniteQueryOptions:P}=x;function O(v){const g={...v,...o0(v.status)},{isLoading:N,isError:w,direction:A}=g,T=A==="forward",I=A==="backward";return{...g,hasNextPage:S(P,g.data,g.originalArgs),hasPreviousPage:E(P,g.data,g.originalArgs),isFetchingNextPage:N&&T,isFetchingPreviousPage:N&&I,isFetchNextPageError:w&&T,isFetchPreviousPageError:w&&I}}return p(y,x,O)}function C(){return y=>{let x;return typeof y=="object"?x=Zl(y)??Fn:x=y,n(x===Fn?r:v=>{var g,N;return((N=(g=a(v))==null?void 0:g.mutations)==null?void 0:N[x])??m0},i)}}function j(y,x){const P=y[e],O=new Set;for(const v of x.filter($d).map(qm)){const g=P.provided.tags[v.type];if(!g)continue;let N=(v.id!==void 0?g[v.id]:l0(Object.values(g)))??[];for(const w of N)O.add(w)}return l0(Array.from(O.values()).map(v=>{const g=P.queries[v];return g?[{queryCacheKey:v,endpointName:g.endpointName,originalArgs:g.originalArgs}]:[]}))}function b(y,x){return Object.values(l(y)).filter(P=>(P==null?void 0:P.endpointName)===x&&P.status!=="uninitialized").map(P=>P.originalArgs)}function S(y,x,P){return x?Hm(y,x,P)!=null:!1}function E(y,x,P){return!x||!y.getPreviousPageParam?!1:NN(y,x,P)!=null}}var po=WeakMap?new WeakMap:void 0,g0=({endpointName:t,queryArgs:e})=>{let n="";const s=po==null?void 0:po.get(e);if(typeof s=="string")n=s;else{const r=JSON.stringify(e,(i,a)=>(a=typeof a=="bigint"?{$bigint:a.toString()}:a,a=qr(a)?Object.keys(a).sort().reduce((l,u)=>(l[u]=a[u],l),{}):a,a));qr(e)&&(po==null||po.set(e,r)),n=r}return`${t}(${n})`};function kN(...t){return function(n){const s=Bd(d=>{var f;return(f=n.extractRehydrationInfo)==null?void 0:f.call(n,d,{reducerPath:n.reducerPath??"api"})}),r={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...n,extractRehydrationInfo:s,serializeQueryArgs(d){let f=g0;if("serializeQueryArgs"in d.endpointDefinition){const p=d.endpointDefinition.serializeQueryArgs;f=h=>{const _=p(h);return typeof _=="string"?_:g0({...h,queryArgs:_})}}else n.serializeQueryArgs&&(f=n.serializeQueryArgs);return f(d)},tagTypes:[...n.tagTypes||[]]},i={endpointDefinitions:{},batch(d){d()},apiUid:Ty(),extractRehydrationInfo:s,hasRehydrationInfo:Bd(d=>s(d)!=null)},a={injectEndpoints:u,enhanceEndpoints({addTagTypes:d,endpoints:f}){if(d)for(const p of d)r.tagTypes.includes(p)||r.tagTypes.push(p);if(f)for(const[p,h]of Object.entries(f))typeof h=="function"?h(i.endpointDefinitions[p]):Object.assign(i.endpointDefinitions[p]||{},h);return a}},l=t.map(d=>d.init(a,r,i));function u(d){const f=d.endpoints({query:p=>({...p,type:"query"}),mutation:p=>({...p,type:"mutation"}),infiniteQuery:p=>({...p,type:"infinitequery"})});for(const[p,h]of Object.entries(f)){if(d.overrideExisting!==!0&&p in i.endpointDefinitions){if(d.overrideExisting==="throw")throw new Error(Xn(39));continue}i.endpointDefinitions[p]=h;for(const _ of l)_.injectEndpoint(p,h)}return a}return a.injectEndpoints({endpoints:n.endpoints})}}function Rs(t,...e){return Object.assign(t,...e)}var oP=({api:t,queryThunk:e,internalState:n,mwApi:s})=>{const r=`${t.reducerPath}/subscriptions`;let i=null,a=null;const{updateSubscriptionOptions:l,unsubscribeQueryResult:u}=t.internalActions,d=(j,b)=>{if(l.match(b)){const{queryCacheKey:E,requestId:y,options:x}=b.payload,P=j.get(E);return P!=null&&P.has(y)&&P.set(y,x),!0}if(u.match(b)){const{queryCacheKey:E,requestId:y}=b.payload,x=j.get(E);return x&&x.delete(y),!0}if(t.internalActions.removeQueryResult.match(b))return j.delete(b.payload.queryCacheKey),!0;if(e.pending.match(b)){const{meta:{arg:E,requestId:y}}=b,x=$m(j,E.queryCacheKey,Vm);return E.subscribe&&x.set(y,E.subscriptionOptions??x.get(y)??{}),!0}let S=!1;if(e.rejected.match(b)){const{meta:{condition:E,arg:y,requestId:x}}=b;if(E&&y.subscribe){const P=$m(j,y.queryCacheKey,Vm);P.set(x,y.subscriptionOptions??P.get(x)??{}),S=!0}}return S},f=()=>n.currentSubscriptions,_={getSubscriptions:f,getSubscriptionCount:j=>{const S=f().get(j);return(S==null?void 0:S.size)??0},isRequestSubscribed:(j,b)=>{var E;const S=f();return!!((E=S==null?void 0:S.get(j))!=null&&E.get(b))}};function C(j){return JSON.parse(JSON.stringify(Object.fromEntries([...j].map(([b,S])=>[b,Object.fromEntries(S)]))))}return(j,b)=>{if(i||(i=C(n.currentSubscriptions)),t.util.resetApiState.match(j))return i={},n.currentSubscriptions.clear(),a=null,[!0,!1];if(t.internalActions.internal_getRTKQSubscriptions.match(j))return[!1,_];const S=d(n.currentSubscriptions,j);let E=!0;if(S){a||(a=setTimeout(()=>{const P=C(n.currentSubscriptions),[,O]=yN(i,()=>P);b.next(t.internalActions.subscriptionsUpdated(O)),i=P,a=null},500));const y=typeof j.type=="string"&&!!j.type.startsWith(r),x=e.rejected.match(j)&&j.meta.condition&&!!j.meta.arg.subscribe;E=!y&&!x}return[E,!1]}},aP=2147483647/1e3-1,lP=({reducerPath:t,api:e,queryThunk:n,context:s,internalState:r,selectors:{selectQueryEntry:i,selectConfig:a},getRunningQueryThunk:l,mwApi:u})=>{const{removeQueryResult:d,unsubscribeQueryResult:f,cacheEntriesUpserted:p}=e.internalActions,h=r.runningQueries.get(u.dispatch),_=Js(f.match,n.fulfilled,n.rejected,p.match);function C(y){const x=r.currentSubscriptions.get(y);if(!x)return!1;const P=x.size>0,O=(h==null?void 0:h[y])!==void 0;return P||O}const j={},b=(y,x,P)=>{const O=x.getState(),v=a(O);if(_(y)){let g;if(p.match(y))g=y.payload.map(N=>N.queryDescription.queryCacheKey);else{const{queryCacheKey:N}=f.match(y)?y.payload:y.meta.arg;g=[N]}S(g,x,v)}if(e.util.resetApiState.match(y))for(const[g,N]of Object.entries(j))N&&clearTimeout(N),delete j[g];if(s.hasRehydrationInfo(y)){const{queries:g}=s.extractRehydrationInfo(y);S(Object.keys(g),x,v)}};function S(y,x,P){const O=x.getState();for(const v of y){const g=i(O,v);g!=null&&g.endpointName&&E(v,g.endpointName,x,P)}}function E(y,x,P,O){const v=s.endpointDefinitions[x],g=(v==null?void 0:v.keepUnusedDataFor)??O.keepUnusedDataFor;if(g===1/0)return;const N=Math.max(0,Math.min(g,aP));if(!C(y)){const w=j[y];w&&clearTimeout(w),j[y]=setTimeout(()=>{if(!C(y)){const A=i(P.getState(),y);if(A!=null&&A.endpointName){const T=P.dispatch(l(A.endpointName,A.originalArgs));T==null||T.abort()}P.dispatch(d({queryCacheKey:y}))}delete j[y]},N*1e3)}}return b},y0=new Error("Promise never resolved before cacheEntryRemoved."),cP=({api:t,reducerPath:e,context:n,queryThunk:s,mutationThunk:r,internalState:i,selectors:{selectQueryEntry:a,selectApiState:l}})=>{const u=Bm(s),d=Bm(r),f=Wr(s,r),p={};function h(S,E,y){const x=p[S];x!=null&&x.valueResolved&&(x.valueResolved({data:E,meta:y}),delete x.valueResolved)}function _(S){const E=p[S];E&&(delete p[S],E.cacheEntryRemoved())}const C=(S,E,y)=>{const x=j(S);function P(O,v,g,N){const w=a(y,v),A=a(E.getState(),v);!w&&A&&b(O,N,v,E,g)}if(s.pending.match(S))P(S.meta.arg.endpointName,x,S.meta.requestId,S.meta.arg.originalArgs);else if(t.internalActions.cacheEntriesUpserted.match(S))for(const{queryDescription:O,value:v}of S.payload){const{endpointName:g,originalArgs:N,queryCacheKey:w}=O;P(g,w,S.meta.requestId,N),h(w,v,{})}else if(r.pending.match(S))E.getState()[e].mutations[x]&&b(S.meta.arg.endpointName,S.meta.arg.originalArgs,x,E,S.meta.requestId);else if(f(S))h(x,S.payload,S.meta.baseQueryMeta);else if(t.internalActions.removeQueryResult.match(S)||t.internalActions.removeMutationResult.match(S))_(x);else if(t.util.resetApiState.match(S))for(const O of Object.keys(p))_(O)};function j(S){return u(S)?S.meta.arg.queryCacheKey:d(S)?S.meta.arg.fixedCacheKey??S.meta.requestId:t.internalActions.removeQueryResult.match(S)?S.payload.queryCacheKey:t.internalActions.removeMutationResult.match(S)?Zl(S.payload):""}function b(S,E,y,x,P){const O=n.endpointDefinitions[S],v=O==null?void 0:O.onCacheEntryAdded;if(!v)return;const g={},N=new Promise(V=>{g.cacheEntryRemoved=V}),w=Promise.race([new Promise(V=>{g.valueResolved=V}),N.then(()=>{throw y0})]);w.catch(()=>{}),p[y]=g;const A=t.endpoints[S].select(Vd(O)?E:y),T=x.dispatch((V,M,U)=>U),I={...x,getCacheEntry:()=>A(x.getState()),requestId:P,extra:T,updateCachedData:Vd(O)?V=>x.dispatch(t.util.updateQueryData(S,E,V)):void 0,cacheDataLoaded:w,cacheEntryRemoved:N},L=v(E,I);Promise.resolve(L).catch(V=>{if(V!==y0)throw V})}return C},uP=({api:t,context:{apiUid:e},reducerPath:n})=>(s,r)=>{t.util.resetApiState.match(s)&&r.dispatch(t.internalActions.middlewareRegistered(e))},dP=({reducerPath:t,context:e,context:{endpointDefinitions:n},mutationThunk:s,queryThunk:r,api:i,assertTagType:a,refetchQuery:l,internalState:u})=>{const{removeQueryResult:d}=i.internalActions,f=Js(Wr(s),Fh(s)),p=Js(Wr(s,r),na(s,r));let h=[];const _=(b,S)=>{f(b)?j(CN(b,"invalidatesTags",n,a),S):p(b)?j([],S):i.util.invalidateTags.match(b)&&j(Oy(b.payload,void 0,void 0,void 0,void 0,a),S)};function C(b){var y;const{queries:S,mutations:E}=b;for(const x of[S,E])for(const P in x)if(((y=x[P])==null?void 0:y.status)==="pending")return!0;return!1}function j(b,S){const E=S.getState(),y=E[t];if(h.push(...b),y.config.invalidationBehavior==="delayed"&&C(y))return;const x=h;if(h=[],x.length===0)return;const P=i.util.selectInvalidatedBy(E,x);e.batch(()=>{const O=Array.from(P.values());for(const{queryCacheKey:v}of O){const g=y.queries[v],N=$m(u.currentSubscriptions,v,Vm);g&&(N.size===0?S.dispatch(d({queryCacheKey:v})):g.status!=="uninitialized"&&S.dispatch(l(g)))}})}return _},hP=({reducerPath:t,queryThunk:e,api:n,refetchQuery:s,internalState:r})=>{const{currentPolls:i,currentSubscriptions:a}=r,l=new Set;let u=null;const d=(b,S)=>{(n.internalActions.updateSubscriptionOptions.match(b)||n.internalActions.unsubscribeQueryResult.match(b))&&f(b.payload.queryCacheKey,S),(e.pending.match(b)||e.rejected.match(b)&&b.meta.condition)&&f(b.meta.arg.queryCacheKey,S),(e.fulfilled.match(b)||e.rejected.match(b)&&!b.meta.condition)&&p(b.meta.arg,S),n.util.resetApiState.match(b)&&(C(),u&&(clearTimeout(u),u=null),l.clear())};function f(b,S){l.add(b),u||(u=setTimeout(()=>{for(const E of l)h({queryCacheKey:E},S);l.clear(),u=null},0))}function p({queryCacheKey:b},S){const E=S.getState()[t],y=E.queries[b],x=a.get(b);if(!y||y.status==="uninitialized")return;const{lowestPollingInterval:P,skipPollingIfUnfocused:O}=j(x);if(!Number.isFinite(P))return;const v=i.get(b);v!=null&&v.timeout&&(clearTimeout(v.timeout),v.timeout=void 0);const g=Date.now()+P;i.set(b,{nextPollTimestamp:g,pollingInterval:P,timeout:setTimeout(()=>{(E.config.focused||!O)&&S.dispatch(s(y)),p({queryCacheKey:b},S)},P)})}function h({queryCacheKey:b},S){const y=S.getState()[t].queries[b],x=a.get(b);if(!y||y.status==="uninitialized")return;const{lowestPollingInterval:P}=j(x);if(!Number.isFinite(P)){_(b);return}const O=i.get(b),v=Date.now()+P;(!O||v<O.nextPollTimestamp)&&p({queryCacheKey:b},S)}function _(b){const S=i.get(b);S!=null&&S.timeout&&clearTimeout(S.timeout),i.delete(b)}function C(){for(const b of i.keys())_(b)}function j(b=new Map){let S=!1,E=Number.POSITIVE_INFINITY;for(const y of b.values())y.pollingInterval&&(E=Math.min(y.pollingInterval,E),S=y.skipPollingIfUnfocused||S);return{lowestPollingInterval:E,skipPollingIfUnfocused:S}}return d},fP=({api:t,context:e,queryThunk:n,mutationThunk:s})=>{const r=Iy(n,s),i=na(n,s),a=Wr(n,s),l={};return(d,f)=>{var p,h;if(r(d)){const{requestId:_,arg:{endpointName:C,originalArgs:j}}=d.meta,b=e.endpointDefinitions[C],S=b==null?void 0:b.onQueryStarted;if(S){const E={},y=new Promise((v,g)=>{E.resolve=v,E.reject=g});y.catch(()=>{}),l[_]=E;const x=t.endpoints[C].select(Vd(b)?j:_),P=f.dispatch((v,g,N)=>N),O={...f,getCacheEntry:()=>x(f.getState()),requestId:_,extra:P,updateCachedData:Vd(b)?v=>f.dispatch(t.util.updateQueryData(C,j,v)):void 0,queryFulfilled:y};S(j,O)}}else if(a(d)){const{requestId:_,baseQueryMeta:C}=d.meta;(p=l[_])==null||p.resolve({data:d.payload,meta:C}),delete l[_]}else if(i(d)){const{requestId:_,rejectedWithValue:C,baseQueryMeta:j}=d.meta;(h=l[_])==null||h.reject({error:d.payload??d.error,isUnhandledError:!C,meta:j}),delete l[_]}}},pP=({reducerPath:t,context:e,api:n,refetchQuery:s,internalState:r})=>{const{removeQueryResult:i}=n.internalActions,a=(u,d)=>{zh.match(u)&&l(d,"refetchOnFocus"),Bh.match(u)&&l(d,"refetchOnReconnect")};function l(u,d){const f=u.getState()[t],p=f.queries,h=r.currentSubscriptions;e.batch(()=>{for(const _ of h.keys()){const C=p[_],j=h.get(_);if(!j||!C)continue;const b=[...j.values()];(b.some(E=>E[d]===!0)||b.every(E=>E[d]===void 0)&&f.config[d])&&(j.size===0?u.dispatch(i({queryCacheKey:_})):C.status!=="uninitialized"&&u.dispatch(s(C)))}})}return a};function mP(t){const{reducerPath:e,queryThunk:n,api:s,context:r,internalState:i}=t,{apiUid:a}=r,l={invalidateTags:Jn(`${e}/invalidateTags`)},u=h=>h.type.startsWith(`${e}/`),d=[uP,lP,dP,hP,cP,fP];return{middleware:h=>{let _=!1;const C={...t,internalState:i,refetchQuery:p,isThisApiSliceAction:u,mwApi:h},j=d.map(E=>E(C)),b=oP(C),S=pP(C);return E=>y=>{if(!dN(y))return E(y);_||(_=!0,h.dispatch(s.internalActions.middlewareRegistered(a)));const x={...h,next:E},P=h.getState(),[O,v]=b(y,x,P);let g;if(O?g=E(y):g=v,h.getState()[e]&&(S(y,x,P),u(y)||r.hasRehydrationInfo(y)))for(const N of j)N(y,x,P);return g}},actions:l};function p(h){return t.api.endpoints[h.endpointName].initiate(h.originalArgs,{subscribe:!1,forceRefetch:!0})}}var v0=Symbol(),jN=({createSelector:t=jy}={})=>({name:v0,init(e,{baseQuery:n,tagTypes:s,reducerPath:r,serializeQueryArgs:i,keepUnusedDataFor:a,refetchOnMountOrArgChange:l,refetchOnFocus:u,refetchOnReconnect:d,invalidationBehavior:f,onSchemaFailure:p,catchSchemaFailure:h,skipSchemaValidation:_},C){oA();const j=W=>W;Object.assign(e,{reducerPath:r,endpoints:{},internalActions:{onOnline:Bh,onOffline:Ry,onFocus:zh,onFocusLost:Py},util:{}});const b=iP({serializeQueryArgs:i,reducerPath:r,createSelector:t}),{selectInvalidatedBy:S,selectCachedArgsForQuery:E,buildQuerySelector:y,buildInfiniteQuerySelector:x,buildMutationSelector:P}=b;Rs(e.util,{selectInvalidatedBy:S,selectCachedArgsForQuery:E});const{queryThunk:O,infiniteQueryThunk:v,mutationThunk:g,patchQueryData:N,updateQueryData:w,upsertQueryData:A,prefetch:T,buildMatchThunkActions:I}=sP({baseQuery:n,reducerPath:r,context:C,api:e,serializeQueryArgs:i,assertTagType:j,selectors:b,onSchemaFailure:p,catchSchemaFailure:h,skipSchemaValidation:_}),{reducer:L,actions:V}=rP({context:C,queryThunk:O,mutationThunk:g,serializeQueryArgs:i,reducerPath:r,assertTagType:j,config:{refetchOnFocus:u,refetchOnReconnect:d,refetchOnMountOrArgChange:l,keepUnusedDataFor:a,reducerPath:r,invalidationBehavior:f}});Rs(e.util,{patchQueryData:N,updateQueryData:w,upsertQueryData:A,prefetch:T,resetApiState:V.resetApiState,upsertQueryEntries:V.cacheEntriesUpserted}),Rs(e.internalActions,V);const M={currentSubscriptions:new Map,currentPolls:new Map,runningQueries:new Map,runningMutations:new Map},{buildInitiateQuery:U,buildInitiateInfiniteQuery:F,buildInitiateMutation:B,getRunningMutationThunk:q,getRunningMutationsThunk:Y,getRunningQueriesThunk:ee,getRunningQueryThunk:z}=nP({queryThunk:O,mutationThunk:g,infiniteQueryThunk:v,api:e,serializeQueryArgs:i,context:C,internalState:M});Rs(e.util,{getRunningMutationThunk:q,getRunningMutationsThunk:Y,getRunningQueryThunk:z,getRunningQueriesThunk:ee});const{middleware:Q,actions:G}=mP({reducerPath:r,context:C,queryThunk:O,mutationThunk:g,infiniteQueryThunk:v,api:e,assertTagType:j,selectors:b,getRunningQueryThunk:z,internalState:M});return Rs(e.util,G),Rs(e,{reducer:L,middleware:Q}),{name:v0,injectEndpoint(W,K){var ae;const oe=(ae=e.endpoints)[W]??(ae[W]={});$h(K)&&Rs(oe,{name:W,select:y(W,K),initiate:U(W,K)},I(O,W)),ZA(K)&&Rs(oe,{name:W,select:P(),initiate:B(W)},I(g,W)),Vh(K)&&Rs(oe,{name:W,select:x(W,K),initiate:F(W,K)},I(O,W))}}}});jN();const Su=localStorage.getItem("token"),bu=localStorage.getItem("user");let Si=null,Gm=null,IN=!1;if(bu&&bu!=="undefined"&&bu!=="null")try{Si=JSON.parse(bu),IN=(Si==null?void 0:Si.onboarding_completed)||!1}catch(t){console.error("Failed to parse user data from localStorage:",t),localStorage.removeItem("user"),localStorage.removeItem("token")}Su&&Su!=="undefined"&&Su!=="null"&&Si?Gm=Su:(localStorage.removeItem("token"),localStorage.removeItem("user"));const gP={user:Si,token:Gm,isAuthenticated:!!(Gm&&Si),onboardingCompleted:IN,loading:!1,error:null},TN=Ms({name:"auth",initialState:gP,reducers:{setCredentials:(t,e)=>{const{user:n,token:s}=e.payload.data||e.payload;t.user=n,t.token=s,t.isAuthenticated=!0,t.onboardingCompleted=(n==null?void 0:n.onboarding_completed)||!1,t.error=null,localStorage.setItem("token",s),localStorage.setItem("user",JSON.stringify(n))},updateOnboardingStatus:(t,e)=>{t.onboardingCompleted=e.payload,t.user&&(t.user.onboarding_completed=e.payload,localStorage.setItem("user",JSON.stringify(t.user)))},logout:t=>{t.user=null,t.token=null,t.isAuthenticated=!1,t.onboardingCompleted=!1,t.error=null,localStorage.removeItem("token"),localStorage.removeItem("user")},setLoading:(t,e)=>{t.loading=e.payload},setError:(t,e)=>{t.error=e.payload,t.loading=!1},clearError:t=>{t.error=null}}}),{setCredentials:AN,updateOnboardingStatus:yP,logout:kc,setLoading:sB,setError:rB,clearError:iB}=TN.actions,vP=TN.reducer,rr=t=>t.auth.user,Dy=t=>t.auth.isAuthenticated,Ly=t=>t.auth.onboardingCompleted,Ha="onboarding_progress",_0="1.0",yt={save:t=>{var e,n,s,r,i;try{const a={version:_0,timestamp:new Date().toISOString(),data:{currentStep:t.currentStep||1,businessNeeds:t.businessNeeds||null,previousBookkeeper:t.previousBookkeeper||null,businessDetails:{businessName:((e=t.businessDetails)==null?void 0:e.businessName)||"",businessType:((n=t.businessDetails)==null?void 0:n.businessType)||"",yearStarted:((s=t.businessDetails)==null?void 0:s.yearStarted)||"",employeeCount:((r=t.businessDetails)==null?void 0:r.employeeCount)||"",monthlyRevenue:((i=t.businessDetails)==null?void 0:i.monthlyRevenue)||""},industry:t.industry||null}};return localStorage.setItem(Ha,JSON.stringify(a)),!0}catch(a){return console.error("Error saving to localStorage:",a),a.name==="QuotaExceededError"&&console.error("localStorage quota exceeded"),!1}},get:()=>{try{const t=localStorage.getItem(Ha);if(!t)return null;const e=JSON.parse(t);return e.version!==_0?(console.warn("Stored data version mismatch. Clearing old data."),yt.clear(),null):e.data}catch(t){return console.error("Error reading from localStorage:",t),null}},updateField:(t,e)=>{try{const n=yt.get()||{};return t==="businessDetails"?n.businessDetails={...n.businessDetails,...e}:n[t]=e,yt.save(n)}catch(n){return console.error("Error updating field in localStorage:",n),!1}},clear:()=>{try{return localStorage.removeItem(Ha),!0}catch(t){return console.error("Error clearing localStorage:",t),!1}},exists:()=>{try{return localStorage.getItem(Ha)!==null}catch(t){return console.error("Error checking localStorage:",t),!1}},getLastSaved:()=>{try{const t=localStorage.getItem(Ha);return t&&JSON.parse(t).timestamp||null}catch(t){return console.error("Error getting timestamp from localStorage:",t),null}},validateCompletion:()=>{var n,s;const t=yt.get();if(!t)return{isComplete:!1,missingFields:["All data"]};const e=[];return t.businessNeeds||e.push("Business needs"),t.previousBookkeeper||e.push("Previous bookkeeper information"),(n=t.businessDetails)!=null&&n.businessName||e.push("Business name"),(s=t.businessDetails)!=null&&s.businessType||e.push("Business type"),t.industry||e.push("Industry"),{isComplete:e.length===0,missingFields:e}},isSupported:()=>{try{const t="__localStorage_test__";return localStorage.setItem(t,"test"),localStorage.removeItem(t),!0}catch{return!1}},getSubmissionData:()=>{const t=yt.get();return t?{data:{businessNeeds:t.businessNeeds,previousBookkeeper:t.previousBookkeeper,businessDetails:t.businessDetails,industry:t.industry},currentStep:t.currentStep||4,completed:!0}:null}};yt.isSupported()||console.warn("localStorage is not supported in this browser. Onboarding data will not persist.");const ap={currentStep:1,totalSteps:4,completed:!1,data:{businessNeeds:null,previousBookkeeper:null,businessDetails:{businessName:"",businessType:"",yearStarted:"",employeeCount:"",monthlyRevenue:""},industry:null},validationErrors:{},isSubmitting:!1,lastSavedAt:null,hasUnsavedChanges:!1,isLoadingFromStorage:!1,storageError:null},PN=Ms({name:"onboarding",initialState:ap,reducers:{nextStep:t=>{t.currentStep<t.totalSteps&&(t.currentStep+=1,t.hasUnsavedChanges=!0)},previousStep:t=>{t.currentStep>1&&(t.currentStep-=1)},goToStep:(t,e)=>{const n=e.payload;n>=1&&n<=t.totalSteps&&(console.log("Going to step:",n),t.currentStep=n)},updateBusinessNeeds:(t,e)=>{t.data.businessNeeds=e.payload,t.hasUnsavedChanges=!0,delete t.validationErrors.businessNeeds;const n={...t.data,businessNeeds:e.payload,currentStep:t.currentStep};yt.save(n),t.lastSavedAt=new Date().toISOString()},updatePreviousBookkeeper:(t,e)=>{t.data.previousBookkeeper=e.payload,t.hasUnsavedChanges=!0,delete t.validationErrors.previousBookkeeper;const n={...t.data,previousBookkeeper:e.payload,currentStep:t.currentStep};yt.save(n),t.lastSavedAt=new Date().toISOString()},updateBusinessDetails:(t,e)=>{t.data.businessDetails={...t.data.businessDetails,...e.payload},t.hasUnsavedChanges=!0,delete t.validationErrors.businessDetails;const n={...t.data,businessDetails:t.data.businessDetails,currentStep:t.currentStep};yt.save(n),t.lastSavedAt=new Date().toISOString()},updateIndustry:(t,e)=>{t.data.industry=e.payload,t.hasUnsavedChanges=!0,delete t.validationErrors.industry;const n={...t.data,industry:e.payload,currentStep:t.currentStep};yt.save(n),t.lastSavedAt=new Date().toISOString()},setValidationError:(t,e)=>{const{step:n,error:s}=e.payload;t.validationErrors[n]=s},clearValidationErrors:t=>{t.validationErrors={}},setSubmitting:(t,e)=>{t.isSubmitting=e.payload},markSaved:t=>{t.lastSavedAt=new Date().toISOString(),t.hasUnsavedChanges=!1},markCompleted:t=>{t.completed=!0,t.hasUnsavedChanges=!1},resetOnboarding:()=>(yt.clear(),ap),loadOnboardingData:(t,e)=>{const n=e.payload;n&&(t.data=n.data||t.data,t.currentStep=n.currentStep||1,t.completed=n.completed||!1,t.lastSavedAt=n.lastSavedAt,t.hasUnsavedChanges=!1)},loadFromLocalStorage:t=>{t.isLoadingFromStorage=!0,t.storageError=null;try{const e=yt.get();e&&(t.data={businessNeeds:e.businessNeeds||null,previousBookkeeper:e.previousBookkeeper||null,businessDetails:e.businessDetails||ap.data.businessDetails,industry:e.industry||null},t.currentStep=e.currentStep||1,t.lastSavedAt=yt.getLastSaved(),t.hasUnsavedChanges=!1)}catch(e){t.storageError=e.message,console.error("Failed to load from localStorage:",e)}finally{t.isLoadingFromStorage=!1}},saveToLocalStorage:t=>{try{const e={...t.data,currentStep:t.currentStep};yt.save(e)&&(t.lastSavedAt=new Date().toISOString(),t.hasUnsavedChanges=!1)}catch(e){t.storageError=e.message,console.error("Failed to save to localStorage:",e)}},clearLocalStorage:t=>{yt.clear(),t.lastSavedAt=null,t.hasUnsavedChanges=!1},setStorageError:(t,e)=>{t.storageError=e.payload}}}),{nextStep:oB,previousStep:aB,goToStep:x0,updateBusinessNeeds:_P,updatePreviousBookkeeper:xP,updateBusinessDetails:wP,updateIndustry:SP,setValidationError:lB,clearValidationErrors:cB,setSubmitting:w0,markSaved:uB,markCompleted:bP,resetOnboarding:dB,loadOnboardingData:hB,loadFromLocalStorage:NP,saveToLocalStorage:CP,clearLocalStorage:EP,setStorageError:fB}=PN.actions,kP=PN.reducer,S0={notifications:[],unreadCount:0,isPanelOpen:!1,filter:"all",soundEnabled:!0,browserNotificationsEnabled:!1,isLoading:!1,error:null,lastFetch:null,hasMore:!0,page:1,selectedNotification:null,activeCategory:"all",activePriority:"all",hasNewNotifications:!1},RN=Ms({name:"notifications",initialState:S0,reducers:{setNotifications:(t,e)=>{const n=e.payload||[];t.notifications.length===0?(console.log(" Initial load: Setting",n.length,"notifications"),t.notifications=n,t.notifications.sort((s,r)=>new Date(r.createdAt||0)-new Date(s.createdAt||0)),t.lastFetch=Date.now()):console.warn(" setNotifications called but store already has",t.notifications.length,"notifications. Ignoring to preserve real-time updates.")},addNotification:(t,e)=>{const n=e.payload;console.log(" addNotification called with:",{id:n._id||n.id,title:n.title}),console.log(" Current notifications:",t.notifications.map(i=>({id:i._id||i.id,title:i.title})));const s=n._id||n.id;if(!s){console.error(" ERROR: Notification has no ID!",n);return}const r=t.notifications.findIndex(i=>(i._id||i.id)===s);r!==-1?(console.log(" Notification already exists at index:",r,"Updating it."),t.notifications[r]=n):(console.log(" Adding NEW notification to the list"),t.notifications.unshift(n),console.log(" Notification added! New count:",t.notifications.length)),t.notifications.length>100&&(t.notifications=t.notifications.slice(0,100))},appendNotifications:(t,e)=>{t.notifications.push(...e.payload),t.page+=1},updateNotification:(t,e)=>{const{id:n,updates:s}=e.payload,r=t.notifications.findIndex(i=>i.id===n||i._id===n);r!==-1&&(t.notifications[r]={...t.notifications[r],...s},s.isRead!==void 0&&(s.isRead&&!t.notifications[r].isRead?t.unreadCount=Math.max(0,t.unreadCount-1):!s.isRead&&t.notifications[r].isRead&&(t.unreadCount+=1)))},removeNotification:(t,e)=>{const n=e.payload,s=t.notifications.findIndex(r=>r.id===n||r._id===n);s!==-1&&(t.notifications[s].isRead||(t.unreadCount=Math.max(0,t.unreadCount-1)),t.notifications.splice(s,1))},markAsRead:(t,e)=>{const n=e.payload;console.log(" markAsRead action called with ID:",n),console.log(" Current notifications count:",t.notifications.length),console.log(" Current filter:",t.filter);const s=t.notifications.find(r=>r.id===n||r._id===n);s&&!s.isRead?(console.log(" Found notification, marking as read:",s.title),s.isRead=!0,s.readAt=new Date().toISOString(),t.unreadCount=Math.max(0,t.unreadCount-1),console.log(" New unread count:",t.unreadCount)):s&&s.isRead?console.log(" Notification already marked as read"):console.log(" Notification not found in state!")},markAllAsRead:t=>{t.notifications.forEach(e=>{e.isRead||(e.isRead=!0,e.readAt=new Date().toISOString())}),t.unreadCount=0},togglePanel:t=>{t.isPanelOpen=!t.isPanelOpen},openPanel:t=>{t.isPanelOpen=!0},closePanel:t=>{t.isPanelOpen=!1},setFilter:(t,e)=>{t.filter=e.payload,t.page=1},setActiveCategory:(t,e)=>{t.activeCategory=e.payload,t.page=1},setActivePriority:(t,e)=>{t.activePriority=e.payload,t.page=1},updateUnreadCount:(t,e)=>{t.unreadCount=e.payload},incrementUnreadCount:t=>{t.unreadCount+=1},decrementUnreadCount:t=>{t.unreadCount=Math.max(0,t.unreadCount-1)},toggleSound:t=>{t.soundEnabled=!t.soundEnabled},setSoundEnabled:(t,e)=>{t.soundEnabled=e.payload},toggleBrowserNotifications:t=>{t.browserNotificationsEnabled=!t.browserNotificationsEnabled},setBrowserNotificationsEnabled:(t,e)=>{t.browserNotificationsEnabled=e.payload},setLoading:(t,e)=>{t.isLoading=e.payload},setError:(t,e)=>{t.error=e.payload,t.isLoading=!1},clearError:t=>{t.error=null},setHasMore:(t,e)=>{t.hasMore=e.payload},resetPage:t=>{t.page=1,t.hasMore=!0},setSelectedNotification:(t,e)=>{t.selectedNotification=e.payload},clearSelectedNotification:t=>{t.selectedNotification=null},clearNotifications:t=>{t.notifications=[],t.unreadCount=0,t.page=1,t.hasMore=!0,t.lastFetch=null},setHasNewNotifications:(t,e)=>{t.hasNewNotifications=e.payload},resetNotificationState:()=>S0}}),{setNotifications:ON,addNotification:DN,appendNotifications:pB,updateNotification:jP,removeNotification:LN,markAsRead:IP,markAllAsRead:TP,togglePanel:b0,openPanel:mB,closePanel:gB,setFilter:AP,setActiveCategory:PP,setActivePriority:RP,updateUnreadCount:qd,incrementUnreadCount:yB,decrementUnreadCount:vB,toggleSound:_B,setSoundEnabled:xB,toggleBrowserNotifications:wB,setBrowserNotificationsEnabled:SB,setLoading:bB,setError:NB,clearError:CB,setHasMore:EB,resetPage:lp,setSelectedNotification:kB,clearSelectedNotification:jB,clearNotifications:IB,setHasNewNotifications:OP,resetNotificationState:TB}=RN.actions,DP=t=>t.notifications.unreadCount,LP=t=>t.notifications.isPanelOpen,MP=t=>t.notifications.filter,UP=t=>t.notifications.soundEnabled,FP=t=>t.notifications.browserNotificationsEnabled,zP=t=>t.notifications.activeCategory,BP=t=>t.notifications.activePriority,$P=t=>{const e=t.notifications.notifications,n=t.notifications.filter,s=t.notifications.activeCategory,r=t.notifications.activePriority;console.log(" Filtering notifications:",{totalCount:e.length,filter:n,category:s,priority:r,firstFew:e.slice(0,3).map(a=>({id:a._id,type:a.type,title:a.title}))});let i=e;return n==="unread"?i=i.filter(a=>!a.isRead):n==="announcements"?i=i.filter(a=>a.type==="announcement"):n==="tasks"?i=i.filter(a=>a.type==="assignment"||a.type==="task"):n==="alerts"&&(i=i.filter(a=>a.type==="alert"||a.priority==="urgent"||a.priority==="high")),s&&s!=="all"&&(i=i.filter(a=>a.category===s)),r&&r!=="all"&&(i=i.filter(a=>a.priority===r)),console.log(" After filtering:",{filteredCount:i.length,filteredIds:i.map(a=>a._id||a.id)}),i},VP=RN.reducer;function Nu(t){return t.replace(t[0],t[0].toUpperCase())}function qP(t){return t.type==="query"}function WP(t){return t.type==="mutation"}function MN(t){return t.type==="infinitequery"}function Ga(t,...e){return Object.assign(t,...e)}var cp=Symbol();function up(t){const e=D.useRef(t),n=D.useMemo(()=>Ay(e.current,t),[t]);return D.useEffect(()=>{e.current!==n&&(e.current=n)},[n]),n}function Cu(t){const e=D.useRef(t);return D.useEffect(()=>{gl(e.current,t)||(e.current=t)},[t]),gl(e.current,t)?e.current:t}var HP=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GP=HP(),QP=()=>typeof navigator<"u"&&navigator.product==="ReactNative",KP=QP(),YP=()=>GP||KP?D.useLayoutEffect:D.useEffect,JP=YP(),N0=t=>t.isUninitialized?{...t,isUninitialized:!1,isFetching:!0,isLoading:t.data===void 0,status:SN.pending}:t;function dp(t,...e){const n={};return e.forEach(s=>{n[s]=t[s]}),n}var hp=["data","status","isLoading","isSuccess","isError","error"];function XP({api:t,moduleOptions:{batch:e,hooks:{useDispatch:n,useSelector:s,useStore:r},unstable__sideEffectsInRender:i,createSelector:a},serializeQueryArgs:l,context:u}){const d=i?x=>x():D.useEffect;return{buildQueryHooks:S,buildInfiniteQueryHooks:E,buildMutationHook:y,usePrefetch:h};function f(x,P,O){if(P!=null&&P.endpointName&&x.isUninitialized){const{endpointName:T}=P,I=u.endpointDefinitions[T];O!==Fn&&l({queryArgs:P.originalArgs,endpointDefinition:I,endpointName:T})===l({queryArgs:O,endpointDefinition:I,endpointName:T})&&(P=void 0)}let v=x.isSuccess?x.data:P==null?void 0:P.data;v===void 0&&(v=x.data);const g=v!==void 0,N=x.isLoading,w=(!P||P.isLoading||P.isUninitialized)&&!g&&N,A=x.isSuccess||g&&(N&&!(P!=null&&P.isError)||x.isUninitialized);return{...x,data:v,currentData:x.data,isFetching:N,isLoading:w,isSuccess:A}}function p(x,P,O){if(P!=null&&P.endpointName&&x.isUninitialized){const{endpointName:T}=P,I=u.endpointDefinitions[T];O!==Fn&&l({queryArgs:P.originalArgs,endpointDefinition:I,endpointName:T})===l({queryArgs:O,endpointDefinition:I,endpointName:T})&&(P=void 0)}let v=x.isSuccess?x.data:P==null?void 0:P.data;v===void 0&&(v=x.data);const g=v!==void 0,N=x.isLoading,w=(!P||P.isLoading||P.isUninitialized)&&!g&&N,A=x.isSuccess||N&&g;return{...x,data:v,currentData:x.data,isFetching:N,isLoading:w,isSuccess:A}}function h(x,P){const O=n(),v=Cu(P);return D.useCallback((g,N)=>O(t.util.prefetch(x,g,{...v,...N})),[x,O,v])}function _(x,P,{refetchOnReconnect:O,refetchOnFocus:v,refetchOnMountOrArgChange:g,skip:N=!1,pollingInterval:w=0,skipPollingIfUnfocused:A=!1,...T}={}){const{initiate:I}=t.endpoints[x],L=n(),V=D.useRef(void 0);if(!V.current){const G=L(t.internalActions.internal_getRTKQSubscriptions());V.current=G}const M=up(N?Fn:P),U=Cu({refetchOnReconnect:O,refetchOnFocus:v,pollingInterval:w,skipPollingIfUnfocused:A}),F=T.initialPageParam,B=Cu(F),q=D.useRef(void 0);let{queryCacheKey:Y,requestId:ee}=q.current||{},z=!1;Y&&ee&&(z=V.current.isRequestSubscribed(Y,ee));const Q=!z&&q.current!==void 0;return d(()=>{Q&&(q.current=void 0)},[Q]),d(()=>{var K;const G=q.current;if(M===Fn){G==null||G.unsubscribe(),q.current=void 0;return}const W=(K=q.current)==null?void 0:K.subscriptionOptions;if(!G||G.arg!==M){G==null||G.unsubscribe();const ne=L(I(M,{subscriptionOptions:U,forceRefetch:g,...MN(u.endpointDefinitions[x])?{initialPageParam:B}:{}}));q.current=ne}else U!==W&&G.updateSubscriptionOptions(U)},[L,I,g,M,U,Q,B,x]),[q,L,I,U]}function C(x,P){return(v,{skip:g=!1,selectFromResult:N}={})=>{const{select:w}=t.endpoints[x],A=up(g?Fn:v),T=D.useRef(void 0),I=D.useMemo(()=>a([w(A),(F,B)=>B,F=>A],P,{memoizeOptions:{resultEqualityCheck:gl}}),[w,A]),L=D.useMemo(()=>N?a([I],N,{devModeChecks:{identityFunctionCheck:"never"}}):I,[I,N]),V=s(F=>L(F,T.current),gl),M=r(),U=I(M.getState(),T.current);return JP(()=>{T.current=U},[U]),V}}function j(x){D.useEffect(()=>()=>{var P,O;(O=(P=x.current)==null?void 0:P.unsubscribe)==null||O.call(P),x.current=void 0},[x])}function b(x){if(!x.current)throw new Error(Xn(38));return x.current.refetch()}function S(x){const P=(g,N={})=>{const[w]=_(x,g,N);return j(w),D.useMemo(()=>({refetch:()=>b(w)}),[w])},O=({refetchOnReconnect:g,refetchOnFocus:N,pollingInterval:w=0,skipPollingIfUnfocused:A=!1}={})=>{const{initiate:T}=t.endpoints[x],I=n(),[L,V]=D.useState(cp),M=D.useRef(void 0),U=Cu({refetchOnReconnect:g,refetchOnFocus:N,pollingInterval:w,skipPollingIfUnfocused:A});d(()=>{var ee,z;const Y=(ee=M.current)==null?void 0:ee.subscriptionOptions;U!==Y&&((z=M.current)==null||z.updateSubscriptionOptions(U))},[U]);const F=D.useRef(U);d(()=>{F.current=U},[U]);const B=D.useCallback(function(Y,ee=!1){let z;return e(()=>{var Q;(Q=M.current)==null||Q.unsubscribe(),M.current=z=I(T(Y,{subscriptionOptions:F.current,forceRefetch:!ee})),V(Y)}),z},[I,T]),q=D.useCallback(()=>{var Y,ee;(Y=M.current)!=null&&Y.queryCacheKey&&I(t.internalActions.removeQueryResult({queryCacheKey:(ee=M.current)==null?void 0:ee.queryCacheKey}))},[I]);return D.useEffect(()=>()=>{var Y;(Y=M==null?void 0:M.current)==null||Y.unsubscribe()},[]),D.useEffect(()=>{L!==cp&&!M.current&&B(L,!0)},[L,B]),D.useMemo(()=>[B,L,{reset:q}],[B,L,q])},v=C(x,f);return{useQueryState:v,useQuerySubscription:P,useLazyQuerySubscription:O,useLazyQuery(g){const[N,w,{reset:A}]=O(g),T=v(w,{...g,skip:w===cp}),I=D.useMemo(()=>({lastArg:w}),[w]);return D.useMemo(()=>[N,{...T,reset:A},I],[N,T,A,I])},useQuery(g,N){const w=P(g,N),A=v(g,{selectFromResult:g===Fn||N!=null&&N.skip?void 0:N0,...N}),T=dp(A,...hp);return D.useDebugValue(T),D.useMemo(()=>({...A,...w}),[A,w])}}}function E(x){const P=(v,g={})=>{const[N,w,A,T]=_(x,v,g),I=D.useRef(T);d(()=>{I.current=T},[T]);const L=D.useCallback(function(U,F){let B;return e(()=>{var q;(q=N.current)==null||q.unsubscribe(),N.current=B=w(A(U,{subscriptionOptions:I.current,direction:F}))}),B},[N,w,A]);j(N);const V=up(g.skip?Fn:v),M=D.useCallback(()=>b(N),[N]);return D.useMemo(()=>({trigger:L,refetch:M,fetchNextPage:()=>L(V,"forward"),fetchPreviousPage:()=>L(V,"backward")}),[M,L,V])},O=C(x,p);return{useInfiniteQueryState:O,useInfiniteQuerySubscription:P,useInfiniteQuery(v,g){const{refetch:N,fetchNextPage:w,fetchPreviousPage:A}=P(v,g),T=O(v,{selectFromResult:v===Fn||g!=null&&g.skip?void 0:N0,...g}),I=dp(T,...hp,"hasNextPage","hasPreviousPage");return D.useDebugValue(I),D.useMemo(()=>({...T,fetchNextPage:w,fetchPreviousPage:A,refetch:N}),[T,w,A,N])}}}function y(x){return({selectFromResult:P,fixedCacheKey:O}={})=>{const{select:v,initiate:g}=t.endpoints[x],N=n(),[w,A]=D.useState();D.useEffect(()=>()=>{w!=null&&w.arg.fixedCacheKey||w==null||w.reset()},[w]);const T=D.useCallback(function(Y){const ee=N(g(Y,{fixedCacheKey:O}));return A(ee),ee},[N,g,O]),{requestId:I}=w||{},L=D.useMemo(()=>v({fixedCacheKey:O,requestId:w==null?void 0:w.requestId}),[O,w,v]),V=D.useMemo(()=>P?a([L],P):L,[P,L]),M=s(V,gl),U=O==null?w==null?void 0:w.arg.originalArgs:void 0,F=D.useCallback(()=>{e(()=>{w&&A(void 0),O&&N(t.internalActions.removeMutationResult({requestId:I,fixedCacheKey:O}))})},[N,O,w,I]),B=dp(M,...hp,"endpointName");D.useDebugValue(B);const q=D.useMemo(()=>({...M,originalArgs:U,reset:F}),[M,U,F]);return D.useMemo(()=>[T,q],[T,q])}}}var ZP=Symbol(),eR=({batch:t=WT,hooks:e={useDispatch:xs,useSelector:Se,useStore:lN},createSelector:n=jy,unstable__sideEffectsInRender:s=!1,...r}={})=>({name:ZP,init(i,{serializeQueryArgs:a},l){const u=i,{buildQueryHooks:d,buildInfiniteQueryHooks:f,buildMutationHook:p,usePrefetch:h}=XP({api:i,moduleOptions:{batch:t,hooks:e,unstable__sideEffectsInRender:s,createSelector:n},serializeQueryArgs:a,context:l});return Ga(u,{usePrefetch:h}),Ga(l,{batch:t}),{injectEndpoint(_,C){if(qP(C)){const{useQuery:j,useLazyQuery:b,useLazyQuerySubscription:S,useQueryState:E,useQuerySubscription:y}=d(_);Ga(u.endpoints[_],{useQuery:j,useLazyQuery:b,useLazyQuerySubscription:S,useQueryState:E,useQuerySubscription:y}),i[`use${Nu(_)}Query`]=j,i[`useLazy${Nu(_)}Query`]=b}if(WP(C)){const j=p(_);Ga(u.endpoints[_],{useMutation:j}),i[`use${Nu(_)}Mutation`]=j}else if(MN(C)){const{useInfiniteQuery:j,useInfiniteQuerySubscription:b,useInfiniteQueryState:S}=f(_);Ga(u.endpoints[_],{useInfiniteQuery:j,useInfiniteQuerySubscription:b,useInfiniteQueryState:S}),i[`use${Nu(_)}InfiniteQuery`]=j}}}}}),Ss=kN(jN(),eR());const it={api:{baseUrl:"https://meanstack.smartdatainc.com:8081/api",timeout:parseInt("30000")||3e4},stripe:{publishableKey:"pk_test_51OYoR5SBfzKJHJohwMKGHKqFdsjLqSDOxwYPBGRHwLUTRZXVvG1DxcfcVvgjFLJHFvgjFLJHFvgjFLJHFvgjFLJH",enabled:!0},amazon:{clientId:"amzn1.application-oa2-client.example",redirectUri:"http://44.211.113.36:8082/amazon-callback",enabled:!0},app:{name:"Plurify",version:"1.0.0",env:"staging"},features:{stripe:!0,amazon:!0,walmart:!0,onboarding:!0},isDevelopment:!1,isStaging:!0,isProduction:!1};Object.freeze(it);const tR=async(t,e,n)=>{var a;const s=(a=e.getState().auth)==null?void 0:a.token;let i=await ws({baseUrl:it.api.baseUrl,timeout:it.api.timeout,prepareHeaders:l=>{if(s){const u=s.replace(/^["']|["']$/g,"");l.set("authorization",`Bearer ${u}`)}return l.set("Content-Type","application/json"),l}})(t,e,n);return i.error&&i.error.status===401&&(console.log("[Auth] Token expired or invalid, logging out..."),e.dispatch(kc()),window.location.href="/login?message=Session expired. Please login again."),i},Qu=Ss({reducerPath:"authApi",baseQuery:tR,endpoints:t=>({login:t.mutation({query:e=>({url:"/auth/signin",method:"POST",body:e})}),signup:t.mutation({query:e=>({url:"/auth/signup",method:"POST",body:e})}),googleAuth:t.mutation({query:e=>({url:"/auth/google",method:"POST",body:e})}),getUsers:t.query({query:()=>"/users"}),getUserById:t.query({query:e=>`/users/${e}`}),createStaff:t.mutation({query:e=>({url:"/admin/create-staff",method:"POST",body:e})}),getAllStaff:t.query({query:()=>"/admin/get-all-staff"}),updateStaff:t.mutation({query:({id:e,...n})=>({url:`/admin/update-staff/${e}`,method:"PUT",body:n})}),deactivateStaff:t.mutation({query:e=>({url:`/admin/deactivate-staff/${e}`,method:"DELETE"})}),reactivateStaff:t.mutation({query:e=>({url:`/admin/reactivate-staff/${e}`,method:"PUT"})}),assignClient:t.mutation({query:e=>({url:"/admin/assign-client",method:"POST",body:e})}),unassignClient:t.mutation({query:e=>({url:"/admin/unassign-client",method:"DELETE",body:e})}),getAllAssignments:t.query({query:()=>"/admin/get-assignments"}),getStaffClients:t.query({query:e=>`/admin/staff-clients/${e}`}),getClientsWithAssignments:t.query({query:()=>"/admin/clients-with-assignments"}),getMyClients:t.query({query:()=>"/staff/my-clients"}),getStaffDashboard:t.query({query:()=>"/staff/dashboard"})})}),{useLoginMutation:nR,useSignupMutation:sR,useGetUsersQuery:UN,useCreateStaffMutation:rR,useGetAllStaffQuery:FN,useDeactivateStaffMutation:iR,useReactivateStaffMutation:oR,useAssignClientMutation:aR,useUnassignClientMutation:lR,useGetClientsWithAssignmentsQuery:cR,useGetMyClientsQuery:uR,useGetStaffDashboardQuery:dR}=Qu,hR=async(t,e,n)=>{const s=e.getState().auth,r=s==null?void 0:s.token;let a=await ws({baseUrl:it.api.baseUrl,timeout:it.api.timeout,prepareHeaders:l=>{if(r){const u=r.replace(/^["']|["']$/g,"");l.set("authorization",`Bearer ${u}`)}return l.set("Content-Type","application/json"),l}})(t,e,n);return a.error&&a.error.status===401&&(console.log("[Auth] Token expired or invalid, logging out..."),e.dispatch(kc()),window.location.href="/login?message=Session expired. Please login again."),a},Ku=Ss({reducerPath:"subscriptionApi",baseQuery:hR,tagTypes:["SubscriptionPlan","UserSubscription","Transaction","BillingInfo"],endpoints:t=>({getSubscriptionPlans:t.query({query:()=>"/stripe/subscription-plans",providesTags:["SubscriptionPlan"]}),getSubscriptionPlanById:t.query({query:e=>`/stripe/subscription-plans/${e}`,providesTags:(e,n,s)=>[{type:"SubscriptionPlan",id:s}]}),createSubscriptionPlan:t.mutation({query:e=>({url:"/stripe/subscription-plans",method:"POST",body:e}),invalidatesTags:["SubscriptionPlan"]}),updateSubscriptionPlan:t.mutation({query:({id:e,...n})=>({url:`/stripe/subscription-plans/${e}`,method:"PUT",body:n}),invalidatesTags:(e,n,{id:s})=>[{type:"SubscriptionPlan",id:s},"SubscriptionPlan"]}),deleteSubscriptionPlan:t.mutation({query:e=>({url:`/stripe/subscription-plans/${e}`,method:"DELETE"}),invalidatesTags:["SubscriptionPlan"]}),getUserSubscription:t.query({query:()=>"/stripe/subscription",providesTags:["UserSubscription"]}),createSubscription:t.mutation({query:e=>({url:"/stripe/create-subscription",method:"POST",body:e}),invalidatesTags:["UserSubscription","Transaction"]}),cancelSubscription:t.mutation({query:e=>({url:"/stripe/cancel-subscription",method:"POST",body:{subscriptionId:e}}),invalidatesTags:["UserSubscription"]}),resumeSubscription:t.mutation({query:e=>({url:"/stripe/resume-subscription",method:"POST",body:{subscriptionId:e}}),invalidatesTags:["UserSubscription"]}),updateSubscription:t.mutation({query:e=>({url:"/stripe/update-subscription",method:"PUT",body:e}),invalidatesTags:["UserSubscription"]}),createPaymentIntent:t.mutation({query:e=>({url:"/stripe/create-payment-intent",method:"POST",body:e})}),processPayment:t.mutation({query:e=>({url:"/stripe/process-payment",method:"POST",body:e}),invalidatesTags:["UserSubscription","Transaction"]}),confirmPayment:t.mutation({query:e=>({url:"/stripe/confirm-payment",method:"POST",body:e}),invalidatesTags:["UserSubscription","Transaction"]}),getPaymentHistory:t.query({query:e=>({url:"/stripe/payment-history",params:e}),providesTags:["Transaction"]}),getTransactionById:t.query({query:e=>`/stripe/transactions/${e}`,providesTags:(e,n,s)=>[{type:"Transaction",id:s}]}),getBillingInfo:t.query({query:()=>"/stripe/billing-info",providesTags:["BillingInfo"]}),updateBillingInfo:t.mutation({query:e=>({url:"/stripe/billing-info",method:"PUT",body:e}),invalidatesTags:["BillingInfo"]}),getPaymentMethods:t.query({query:()=>"/stripe/payment-methods"}),addPaymentMethod:t.mutation({query:e=>({url:"/stripe/payment-methods",method:"POST",body:e})}),updatePaymentMethod:t.mutation({query:e=>({url:"/stripe/update-payment-method",method:"POST",body:e}),invalidatesTags:["BillingInfo"]}),deletePaymentMethod:t.mutation({query:e=>({url:`/stripe/payment-methods/${e}`,method:"DELETE"})}),applyCoupon:t.mutation({query:e=>({url:"/stripe/apply-coupon",method:"POST",body:{couponCode:e}})}),validateCoupon:t.query({query:e=>`/stripe/validate-coupon/${e}`}),getInvoices:t.query({query:()=>"/stripe/invoices"}),getUpcomingInvoice:t.query({query:()=>"/stripe/upcoming-invoice"}),downloadInvoice:t.mutation({query:e=>({url:`/stripe/invoices/${e}/download`,method:"GET",responseHandler:n=>n.blob()})}),reportUsage:t.mutation({query:e=>({url:"/stripe/report-usage",method:"POST",body:e})}),getUsageRecords:t.query({query:e=>({url:"/stripe/usage-records",params:e})}),previewSubscriptionChange:t.mutation({query:e=>({url:"/stripe/preview-subscription-change",method:"POST",body:e})}),createCustomerPortalSession:t.mutation({query:()=>({url:"/stripe/create-portal-session",method:"POST"})}),testWebhook:t.mutation({query:e=>({url:"/stripe/test-webhook",method:"POST",body:{eventType:e}})})})}),{useGetSubscriptionPlansQuery:zN,useCreateSubscriptionPlanMutation:fR,useUpdateSubscriptionPlanMutation:pR,useDeleteSubscriptionPlanMutation:mR,useGetUserSubscriptionQuery:My,useCreateSubscriptionMutation:gR,useCancelSubscriptionMutation:yR,useProcessPaymentMutation:vR,useGetPaymentHistoryQuery:_R,useGetBillingInfoQuery:xR,useUpdateBillingInfoMutation:wR,useGetPaymentMethodsQuery:SR,useDownloadInvoiceMutation:bR,useCreateCustomerPortalSessionMutation:NR}=Ku,Yu=Ss({reducerPath:"onboardingApi",baseQuery:ws({baseUrl:it.api.baseUrl,timeout:it.api.timeout,credentials:"include",prepareHeaders:(t,{getState:e})=>{const n=e().auth.token||localStorage.getItem("token");return n&&t.set("authorization",`Bearer ${n}`),t}}),tagTypes:["OnboardingStatus","OnboardingData"],endpoints:t=>({getOnboardingStatus:t.query({query:()=>"/onboarding/status",providesTags:["OnboardingStatus"]}),getOnboardingData:t.query({query:()=>"/onboarding/data",providesTags:["OnboardingData"]}),saveOnboardingProgress:t.mutation({query:e=>({url:"/onboarding/save-progress",method:"POST",body:e}),invalidatesTags:["OnboardingData"]}),completeOnboarding:t.mutation({query:e=>({url:"/onboarding/complete",method:"POST",body:e}),invalidatesTags:["OnboardingStatus","OnboardingData"]}),validateOnboardingStep:t.mutation({query:({step:e,data:n})=>({url:`/onboarding/validate-step/${e}`,method:"POST",body:n})})})}),{useGetOnboardingDataQuery:BN,useCompleteOnboardingMutation:CR}=Yu,Ju=Ss({reducerPath:"amazonApi",baseQuery:ws({baseUrl:it.api.baseUrl,prepareHeaders:(t,{getState:e})=>{const n=e().auth.token||localStorage.getItem("token");return n&&t.set("authorization",`Bearer ${n}`),t}}),tagTypes:["AmazonConnection","AmazonOrders"],endpoints:t=>({getAmazonAuthUrl:t.query({query:()=>"/amazon/auth/authorize"}),handleAmazonCallback:t.mutation({query:({code:e,state:n})=>({url:"/amazon/auth/callback",method:"POST",body:{code:e,state:n}}),invalidatesTags:["AmazonConnection"]}),getAmazonConnectionStatus:t.query({query:e=>({url:"/amazon/auth/status",params:e?{clientId:e}:{}}),providesTags:(e,n,s)=>s?[{type:"AmazonConnection",id:s}]:["AmazonConnection"]}),disconnectAmazon:t.mutation({query:()=>({url:"/amazon/auth/disconnect",method:"DELETE"}),invalidatesTags:["AmazonConnection","AmazonOrders"]}),refreshAmazonToken:t.mutation({query:()=>({url:"/amazon/auth/refresh",method:"POST"}),invalidatesTags:["AmazonConnection"]}),getAmazonOrders:t.query({query:(e={})=>({url:"/amazon/orders",params:{createdAfter:e.createdAfter,createdBefore:e.createdBefore,orderStatuses:e.orderStatuses,maxResults:e.maxResults||50,...e.clientId&&{clientId:e.clientId}}}),providesTags:(e,n,s)=>s!=null&&s.clientId?[{type:"AmazonOrders",id:s.clientId}]:["AmazonOrders"]}),getAmazonInventory:t.query({query:(e={})=>({url:"/amazon/inventory",params:{marketplaceId:e.marketplaceId,skus:e.skus,...e.clientId&&{clientId:e.clientId}}})}),getAmazonFinancialEvents:t.query({query:(e={})=>({url:"/amazon/finance",params:{postedAfter:e.postedAfter,postedBefore:e.postedBefore,maxResults:e.maxResults,...e.clientId&&{clientId:e.clientId}}})}),createAmazonReport:t.mutation({query:({reportType:e,dataStartTime:n,dataEndTime:s})=>({url:"/amazon/reports",method:"POST",body:{reportType:e,dataStartTime:n,dataEndTime:s}})}),getAmazonDashboard:t.query({query:e=>({url:"/amazon/dashboard",params:e?{clientId:e}:{}})})})}),{useHandleAmazonCallbackMutation:ER,useGetAmazonConnectionStatusQuery:kR,useDisconnectAmazonMutation:jR,useGetAmazonOrdersQuery:IR,useLazyGetAmazonAuthUrlQuery:TR,useLazyGetAmazonOrdersQuery:AR}=Ju,Xu=Ss({reducerPath:"amazonSandboxApi",baseQuery:ws({baseUrl:it.api.baseUrl,prepareHeaders:(t,{getState:e})=>{var s;const n=((s=e().auth)==null?void 0:s.token)||localStorage.getItem("token");return n&&t.set("authorization",`Bearer ${n}`),t}}),tagTypes:["SandboxStatus","SandboxOrders","SandboxInventory"],endpoints:t=>({initializeSandbox:t.mutation({query:(e={})=>({url:"/amazon/sandbox/initialize",method:"POST",body:e}),invalidatesTags:["SandboxStatus"]}),getSandboxStatus:t.query({query:()=>"/amazon/sandbox/status",providesTags:["SandboxStatus"]}),testSandboxConnection:t.query({query:()=>"/amazon/sandbox/test"}),resetSandbox:t.mutation({query:()=>({url:"/amazon/sandbox/reset",method:"DELETE"}),invalidatesTags:["SandboxStatus","SandboxOrders","SandboxInventory"]}),getSandboxOrders:t.query({query:(e={})=>({url:"/amazon/sandbox/orders",params:{marketplaceId:e.marketplaceId,createdAfter:e.createdAfter||new Date(Date.now()-30*24*60*60*1e3).toISOString(),createdBefore:e.createdBefore,orderStatuses:e.orderStatuses,maxResults:e.maxResults||20}}),providesTags:["SandboxOrders"]}),getSandboxInventory:t.query({query:(e={})=>({url:"/amazon/sandbox/inventory",params:{marketplaceId:e.marketplaceId,skus:e.skus}}),providesTags:["SandboxInventory"]})})}),{useInitializeSandboxMutation:PR,useGetSandboxStatusQuery:RR,useResetSandboxMutation:OR,useGetSandboxOrdersQuery:DR,useGetSandboxInventoryQuery:LR,useLazyTestSandboxConnectionQuery:MR}=Xu,Zu=Ss({reducerPath:"userApi",baseQuery:ws({baseUrl:it.api.baseUrl,prepareHeaders:(t,{getState:e})=>{var s;const n=((s=e().auth)==null?void 0:s.token)||localStorage.getItem("token");return n&&t.set("authorization",`Bearer ${n}`),t}}),tagTypes:["Profile","ClientList","ClientProfile"],endpoints:t=>({getUserProfile:t.query({query:()=>"/user/profile",providesTags:["Profile"]}),updateUserProfile:t.mutation({query:e=>({url:"/user/profile",method:"PUT",body:e}),invalidatesTags:["Profile"]}),uploadProfilePicture:t.mutation({query:e=>({url:"/user/profile/upload-picture",method:"POST",body:e}),invalidatesTags:["Profile"]}),getAllClients:t.query({query:()=>"/admin/clients-list",providesTags:["ClientList"]}),getClientProfile:t.query({query:e=>`/admin/client/${e}/profile`,providesTags:(e,n,s)=>[{type:"ClientProfile",id:s}]})})}),{useGetUserProfileQuery:UR,useUpdateUserProfileMutation:FR,useUploadProfilePictureMutation:zR,useGetAllClientsQuery:BR,useGetClientProfileQuery:$R}=Zu,Ti=Ss({reducerPath:"notificationApi",baseQuery:ws({baseUrl:it.api.baseUrl,timeout:it.api.timeout,credentials:"include",prepareHeaders:(t,{getState:e})=>{const n=e().auth.token||localStorage.getItem("token");return n&&t.set("authorization",`Bearer ${n}`),t}}),tagTypes:["Notification","UnreadCount","Preferences"],endpoints:t=>({getNotificationById:t.query({query:e=>`/notifications/${e}`,providesTags:(e,n,s)=>[{type:"Notification",id:s},"UnreadCount"],transformResponse:e=>e.data&&e.data.notification?{notification:e.data.notification,unreadCount:e.data.unreadCount}:{notification:e.data,unreadCount:null}}),getNotifications:t.query({query:({page:e=1,limit:n=20,unreadOnly:s=!1,type:r,priority:i,category:a,lastCheck:l})=>({url:"/notifications",params:{page:e,limit:n,unreadOnly:s,type:r,priority:i,category:a,lastCheck:l}}),providesTags:e=>e?[...e.data.notifications.map(({_id:n})=>({type:"Notification",id:n})),{type:"Notification",id:"LIST"},"UnreadCount"]:[{type:"Notification",id:"LIST"},"UnreadCount"]}),pollNotifications:t.query({query:e=>({url:"/notifications/poll",params:{lastCheck:e}}),providesTags:["UnreadCount"]}),getUnreadCount:t.query({query:()=>"/notifications/unread-count",providesTags:["UnreadCount"],transformResponse:e=>e.data.count}),createNotification:t.mutation({query:e=>({url:"/notifications",method:"POST",body:e}),invalidatesTags:[{type:"Notification",id:"LIST"},"UnreadCount"]}),markAsRead:t.mutation({query:e=>({url:`/notifications/${e}/read`,method:"PUT"}),invalidatesTags:(e,n,s)=>[{type:"Notification",id:s},"UnreadCount"]}),markAllAsRead:t.mutation({query:()=>({url:"/notifications/read-all",method:"PUT"}),invalidatesTags:[{type:"Notification",id:"LIST"},"UnreadCount"],async onQueryStarted(e,{dispatch:n,queryFulfilled:s}){const r=n(Ti.util.updateQueryData("getNotifications",void 0,i=>{i.data.notifications.forEach(a=>{a.isRead||(a.isRead=!0,a.readAt=new Date().toISOString())}),i.data.unreadCount=0}));try{await s}catch{r.undo()}}}),deleteNotification:t.mutation({query:e=>({url:`/notifications/${e}`,method:"DELETE"}),invalidatesTags:(e,n,s)=>[{type:"Notification",id:s},{type:"Notification",id:"LIST"},"UnreadCount"]}),broadcastNotification:t.mutation({query:e=>({url:"/notifications/broadcast",method:"POST",body:e}),invalidatesTags:[{type:"Notification",id:"LIST"}]}),getNotificationPreferences:t.query({query:()=>"/notifications/preferences",providesTags:["Preferences"],transformResponse:e=>e.data}),updateNotificationPreferences:t.mutation({query:e=>({url:"/notifications/preferences",method:"PUT",body:e}),invalidatesTags:["Preferences"]}),sendTestNotification:t.mutation({query:(e=["inApp"])=>({url:"/notifications/test",method:"POST",body:{channels:e}}),invalidatesTags:[{type:"Notification",id:"LIST"},"UnreadCount"]}),getNotificationStats:t.query({query:()=>"/notifications/stats",transformResponse:e=>e.data})})}),{useGetUnreadCountQuery:VR,useMarkAsReadMutation:qR,useMarkAllAsReadMutation:WR,useDeleteNotificationMutation:HR}=Ti,ed=Ss({reducerPath:"shopifyApi",baseQuery:ws({baseUrl:it.api.baseUrl,prepareHeaders:(t,{getState:e})=>{const n=e().auth.token||localStorage.getItem("token");return n&&t.set("authorization",`Bearer ${n}`),t}}),tagTypes:["ShopifyConnection","ShopifyOrders","ShopifyHealth"],endpoints:t=>({getShopifyAuthUrl:t.query({query:e=>({url:"/shopify/auth/authorize",params:{shop:e}})}),getShopifyConnectionStatus:t.query({query:e=>({url:"/shopify/auth/status",params:e?{clientId:e}:{}}),providesTags:(e,n,s)=>s?[{type:"ShopifyConnection",id:s}]:["ShopifyConnection"]}),disconnectShopify:t.mutation({query:()=>({url:"/shopify/auth/disconnect",method:"DELETE"}),invalidatesTags:["ShopifyConnection","ShopifyOrders"]}),getShopifyOrders:t.query({query:(e={})=>({url:"/shopify/orders",params:{status:e.status||"any",limit:e.limit||50,createdAfter:e.createdAfter,createdBefore:e.createdBefore,fields:e.fields,page_info:e.page_info,...e.clientId&&{clientId:e.clientId}}}),providesTags:(e,n,s)=>s!=null&&s.clientId?[{type:"ShopifyOrders",id:s.clientId}]:["ShopifyOrders"],transformResponse:e=>{if(e.success===!1)throw new Error(e.message||"Failed to fetch orders");return e}}),getShopifyHealth:t.query({query:()=>"/shopify/health",providesTags:["ShopifyHealth"]})})}),{useGetShopifyConnectionStatusQuery:GR,useDisconnectShopifyMutation:QR,useGetShopifyOrdersQuery:KR,useLazyGetShopifyAuthUrlQuery:YR,useLazyGetShopifyOrdersQuery:JR}=ed,td=Ss({reducerPath:"documentApi",baseQuery:ws({baseUrl:it.api.baseUrl,prepareHeaders:(t,{getState:e})=>{var s,r;const n=((r=(s=e())==null?void 0:s.auth)==null?void 0:r.token)||localStorage.getItem("token");return n&&t.set("authorization",`Bearer ${n}`),t}}),tagTypes:["Document","Category"],endpoints:t=>({getCategories:t.query({query:()=>"/documents/categories",providesTags:["Category"]}),uploadDocument:t.mutation({query:e=>({url:"/documents/upload",method:"POST",body:e}),invalidatesTags:["Document"]}),uploadMultipleDocuments:t.mutation({query:e=>({url:"/documents/upload-multiple",method:"POST",body:e}),invalidatesTags:["Document"]}),getDocuments:t.query({query:(e={})=>({url:"/documents",params:e}),providesTags:["Document"]}),getDocument:t.query({query:e=>`/documents/${e}`,providesTags:(e,n,s)=>[{type:"Document",id:s}]}),deleteDocument:t.mutation({query:e=>({url:`/documents/${e}`,method:"DELETE"}),invalidatesTags:["Document"]}),getDownloadUrl:t.query({query:e=>({url:`/documents/${e}/download`,responseHandler:async n=>`${it.api.baseUrl}/documents/${e}/download`})})})}),{useGetCategoriesQuery:$N,useUploadDocumentMutation:XR,useUploadMultipleDocumentsMutation:ZR,useGetDocumentsQuery:eO,useDeleteDocumentMutation:tO}=td,nd=Ss({reducerPath:"quickbooksApi",baseQuery:ws({baseUrl:it.api.baseUrl,prepareHeaders:t=>{const e=localStorage.getItem("token");return e&&t.set("authorization",`Bearer ${e}`),t}}),tagTypes:["QuickBooksStatus","Invoices","Customers","Expenses","Dashboard"],endpoints:t=>({getQuickBooksAuthUrl:t.mutation({query:()=>({url:"/quickbooks/auth/authorize",method:"GET"})}),getQuickBooksConnectionStatus:t.query({query:e=>({url:"/quickbooks/auth/status",params:e?{clientId:e}:{}}),providesTags:(e,n,s)=>s?[{type:"QuickBooksStatus",id:s}]:["QuickBooksStatus"]}),refreshQuickBooksToken:t.mutation({query:()=>({url:"/quickbooks/auth/refresh",method:"POST"}),invalidatesTags:["QuickBooksStatus"]}),disconnectQuickBooks:t.mutation({query:()=>({url:"/quickbooks/auth/disconnect",method:"DELETE"}),invalidatesTags:["QuickBooksStatus","Invoices","Customers","Expenses","Dashboard"]}),handleQuickBooksCallback:t.mutation({query:e=>({url:"/quickbooks/auth/callback",method:"POST",body:e}),invalidatesTags:["QuickBooksStatus"]}),syncQuickBooksData:t.mutation({query:()=>({url:"/quickbooks/sync",method:"POST"}),invalidatesTags:["Invoices","Customers","Expenses","Dashboard"]}),getQuickBooksInvoices:t.query({query:(e={})=>({url:"/quickbooks/invoices",params:{...e,...e.clientId&&{clientId:e.clientId}}}),providesTags:(e,n,s)=>s!=null&&s.clientId?[{type:"Invoices",id:s.clientId}]:["Invoices"]}),getQuickBooksCustomers:t.query({query:(e={})=>({url:"/quickbooks/customers",params:{...e,...e.clientId&&{clientId:e.clientId}}}),providesTags:(e,n,s)=>s!=null&&s.clientId?[{type:"Customers",id:s.clientId}]:["Customers"]}),getQuickBooksExpenses:t.query({query:(e={})=>({url:"/quickbooks/expenses",params:{...e,...e.clientId&&{clientId:e.clientId}}}),providesTags:(e,n,s)=>s!=null&&s.clientId?[{type:"Expenses",id:s.clientId}]:["Expenses"]}),getQuickBooksVendors:t.query({query:(e={})=>({url:"/quickbooks/vendors",params:e})}),getQuickBooksBills:t.query({query:(e={})=>({url:"/quickbooks/bills",params:e})}),getQuickBooksProfitLoss:t.query({query:(e={})=>({url:"/quickbooks/reports/profit-loss",params:{...e,...e.clientId&&{clientId:e.clientId}}})}),getQuickBooksBalanceSheet:t.query({query:(e={})=>({url:"/quickbooks/reports/balance-sheet",params:{...e,...e.clientId&&{clientId:e.clientId}}})}),getQuickBooksDashboard:t.query({query:e=>({url:"/quickbooks/dashboard",params:e?{clientId:e}:{}}),providesTags:(e,n,s)=>s?[{type:"Dashboard",id:s}]:["Dashboard"]}),getQuickBooksHealth:t.query({query:()=>"/quickbooks/health"})})}),{useGetQuickBooksAuthUrlMutation:nO,useGetQuickBooksConnectionStatusQuery:sO,useDisconnectQuickBooksMutation:rO,useHandleQuickBooksCallbackMutation:iO,useSyncQuickBooksDataMutation:oO,useGetQuickBooksInvoicesQuery:aO,useLazyGetQuickBooksInvoicesQuery:lO,useGetQuickBooksCustomersQuery:cO,useGetQuickBooksExpensesQuery:uO,useGetQuickBooksProfitLossQuery:dO,useGetQuickBooksBalanceSheetQuery:hO}=nd,VN=CA({reducer:{auth:vP,onboarding:kP,notifications:VP,[Qu.reducerPath]:Qu.reducer,[Ku.reducerPath]:Ku.reducer,[Yu.reducerPath]:Yu.reducer,[Ju.reducerPath]:Ju.reducer,[Xu.reducerPath]:Xu.reducer,[Zu.reducerPath]:Zu.reducer,[Ti.reducerPath]:Ti.reducer,[ed.reducerPath]:ed.reducer,[td.reducerPath]:td.reducer,[nd.reducerPath]:nd.reducer},middleware:t=>t({serializableCheck:!1}).concat(Qu.middleware).concat(Ku.middleware).concat(Yu.middleware).concat(Ju.middleware).concat(Xu.middleware).concat(Zu.middleware).concat(Ti.middleware).concat(ed.middleware).concat(td.middleware).concat(nd.middleware)});XA(VN.dispatch);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ec(){return ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ec.apply(this,arguments)}var kr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(kr||(kr={}));const C0="popstate";function fO(t){t===void 0&&(t={});function e(s,r){let{pathname:i,search:a,hash:l}=s.location;return Qm("",{pathname:i,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:Wd(r)}return mO(e,n,null,t)}function ot(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qN(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pO(){return Math.random().toString(36).substr(2,8)}function E0(t,e){return{usr:t.state,key:t.key,idx:e}}function Qm(t,e,n,s){return n===void 0&&(n=null),ec({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ya(e):e,{state:n,key:e&&e.key||s||pO()})}function Wd(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ya(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function mO(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,a=r.history,l=kr.Pop,u=null,d=f();d==null&&(d=0,a.replaceState(ec({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function p(){l=kr.Pop;let b=f(),S=b==null?null:b-d;d=b,u&&u({action:l,location:j.location,delta:S})}function h(b,S){l=kr.Push;let E=Qm(j.location,b,S);d=f()+1;let y=E0(E,d),x=j.createHref(E);try{a.pushState(y,"",x)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;r.location.assign(x)}i&&u&&u({action:l,location:j.location,delta:1})}function _(b,S){l=kr.Replace;let E=Qm(j.location,b,S);d=f();let y=E0(E,d),x=j.createHref(E);a.replaceState(y,"",x),i&&u&&u({action:l,location:j.location,delta:0})}function C(b){let S=r.location.origin!=="null"?r.location.origin:r.location.href,E=typeof b=="string"?b:Wd(b);return E=E.replace(/ $/,"%20"),ot(S,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,S)}let j={get action(){return l},get location(){return t(r,a)},listen(b){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(C0,p),u=b,()=>{r.removeEventListener(C0,p),u=null}},createHref(b){return e(r,b)},createURL:C,encodeLocation(b){let S=C(b);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:h,replace:_,go(b){return a.go(b)}};return j}var k0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(k0||(k0={}));function gO(t,e,n){return n===void 0&&(n="/"),yO(t,e,n)}function yO(t,e,n,s){let r=typeof e=="string"?ya(e):e,i=Uy(r.pathname||"/",n);if(i==null)return null;let a=WN(t);vO(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let d=TO(i);l=kO(a[u],d)}return l}function WN(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,a,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(ot(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let d=Ur([s,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(ot(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),WN(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:CO(d,i.index),routesMeta:f})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,a);else for(let u of HN(i.path))r(i,a,u)}),e}function HN(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let a=HN(s.join("/")),l=[];return l.push(...a.map(u=>u===""?i:[i,u].join("/"))),r&&l.push(...a),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function vO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:EO(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const _O=/^:[\w-]+$/,xO=3,wO=2,SO=1,bO=10,NO=-2,j0=t=>t==="*";function CO(t,e){let n=t.split("/"),s=n.length;return n.some(j0)&&(s+=NO),e&&(s+=wO),n.filter(r=>!j0(r)).reduce((r,i)=>r+(_O.test(i)?xO:i===""?SO:bO),s)}function EO(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function kO(t,e,n){let{routesMeta:s}=t,r={},i="/",a=[];for(let l=0;l<s.length;++l){let u=s[l],d=l===s.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=jO({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),h=u.route;if(!p)return null;Object.assign(r,p.params),a.push({params:r,pathname:Ur([i,p.pathname]),pathnameBase:OO(Ur([i,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(i=Ur([i,p.pathnameBase]))}return a}function jO(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=IO(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((d,f,p)=>{let{paramName:h,isOptional:_}=f;if(h==="*"){let j=l[p]||"";a=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const C=l[p];return _&&!C?d[h]=void 0:d[h]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function IO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),qN(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(s.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function TO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qN(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Uy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function AO(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?ya(t):t;return{pathname:n?n.startsWith("/")?n:PO(n,e):e,search:DO(s),hash:LO(r)}}function PO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function fp(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function RO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Fy(t,e){let n=RO(t);return e?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function zy(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=ya(t):(r=ec({},t),ot(!r.pathname||!r.pathname.includes("?"),fp("?","pathname","search",r)),ot(!r.pathname||!r.pathname.includes("#"),fp("#","pathname","hash",r)),ot(!r.search||!r.search.includes("#"),fp("#","search","hash",r)));let i=t===""||r.pathname==="",a=i?"/":r.pathname,l;if(a==null)l=n;else{let p=e.length-1;if(!s&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),p-=1;r.pathname=h.join("/")}l=p>=0?e[p]:"/"}let u=AO(r,l),d=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Ur=t=>t.join("/").replace(/\/\/+/g,"/"),OO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,LO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function MO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const GN=["post","put","patch","delete"];new Set(GN);const UO=["get",...GN];new Set(UO);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tc(){return tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},tc.apply(this,arguments)}const By=D.createContext(null),FO=D.createContext(null),ei=D.createContext(null),qh=D.createContext(null),ti=D.createContext({outlet:null,matches:[],isDataRoute:!1}),QN=D.createContext(null);function zO(t,e){let{relative:n}=e===void 0?{}:e;va()||ot(!1);let{basename:s,navigator:r}=D.useContext(ei),{hash:i,pathname:a,search:l}=YN(t,{relative:n}),u=a;return s!=="/"&&(u=a==="/"?s:Ur([s,a])),r.createHref({pathname:u,search:l,hash:i})}function va(){return D.useContext(qh)!=null}function bs(){return va()||ot(!1),D.useContext(qh).location}function KN(t){D.useContext(ei).static||D.useLayoutEffect(t)}function Ft(){let{isDataRoute:t}=D.useContext(ti);return t?ZO():BO()}function BO(){va()||ot(!1);let t=D.useContext(By),{basename:e,future:n,navigator:s}=D.useContext(ei),{matches:r}=D.useContext(ti),{pathname:i}=bs(),a=JSON.stringify(Fy(r,n.v7_relativeSplatPath)),l=D.useRef(!1);return KN(()=>{l.current=!0}),D.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let p=zy(d,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ur([e,p.pathname])),(f.replace?s.replace:s.push)(p,f.state,f)},[e,s,a,i,t])}function YN(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=D.useContext(ei),{matches:r}=D.useContext(ti),{pathname:i}=bs(),a=JSON.stringify(Fy(r,s.v7_relativeSplatPath));return D.useMemo(()=>zy(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function $O(t,e){return VO(t,e)}function VO(t,e,n,s){va()||ot(!1);let{navigator:r}=D.useContext(ei),{matches:i}=D.useContext(ti),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=bs(),f;if(e){var p;let b=typeof e=="string"?ya(e):e;u==="/"||(p=b.pathname)!=null&&p.startsWith(u)||ot(!1),f=b}else f=d;let h=f.pathname||"/",_=h;if(u!=="/"){let b=u.replace(/^\//,"").split("/");_="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let C=gO(t,{pathname:_}),j=QO(C&&C.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Ur([u,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:Ur([u,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,s);return e&&j?D.createElement(qh.Provider,{value:{location:tc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:kr.Pop}},j):j}function qO(){let t=XO(),e=MO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:r},n):null,null)}const WO=D.createElement(qO,null);class HO extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(ti.Provider,{value:this.props.routeContext},D.createElement(QN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GO(t){let{routeContext:e,match:n,children:s}=t,r=D.useContext(By);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(ti.Provider,{value:e},s)}function QO(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(r=n)==null?void 0:r.errors;if(l!=null){let f=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||ot(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:h,errors:_}=n,C=p.route.loader&&h[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||C){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,p,h)=>{let _,C=!1,j=null,b=null;n&&(_=l&&p.route.id?l[p.route.id]:void 0,j=p.route.errorElement||WO,u&&(d<0&&h===0?(e4("route-fallback"),C=!0,b=null):d===h&&(C=!0,b=p.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,h+1)),E=()=>{let y;return _?y=j:C?y=b:p.route.Component?y=D.createElement(p.route.Component,null):p.route.element?y=p.route.element:y=f,D.createElement(GO,{match:p,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:y})};return n&&(p.route.ErrorBoundary||p.route.errorElement||h===0)?D.createElement(HO,{location:n.location,revalidation:n.revalidation,component:j,error:_,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):E()},null)}var JN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(JN||{}),XN=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(XN||{});function KO(t){let e=D.useContext(By);return e||ot(!1),e}function YO(t){let e=D.useContext(FO);return e||ot(!1),e}function JO(t){let e=D.useContext(ti);return e||ot(!1),e}function ZN(t){let e=JO(),n=e.matches[e.matches.length-1];return n.route.id||ot(!1),n.route.id}function XO(){var t;let e=D.useContext(QN),n=YO(),s=ZN();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function ZO(){let{router:t}=KO(JN.UseNavigateStable),e=ZN(XN.UseNavigateStable),n=D.useRef(!1);return KN(()=>{n.current=!0}),D.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,tc({fromRouteId:e},i)))},[t,e])}const I0={};function e4(t,e,n){I0[t]||(I0[t]=!0)}function t4(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gn(t){let{to:e,replace:n,state:s,relative:r}=t;va()||ot(!1);let{future:i,static:a}=D.useContext(ei),{matches:l}=D.useContext(ti),{pathname:u}=bs(),d=Ft(),f=zy(e,Fy(l,i.v7_relativeSplatPath),u,r==="path"),p=JSON.stringify(f);return D.useEffect(()=>d(JSON.parse(p),{replace:n,state:s,relative:r}),[d,p,r,n,s]),null}function hn(t){ot(!1)}function n4(t){let{basename:e="/",children:n=null,location:s,navigationType:r=kr.Pop,navigator:i,static:a=!1,future:l}=t;va()&&ot(!1);let u=e.replace(/^\/*/,"/"),d=D.useMemo(()=>({basename:u,navigator:i,static:a,future:tc({v7_relativeSplatPath:!1},l)}),[u,l,i,a]);typeof s=="string"&&(s=ya(s));let{pathname:f="/",search:p="",hash:h="",state:_=null,key:C="default"}=s,j=D.useMemo(()=>{let b=Uy(f,u);return b==null?null:{location:{pathname:b,search:p,hash:h,state:_,key:C},navigationType:r}},[u,f,p,h,_,C,r]);return j==null?null:D.createElement(ei.Provider,{value:d},D.createElement(qh.Provider,{children:n,value:j}))}function s4(t){let{children:e,location:n}=t;return $O(Km(e),n)}new Promise(()=>{});function Km(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(s,r)=>{if(!D.isValidElement(s))return;let i=[...e,r];if(s.type===D.Fragment){n.push.apply(n,Km(s.props.children,i));return}s.type!==hn&&ot(!1),!s.props.index||!s.props.children||ot(!1);let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=Km(s.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ym(){return Ym=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ym.apply(this,arguments)}function r4(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function i4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function o4(t,e){return t.button===0&&(!e||e==="_self")&&!i4(t)}function Jm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let s=t[n];return e.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function a4(t,e){let n=Jm(t);return e&&e.forEach((s,r)=>{n.has(r)||e.getAll(r).forEach(i=>{n.append(r,i)})}),n}const l4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],c4="6";try{window.__reactRouterVersion=c4}catch{}const u4="startTransition",T0=d2[u4];function d4(t){let{basename:e,children:n,future:s,window:r}=t,i=D.useRef();i.current==null&&(i.current=fO({window:r,v5Compat:!0}));let a=i.current,[l,u]=D.useState({action:a.action,location:a.location}),{v7_startTransition:d}=s||{},f=D.useCallback(p=>{d&&T0?T0(()=>u(p)):u(p)},[u,d]);return D.useLayoutEffect(()=>a.listen(f),[a,f]),D.useEffect(()=>t4(s),[s]),D.createElement(n4,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:s})}const h4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",f4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eC=D.forwardRef(function(e,n){let{onClick:s,relative:r,reloadDocument:i,replace:a,state:l,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,h=r4(e,l4),{basename:_}=D.useContext(ei),C,j=!1;if(typeof d=="string"&&f4.test(d)&&(C=d,h4))try{let y=new URL(window.location.href),x=d.startsWith("//")?new URL(y.protocol+d):new URL(d),P=Uy(x.pathname,_);x.origin===y.origin&&P!=null?d=P+x.search+x.hash:j=!0}catch{}let b=zO(d,{relative:r}),S=p4(d,{replace:a,state:l,target:u,preventScrollReset:f,relative:r,viewTransition:p});function E(y){s&&s(y),y.defaultPrevented||S(y)}return D.createElement("a",Ym({},h,{href:C||b,onClick:j||i?s:E,ref:n,target:u}))});var A0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(A0||(A0={}));var P0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(P0||(P0={}));function p4(t,e){let{target:n,replace:s,state:r,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,u=Ft(),d=bs(),f=YN(t,{relative:a});return D.useCallback(p=>{if(o4(p,n)){p.preventDefault();let h=s!==void 0?s:Wd(d)===Wd(f);u(t,{replace:h,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[d,u,f,s,r,n,t,i,a,l])}function tC(t){let e=D.useRef(Jm(t)),n=D.useRef(!1),s=bs(),r=D.useMemo(()=>a4(s.search,n.current?null:e.current),[s.search]),i=Ft(),a=D.useCallback((l,u)=>{const d=Jm(typeof l=="function"?l(r):l);n.current=!0,i("?"+d,u)},[i,r]);return[r,a]}const m4=()=>{};var R0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X=function(t,e){if(!t)throw _a(e)},_a=function(t){return new Error("Firebase Database ("+nC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},g4=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],a=t[n++],l=t[n++],u=((r&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return e.join("")},$y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],a=r+1<t.length,l=a?t[r+1]:0,u=r+2<t.length,d=u?t[r+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let h=(l&15)<<2|d>>6,_=d&63;u||(_=64,a||(h=64)),s.push(n[f],n[p],n[h],n[_])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):g4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||d==null||p==null)throw new y4;const h=i<<2|l>>4;if(s.push(h),d!==64){const _=l<<4&240|d>>2;if(s.push(_),p!==64){const C=d<<6&192|p;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class y4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rC=function(t){const e=sC(t);return $y.encodeByteArray(e,!0)},Hd=function(t){return rC(t).replace(/\./g,"")},Gd=function(t){try{return $y.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t){return iC(void 0,t)}function iC(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!_4(n)||(t[n]=iC(t[n],e[n]));return t}function _4(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=()=>x4().__FIREBASE_DEFAULTS__,S4=()=>{if(typeof process>"u"||typeof R0>"u")return;const t=R0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},b4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gd(t[1]);return e&&JSON.parse(e)},Vy=()=>{try{return m4()||w4()||S4()||b4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oC=t=>{var e,n;return(n=(e=Vy())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},aC=t=>{const e=oC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},lC=()=>{var t;return(t=Vy())==null?void 0:t.config},cC=t=>{var e;return(e=Vy())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Hd(JSON.stringify(n)),Hd(JSON.stringify(a)),""].join(".")}const _l={};function N4(){const t={prod:[],emulator:[]};for(const e of Object.keys(_l))_l[e]?t.emulator.push(e):t.prod.push(e);return t}function C4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let O0=!1;function Wy(t,e){if(typeof window>"u"||typeof document>"u"||!no(window.location.host)||_l[t]===e||_l[t]||O0)return;_l[t]=e;function n(h){return`__firebase__banner__${h}`}const s="__firebase__banner",i=N4().prod.length>0;function a(){const h=document.getElementById(s);h&&h.remove()}function l(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function u(h,_){h.setAttribute("width","24"),h.setAttribute("id",_),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function d(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{O0=!0,a()},h}function f(h,_){h.setAttribute("id",_),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function p(){const h=C4(s),_=n("text"),C=document.getElementById(_)||document.createElement("span"),j=n("learnmore"),b=document.getElementById(j)||document.createElement("a"),S=n("preprendIcon"),E=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const y=h.element;l(y),f(b,j);const x=d();u(E,S),y.append(E,C,b,x),document.body.appendChild(y)}i?(C.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function E4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function k4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j4(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function I4(){return nC.NODE_ADMIN===!0}function hC(){try{return typeof indexedDB=="object"}catch{return!1}}function fC(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function T4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="FirebaseError";class Ns extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=A4,Object.setPrototypeOf(this,Ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,so.prototype.create)}}class so{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?P4(i,s):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new Ns(r,l,s)}}function P4(t,e){return t.replace(R4,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const R4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t){return JSON.parse(t)}function xt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=function(t){let e={},n={},s={},r="";try{const i=t.split(".");e=nc(Gd(i[0])||""),n=nc(Gd(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},O4=function(t){const e=pC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},D4=function(t){const e=pC(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function sa(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Xm(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qd(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function Hr(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],a=e[r];if(D0(i)&&D0(a)){if(!Hr(i,a))return!1}else if(i!==a)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function D0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)s[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)s[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const h=s[p-3]^s[p-8]^s[p-14]^s[p-16];s[p]=(h<<1|h>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],a=this.chain_[2],l=this.chain_[3],u=this.chain_[4],d,f;for(let p=0;p<80;p++){p<40?p<20?(d=l^i&(a^l),f=1518500249):(d=i^a^l,f=1859775393):p<60?(d=i&a|l&(i|a),f=2400959708):(d=i^a^l,f=3395469782);const h=(r<<5|r>>>27)+d+u+f+s[p]&4294967295;u=l,l=a,a=(i<<30|i>>>2)&4294967295,i=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const i=this.buf_;let a=this.inbuf_;for(;r<n;){if(a===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(i[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<n;)if(i[a]=e[r],++a,++r,a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function M4(t,e){const n=new U4(t,e);return n.subscribe.bind(n)}class U4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");F4(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=pp),r.error===void 0&&(r.error=pp),r.complete===void 0&&(r.complete=pp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pp(){}function Gy(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,X(s<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(s)-56320;r=65536+(i<<10)+a}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Hh=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t){return t&&t._delegate?t._delegate:t}class An{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Wh;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V4(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&a.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:$4(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $4(t){return t===gi?void 0:t}function V4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new B4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const W4={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},H4=Te.INFO,G4={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},Q4=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=G4[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gh{constructor(e){this.name=e,this._logLevel=H4,this._logHandler=Q4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const K4=(t,e)=>e.some(n=>t instanceof n);let L0,M0;function Y4(){return L0||(L0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function J4(){return M0||(M0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mC=new WeakMap,Zm=new WeakMap,gC=new WeakMap,mp=new WeakMap,Qy=new WeakMap;function X4(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Ws(t.result)),r()},a=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&mC.set(n,t)}).catch(()=>{}),Qy.set(e,t),e}function Z4(t){if(Zm.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),r()},a=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Zm.set(t,e)}let eg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ws(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eD(t){eg=t(eg)}function tD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(gp(this),e,...n);return gC.set(s,e.sort?e.sort():[e]),Ws(s)}:J4().includes(t)?function(...e){return t.apply(gp(this),e),Ws(mC.get(this))}:function(...e){return Ws(t.apply(gp(this),e))}}function nD(t){return typeof t=="function"?tD(t):(t instanceof IDBTransaction&&Z4(t),K4(t,Y4())?new Proxy(t,eg):t)}function Ws(t){if(t instanceof IDBRequest)return X4(t);if(mp.has(t))return mp.get(t);const e=nD(t);return e!==t&&(mp.set(t,e),Qy.set(e,t)),e}const gp=t=>Qy.get(t);function Qh(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const a=indexedDB.open(t,e),l=Ws(a);return s&&a.addEventListener("upgradeneeded",u=>{s(Ws(a.result),u.oldVersion,u.newVersion,Ws(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),r&&u.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}function yp(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",s=>e(s.oldVersion,s)),Ws(n).then(()=>{})}const sD=["get","getKey","getAll","getAllKeys","count"],rD=["put","add","delete","clear"],vp=new Map;function U0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vp.get(e))return vp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=rD.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||sD.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let d=u.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),r&&u.done]))[0]};return vp.set(e,i),i}eD(t=>({...t,get:(e,n,s)=>U0(e,n)||t.get(e,n,s),has:(e,n)=>!!U0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oD(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function oD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tg="@firebase/app",F0="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new Gh("@firebase/app"),aD="@firebase/app-compat",lD="@firebase/analytics-compat",cD="@firebase/analytics",uD="@firebase/app-check-compat",dD="@firebase/app-check",hD="@firebase/auth",fD="@firebase/auth-compat",pD="@firebase/database",mD="@firebase/data-connect",gD="@firebase/database-compat",yD="@firebase/functions",vD="@firebase/functions-compat",_D="@firebase/installations",xD="@firebase/installations-compat",wD="@firebase/messaging",SD="@firebase/messaging-compat",bD="@firebase/performance",ND="@firebase/performance-compat",CD="@firebase/remote-config",ED="@firebase/remote-config-compat",kD="@firebase/storage",jD="@firebase/storage-compat",ID="@firebase/firestore",TD="@firebase/ai",AD="@firebase/firestore-compat",PD="firebase",RD="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="[DEFAULT]",OD={[tg]:"fire-core",[aD]:"fire-core-compat",[cD]:"fire-analytics",[lD]:"fire-analytics-compat",[dD]:"fire-app-check",[uD]:"fire-app-check-compat",[hD]:"fire-auth",[fD]:"fire-auth-compat",[pD]:"fire-rtdb",[mD]:"fire-data-connect",[gD]:"fire-rtdb-compat",[yD]:"fire-fn",[vD]:"fire-fn-compat",[_D]:"fire-iid",[xD]:"fire-iid-compat",[wD]:"fire-fcm",[SD]:"fire-fcm-compat",[bD]:"fire-perf",[ND]:"fire-perf-compat",[CD]:"fire-rc",[ED]:"fire-rc-compat",[kD]:"fire-gcs",[jD]:"fire-gcs-compat",[ID]:"fire-fst",[AD]:"fire-fst-compat",[TD]:"fire-vertex","fire-js":"fire-js",[PD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new Map,DD=new Map,sg=new Map;function z0(t,e){try{t.container.addComponent(e)}catch(n){Xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ns(t){const e=t.name;if(sg.has(e))return Xs.debug(`There were multiple attempts to register component ${e}.`),!1;sg.set(e,t);for(const n of sc.values())z0(n,t);for(const n of DD.values())z0(n,t);return!0}function ro(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Vn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new so("app","Firebase",LD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new An("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=RD;function yC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:ng,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Fr.create("bad-app-name",{appName:String(r)});if(n||(n=lC()),!n)throw Fr.create("no-options");const i=sc.get(r);if(i){if(Hr(n,i.options)&&Hr(s,i.config))return i;throw Fr.create("duplicate-app",{appName:r})}const a=new q4(r);for(const u of sg.values())a.addComponent(u);const l=new MD(n,s,a);return sc.set(r,l),l}function Kh(t=ng){const e=sc.get(t);if(!e&&t===ng&&lC())return yC();if(!e)throw Fr.create("no-app",{appName:t});return e}function UD(){return Array.from(sc.values())}function on(t,e,n){let s=OD[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xs.warn(a.join(" "));return}ns(new An(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="firebase-heartbeat-database",zD=1,rc="firebase-heartbeat-store";let _p=null;function vC(){return _p||(_p=Qh(FD,zD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),_p}async function BD(t){try{const n=(await vC()).transaction(rc),s=await n.objectStore(rc).get(_C(t));return await n.done,s}catch(e){if(e instanceof Ns)Xs.warn(e.message);else{const n=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xs.warn(n.message)}}}async function B0(t,e){try{const s=(await vC()).transaction(rc,"readwrite");await s.objectStore(rc).put(e,_C(t)),await s.done}catch(n){if(n instanceof Ns)Xs.warn(n.message);else{const s=Fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xs.warn(s.message)}}}function _C(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=1024,VD=30;class qD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HD(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=$0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>VD){const a=GD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Xs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$0(),{heartbeatsToSend:s,unsentEntries:r}=WD(this._heartbeatsCache.heartbeats),i=Hd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Xs.warn(n),""}}}function $0(){return new Date().toISOString().substring(0,10)}function WD(t,e=$D){const n=[];let s=t.slice();for(const r of t){const i=n.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),V0(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),V0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class HD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hC()?fC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return B0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return B0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function V0(t){return Hd(JSON.stringify({version:2,heartbeats:t})).length}function GD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t){ns(new An("platform-logger",e=>new iD(e),"PRIVATE")),ns(new An("heartbeat",e=>new qD(e),"PRIVATE")),on(tg,F0,t),on(tg,F0,"esm2020"),on("fire-js","")}QD("");var KD="firebase",YD="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on(KD,YD,"app");var q0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ky;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,g){function N(){}N.prototype=g.prototype,v.D=g.prototype,v.prototype=new N,v.prototype.constructor=v,v.C=function(w,A,T){for(var I=Array(arguments.length-2),L=2;L<arguments.length;L++)I[L-2]=arguments[L];return g.prototype[A].apply(w,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(v,g,N){N||(N=0);var w=Array(16);if(typeof g=="string")for(var A=0;16>A;++A)w[A]=g.charCodeAt(N++)|g.charCodeAt(N++)<<8|g.charCodeAt(N++)<<16|g.charCodeAt(N++)<<24;else for(A=0;16>A;++A)w[A]=g[N++]|g[N++]<<8|g[N++]<<16|g[N++]<<24;g=v.g[0],N=v.g[1],A=v.g[2];var T=v.g[3],I=g+(T^N&(A^T))+w[0]+3614090360&4294967295;g=N+(I<<7&4294967295|I>>>25),I=T+(A^g&(N^A))+w[1]+3905402710&4294967295,T=g+(I<<12&4294967295|I>>>20),I=A+(N^T&(g^N))+w[2]+606105819&4294967295,A=T+(I<<17&4294967295|I>>>15),I=N+(g^A&(T^g))+w[3]+3250441966&4294967295,N=A+(I<<22&4294967295|I>>>10),I=g+(T^N&(A^T))+w[4]+4118548399&4294967295,g=N+(I<<7&4294967295|I>>>25),I=T+(A^g&(N^A))+w[5]+1200080426&4294967295,T=g+(I<<12&4294967295|I>>>20),I=A+(N^T&(g^N))+w[6]+2821735955&4294967295,A=T+(I<<17&4294967295|I>>>15),I=N+(g^A&(T^g))+w[7]+4249261313&4294967295,N=A+(I<<22&4294967295|I>>>10),I=g+(T^N&(A^T))+w[8]+1770035416&4294967295,g=N+(I<<7&4294967295|I>>>25),I=T+(A^g&(N^A))+w[9]+2336552879&4294967295,T=g+(I<<12&4294967295|I>>>20),I=A+(N^T&(g^N))+w[10]+4294925233&4294967295,A=T+(I<<17&4294967295|I>>>15),I=N+(g^A&(T^g))+w[11]+2304563134&4294967295,N=A+(I<<22&4294967295|I>>>10),I=g+(T^N&(A^T))+w[12]+1804603682&4294967295,g=N+(I<<7&4294967295|I>>>25),I=T+(A^g&(N^A))+w[13]+4254626195&4294967295,T=g+(I<<12&4294967295|I>>>20),I=A+(N^T&(g^N))+w[14]+2792965006&4294967295,A=T+(I<<17&4294967295|I>>>15),I=N+(g^A&(T^g))+w[15]+1236535329&4294967295,N=A+(I<<22&4294967295|I>>>10),I=g+(A^T&(N^A))+w[1]+4129170786&4294967295,g=N+(I<<5&4294967295|I>>>27),I=T+(N^A&(g^N))+w[6]+3225465664&4294967295,T=g+(I<<9&4294967295|I>>>23),I=A+(g^N&(T^g))+w[11]+643717713&4294967295,A=T+(I<<14&4294967295|I>>>18),I=N+(T^g&(A^T))+w[0]+3921069994&4294967295,N=A+(I<<20&4294967295|I>>>12),I=g+(A^T&(N^A))+w[5]+3593408605&4294967295,g=N+(I<<5&4294967295|I>>>27),I=T+(N^A&(g^N))+w[10]+38016083&4294967295,T=g+(I<<9&4294967295|I>>>23),I=A+(g^N&(T^g))+w[15]+3634488961&4294967295,A=T+(I<<14&4294967295|I>>>18),I=N+(T^g&(A^T))+w[4]+3889429448&4294967295,N=A+(I<<20&4294967295|I>>>12),I=g+(A^T&(N^A))+w[9]+568446438&4294967295,g=N+(I<<5&4294967295|I>>>27),I=T+(N^A&(g^N))+w[14]+3275163606&4294967295,T=g+(I<<9&4294967295|I>>>23),I=A+(g^N&(T^g))+w[3]+4107603335&4294967295,A=T+(I<<14&4294967295|I>>>18),I=N+(T^g&(A^T))+w[8]+1163531501&4294967295,N=A+(I<<20&4294967295|I>>>12),I=g+(A^T&(N^A))+w[13]+2850285829&4294967295,g=N+(I<<5&4294967295|I>>>27),I=T+(N^A&(g^N))+w[2]+4243563512&4294967295,T=g+(I<<9&4294967295|I>>>23),I=A+(g^N&(T^g))+w[7]+1735328473&4294967295,A=T+(I<<14&4294967295|I>>>18),I=N+(T^g&(A^T))+w[12]+2368359562&4294967295,N=A+(I<<20&4294967295|I>>>12),I=g+(N^A^T)+w[5]+4294588738&4294967295,g=N+(I<<4&4294967295|I>>>28),I=T+(g^N^A)+w[8]+2272392833&4294967295,T=g+(I<<11&4294967295|I>>>21),I=A+(T^g^N)+w[11]+1839030562&4294967295,A=T+(I<<16&4294967295|I>>>16),I=N+(A^T^g)+w[14]+4259657740&4294967295,N=A+(I<<23&4294967295|I>>>9),I=g+(N^A^T)+w[1]+2763975236&4294967295,g=N+(I<<4&4294967295|I>>>28),I=T+(g^N^A)+w[4]+1272893353&4294967295,T=g+(I<<11&4294967295|I>>>21),I=A+(T^g^N)+w[7]+4139469664&4294967295,A=T+(I<<16&4294967295|I>>>16),I=N+(A^T^g)+w[10]+3200236656&4294967295,N=A+(I<<23&4294967295|I>>>9),I=g+(N^A^T)+w[13]+681279174&4294967295,g=N+(I<<4&4294967295|I>>>28),I=T+(g^N^A)+w[0]+3936430074&4294967295,T=g+(I<<11&4294967295|I>>>21),I=A+(T^g^N)+w[3]+3572445317&4294967295,A=T+(I<<16&4294967295|I>>>16),I=N+(A^T^g)+w[6]+76029189&4294967295,N=A+(I<<23&4294967295|I>>>9),I=g+(N^A^T)+w[9]+3654602809&4294967295,g=N+(I<<4&4294967295|I>>>28),I=T+(g^N^A)+w[12]+3873151461&4294967295,T=g+(I<<11&4294967295|I>>>21),I=A+(T^g^N)+w[15]+530742520&4294967295,A=T+(I<<16&4294967295|I>>>16),I=N+(A^T^g)+w[2]+3299628645&4294967295,N=A+(I<<23&4294967295|I>>>9),I=g+(A^(N|~T))+w[0]+4096336452&4294967295,g=N+(I<<6&4294967295|I>>>26),I=T+(N^(g|~A))+w[7]+1126891415&4294967295,T=g+(I<<10&4294967295|I>>>22),I=A+(g^(T|~N))+w[14]+2878612391&4294967295,A=T+(I<<15&4294967295|I>>>17),I=N+(T^(A|~g))+w[5]+4237533241&4294967295,N=A+(I<<21&4294967295|I>>>11),I=g+(A^(N|~T))+w[12]+1700485571&4294967295,g=N+(I<<6&4294967295|I>>>26),I=T+(N^(g|~A))+w[3]+2399980690&4294967295,T=g+(I<<10&4294967295|I>>>22),I=A+(g^(T|~N))+w[10]+4293915773&4294967295,A=T+(I<<15&4294967295|I>>>17),I=N+(T^(A|~g))+w[1]+2240044497&4294967295,N=A+(I<<21&4294967295|I>>>11),I=g+(A^(N|~T))+w[8]+1873313359&4294967295,g=N+(I<<6&4294967295|I>>>26),I=T+(N^(g|~A))+w[15]+4264355552&4294967295,T=g+(I<<10&4294967295|I>>>22),I=A+(g^(T|~N))+w[6]+2734768916&4294967295,A=T+(I<<15&4294967295|I>>>17),I=N+(T^(A|~g))+w[13]+1309151649&4294967295,N=A+(I<<21&4294967295|I>>>11),I=g+(A^(N|~T))+w[4]+4149444226&4294967295,g=N+(I<<6&4294967295|I>>>26),I=T+(N^(g|~A))+w[11]+3174756917&4294967295,T=g+(I<<10&4294967295|I>>>22),I=A+(g^(T|~N))+w[2]+718787259&4294967295,A=T+(I<<15&4294967295|I>>>17),I=N+(T^(A|~g))+w[9]+3951481745&4294967295,v.g[0]=v.g[0]+g&4294967295,v.g[1]=v.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,v.g[2]=v.g[2]+A&4294967295,v.g[3]=v.g[3]+T&4294967295}s.prototype.u=function(v,g){g===void 0&&(g=v.length);for(var N=g-this.blockSize,w=this.B,A=this.h,T=0;T<g;){if(A==0)for(;T<=N;)r(this,v,T),T+=this.blockSize;if(typeof v=="string"){for(;T<g;)if(w[A++]=v.charCodeAt(T++),A==this.blockSize){r(this,w),A=0;break}}else for(;T<g;)if(w[A++]=v[T++],A==this.blockSize){r(this,w),A=0;break}}this.h=A,this.o+=g},s.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var g=1;g<v.length-8;++g)v[g]=0;var N=8*this.o;for(g=v.length-8;g<v.length;++g)v[g]=N&255,N/=256;for(this.u(v),v=Array(16),g=N=0;4>g;++g)for(var w=0;32>w;w+=8)v[N++]=this.g[g]>>>w&255;return v};function i(v,g){var N=l;return Object.prototype.hasOwnProperty.call(N,v)?N[v]:N[v]=g(v)}function a(v,g){this.h=g;for(var N=[],w=!0,A=v.length-1;0<=A;A--){var T=v[A]|0;w&&T==g||(N[A]=T,w=!1)}this.g=N}var l={};function u(v){return-128<=v&&128>v?i(v,function(g){return new a([g|0],0>g?-1:0)}):new a([v|0],0>v?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return p;if(0>v)return b(d(-v));for(var g=[],N=1,w=0;v>=N;w++)g[w]=v/N|0,N*=4294967296;return new a(g,0)}function f(v,g){if(v.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(v.charAt(0)=="-")return b(f(v.substring(1),g));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=d(Math.pow(g,8)),w=p,A=0;A<v.length;A+=8){var T=Math.min(8,v.length-A),I=parseInt(v.substring(A,A+T),g);8>T?(T=d(Math.pow(g,T)),w=w.j(T).add(d(I))):(w=w.j(N),w=w.add(d(I)))}return w}var p=u(0),h=u(1),_=u(16777216);t=a.prototype,t.m=function(){if(j(this))return-b(this).m();for(var v=0,g=1,N=0;N<this.g.length;N++){var w=this.i(N);v+=(0<=w?w:4294967296+w)*g,g*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C(this))return"0";if(j(this))return"-"+b(this).toString(v);for(var g=d(Math.pow(v,6)),N=this,w="";;){var A=x(N,g).g;N=S(N,A.j(g));var T=((0<N.g.length?N.g[0]:N.h)>>>0).toString(v);if(N=A,C(N))return T+w;for(;6>T.length;)T="0"+T;w=T+w}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function C(v){if(v.h!=0)return!1;for(var g=0;g<v.g.length;g++)if(v.g[g]!=0)return!1;return!0}function j(v){return v.h==-1}t.l=function(v){return v=S(this,v),j(v)?-1:C(v)?0:1};function b(v){for(var g=v.g.length,N=[],w=0;w<g;w++)N[w]=~v.g[w];return new a(N,~v.h).add(h)}t.abs=function(){return j(this)?b(this):this},t.add=function(v){for(var g=Math.max(this.g.length,v.g.length),N=[],w=0,A=0;A<=g;A++){var T=w+(this.i(A)&65535)+(v.i(A)&65535),I=(T>>>16)+(this.i(A)>>>16)+(v.i(A)>>>16);w=I>>>16,T&=65535,I&=65535,N[A]=I<<16|T}return new a(N,N[N.length-1]&-2147483648?-1:0)};function S(v,g){return v.add(b(g))}t.j=function(v){if(C(this)||C(v))return p;if(j(this))return j(v)?b(this).j(b(v)):b(b(this).j(v));if(j(v))return b(this.j(b(v)));if(0>this.l(_)&&0>v.l(_))return d(this.m()*v.m());for(var g=this.g.length+v.g.length,N=[],w=0;w<2*g;w++)N[w]=0;for(w=0;w<this.g.length;w++)for(var A=0;A<v.g.length;A++){var T=this.i(w)>>>16,I=this.i(w)&65535,L=v.i(A)>>>16,V=v.i(A)&65535;N[2*w+2*A]+=I*V,E(N,2*w+2*A),N[2*w+2*A+1]+=T*V,E(N,2*w+2*A+1),N[2*w+2*A+1]+=I*L,E(N,2*w+2*A+1),N[2*w+2*A+2]+=T*L,E(N,2*w+2*A+2)}for(w=0;w<g;w++)N[w]=N[2*w+1]<<16|N[2*w];for(w=g;w<2*g;w++)N[w]=0;return new a(N,0)};function E(v,g){for(;(v[g]&65535)!=v[g];)v[g+1]+=v[g]>>>16,v[g]&=65535,g++}function y(v,g){this.g=v,this.h=g}function x(v,g){if(C(g))throw Error("division by zero");if(C(v))return new y(p,p);if(j(v))return g=x(b(v),g),new y(b(g.g),b(g.h));if(j(g))return g=x(v,b(g)),new y(b(g.g),g.h);if(30<v.g.length){if(j(v)||j(g))throw Error("slowDivide_ only works with positive integers.");for(var N=h,w=g;0>=w.l(v);)N=P(N),w=P(w);var A=O(N,1),T=O(w,1);for(w=O(w,2),N=O(N,2);!C(w);){var I=T.add(w);0>=I.l(v)&&(A=A.add(N),T=I),w=O(w,1),N=O(N,1)}return g=S(v,A.j(g)),new y(A,g)}for(A=p;0<=v.l(g);){for(N=Math.max(1,Math.floor(v.m()/g.m())),w=Math.ceil(Math.log(N)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),T=d(N),I=T.j(g);j(I)||0<I.l(v);)N-=w,T=d(N),I=T.j(g);C(T)&&(T=h),A=A.add(T),v=S(v,I)}return new y(A,v)}t.A=function(v){return x(this,v).h},t.and=function(v){for(var g=Math.max(this.g.length,v.g.length),N=[],w=0;w<g;w++)N[w]=this.i(w)&v.i(w);return new a(N,this.h&v.h)},t.or=function(v){for(var g=Math.max(this.g.length,v.g.length),N=[],w=0;w<g;w++)N[w]=this.i(w)|v.i(w);return new a(N,this.h|v.h)},t.xor=function(v){for(var g=Math.max(this.g.length,v.g.length),N=[],w=0;w<g;w++)N[w]=this.i(w)^v.i(w);return new a(N,this.h^v.h)};function P(v){for(var g=v.g.length+1,N=[],w=0;w<g;w++)N[w]=v.i(w)<<1|v.i(w-1)>>>31;return new a(N,v.h)}function O(v,g){var N=g>>5;g%=32;for(var w=v.g.length-N,A=[],T=0;T<w;T++)A[T]=0<g?v.i(T+N)>>>g|v.i(T+N+1)<<32-g:v.i(T+N);return new a(A,v.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,Ky=a}).apply(typeof q0<"u"?q0:typeof self<"u"?self:typeof window<"u"?window:{});var Eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,k){return c==Array.prototype||c==Object.prototype||(c[m]=k.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eu=="object"&&Eu];for(var m=0;m<c.length;++m){var k=c[m];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var s=n(this);function r(c,m){if(m)e:{var k=s;c=c.split(".");for(var R=0;R<c.length-1;R++){var $=c[R];if(!($ in k))break e;k=k[$]}c=c[c.length-1],R=k[c],m=m(R),m!=R&&m!=null&&e(k,c,{configurable:!0,writable:!0,value:m})}}function i(c,m){c instanceof String&&(c+="");var k=0,R=!1,$={next:function(){if(!R&&k<c.length){var H=k++;return{value:m(H,c[H]),done:!1}}return R=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}r("Array.prototype.values",function(c){return c||function(){return i(this,function(m,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function d(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function f(c,m,k){return c.call.apply(c.bind,arguments)}function p(c,m,k){if(!c)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,R),c.apply(m,$)}}return function(){return c.apply(m,arguments)}}function h(c,m,k){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,h.apply(null,arguments)}function _(c,m){var k=Array.prototype.slice.call(arguments,1);return function(){var R=k.slice();return R.push.apply(R,arguments),c.apply(this,R)}}function C(c,m){function k(){}k.prototype=m.prototype,c.aa=m.prototype,c.prototype=new k,c.prototype.constructor=c,c.Qb=function(R,$,H){for(var Z=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)Z[Oe-2]=arguments[Oe];return m.prototype[$].apply(R,Z)}}function j(c){const m=c.length;if(0<m){const k=Array(m);for(let R=0;R<m;R++)k[R]=c[R];return k}return[]}function b(c,m){for(let k=1;k<arguments.length;k++){const R=arguments[k];if(u(R)){const $=c.length||0,H=R.length||0;c.length=$+H;for(let Z=0;Z<H;Z++)c[$+Z]=R[Z]}else c.push(R)}}class S{constructor(m,k){this.i=m,this.j=k,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function E(c){return/^[\s\xa0]*$/.test(c)}function y(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function x(c){return x[" "](c),c}x[" "]=function(){};var P=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function O(c,m,k){for(const R in c)m.call(k,c[R],R,c)}function v(c,m){for(const k in c)m.call(void 0,c[k],k,c)}function g(c){const m={};for(const k in c)m[k]=c[k];return m}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,m){let k,R;for(let $=1;$<arguments.length;$++){R=arguments[$];for(k in R)c[k]=R[k];for(let H=0;H<N.length;H++)k=N[H],Object.prototype.hasOwnProperty.call(R,k)&&(c[k]=R[k])}}function A(c){var m=1;c=c.split(":");const k=[];for(;0<m&&c.length;)k.push(c.shift()),m--;return c.length&&k.push(c.join(":")),k}function T(c){l.setTimeout(()=>{throw c},0)}function I(){var c=B;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class L{constructor(){this.h=this.g=null}add(m,k){const R=V.get();R.set(m,k),this.h?this.h.next=R:this.g=R,this.h=R}}var V=new S(()=>new M,c=>c.reset());class M{constructor(){this.next=this.g=this.h=null}set(m,k){this.h=m,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let U,F=!1,B=new L,q=()=>{const c=l.Promise.resolve(void 0);U=()=>{c.then(Y)}};var Y=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(k){T(k)}var m=V;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}F=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const k=()=>{};l.addEventListener("test",k,m),l.removeEventListener("test",k,m)}catch{}return c}();function G(c,m){if(z.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var k=this.type=c.type,R=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(P){e:{try{x(m.nodeName);var $=!0;break e}catch{}$=!1}$||(m=null)}}else k=="mouseover"?m=c.fromElement:k=="mouseout"&&(m=c.toElement);this.relatedTarget=m,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:W[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&G.aa.h.call(this)}}C(G,z);var W={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var K="closure_listenable_"+(1e6*Math.random()|0),ne=0;function oe(c,m,k,R,$){this.listener=c,this.proxy=null,this.src=m,this.type=k,this.capture=!!R,this.ha=$,this.key=++ne,this.da=this.fa=!1}function ae(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function de(c){this.src=c,this.g={},this.h=0}de.prototype.add=function(c,m,k,R,$){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var Z=St(c,m,R,$);return-1<Z?(m=c[Z],k||(m.fa=!1)):(m=new oe(m,this.src,H,!!R,$),m.fa=k,c.push(m)),m};function Ce(c,m){var k=m.type;if(k in c.g){var R=c.g[k],$=Array.prototype.indexOf.call(R,m,void 0),H;(H=0<=$)&&Array.prototype.splice.call(R,$,1),H&&(ae(m),c.g[k].length==0&&(delete c.g[k],c.h--))}}function St(c,m,k,R){for(var $=0;$<c.length;++$){var H=c[$];if(!H.da&&H.listener==m&&H.capture==!!k&&H.ha==R)return $}return-1}var Ie="closure_lm_"+(1e6*Math.random()|0),mt={};function re(c,m,k,R,$){if(Array.isArray(m)){for(var H=0;H<m.length;H++)re(c,m[H],k,R,$);return null}return k=Pn(k),c&&c[K]?c.K(m,k,d(R)?!!R.capture:!1,$):fe(c,m,k,!1,R,$)}function fe(c,m,k,R,$,H){if(!m)throw Error("Invalid event type");var Z=d($)?!!$.capture:!!$,Oe=ar(c);if(Oe||(c[Ie]=Oe=new de(c)),k=Oe.add(m,k,R,Z,H),k.proxy)return k;if(R=pe(),k.proxy=R,R.src=c,R.listener=k,c.addEventListener)Q||($=Z),$===void 0&&($=!1),c.addEventListener(m.toString(),R,$);else if(c.attachEvent)c.attachEvent(Yt(m.toString()),R);else if(c.addListener&&c.removeListener)c.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return k}function pe(){function c(k){return m.call(c.src,c.listener,k)}const m=Es;return c}function zt(c,m,k,R,$){if(Array.isArray(m))for(var H=0;H<m.length;H++)zt(c,m[H],k,R,$);else R=d(R)?!!R.capture:!!R,k=Pn(k),c&&c[K]?(c=c.i,m=String(m).toString(),m in c.g&&(H=c.g[m],k=St(H,k,R,$),-1<k&&(ae(H[k]),Array.prototype.splice.call(H,k,1),H.length==0&&(delete c.g[m],c.h--)))):c&&(c=ar(c))&&(m=c.g[m.toString()],c=-1,m&&(c=St(m,k,R,$)),(k=-1<c?m[c]:null)&&Kt(k))}function Kt(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[K])Ce(m.i,c);else{var k=c.type,R=c.proxy;m.removeEventListener?m.removeEventListener(k,R,c.capture):m.detachEvent?m.detachEvent(Yt(k),R):m.addListener&&m.removeListener&&m.removeListener(R),(k=ar(m))?(Ce(k,c),k.h==0&&(k.src=null,m[Ie]=null)):ae(c)}}}function Yt(c){return c in mt?mt[c]:mt[c]="on"+c}function Es(c,m){if(c.da)c=!0;else{m=new G(m,this);var k=c.listener,R=c.ha||c.src;c.fa&&Kt(c),c=k.call(R,m)}return c}function ar(c){return c=c[Ie],c instanceof de?c:null}var is="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pn(c){return typeof c=="function"?c:(c[is]||(c[is]=function(m){return c.handleEvent(m)}),c[is])}function Je(){ee.call(this),this.i=new de(this),this.M=this,this.F=null}C(Je,ee),Je.prototype[K]=!0,Je.prototype.removeEventListener=function(c,m,k,R){zt(this,c,m,k,R)};function He(c,m){var k,R=c.F;if(R)for(k=[];R;R=R.F)k.push(R);if(c=c.M,R=m.type||m,typeof m=="string")m=new z(m,c);else if(m instanceof z)m.target=m.target||c;else{var $=m;m=new z(R,c),w(m,$)}if($=!0,k)for(var H=k.length-1;0<=H;H--){var Z=m.g=k[H];$=Rn(Z,R,!0,m)&&$}if(Z=m.g=c,$=Rn(Z,R,!0,m)&&$,$=Rn(Z,R,!1,m)&&$,k)for(H=0;H<k.length;H++)Z=m.g=k[H],$=Rn(Z,R,!1,m)&&$}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var k=c.g[m],R=0;R<k.length;R++)ae(k[R]);delete c.g[m],c.h--}}this.F=null},Je.prototype.K=function(c,m,k,R){return this.i.add(String(c),m,!1,k,R)},Je.prototype.L=function(c,m,k,R){return this.i.add(String(c),m,!0,k,R)};function Rn(c,m,k,R){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var $=!0,H=0;H<m.length;++H){var Z=m[H];if(Z&&!Z.da&&Z.capture==k){var Oe=Z.listener,Nt=Z.ha||Z.src;Z.fa&&Ce(c.i,Z),$=Oe.call(Nt,R)!==!1&&$}}return $&&!R.defaultPrevented}function lr(c,m,k){if(typeof c=="function")k&&(c=h(c,k));else if(c&&typeof c.handleEvent=="function")c=h(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:l.setTimeout(c,m||0)}function ks(c){c.g=lr(()=>{c.g=null,c.i&&(c.i=!1,ks(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class ni extends ee{constructor(m,k){super(),this.m=m,this.l=k,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ks(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bt(c){ee.call(this),this.h=c,this.g={}}C(bt,ee);var Ge=[];function si(c){O(c.g,function(m,k){this.g.hasOwnProperty(k)&&Kt(m)},c),c.g={}}bt.prototype.N=function(){bt.aa.N.call(this),si(this)},bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var js=l.JSON.stringify,cr=l.JSON.parse,ri=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function os(){}os.prototype.h=null;function Is(c){return c.h||(c.h=c.i())}function ur(){}var On={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dr(){z.call(this,"d")}C(dr,z);function Xe(){z.call(this,"c")}C(Xe,z);var dt={},le=null;function ge(){return le=le||new Je}dt.La="serverreachability";function At(c){z.call(this,dt.La,c)}C(At,z);function un(c){const m=ge();He(m,new At(m))}dt.STAT_EVENT="statevent";function te(c,m){z.call(this,dt.STAT_EVENT,c),this.stat=m}C(te,z);function ie(c){const m=ge();He(m,new te(m,c))}dt.Ma="timingevent";function he(c,m){z.call(this,dt.Ma,c),this.size=m}C(he,z);function qe(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},m)}function Ze(){this.g=!0}Ze.prototype.xa=function(){this.g=!1};function Sn(c,m,k,R,$,H){c.info(function(){if(c.g)if(H)for(var Z="",Oe=H.split("&"),Nt=0;Nt<Oe.length;Nt++){var ke=Oe[Nt].split("=");if(1<ke.length){var Pt=ke[0];ke=ke[1];var Rt=Pt.split("_");Z=2<=Rt.length&&Rt[1]=="type"?Z+(Pt+"="+ke+"&"):Z+(Pt+"=redacted&")}}else Z=null;else Z=H;return"XMLHTTP REQ ("+R+") [attempt "+$+"]: "+m+`
`+k+`
`+Z})}function bn(c,m,k,R,$,H,Z){c.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+$+"]: "+m+`
`+k+`
`+H+" "+Z})}function et(c,m,k,R){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Le(c,k)+(R?" "+R:"")})}function Jt(c,m){c.info(function(){return"TIMEOUT: "+m})}Ze.prototype.info=function(){};function Le(c,m){if(!c.g)return m;if(!m)return null;try{var k=JSON.parse(m);if(k){for(c=0;c<k.length;c++)if(Array.isArray(k[c])){var R=k[c];if(!(2>R.length)){var $=R[1];if(Array.isArray($)&&!(1>$.length)){var H=$[0];if(H!="noop"&&H!="stop"&&H!="close")for(var Z=1;Z<$.length;Z++)$[Z]=""}}}}return js(k)}catch{return m}}var Ts={NO_ERROR:0,TIMEOUT:8},gf={},ao;function ii(){}C(ii,os),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},ao=new ii;function Dn(c,m,k,R){this.j=c,this.i=m,this.l=k,this.R=R||1,this.U=new bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ea}function Ea(){this.i=null,this.g="",this.h=!1}var Pe={},dn={};function oi(c,m,k){c.L=1,c.v=Wc(As(m)),c.m=k,c.P=!0,hr(c,null)}function hr(c,m){c.F=Date.now(),$c(c),c.A=As(c.v);var k=c.A,R=c.R;Array.isArray(R)||(R=[String(R)]),p_(k.i,"t",R),c.C=0,k=c.j.J,c.h=new Ea,c.g=P_(c.j,k?m:null,!c.m),0<c.O&&(c.M=new ni(h(c.Y,c,c.g),c.O)),m=c.U,k=c.g,R=c.ca;var $="readystatechange";Array.isArray($)||($&&(Ge[0]=$.toString()),$=Ge);for(var H=0;H<$.length;H++){var Z=re(k,$[H],R||m.handleEvent,!1,m.h||m);if(!Z)break;m.g[Z.key]=Z}m=c.H?g(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),un(),Sn(c.i,c.u,c.A,c.l,c.R,c.m)}Dn.prototype.ca=function(c){c=c.target;const m=this.M;m&&Ps(c)==3?m.j():this.Y(c)},Dn.prototype.Y=function(c){try{if(c==this.g)e:{const Rt=Ps(this.g);var m=this.g.Ba();const uo=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||w_(this.g)))){this.J||Rt!=4||m==7||(m==8||0>=uo?un(3):un(2)),yf(this);var k=this.g.Z();this.X=k;t:if(Bc(this)){var R=w_(this.g);c="";var $=R.length,H=Ps(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),ja(this);var Z="";break t}this.h.i=new l.TextDecoder}for(m=0;m<$;m++)this.h.h=!0,c+=this.h.i.decode(R[m],{stream:!(H&&m==$-1)});R.length=0,this.h.g+=c,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=k==200,bn(this.i,this.u,this.A,this.l,this.R,Rt,k),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,Nt=this.g;if((Oe=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Oe)){var ke=Oe;break t}}ke=null}if(k=ke)et(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vf(this,k);else{this.o=!1,this.s=3,ie(12),ai(this),ja(this);break e}}if(this.P){k=!0;let Ln;for(;!this.J&&this.C<Z.length;)if(Ln=ka(this,Z),Ln==dn){Rt==4&&(this.s=4,ie(14),k=!1),et(this.i,this.l,null,"[Incomplete Response]");break}else if(Ln==Pe){this.s=4,ie(15),et(this.i,this.l,Z,"[Invalid Chunk]"),k=!1;break}else et(this.i,this.l,Ln,null),vf(this,Ln);if(Bc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||Z.length!=0||this.h.h||(this.s=1,ie(16),k=!1),this.o=this.o&&k,!k)et(this.i,this.l,Z,"[Invalid Chunked Response]"),ai(this),ja(this);else if(0<Z.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Nf(Pt),Pt.M=!0,ie(11))}}else et(this.i,this.l,Z,null),vf(this,Z);Rt==4&&ai(this),this.o&&!this.J&&(Rt==4?j_(this.j,this):(this.o=!1,$c(this)))}else Wj(this.g),k==400&&0<Z.indexOf("Unknown SID")?(this.s=3,ie(12)):(this.s=0,ie(13)),ai(this),ja(this)}}}catch{}finally{}};function Bc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ka(c,m){var k=c.C,R=m.indexOf(`
`,k);return R==-1?dn:(k=Number(m.substring(k,R)),isNaN(k)?Pe:(R+=1,R+k>m.length?dn:(m=m.slice(R,R+k),c.C=R+k,m)))}Dn.prototype.cancel=function(){this.J=!0,ai(this)};function $c(c){c.S=Date.now()+c.I,n_(c,c.I)}function n_(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=qe(h(c.ba,c),m)}function yf(c){c.B&&(l.clearTimeout(c.B),c.B=null)}Dn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Jt(this.i,this.A),this.L!=2&&(un(),ie(17)),ai(this),this.s=2,ja(this)):n_(this,this.S-c)};function ja(c){c.j.G==0||c.J||j_(c.j,c)}function ai(c){yf(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,si(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function vf(c,m){try{var k=c.j;if(k.G!=0&&(k.g==c||_f(k.h,c))){if(!c.K&&_f(k.h,c)&&k.G==3){try{var R=k.Da.g.parse(m)}catch{R=null}if(Array.isArray(R)&&R.length==3){var $=R;if($[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<c.F)Jc(k),Kc(k);else break e;bf(k),ie(18)}}else k.za=$[1],0<k.za-k.T&&37500>$[2]&&k.F&&k.v==0&&!k.C&&(k.C=qe(h(k.Za,k),6e3));if(1>=i_(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else ci(k,11)}else if((c.K||k.g==c)&&Jc(k),!E(m))for($=k.Da.g.parse(m),m=0;m<$.length;m++){let ke=$[m];if(k.T=ke[0],ke=ke[1],k.G==2)if(ke[0]=="c"){k.K=ke[1],k.ia=ke[2];const Pt=ke[3];Pt!=null&&(k.la=Pt,k.j.info("VER="+k.la));const Rt=ke[4];Rt!=null&&(k.Aa=Rt,k.j.info("SVER="+k.Aa));const uo=ke[5];uo!=null&&typeof uo=="number"&&0<uo&&(R=1.5*uo,k.L=R,k.j.info("backChannelRequestTimeoutMs_="+R)),R=k;const Ln=c.g;if(Ln){const Xc=Ln.g?Ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xc){var H=R.h;H.g||Xc.indexOf("spdy")==-1&&Xc.indexOf("quic")==-1&&Xc.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(xf(H,H.h),H.h=null))}if(R.D){const Cf=Ln.g?Ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Cf&&(R.ya=Cf,Fe(R.I,R.D,Cf))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-c.F,k.j.info("Handshake RTT: "+k.R+"ms")),R=k;var Z=c;if(R.qa=A_(R,R.J?R.ia:null,R.W),Z.K){o_(R.h,Z);var Oe=Z,Nt=R.L;Nt&&(Oe.I=Nt),Oe.B&&(yf(Oe),$c(Oe)),R.g=Z}else E_(R);0<k.i.length&&Yc(k)}else ke[0]!="stop"&&ke[0]!="close"||ci(k,7);else k.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?ci(k,7):Sf(k):ke[0]!="noop"&&k.l&&k.l.ta(ke),k.v=0)}}un(4)}catch{}}var Ij=class{constructor(c,m){this.g=c,this.map=m}};function s_(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function r_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function i_(c){return c.h?1:c.g?c.g.size:0}function _f(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function xf(c,m){c.g?c.g.add(m):c.h=m}function o_(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}s_.prototype.cancel=function(){if(this.i=a_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function a_(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const k of c.g.values())m=m.concat(k.D);return m}return j(c.i)}function Tj(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var m=[],k=c.length,R=0;R<k;R++)m.push(c[R]);return m}m=[],k=0;for(R in c)m[k++]=c[R];return m}function Aj(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var m=[];c=c.length;for(var k=0;k<c;k++)m.push(k);return m}m=[],k=0;for(const R in c)m[k++]=R;return m}}}function l_(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var k=Aj(c),R=Tj(c),$=R.length,H=0;H<$;H++)m.call(void 0,R[H],k&&k[H],c)}var c_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pj(c,m){if(c){c=c.split("&");for(var k=0;k<c.length;k++){var R=c[k].indexOf("="),$=null;if(0<=R){var H=c[k].substring(0,R);$=c[k].substring(R+1)}else H=c[k];m(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function li(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof li){this.h=c.h,Vc(this,c.j),this.o=c.o,this.g=c.g,qc(this,c.s),this.l=c.l;var m=c.i,k=new Aa;k.i=m.i,m.g&&(k.g=new Map(m.g),k.h=m.h),u_(this,k),this.m=c.m}else c&&(m=String(c).match(c_))?(this.h=!1,Vc(this,m[1]||"",!0),this.o=Ia(m[2]||""),this.g=Ia(m[3]||"",!0),qc(this,m[4]),this.l=Ia(m[5]||"",!0),u_(this,m[6]||"",!0),this.m=Ia(m[7]||"")):(this.h=!1,this.i=new Aa(null,this.h))}li.prototype.toString=function(){var c=[],m=this.j;m&&c.push(Ta(m,d_,!0),":");var k=this.g;return(k||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Ta(m,d_,!0),"@"),c.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&c.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&c.push("/"),c.push(Ta(k,k.charAt(0)=="/"?Dj:Oj,!0))),(k=this.i.toString())&&c.push("?",k),(k=this.m)&&c.push("#",Ta(k,Mj)),c.join("")};function As(c){return new li(c)}function Vc(c,m,k){c.j=k?Ia(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function qc(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function u_(c,m,k){m instanceof Aa?(c.i=m,Uj(c.i,c.h)):(k||(m=Ta(m,Lj)),c.i=new Aa(m,c.h))}function Fe(c,m,k){c.i.set(m,k)}function Wc(c){return Fe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ia(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ta(c,m,k){return typeof c=="string"?(c=encodeURI(c).replace(m,Rj),k&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Rj(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var d_=/[#\/\?@]/g,Oj=/[#\?:]/g,Dj=/[#\?]/g,Lj=/[#\?@]/g,Mj=/#/g;function Aa(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function fr(c){c.g||(c.g=new Map,c.h=0,c.i&&Pj(c.i,function(m,k){c.add(decodeURIComponent(m.replace(/\+/g," ")),k)}))}t=Aa.prototype,t.add=function(c,m){fr(this),this.i=null,c=lo(this,c);var k=this.g.get(c);return k||this.g.set(c,k=[]),k.push(m),this.h+=1,this};function h_(c,m){fr(c),m=lo(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function f_(c,m){return fr(c),m=lo(c,m),c.g.has(m)}t.forEach=function(c,m){fr(this),this.g.forEach(function(k,R){k.forEach(function($){c.call(m,$,R,this)},this)},this)},t.na=function(){fr(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),k=[];for(let R=0;R<m.length;R++){const $=c[R];for(let H=0;H<$.length;H++)k.push(m[R])}return k},t.V=function(c){fr(this);let m=[];if(typeof c=="string")f_(this,c)&&(m=m.concat(this.g.get(lo(this,c))));else{c=Array.from(this.g.values());for(let k=0;k<c.length;k++)m=m.concat(c[k])}return m},t.set=function(c,m){return fr(this),this.i=null,c=lo(this,c),f_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function p_(c,m,k){h_(c,m),0<k.length&&(c.i=null,c.g.set(lo(c,m),j(k)),c.h+=k.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var k=0;k<m.length;k++){var R=m[k];const H=encodeURIComponent(String(R)),Z=this.V(R);for(R=0;R<Z.length;R++){var $=H;Z[R]!==""&&($+="="+encodeURIComponent(String(Z[R]))),c.push($)}}return this.i=c.join("&")};function lo(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Uj(c,m){m&&!c.j&&(fr(c),c.i=null,c.g.forEach(function(k,R){var $=R.toLowerCase();R!=$&&(h_(this,R),p_(this,$,k))},c)),c.j=m}function Fj(c,m){const k=new Ze;if(l.Image){const R=new Image;R.onload=_(pr,k,"TestLoadImage: loaded",!0,m,R),R.onerror=_(pr,k,"TestLoadImage: error",!1,m,R),R.onabort=_(pr,k,"TestLoadImage: abort",!1,m,R),R.ontimeout=_(pr,k,"TestLoadImage: timeout",!1,m,R),l.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=c}else m(!1)}function zj(c,m){const k=new Ze,R=new AbortController,$=setTimeout(()=>{R.abort(),pr(k,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:R.signal}).then(H=>{clearTimeout($),H.ok?pr(k,"TestPingServer: ok",!0,m):pr(k,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout($),pr(k,"TestPingServer: error",!1,m)})}function pr(c,m,k,R,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),R(k)}catch{}}function Bj(){this.g=new ri}function $j(c,m,k){const R=k||"";try{l_(c,function($,H){let Z=$;d($)&&(Z=js($)),m.push(R+H+"="+encodeURIComponent(Z))})}catch($){throw m.push(R+"type="+encodeURIComponent("_badmap")),$}}function Hc(c){this.l=c.Ub||null,this.j=c.eb||!1}C(Hc,os),Hc.prototype.g=function(){return new Gc(this.l,this.j)},Hc.prototype.i=function(c){return function(){return c}}({});function Gc(c,m){Je.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Gc,Je),t=Gc.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Ra(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||l).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pa(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ra(this)),this.g&&(this.readyState=3,Ra(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;m_(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function m_(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Pa(this):Ra(this),this.readyState==3&&m_(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Pa(this))},t.Qa=function(c){this.g&&(this.response=c,Pa(this))},t.ga=function(){this.g&&Pa(this)};function Pa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ra(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var k=m.next();!k.done;)k=k.value,c.push(k[0]+": "+k[1]),k=m.next();return c.join(`\r
`)};function Ra(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Gc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function g_(c){let m="";return O(c,function(k,R){m+=R,m+=":",m+=k,m+=`\r
`}),m}function wf(c,m,k){e:{for(R in k){var R=!1;break e}R=!0}R||(k=g_(k),typeof c=="string"?k!=null&&encodeURIComponent(String(k)):Fe(c,m,k))}function st(c){Je.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(st,Je);var Vj=/^https?$/i,qj=["POST","PUT"];t=st.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,k,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ao.g(),this.v=this.o?Is(this.o):Is(ao),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(H){y_(this,H);return}if(c=k||"",k=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var $ in R)k.set($,R[$]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const H of R.keys())k.set(H,R.get(H));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(k.keys()).find(H=>H.toLowerCase()=="content-type"),$=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(qj,m,void 0))||R||$||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,Z]of k)this.g.setRequestHeader(H,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{x_(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){y_(this,H)}};function y_(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,v_(c),Qc(c)}function v_(c){c.A||(c.A=!0,He(c,"complete"),He(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,He(this,"complete"),He(this,"abort"),Qc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qc(this,!0)),st.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?__(this):this.bb())},t.bb=function(){__(this)};function __(c){if(c.h&&typeof a<"u"&&(!c.v[1]||Ps(c)!=4||c.Z()!=2)){if(c.u&&Ps(c)==4)lr(c.Ea,0,c);else if(He(c,"readystatechange"),Ps(c)==4){c.h=!1;try{const Z=c.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var k;if(!(k=m)){var R;if(R=Z===0){var $=String(c.D).match(c_)[1]||null;!$&&l.self&&l.self.location&&($=l.self.location.protocol.slice(0,-1)),R=!Vj.test($?$.toLowerCase():"")}k=R}if(k)He(c,"complete"),He(c,"success");else{c.m=6;try{var H=2<Ps(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",v_(c)}}finally{Qc(c)}}}}function Qc(c,m){if(c.g){x_(c);const k=c.g,R=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||He(c,"ready");try{k.onreadystatechange=R}catch{}}}function x_(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Ps(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Ps(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),cr(m)}};function w_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Wj(c){const m={};c=(c.g&&2<=Ps(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<c.length;R++){if(E(c[R]))continue;var k=A(c[R]);const $=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const H=m[$]||[];m[$]=H,H.push(k)}v(m,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oa(c,m,k){return k&&k.internalChannelParams&&k.internalChannelParams[c]||m}function S_(c){this.Aa=0,this.i=[],this.j=new Ze,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oa("baseRetryDelayMs",5e3,c),this.cb=Oa("retryDelaySeedMs",1e4,c),this.Wa=Oa("forwardChannelMaxRetries",2,c),this.wa=Oa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new s_(c&&c.concurrentRequestLimit),this.Da=new Bj,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=S_.prototype,t.la=8,t.G=1,t.connect=function(c,m,k,R){ie(0),this.W=c,this.H=m||{},k&&R!==void 0&&(this.H.OSID=k,this.H.OAID=R),this.F=this.X,this.I=A_(this,null,this.W),Yc(this)};function Sf(c){if(b_(c),c.G==3){var m=c.U++,k=As(c.I);if(Fe(k,"SID",c.K),Fe(k,"RID",m),Fe(k,"TYPE","terminate"),Da(c,k),m=new Dn(c,c.j,m),m.L=2,m.v=Wc(As(k)),k=!1,l.navigator&&l.navigator.sendBeacon)try{k=l.navigator.sendBeacon(m.v.toString(),"")}catch{}!k&&l.Image&&(new Image().src=m.v,k=!0),k||(m.g=P_(m.j,null),m.g.ea(m.v)),m.F=Date.now(),$c(m)}T_(c)}function Kc(c){c.g&&(Nf(c),c.g.cancel(),c.g=null)}function b_(c){Kc(c),c.u&&(l.clearTimeout(c.u),c.u=null),Jc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function Yc(c){if(!r_(c.h)&&!c.s){c.s=!0;var m=c.Ga;U||q(),F||(U(),F=!0),B.add(m,c),c.B=0}}function Hj(c,m){return i_(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=qe(h(c.Ga,c,m),I_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new Dn(this,this.j,c);let H=this.o;if(this.S&&(H?(H=g(H),w(H,this.S)):H=this.S),this.m!==null||this.O||($.H=H,H=null),this.P)e:{for(var m=0,k=0;k<this.i.length;k++){t:{var R=this.i[k];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(m+=R,4096<m){m=k;break e}if(m===4096||k===this.i.length-1){m=k+1;break e}}m=1e3}else m=1e3;m=C_(this,$,m),k=As(this.I),Fe(k,"RID",c),Fe(k,"CVER",22),this.D&&Fe(k,"X-HTTP-Session-Id",this.D),Da(this,k),H&&(this.O?m="headers="+encodeURIComponent(String(g_(H)))+"&"+m:this.m&&wf(k,this.m,H)),xf(this.h,$),this.Ua&&Fe(k,"TYPE","init"),this.P?(Fe(k,"$req",m),Fe(k,"SID","null"),$.T=!0,oi($,k,null)):oi($,k,m),this.G=2}}else this.G==3&&(c?N_(this,c):this.i.length==0||r_(this.h)||N_(this))};function N_(c,m){var k;m?k=m.l:k=c.U++;const R=As(c.I);Fe(R,"SID",c.K),Fe(R,"RID",k),Fe(R,"AID",c.T),Da(c,R),c.m&&c.o&&wf(R,c.m,c.o),k=new Dn(c,c.j,k,c.B+1),c.m===null&&(k.H=c.o),m&&(c.i=m.D.concat(c.i)),m=C_(c,k,1e3),k.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),xf(c.h,k),oi(k,R,m)}function Da(c,m){c.H&&O(c.H,function(k,R){Fe(m,R,k)}),c.l&&l_({},function(k,R){Fe(m,R,k)})}function C_(c,m,k){k=Math.min(c.i.length,k);var R=c.l?h(c.l.Na,c.l,c):null;e:{var $=c.i;let H=-1;for(;;){const Z=["count="+k];H==-1?0<k?(H=$[0].g,Z.push("ofs="+H)):H=0:Z.push("ofs="+H);let Oe=!0;for(let Nt=0;Nt<k;Nt++){let ke=$[Nt].g;const Pt=$[Nt].map;if(ke-=H,0>ke)H=Math.max(0,$[Nt].g-100),Oe=!1;else try{$j(Pt,Z,"req"+ke+"_")}catch{R&&R(Pt)}}if(Oe){R=Z.join("&");break e}}}return c=c.i.splice(0,k),m.D=c,R}function E_(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;U||q(),F||(U(),F=!0),B.add(m,c),c.v=0}}function bf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=qe(h(c.Fa,c),I_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,k_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=qe(h(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ie(10),Kc(this),k_(this))};function Nf(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function k_(c){c.g=new Dn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=As(c.qa);Fe(m,"RID","rpc"),Fe(m,"SID",c.K),Fe(m,"AID",c.T),Fe(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Fe(m,"TO",c.ja),Fe(m,"TYPE","xmlhttp"),Da(c,m),c.m&&c.o&&wf(m,c.m,c.o),c.L&&(c.g.I=c.L);var k=c.g;c=c.ia,k.L=1,k.v=Wc(As(m)),k.m=null,k.P=!0,hr(k,c)}t.Za=function(){this.C!=null&&(this.C=null,Kc(this),bf(this),ie(19))};function Jc(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function j_(c,m){var k=null;if(c.g==m){Jc(c),Nf(c),c.g=null;var R=2}else if(_f(c.h,m))k=m.D,o_(c.h,m),R=1;else return;if(c.G!=0){if(m.o)if(R==1){k=m.m?m.m.length:0,m=Date.now()-m.F;var $=c.B;R=ge(),He(R,new he(R,k)),Yc(c)}else E_(c);else if($=m.s,$==3||$==0&&0<m.X||!(R==1&&Hj(c,m)||R==2&&bf(c)))switch(k&&0<k.length&&(m=c.h,m.i=m.i.concat(k)),$){case 1:ci(c,5);break;case 4:ci(c,10);break;case 3:ci(c,6);break;default:ci(c,2)}}}function I_(c,m){let k=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(k*=2),k*m}function ci(c,m){if(c.j.info("Error code "+m),m==2){var k=h(c.fb,c),R=c.Xa;const $=!R;R=new li(R||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Vc(R,"https"),Wc(R),$?Fj(R.toString(),k):zj(R.toString(),k)}else ie(2);c.G=0,c.l&&c.l.sa(m),T_(c),b_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ie(2)):(this.j.info("Failed to ping google.com"),ie(1))};function T_(c){if(c.G=0,c.ka=[],c.l){const m=a_(c.h);(m.length!=0||c.i.length!=0)&&(b(c.ka,m),b(c.ka,c.i),c.h.i.length=0,j(c.i),c.i.length=0),c.l.ra()}}function A_(c,m,k){var R=k instanceof li?As(k):new li(k);if(R.g!="")m&&(R.g=m+"."+R.g),qc(R,R.s);else{var $=l.location;R=$.protocol,m=m?m+"."+$.hostname:$.hostname,$=+$.port;var H=new li(null);R&&Vc(H,R),m&&(H.g=m),$&&qc(H,$),k&&(H.l=k),R=H}return k=c.D,m=c.ya,k&&m&&Fe(R,k,m),Fe(R,"VER",c.la),Da(c,R),R}function P_(c,m,k){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new st(new Hc({eb:k})):new st(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function R_(){}t=R_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Nn(c,m){Je.call(this),this.g=new S_(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!E(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!E(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new co(this)}C(Nn,Je),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){Sf(this.g)},Nn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var k={};k.__data__=c,c=k}else this.u&&(k={},k.__data__=js(c),c=k);m.i.push(new Ij(m.Ya++,c)),m.G==3&&Yc(m)},Nn.prototype.N=function(){this.g.l=null,delete this.j,Sf(this.g),delete this.g,Nn.aa.N.call(this)};function O_(c){dr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const k in m){c=k;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}C(O_,dr);function D_(){Xe.call(this),this.status=1}C(D_,Xe);function co(c){this.g=c}C(co,R_),co.prototype.ua=function(){He(this.g,"a")},co.prototype.ta=function(c){He(this.g,new O_(c))},co.prototype.sa=function(c){He(this.g,new D_)},co.prototype.ra=function(){He(this.g,"b")},Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,Ts.NO_ERROR=0,Ts.TIMEOUT=8,Ts.HTTP_ERROR=6,gf.COMPLETE="complete",ur.EventType=On,On.OPEN="a",On.CLOSE="b",On.ERROR="c",On.MESSAGE="d",Je.prototype.listen=Je.prototype.K,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha}).apply(typeof Eu<"u"?Eu:typeof self<"u"?self:typeof window<"u"?window:{});const W0="@firebase/firestore",H0="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=new Gh("@firebase/firestore");function Wn(t,...e){if(ra.logLevel<=Te.DEBUG){const n=e.map(Yy);ra.debug(`Firestore (${jc}): ${t}`,...n)}}function xC(t,...e){if(ra.logLevel<=Te.ERROR){const n=e.map(Yy);ra.error(`Firestore (${jc}): ${t}`,...n)}}function JD(t,...e){if(ra.logLevel<=Te.WARN){const n=e.map(Yy);ra.warn(`Firestore (${jc}): ${t}`,...n)}}function Yy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,wC(t,s,n)}function wC(t,e,n){let s=`FIRESTORE (${jc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw xC(s),new Error(s)}function xl(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||wC(e,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Ne extends Ns{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class ZD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class e3{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xl(this.o===void 0,42304);let s=this.i;const r=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let i=new wl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new wl,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{Wn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Wn("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new wl)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Wn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(xl(typeof s.accessToken=="string",31837,{l:s}),new SC(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xl(e===null||typeof e=="string",2055,{h:e}),new Vt(e)}}class t3{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class n3{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new t3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class G0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xl(this.o===void 0,3512);const s=i=>{i.error!=null&&Wn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Wn("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{Wn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):Wn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new G0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xl(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new G0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=r3(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Gr(t,e){return t<e?-1:t>e?1:0}function o3(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return xp(r)===xp(i)?Gr(r,i):xp(r)?1:-1}return Gr(t.length,e.length)}const a3=55296,l3=57343;function xp(t){const e=t.charCodeAt(0);return e>=a3&&e<=l3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="__name__";class cs{constructor(e,n,s){n===void 0?n=0:n>e.length&&ic(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ic(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return cs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cs?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=cs.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Gr(e.length,n.length)}static compareSegments(e,n){const s=cs.isNumericId(e),r=cs.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?cs.extractNumericId(e).compare(cs.extractNumericId(n)):o3(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ky.fromString(e.substring(4,e.length-2))}}class $n extends cs{construct(e,n,s){return new $n(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ne(be.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new $n(n)}static emptyPath(){return new $n([])}}const c3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vi extends cs{construct(e,n,s){return new vi(e,n,s)}static isValidIdentifier(e){return c3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Q0}static keyField(){return new vi([Q0])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Ne(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let a=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new Ne(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ne(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(s+=l,r++):(i(),r++)}if(i(),a)throw new Ne(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vi(n)}static emptyPath(){return new vi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.path=e}static fromPath(e){return new bi($n.fromString(e))}static fromName(e){return new bi($n.fromString(e).popFirst(5))}static empty(){return new bi($n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$n.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $n.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bi(new $n(e.slice()))}}function u3(t,e,n,s){if(e===!0&&s===!0)throw new Ne(be.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function d3(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function h3(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ic(12329,{type:typeof t})}function f3(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ne(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=h3(t);throw new Ne(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ic(t,e){if(!d3(t))throw new Ne(be.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const a=t[s];if(r&&typeof a!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new Ne(be.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=-62135596800,Y0=1e6;class us{static now(){return us.fromMillis(Date.now())}static fromDate(e){return us.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Y0);return new us(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ne(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ne(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<K0)throw new Ne(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Y0}_compareTo(e){return this.seconds===e.seconds?Gr(this.nanoseconds,e.nanoseconds):Gr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:us._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ic(e,us._jsonSchema))return new us(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-K0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}us._jsonSchemaVersion="firestore/timestamp/1.0",us._jsonSchema={type:ut("string",us._jsonSchemaVersion),seconds:ut("number"),nanoseconds:ut("number")};function p3(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new m3("Invalid base64 string: "+i):i}}(e);return new qi(n)}static fromUint8Array(e){const n=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new qi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qi.EMPTY_BYTE_STRING=new qi("");const rg="(default)";class Kd{constructor(e,n){this.projectId=e,this.database=n||rg}static empty(){return new Kd("","")}get isDefaultDatabase(){return this.database===rg}isEqual(e){return e instanceof Kd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,n=null,s=[],r=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function y3(t){return new g3(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J0,we;(we=J0||(J0={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Ky([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3=1048576;function wp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&Wn("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new wl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const a=Date.now()+s,l=new Jy(e,n,a,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var X0,Z0;(Z0=X0||(X0={})).Ma="default",Z0.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="firestore.googleapis.com",tw=!0;class nw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bC,this.ssl=tw}else this.host=e.host,this.ssl=e.ssl??tw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=v3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_3)throw new Ne(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}u3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w3(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ne(be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ne(be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ne(be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class NC{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new XD;switch(s.type){case"firstParty":return new n3(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ne(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=ew.get(n);s&&(Wn("ComponentProvider","Removing Datastore"),ew.delete(n),s.terminate())}(this),Promise.resolve()}}function S3(t,e,n,s={}){var d;t=f3(t,NC);const r=no(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(qy(`https://${l}`),Wy("Firestore",!0)),i.host!==bC&&i.host!==l&&JD("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:r,emulatorOptions:s};if(!Hr(u,a)&&(t._setSettings(u),s.mockUserToken)){let f,p;if(typeof s.mockUserToken=="string")f=s.mockUserToken,p=Vt.MOCK_USER;else{f=uC(s.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const h=s.mockUserToken.sub||s.mockUserToken.user_id;if(!h)throw new Ne(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Vt(h)}t._authCredentials=new ZD(new SC(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Xy(this.firestore,e,this._query)}}class hs{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hs(this.firestore,e,this._key)}toJSON(){return{type:hs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Ic(n,hs._jsonSchema))return new hs(e,s||null,new bi($n.fromString(n.referencePath)))}}hs._jsonSchemaVersion="firestore/documentReference/1.0",hs._jsonSchema={type:ut("string",hs._jsonSchemaVersion),referencePath:ut("string")};class Zy extends Xy{constructor(e,n,s){super(e,n,y3(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hs(this.firestore,null,new bi(e))}withConverter(e){return new Zy(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="AsyncQueue";class rw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new x3(this,"async_queue_retry"),this._c=()=>{const s=wp();s&&Wn(sw,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=wp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=wp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new wl;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!p3(e))throw e;Wn(sw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,xC("INTERNAL UNHANDLED ERROR: ",iw(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Jy.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&ic(47125,{Pc:iw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function iw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class b3 extends NC{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new rw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rw(e),this._firestoreClient=void 0,await e}}}function N3(t,e){const n=typeof t=="object"?t:Kh(),s=typeof t=="string"?t:rg,r=ro(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=aC("firestore");i&&S3(r,...i)}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Us(qi.fromBase64String(e))}catch(n){throw new Ne(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Us(qi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Us._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ic(e,Us._jsonSchema))return Us.fromBase64String(e.bytes)}}Us._jsonSchemaVersion="firestore/bytes/1.0",Us._jsonSchema={type:ut("string",Us._jsonSchemaVersion),bytes:ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ne(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ne(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ne(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Gr(this._lat,e._lat)||Gr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(e){if(Ic(e,Ai._jsonSchema))return new Ai(e.latitude,e.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:ut("string",Ai._jsonSchemaVersion),latitude:ut("number"),longitude:ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ic(e,Pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Pi(e.vectorValues);throw new Ne(be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pi._jsonSchemaVersion="firestore/vectorValue/1.0",Pi._jsonSchema={type:ut("string",Pi._jsonSchemaVersion),vectorValues:ut("object")};const C3=new RegExp("[~\\*/\\[\\]]");function E3(t,e,n){if(e.search(C3)>=0)throw ow(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new CC(...e.split("."))._internalPath}catch{throw ow(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function ow(t,e,n,s,r){let i=`Function ${e}() called with invalid data`;i+=". ";let a="";return new Ne(be.INVALID_ARGUMENT,i+t+a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new hs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new k3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(kC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class k3 extends EC{data(){return super.data()}}function kC(t,e){return typeof e=="string"?E3(t,e):e instanceof CC?e._internalPath:e._delegate._internalPath}class ku{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fo extends EC{constructor(e,n,s,r,i,a){super(e,n,s,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(kC("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Fo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Fo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fo._jsonSchema={type:ut("string",Fo._jsonSchemaVersion),bundleSource:ut("string","DocumentSnapshot"),bundleName:ut("string"),bundle:ut("string")};class sd extends Fo{data(e={}){return super.data(e)}}class Sl{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ku(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new sd(this._firestore,this._userDataWriter,s.key,s,new ku(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ne(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new sd(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ku(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new sd(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ku(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,f=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:j3(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=i3.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function j3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ic(61501,{type:t})}}Sl._jsonSchemaVersion="firestore/querySnapshot/1.0",Sl._jsonSchema={type:ut("string",Sl._jsonSchemaVersion),bundleSource:ut("string","QuerySnapshot"),bundleName:ut("string"),bundle:ut("string")};(function(e,n=!0){(function(r){jc=r})(io),ns(new An("firestore",(s,{instanceIdentifier:r,options:i})=>{const a=s.getProvider("app").getImmediate(),l=new b3(new e3(s.getProvider("auth-internal")),new s3(a,s.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ne(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kd(d.options.projectId,f)}(a,r),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),on(W0,H0,e),on(W0,H0,"esm2020")})();var aw={};const lw="@firebase/database",cw="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jC="";function I3(t){jC=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),xt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:nc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ir(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new T3(e)}}catch{}return new A3},Ni=IC("localStorage"),P3=IC("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=new Gh("@firebase/database"),R3=function(){let t=1;return function(){return t++}}(),TC=function(t){const e=z4(t),n=new L4;n.update(e);const s=n.digest();return $y.encodeByteArray(s)},Tc=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Tc.apply(null,s):typeof s=="object"?e+=xt(s):e+=s,e+=" "}return e};let bl=null,uw=!0;const O3=function(t,e){X(!0,"Can't turn on custom loggers persistently."),zo.logLevel=Te.VERBOSE,bl=zo.log.bind(zo)},Mt=function(...t){if(uw===!0&&(uw=!1,bl===null&&P3.get("logging_enabled")===!0&&O3()),bl){const e=Tc.apply(null,t);bl(e)}},Ac=function(t){return function(...e){Mt(t,...e)}},ig=function(...t){const e="FIREBASE INTERNAL ERROR: "+Tc(...t);zo.error(e)},Zs=function(...t){const e=`FIREBASE FATAL ERROR: ${Tc(...t)}`;throw zo.error(e),new Error(e)},an=function(...t){const e="FIREBASE WARNING: "+Tc(...t);zo.warn(e)},D3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&an("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},AC=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},L3=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ia="[MIN_NAME]",Wi="[MAX_NAME]",wa=function(t,e){if(t===e)return 0;if(t===ia||e===Wi)return-1;if(e===ia||t===Wi)return 1;{const n=dw(t),s=dw(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},M3=function(t,e){return t===e?0:t<e?-1:1},Qa=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+xt(e))},ev=function(t){if(typeof t!="object"||t===null)return xt(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=xt(e[s]),n+=":",n+=ev(t[e[s]]);return n+="}",n},PC=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function cn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const RC=function(t){X(!AC(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,i,a,l,u;t===0?(i=0,a=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=l+s,a=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(i=0,a=Math.round(t/Math.pow(2,1-s-n))));const d=[];for(u=n;u;u-=1)d.push(a%2?1:0),a=Math.floor(a/2);for(u=e;u;u-=1)d.push(i%2?1:0),i=Math.floor(i/2);d.push(r?1:0),d.reverse();const f=d.join("");let p="";for(u=0;u<64;u+=8){let h=parseInt(f.substr(u,8),2).toString(16);h.length===1&&(h="0"+h),p=p+h}return p.toLowerCase()},U3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},F3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function z3(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const B3=new RegExp("^-?(0*)\\d{1,10}$"),$3=-2147483648,V3=2147483647,dw=function(t){if(B3.test(t)){const e=Number(t);if(e>=$3&&e<=V3)return e}return null},Sa=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw an("Exception was thrown by user callback.",n),e},Math.floor(0))}},q3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Nl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Vn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){an(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Mt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',an(e)}}class rd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}rd.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="5",OC="v",DC="s",LC="r",MC="f",UC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,FC="ls",zC="p",og="ac",BC="websocket",$C="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n,s,r,i=!1,a="",l=!1,u=!1,d=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=a,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=u,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ni.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ni.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function G3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function qC(t,e,n){X(typeof e=="string","typeof type must == string"),X(typeof n=="object","typeof params must == object");let s;if(e===BC)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===$C)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);G3(t)&&(n.ns=t.namespace);const r=[];return cn(n,(i,a)=>{r.push(i+"="+a)}),s+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(){this.counters_={}}incrementCounter(e,n=1){ir(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return v4(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp={},bp={};function nv(t){const e=t.toString();return Sp[e]||(Sp[e]=new Q3),Sp[e]}function K3(t,e){const n=t.toString();return bp[n]||(bp[n]=e()),bp[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&Sa(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="start",J3="close",X3="pLPCommand",Z3="pRTLPCB",WC="id",HC="pw",GC="ser",eL="cb",tL="seg",nL="ts",sL="d",rL="dframe",QC=1870,KC=30,iL=QC-KC,oL=25e3,aL=3e4;class Ao{constructor(e,n,s,r,i,a,l){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=a,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ac(e),this.stats_=nv(n),this.urlFn=u=>(this.appCheckToken&&(u[og]=this.appCheckToken),qC(n,$C,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Y3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(aL)),L3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sv((...i)=>{const[a,l,u,d,f]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===hw)this.id=l,this.password=u;else if(a===J3)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...i)=>{const[a,l]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(a,l)},()=>{this.onClosed_()},this.urlFn);const s={};s[hw]="t",s[GC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[eL]=this.scriptTagHolder.uniqueCallbackIdentifier),s[OC]=tv,this.transportSessionId&&(s[DC]=this.transportSessionId),this.lastSessionId&&(s[FC]=this.lastSessionId),this.applicationId&&(s[zC]=this.applicationId),this.appCheckToken&&(s[og]=this.appCheckToken),typeof location<"u"&&location.hostname&&UC.test(location.hostname)&&(s[LC]=MC);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ao.forceAllow_=!0}static forceDisallow(){Ao.forceDisallow_=!0}static isAvailable(){return Ao.forceAllow_?!0:!Ao.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!U3()&&!F3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=xt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=rC(n),r=PC(s,iL);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[rL]="t",s[WC]=e,s[HC]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=xt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class sv{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=R3(),window[X3+this.uniqueCallbackIdentifier]=e,window[Z3+this.uniqueCallbackIdentifier]=n,this.myIFrame=sv.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(l){Mt("frame writing exception"),l.stack&&Mt(l.stack),Mt(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Mt("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[WC]=this.myID,e[HC]=this.myPW,e[GC]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+KC+s.length<=QC;){const a=this.pendingSegs.shift();s=s+"&"+tL+r+"="+a.seg+"&"+nL+r+"="+a.ts+"&"+sL+r+"="+a.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(oL)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Mt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=16384,cL=45e3;let Yd=null;typeof MozWebSocket<"u"?Yd=MozWebSocket:typeof WebSocket<"u"&&(Yd=WebSocket);class qn{constructor(e,n,s,r,i,a,l){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ac(this.connId),this.stats_=nv(n),this.connURL=qn.connectionURL_(n,a,l,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,i){const a={};return a[OC]=tv,typeof location<"u"&&location.hostname&&UC.test(location.hostname)&&(a[LC]=MC),n&&(a[DC]=n),s&&(a[FC]=s),r&&(a[og]=r),i&&(a[zC]=i),qC(e,BC,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ni.set("previous_websocket_failure",!0);try{let s;I4(),this.mySock=new Yd(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){qn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Yd!==null&&!qn.forceDisallow_}static previouslyFailed(){return Ni.isInMemoryStorage||Ni.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ni.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=nc(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(X(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=xt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=PC(n,lL);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(cL))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}qn.responsesRequiredToBeHealthy=2;qn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{static get ALL_TRANSPORTS(){return[Ao,qn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=qn&&qn.isAvailable();let s=n&&!qn.previouslyFailed();if(e.webSocketOnly&&(n||an("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[qn];else{const r=this.transports_=[];for(const i of oc.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);oc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}oc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=6e4,dL=5e3,hL=10*1024,fL=100*1024,Np="t",fw="d",pL="s",pw="r",mL="e",mw="o",gw="a",yw="n",vw="p",gL="h";class yL{constructor(e,n,s,r,i,a,l,u,d,f){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=a,this.onReady_=l,this.onDisconnect_=u,this.onKill_=d,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ac("c:"+this.id+":"),this.transportManager_=new oc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Nl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>fL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>hL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Np in e){const n=e[Np];n===gw?this.upgradeIfSecondaryHealthy_():n===pw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===mw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Qa("t",e),s=Qa("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:vw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:gw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:yw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Qa("t",e),s=Qa("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Qa(Np,e);if(fw in e){const s=e[fw];if(n===gL){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===yw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===pL?this.onConnectionShutdown_(s):n===pw?this.onReset_(s):n===mL?ig("Server Error: "+s):n===mw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ig("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),tv!==s&&an("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),Nl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(uL))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(dL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:vw,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ni.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.allowedEvents_=e,this.listeners_={},X(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===n&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){X(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends JC{static getInstance(){return new Jd}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Hy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return X(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=32,xw=768;class De{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[s]=this.pieces_[r],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ae(){return new De("")}function ye(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Qr(t){return t.pieces_.length-t.pieceNum_}function Me(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new De(t.pieces_,e)}function XC(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function vL(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ZC(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function eE(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new De(e,0)}function ft(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof De)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new De(n,0)}function _e(t){return t.pieceNum_>=t.pieces_.length}function en(t,e){const n=ye(t),s=ye(e);if(n===null)return e;if(n===s)return en(Me(t),Me(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function rv(t,e){if(Qr(t)!==Qr(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function Hn(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(Qr(t)>Qr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class _L{constructor(e,n){this.errorPrefix_=n,this.parts_=ZC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Hh(this.parts_[s]);tE(this)}}function xL(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Hh(e),tE(t)}function wL(t){const e=t.parts_.pop();t.byteLength_-=Hh(e),t.parts_.length>0&&(t.byteLength_-=1)}function tE(t){if(t.byteLength_>xw)throw new Error(t.errorPrefix_+"has a key path longer than "+xw+" bytes ("+t.byteLength_+").");if(t.parts_.length>_w)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_w+") or object contains a cycle "+yi(t))}function yi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv extends JC{static getInstance(){return new iv}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return X(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=1e3,SL=60*5*1e3,ww=30*1e3,bL=1.3,NL=3e4,CL="server_kill",Sw=3;class Hs extends YC{constructor(e,n,s,r,i,a,l,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=Hs.nextPersistentConnectionId_++,this.log_=Ac("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ka,this.maxReconnectDelay_=SL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");iv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Jd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,i={r,a:e,b:n};this.log_(xt(i)),X(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new Wh,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const l=a.d;a.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,s,r){this.initConnection_();const i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),X(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");const l={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(a).set(i,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},a="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(a,i,l=>{const u=l.d,d=l.s;Hs.warnOnListenWarnings_(u,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",l),d!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(d,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ir(e,"w")){const s=sa(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();an(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||D4(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ww)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=O4(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const i=r.s,a=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const i={p:e},a="n";r&&(i.q=s,i.t=r),this.sendRequest(a,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,i){this.initConnection_();const a={p:n,d:s};i!==void 0&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const i=s.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+xt(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):ig("Unrecognized action received from server: "+xt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){X(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ka,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ka,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>NL&&(this.reconnectDelay_=Ka),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*bL)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Hs.nextConnectionId_++,i=this.lastSessionId;let a=!1,l=null;const u=function(){l?l.close():(a=!0,s())},d=function(p){X(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(p)};this.realtime_={close:u,sendRequest:d};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,h]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?Mt("getToken() completed but was canceled"):(Mt("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=h&&h.token,l=new yL(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,_=>{an(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(CL)},i))}catch(p){this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&an(p),u())}}}interrupt(e){Mt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Mt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Xm(this.interruptReasons_)&&(this.reconnectDelay_=Ka,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>ev(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new De(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){Mt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Sw&&(this.reconnectDelay_=ww,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Mt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Sw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+jC.replace(/\./g,"-")]=1,Hy()?e["framework.cordova"]=1:dC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Jd.getInstance().currentlyOnline();return Xm(this.interruptReasons_)&&e}}Hs.nextPersistentConnectionId_=0;Hs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ve(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new ve(ia,e),r=new ve(ia,n);return this.compare(s,r)!==0}minPost(){return ve.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju;class nE extends Yh{static get __EMPTY_NODE(){return ju}static set __EMPTY_NODE(e){ju=e}compare(e,n){return wa(e.name,n.name)}isDefinedOn(e){throw _a("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ve.MIN}maxPost(){return new ve(Wi,ju)}makePost(e,n){return X(typeof e=="string","KeyIndex indexValue must always be a string."),new ve(e,ju)}toString(){return".key"}}const Bo=new nE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=n?s(e.key,n):1,r&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class _t{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??_t.RED,this.left=r??tn.EMPTY_NODE,this.right=i??tn.EMPTY_NODE}copy(e,n,s,r,i){return new _t(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return tn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return tn.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}_t.RED=!0;_t.BLACK=!1;class EL{copy(e,n,s,r,i){return this}insert(e,n,s){return new _t(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class tn{constructor(e,n=tn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new tn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,_t.BLACK,null,null))}remove(e){return new tn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_t.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Iu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Iu(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Iu(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Iu(this.root_,null,this.comparator_,!0,e)}}tn.EMPTY_NODE=new EL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(t,e){return wa(t.name,e.name)}function ov(t,e){return wa(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ag;function jL(t){ag=t}const sE=function(t){return typeof t=="number"?"number:"+RC(t):"string:"+t},rE=function(t){if(t.isLeafNode()){const e=t.val();X(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ir(e,".sv"),"Priority must be a string or number.")}else X(t===ag||t.isEmpty(),"priority of unexpected type.");X(t===ag||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bw;class gt{static set __childrenNodeConstructor(e){bw=e}static get __childrenNodeConstructor(){return bw}constructor(e,n=gt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,X(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),rE(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new gt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:gt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return _e(e)?this:ye(e)===".priority"?this.priorityNode_:gt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:gt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=ye(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(X(s!==".priority"||Qr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,gt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Me(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+sE(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=RC(this.value_):e+=this.value_,this.lazyHash_=TC(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===gt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof gt.__childrenNodeConstructor?-1:(X(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=gt.VALUE_TYPE_ORDER.indexOf(n),i=gt.VALUE_TYPE_ORDER.indexOf(s);return X(r>=0,"Unknown leaf type: "+n),X(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}gt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iE,oE;function IL(t){iE=t}function TL(t){oE=t}class AL extends Yh{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),i=s.compareTo(r);return i===0?wa(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ve.MIN}maxPost(){return new ve(Wi,new gt("[PRIORITY-POST]",oE))}makePost(e,n){const s=iE(e);return new ve(n,new gt("[PRIORITY-POST]",s))}toString(){return".priority"}}const nt=new AL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=Math.log(2);class RL{constructor(e){const n=i=>parseInt(Math.log(i)/PL,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Xd=function(t,e,n,s){t.sort(e);const r=function(u,d){const f=d-u;let p,h;if(f===0)return null;if(f===1)return p=t[u],h=n?n(p):p,new _t(h,p.node,_t.BLACK,null,null);{const _=parseInt(f/2,10)+u,C=r(u,_),j=r(_+1,d);return p=t[_],h=n?n(p):p,new _t(h,p.node,_t.BLACK,C,j)}},i=function(u){let d=null,f=null,p=t.length;const h=function(C,j){const b=p-C,S=p;p-=C;const E=r(b+1,S),y=t[b],x=n?n(y):y;_(new _t(x,y.node,j,null,E))},_=function(C){d?(d.left=C,d=C):(f=C,d=C)};for(let C=0;C<u.count;++C){const j=u.nextBitIsOne(),b=Math.pow(2,u.count-(C+1));j?h(b,_t.BLACK):(h(b,_t.BLACK),h(b,_t.RED))}return f},a=new RL(t.length),l=i(a);return new tn(s||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cp;const mo={};class Bs{static get Default(){return X(mo&&nt,"ChildrenNode.ts has not been loaded"),Cp=Cp||new Bs({".priority":mo},{".priority":nt}),Cp}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=sa(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof tn?n:null}hasIndex(e){return ir(this.indexSet_,e.toString())}addIndex(e,n){X(e!==Bo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=n.getIterator(ve.Wrap);let a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),s.push(a),a=i.getNext();let l;r?l=Xd(s,e.getCompare()):l=mo;const u=e.toString(),d={...this.indexSet_};d[u]=e;const f={...this.indexes_};return f[u]=l,new Bs(f,d)}addToIndexes(e,n){const s=Qd(this.indexes_,(r,i)=>{const a=sa(this.indexSet_,i);if(X(a,"Missing index implementation for "+i),r===mo)if(a.isDefinedOn(e.node)){const l=[],u=n.getIterator(ve.Wrap);let d=u.getNext();for(;d;)d.name!==e.name&&l.push(d),d=u.getNext();return l.push(e),Xd(l,a.getCompare())}else return mo;else{const l=n.get(e.name);let u=r;return l&&(u=u.remove(new ve(e.name,l))),u.insert(e,e.node)}});return new Bs(s,this.indexSet_)}removeFromIndexes(e,n){const s=Qd(this.indexes_,r=>{if(r===mo)return r;{const i=n.get(e.name);return i?r.remove(new ve(e.name,i)):r}});return new Bs(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ya;class ce{static get EMPTY_NODE(){return Ya||(Ya=new ce(new tn(ov),null,Bs.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&rE(this.priorityNode_),this.children_.isEmpty()&&X(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ya}updatePriority(e){return this.children_.isEmpty()?this:new ce(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ya:n}}getChild(e){const n=ye(e);return n===null?this:this.getImmediateChild(n).getChild(Me(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(X(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new ve(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const a=r.isEmpty()?Ya:this.priorityNode_;return new ce(r,a,i)}}updateChild(e,n){const s=ye(e);if(s===null)return n;{X(ye(e)!==".priority"||Qr(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(Me(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,i=!0;if(this.forEachChild(nt,(a,l)=>{n[a]=l.val(e),s++,i&&ce.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):i=!1}),!e&&i&&r<2*s){const a=[];for(const l in n)a[l]=n[l];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+sE(this.getPriority().val())+":"),this.forEachChild(nt,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":TC(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new ve(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ve(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ve(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,ve.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,ve.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Pc?-1:0}withIndex(e){if(e===Bo||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ce(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Bo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(nt),r=n.getIterator(nt);let i=s.getNext(),a=r.getNext();for(;i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=s.getNext(),a=r.getNext()}return i===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Bo?null:this.indexMap_.get(e.toString())}}ce.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class OL extends ce{constructor(){super(new tn(ov),ce.EMPTY_NODE,Bs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ce.EMPTY_NODE}isEmpty(){return!1}}const Pc=new OL;Object.defineProperties(ve,{MIN:{value:new ve(ia,ce.EMPTY_NODE)},MAX:{value:new ve(Wi,Pc)}});nE.__EMPTY_NODE=ce.EMPTY_NODE;gt.__childrenNodeConstructor=ce;jL(Pc);TL(Pc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=!0;function kt(t,e=null){if(t===null)return ce.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),X(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new gt(n,kt(e))}if(!(t instanceof Array)&&DL){const n=[];let s=!1;if(cn(t,(a,l)=>{if(a.substring(0,1)!=="."){const u=kt(l);u.isEmpty()||(s=s||!u.getPriority().isEmpty(),n.push(new ve(a,u)))}}),n.length===0)return ce.EMPTY_NODE;const i=Xd(n,kL,a=>a.name,ov);if(s){const a=Xd(n,nt.getCompare());return new ce(i,kt(e),new Bs({".priority":a},{".priority":nt}))}else return new ce(i,kt(e),Bs.Default)}else{let n=ce.EMPTY_NODE;return cn(t,(s,r)=>{if(ir(t,s)&&s.substring(0,1)!=="."){const i=kt(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(kt(e))}}IL(kt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL extends Yh{constructor(e){super(),this.indexPath_=e,X(!_e(e)&&ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),i=s.compareTo(r);return i===0?wa(e.name,n.name):i}makePost(e,n){const s=kt(e),r=ce.EMPTY_NODE.updateChild(this.indexPath_,s);return new ve(n,r)}maxPost(){const e=ce.EMPTY_NODE.updateChild(this.indexPath_,Pc);return new ve(Wi,e)}toString(){return ZC(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML extends Yh{compare(e,n){const s=e.node.compareTo(n.node);return s===0?wa(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ve.MIN}maxPost(){return ve.MAX}makePost(e,n){const s=kt(e);return new ve(n,s)}toString(){return".value"}}const UL=new ML;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t){return{type:"value",snapshotNode:t}}function oa(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ac(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function lc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function FL(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.index_=e}updateChild(e,n,s,r,i,a){X(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(r).equals(s.getChild(r))&&l.isEmpty()===s.isEmpty()||(a!=null&&(s.isEmpty()?e.hasChild(n)?a.trackChildChange(ac(n,l)):X(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?a.trackChildChange(oa(n,s)):a.trackChildChange(lc(n,s,l))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(nt,(r,i)=>{n.hasChild(r)||s.trackChildChange(ac(r,i))}),n.isLeafNode()||n.forEachChild(nt,(r,i)=>{if(e.hasChild(r)){const a=e.getImmediateChild(r);a.equals(i)||s.trackChildChange(lc(r,i,a))}else s.trackChildChange(oa(r,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ce.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this.indexedFilter_=new av(e.getIndex()),this.index_=e.getIndex(),this.startPost_=cc.getStartPost_(e),this.endPost_=cc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,i,a){return this.matches(new ve(n,s))||(s=ce.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,i,a)}updateFullNode(e,n,s){n.isLeafNode()&&(n=ce.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(ce.EMPTY_NODE);const i=this;return n.forEachChild(nt,(a,l)=>{i.matches(new ve(a,l))||(r=r.updateImmediateChild(a,ce.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new cc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,i,a){return this.rangedFilter_.matches(new ve(n,s))||(s=ce.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,i,a):this.fullLimitUpdateChild_(e,n,s,i,a)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=ce.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=ce.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;i.hasNext()&&a<this.limit_;){const l=i.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))r=r.updateImmediateChild(l.name,l.node),a++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(ce.EMPTY_NODE);let i;this.reverse_?i=r.getReverseIterator(this.index_):i=r.getIterator(this.index_);let a=0;for(;i.hasNext();){const l=i.getNext();a<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?a++:r=r.updateImmediateChild(l.name,ce.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,i){let a;if(this.reverse_){const p=this.index_.getCompare();a=(h,_)=>p(_,h)}else a=this.index_.getCompare();const l=e;X(l.numChildren()===this.limit_,"");const u=new ve(n,s),d=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),f=this.rangedFilter_.matches(u);if(l.hasChild(n)){const p=l.getImmediateChild(n);let h=r.getChildAfterChild(this.index_,d,this.reverse_);for(;h!=null&&(h.name===n||l.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);const _=h==null?1:a(h,u);if(f&&!s.isEmpty()&&_>=0)return i!=null&&i.trackChildChange(lc(n,s,p)),l.updateImmediateChild(n,s);{i!=null&&i.trackChildChange(ac(n,p));const j=l.updateImmediateChild(n,ce.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(oa(h.name,h.node)),j.updateImmediateChild(h.name,h.node)):j}}else return s.isEmpty()?e:f&&a(d,u)>=0?(i!=null&&(i.trackChildChange(ac(d.name,d.node)),i.trackChildChange(oa(n,s))),l.updateImmediateChild(n,s).updateImmediateChild(d.name,ce.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return X(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return X(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ia}hasEnd(){return this.endSet_}getIndexEndValue(){return X(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return X(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return X(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nt}copy(){const e=new lv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function BL(t){return t.loadsAllData()?new av(t.getIndex()):t.hasLimit()?new zL(t):new cc(t)}function Nw(t){const e={};if(t.isDefault())return e;let n;if(t.index_===nt?n="$priority":t.index_===UL?n="$value":t.index_===Bo?n="$key":(X(t.index_ instanceof LL,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=xt(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=xt(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+xt(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=xt(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+xt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Cw(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==nt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd extends YC{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(X(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=Ac("p:rest:"),this.listens_={}}listen(e,n,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const a=Zd.getListenId_(e,s),l={};this.listens_[a]=l;const u=Nw(e._queryParams);this.restRequest_(i+".json",u,(d,f)=>{let p=f;if(d===404&&(p=null,d=null),d===null&&this.onDataUpdate_(i,p,!1,s),sa(this.listens_,a)===l){let h;d?d===401?h="permission_denied":h="rest_error:"+d:h="ok",r(h,null)}})}unlisten(e,n){const s=Zd.getListenId_(e,n);delete this.listens_[s]}get(e){const n=Nw(e._queryParams),s=e._path.toString(),r=new Wh;return this.restRequest_(s+".json",n,(i,a)=>{let l=a;i===404&&(l=null,i=null),i===null?(this.onDataUpdate_(s,l,!1,null),r.resolve(l)):r.reject(new Error(l))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(n.auth=r.accessToken),i&&i.token&&(n.ac=i.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+xa(n);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(s&&l.readyState===4){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let u=null;if(l.status>=200&&l.status<300){try{u=nc(l.responseText)}catch{an("Failed to parse JSON response for "+a+": "+l.responseText)}s(null,u)}else l.status!==401&&l.status!==404&&an("Got unsuccessful REST response for "+a+" Status: "+l.status),s(l.status);s=null}},l.open("GET",a,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(){this.rootNode_=ce.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(){return{value:null,children:new Map}}function lE(t,e,n){if(_e(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=ye(e);t.children.has(s)||t.children.set(s,eh());const r=t.children.get(s);e=Me(e),lE(r,e,n)}}function lg(t,e,n){t.value!==null?n(e,t.value):VL(t,(s,r)=>{const i=new De(e.toString()+"/"+s);lg(r,i,n)})}function VL(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&cn(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=10*1e3,WL=30*1e3,HL=5*60*1e3;class GL{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new qL(e);const s=Ew+(WL-Ew)*Math.random();Nl(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;cn(e,(r,i)=>{i>0&&ir(this.statsToReport_,r)&&(n[r]=i,s=!0)}),s&&this.server_.reportStats(n),Nl(this.reportStats_.bind(this),Math.floor(Math.random()*2*HL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Gn||(Gn={}));function cE(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function cv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function uv(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Gn.ACK_USER_WRITE,this.source=cE()}operationForChild(e){if(_e(this.path)){if(this.affectedTree.value!=null)return X(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new De(e));return new th(Ae(),n,this.revert)}}else return X(ye(this.path)===e,"operationForChild called for unrelated child."),new th(Me(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.source=e,this.path=n,this.type=Gn.LISTEN_COMPLETE}operationForChild(e){return _e(this.path)?new uc(this.source,Ae()):new uc(this.source,Me(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Gn.OVERWRITE}operationForChild(e){return _e(this.path)?new Hi(this.source,Ae(),this.snap.getImmediateChild(e)):new Hi(this.source,Me(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Gn.MERGE}operationForChild(e){if(_e(this.path)){const n=this.children.subtree(new De(e));return n.isEmpty()?null:n.value?new Hi(this.source,Ae(),n.value):new dc(this.source,Ae(),n)}else return X(ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new dc(this.source,Me(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(_e(e))return this.isFullyInitialized()&&!this.filtered_;const n=ye(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function KL(t,e,n,s){const r=[],i=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&i.push(FL(a.childName,a.snapshotNode))}),Ja(t,r,"child_removed",e,s,n),Ja(t,r,"child_added",e,s,n),Ja(t,r,"child_moved",i,s,n),Ja(t,r,"child_changed",e,s,n),Ja(t,r,"value",e,s,n),r}function Ja(t,e,n,s,r,i){const a=s.filter(l=>l.type===n);a.sort((l,u)=>JL(t,l,u)),a.forEach(l=>{const u=YL(t,l,i);r.forEach(d=>{d.respondsTo(l.type)&&e.push(d.createEvent(u,t.query_))})})}function YL(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function JL(t,e,n){if(e.childName==null||n.childName==null)throw _a("Should only compare child_ events.");const s=new ve(e.childName,e.snapshotNode),r=new ve(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t,e){return{eventCache:t,serverCache:e}}function Cl(t,e,n,s){return Jh(new Gi(e,n,s),t.serverCache)}function uE(t,e,n,s){return Jh(t.eventCache,new Gi(e,n,s))}function cg(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ep;const XL=()=>(Ep||(Ep=new tn(M3)),Ep);class $e{static fromObject(e){let n=new $e(null);return cn(e,(s,r)=>{n=n.set(new De(s),r)}),n}constructor(e,n=XL()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ae(),value:this.value};if(_e(e))return null;{const s=ye(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(Me(e),n);return i!=null?{path:ft(new De(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(_e(e))return this;{const n=ye(e),s=this.children.get(n);return s!==null?s.subtree(Me(e)):new $e(null)}}set(e,n){if(_e(e))return new $e(n,this.children);{const s=ye(e),i=(this.children.get(s)||new $e(null)).set(Me(e),n),a=this.children.insert(s,i);return new $e(this.value,a)}}remove(e){if(_e(e))return this.children.isEmpty()?new $e(null):new $e(null,this.children);{const n=ye(e),s=this.children.get(n);if(s){const r=s.remove(Me(e));let i;return r.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,r),this.value===null&&i.isEmpty()?new $e(null):new $e(this.value,i)}else return this}}get(e){if(_e(e))return this.value;{const n=ye(e),s=this.children.get(n);return s?s.get(Me(e)):null}}setTree(e,n){if(_e(e))return n;{const s=ye(e),i=(this.children.get(s)||new $e(null)).setTree(Me(e),n);let a;return i.isEmpty()?a=this.children.remove(s):a=this.children.insert(s,i),new $e(this.value,a)}}fold(e){return this.fold_(Ae(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(ft(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,Ae(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(_e(e))return null;{const i=ye(e),a=this.children.get(i);return a?a.findOnPath_(Me(e),ft(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ae(),n)}foreachOnPath_(e,n,s){if(_e(e))return this;{this.value&&s(n,this.value);const r=ye(e),i=this.children.get(r);return i?i.foreachOnPath_(Me(e),ft(n,r),s):new $e(null)}}foreach(e){this.foreach_(Ae(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(ft(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.writeTree_=e}static empty(){return new Zn(new $e(null))}}function El(t,e,n){if(_e(e))return new Zn(new $e(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const a=en(r,e);return i=i.updateChild(a,n),new Zn(t.writeTree_.set(r,i))}else{const r=new $e(n),i=t.writeTree_.setTree(e,r);return new Zn(i)}}}function kw(t,e,n){let s=t;return cn(n,(r,i)=>{s=El(s,ft(e,r),i)}),s}function jw(t,e){if(_e(e))return Zn.empty();{const n=t.writeTree_.setTree(e,new $e(null));return new Zn(n)}}function ug(t,e){return oo(t,e)!=null}function oo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(en(n.path,e)):null}function Iw(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(nt,(s,r)=>{e.push(new ve(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new ve(s,r.value))}),e}function zr(t,e){if(_e(e))return t;{const n=oo(t,e);return n!=null?new Zn(new $e(n)):new Zn(t.writeTree_.subtree(e))}}function dg(t){return t.writeTree_.isEmpty()}function aa(t,e){return dE(Ae(),t.writeTree_,e)}function dE(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(X(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=dE(ft(t,r),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(ft(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t,e){return mE(e,t)}function ZL(t,e,n,s,r){X(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=El(t.visibleWrites,e,n)),t.lastWriteId=s}function e6(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function t6(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);X(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,i=!1,a=t.allWrites.length-1;for(;r&&a>=0;){const l=t.allWrites[a];l.visible&&(a>=n&&n6(l,s.path)?r=!1:Hn(s.path,l.path)&&(i=!0)),a--}if(r){if(i)return s6(t),!0;if(s.snap)t.visibleWrites=jw(t.visibleWrites,s.path);else{const l=s.children;cn(l,u=>{t.visibleWrites=jw(t.visibleWrites,ft(s.path,u))})}return!0}else return!1}function n6(t,e){if(t.snap)return Hn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Hn(ft(t.path,n),e))return!0;return!1}function s6(t){t.visibleWrites=hE(t.allWrites,r6,Ae()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function r6(t){return t.visible}function hE(t,e,n){let s=Zn.empty();for(let r=0;r<t.length;++r){const i=t[r];if(e(i)){const a=i.path;let l;if(i.snap)Hn(n,a)?(l=en(n,a),s=El(s,l,i.snap)):Hn(a,n)&&(l=en(a,n),s=El(s,Ae(),i.snap.getChild(l)));else if(i.children){if(Hn(n,a))l=en(n,a),s=kw(s,l,i.children);else if(Hn(a,n))if(l=en(a,n),_e(l))s=kw(s,Ae(),i.children);else{const u=sa(i.children,ye(l));if(u){const d=u.getChild(Me(l));s=El(s,Ae(),d)}}}else throw _a("WriteRecord should have .snap or .children")}}return s}function fE(t,e,n,s,r){if(!s&&!r){const i=oo(t.visibleWrites,e);if(i!=null)return i;{const a=zr(t.visibleWrites,e);if(dg(a))return n;if(n==null&&!ug(a,Ae()))return null;{const l=n||ce.EMPTY_NODE;return aa(a,l)}}}else{const i=zr(t.visibleWrites,e);if(!r&&dg(i))return n;if(!r&&n==null&&!ug(i,Ae()))return null;{const a=function(d){return(d.visible||r)&&(!s||!~s.indexOf(d.writeId))&&(Hn(d.path,e)||Hn(e,d.path))},l=hE(t.allWrites,a,e),u=n||ce.EMPTY_NODE;return aa(l,u)}}}function i6(t,e,n){let s=ce.EMPTY_NODE;const r=oo(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(nt,(i,a)=>{s=s.updateImmediateChild(i,a)}),s;if(n){const i=zr(t.visibleWrites,e);return n.forEachChild(nt,(a,l)=>{const u=aa(zr(i,new De(a)),l);s=s.updateImmediateChild(a,u)}),Iw(i).forEach(a=>{s=s.updateImmediateChild(a.name,a.node)}),s}else{const i=zr(t.visibleWrites,e);return Iw(i).forEach(a=>{s=s.updateImmediateChild(a.name,a.node)}),s}}function o6(t,e,n,s,r){X(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=ft(e,n);if(ug(t.visibleWrites,i))return null;{const a=zr(t.visibleWrites,i);return dg(a)?r.getChild(n):aa(a,r.getChild(n))}}function a6(t,e,n,s){const r=ft(e,n),i=oo(t.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(n)){const a=zr(t.visibleWrites,r);return aa(a,s.getNode().getImmediateChild(n))}else return null}function l6(t,e){return oo(t.visibleWrites,e)}function c6(t,e,n,s,r,i,a){let l;const u=zr(t.visibleWrites,e),d=oo(u,Ae());if(d!=null)l=d;else if(n!=null)l=aa(u,n);else return[];if(l=l.withIndex(a),!l.isEmpty()&&!l.isLeafNode()){const f=[],p=a.getCompare(),h=i?l.getReverseIteratorFrom(s,a):l.getIteratorFrom(s,a);let _=h.getNext();for(;_&&f.length<r;)p(_,s)!==0&&f.push(_),_=h.getNext();return f}else return[]}function u6(){return{visibleWrites:Zn.empty(),allWrites:[],lastWriteId:-1}}function nh(t,e,n,s){return fE(t.writeTree,t.treePath,e,n,s)}function hv(t,e){return i6(t.writeTree,t.treePath,e)}function Tw(t,e,n,s){return o6(t.writeTree,t.treePath,e,n,s)}function sh(t,e){return l6(t.writeTree,ft(t.treePath,e))}function d6(t,e,n,s,r,i){return c6(t.writeTree,t.treePath,e,n,s,r,i)}function fv(t,e,n){return a6(t.writeTree,t.treePath,e,n)}function pE(t,e){return mE(ft(t.treePath,e),t.writeTree)}function mE(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;X(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),X(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,lc(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,ac(s,r.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,oa(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,lc(s,e.snapshotNode,r.oldSnap));else throw _a("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const gE=new f6;class pv{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Gi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fv(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Qi(this.viewCache_),i=d6(this.writes_,r,n,1,s,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(t){return{filter:t}}function m6(t,e){X(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),X(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function g6(t,e,n,s,r){const i=new h6;let a,l;if(n.type===Gn.OVERWRITE){const d=n;d.source.fromUser?a=hg(t,e,d.path,d.snap,s,r,i):(X(d.source.fromServer,"Unknown source."),l=d.source.tagged||e.serverCache.isFiltered()&&!_e(d.path),a=rh(t,e,d.path,d.snap,s,r,l,i))}else if(n.type===Gn.MERGE){const d=n;d.source.fromUser?a=v6(t,e,d.path,d.children,s,r,i):(X(d.source.fromServer,"Unknown source."),l=d.source.tagged||e.serverCache.isFiltered(),a=fg(t,e,d.path,d.children,s,r,l,i))}else if(n.type===Gn.ACK_USER_WRITE){const d=n;d.revert?a=w6(t,e,d.path,s,r,i):a=_6(t,e,d.path,d.affectedTree,s,r,i)}else if(n.type===Gn.LISTEN_COMPLETE)a=x6(t,e,n.path,s,i);else throw _a("Unknown operation type: "+n.type);const u=i.getChanges();return y6(e,a,u),{viewCache:a,changes:u}}function y6(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=cg(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(aE(cg(e)))}}function yE(t,e,n,s,r,i){const a=e.eventCache;if(sh(s,n)!=null)return e;{let l,u;if(_e(n))if(X(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=Qi(e),f=d instanceof ce?d:ce.EMPTY_NODE,p=hv(s,f);l=t.filter.updateFullNode(e.eventCache.getNode(),p,i)}else{const d=nh(s,Qi(e));l=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const d=ye(n);if(d===".priority"){X(Qr(n)===1,"Can't have a priority with additional path components");const f=a.getNode();u=e.serverCache.getNode();const p=Tw(s,n,f,u);p!=null?l=t.filter.updatePriority(f,p):l=a.getNode()}else{const f=Me(n);let p;if(a.isCompleteForChild(d)){u=e.serverCache.getNode();const h=Tw(s,n,a.getNode(),u);h!=null?p=a.getNode().getImmediateChild(d).updateChild(f,h):p=a.getNode().getImmediateChild(d)}else p=fv(s,d,e.serverCache);p!=null?l=t.filter.updateChild(a.getNode(),d,p,f,r,i):l=a.getNode()}}return Cl(e,l,a.isFullyInitialized()||_e(n),t.filter.filtersNodes())}}function rh(t,e,n,s,r,i,a,l){const u=e.serverCache;let d;const f=a?t.filter:t.filter.getIndexedFilter();if(_e(n))d=f.updateFullNode(u.getNode(),s,null);else if(f.filtersNodes()&&!u.isFiltered()){const _=u.getNode().updateChild(n,s);d=f.updateFullNode(u.getNode(),_,null)}else{const _=ye(n);if(!u.isCompleteForPath(n)&&Qr(n)>1)return e;const C=Me(n),b=u.getNode().getImmediateChild(_).updateChild(C,s);_===".priority"?d=f.updatePriority(u.getNode(),b):d=f.updateChild(u.getNode(),_,b,C,gE,null)}const p=uE(e,d,u.isFullyInitialized()||_e(n),f.filtersNodes()),h=new pv(r,p,i);return yE(t,p,n,r,h,l)}function hg(t,e,n,s,r,i,a){const l=e.eventCache;let u,d;const f=new pv(r,e,i);if(_e(n))d=t.filter.updateFullNode(e.eventCache.getNode(),s,a),u=Cl(e,d,!0,t.filter.filtersNodes());else{const p=ye(n);if(p===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),s),u=Cl(e,d,l.isFullyInitialized(),l.isFiltered());else{const h=Me(n),_=l.getNode().getImmediateChild(p);let C;if(_e(h))C=s;else{const j=f.getCompleteChild(p);j!=null?XC(h)===".priority"&&j.getChild(eE(h)).isEmpty()?C=j:C=j.updateChild(h,s):C=ce.EMPTY_NODE}if(_.equals(C))u=e;else{const j=t.filter.updateChild(l.getNode(),p,C,h,f,a);u=Cl(e,j,l.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function Aw(t,e){return t.eventCache.isCompleteForChild(e)}function v6(t,e,n,s,r,i,a){let l=e;return s.foreach((u,d)=>{const f=ft(n,u);Aw(e,ye(f))&&(l=hg(t,l,f,d,r,i,a))}),s.foreach((u,d)=>{const f=ft(n,u);Aw(e,ye(f))||(l=hg(t,l,f,d,r,i,a))}),l}function Pw(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function fg(t,e,n,s,r,i,a,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,d;_e(n)?d=s:d=new $e(null).setTree(n,s);const f=e.serverCache.getNode();return d.children.inorderTraversal((p,h)=>{if(f.hasChild(p)){const _=e.serverCache.getNode().getImmediateChild(p),C=Pw(t,_,h);u=rh(t,u,new De(p),C,r,i,a,l)}}),d.children.inorderTraversal((p,h)=>{const _=!e.serverCache.isCompleteForChild(p)&&h.value===null;if(!f.hasChild(p)&&!_){const C=e.serverCache.getNode().getImmediateChild(p),j=Pw(t,C,h);u=rh(t,u,new De(p),j,r,i,a,l)}}),u}function _6(t,e,n,s,r,i,a){if(sh(r,n)!=null)return e;const l=e.serverCache.isFiltered(),u=e.serverCache;if(s.value!=null){if(_e(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return rh(t,e,n,u.getNode().getChild(n),r,i,l,a);if(_e(n)){let d=new $e(null);return u.getNode().forEachChild(Bo,(f,p)=>{d=d.set(new De(f),p)}),fg(t,e,n,d,r,i,l,a)}else return e}else{let d=new $e(null);return s.foreach((f,p)=>{const h=ft(n,f);u.isCompleteForPath(h)&&(d=d.set(f,u.getNode().getChild(h)))}),fg(t,e,n,d,r,i,l,a)}}function x6(t,e,n,s,r){const i=e.serverCache,a=uE(e,i.getNode(),i.isFullyInitialized()||_e(n),i.isFiltered());return yE(t,a,n,s,gE,r)}function w6(t,e,n,s,r,i){let a;if(sh(s,n)!=null)return e;{const l=new pv(s,e,r),u=e.eventCache.getNode();let d;if(_e(n)||ye(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=nh(s,Qi(e));else{const p=e.serverCache.getNode();X(p instanceof ce,"serverChildren would be complete if leaf node"),f=hv(s,p)}f=f,d=t.filter.updateFullNode(u,f,i)}else{const f=ye(n);let p=fv(s,f,e.serverCache);p==null&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),p!=null?d=t.filter.updateChild(u,f,p,Me(n),l,i):e.eventCache.getNode().hasChild(f)?d=t.filter.updateChild(u,f,ce.EMPTY_NODE,Me(n),l,i):d=u,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=nh(s,Qi(e)),a.isLeafNode()&&(d=t.filter.updateFullNode(d,a,i)))}return a=e.serverCache.isFullyInitialized()||sh(s,Ae())!=null,Cl(e,d,a,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new av(s.getIndex()),i=BL(s);this.processor_=p6(i);const a=n.serverCache,l=n.eventCache,u=r.updateFullNode(ce.EMPTY_NODE,a.getNode(),null),d=i.updateFullNode(ce.EMPTY_NODE,l.getNode(),null),f=new Gi(u,a.isFullyInitialized(),r.filtersNodes()),p=new Gi(d,l.isFullyInitialized(),i.filtersNodes());this.viewCache_=Jh(p,f),this.eventGenerator_=new QL(this.query_)}get query(){return this.query_}}function b6(t){return t.viewCache_.serverCache.getNode()}function N6(t,e){const n=Qi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_e(e)&&!n.getImmediateChild(ye(e)).isEmpty())?n.getChild(e):null}function Rw(t){return t.eventRegistrations_.length===0}function C6(t,e){t.eventRegistrations_.push(e)}function Ow(t,e,n){const s=[];if(n){X(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(i=>{const a=i.createCancelEvent(n,r);a&&s.push(a)})}if(e){let r=[];for(let i=0;i<t.eventRegistrations_.length;++i){const a=t.eventRegistrations_[i];if(!a.matches(e))r.push(a);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function Dw(t,e,n,s){e.type===Gn.MERGE&&e.source.queryId!==null&&(X(Qi(t.viewCache_),"We should always have a full cache before handling merges"),X(cg(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,i=g6(t.processor_,r,e,n,s);return m6(t.processor_,i.viewCache),X(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,vE(t,i.changes,i.viewCache.eventCache.getNode(),null)}function E6(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(nt,(i,a)=>{s.push(oa(i,a))}),n.isFullyInitialized()&&s.push(aE(n.getNode())),vE(t,s,n.getNode(),e)}function vE(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return KL(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih;class k6{constructor(){this.views=new Map}}function j6(t){X(!ih,"__referenceConstructor has already been defined"),ih=t}function I6(){return X(ih,"Reference.ts has not been loaded"),ih}function T6(t){return t.views.size===0}function mv(t,e,n,s){const r=e.source.queryId;if(r!==null){const i=t.views.get(r);return X(i!=null,"SyncTree gave us an op for an invalid query."),Dw(i,e,n,s)}else{let i=[];for(const a of t.views.values())i=i.concat(Dw(a,e,n,s));return i}}function A6(t,e,n,s,r){const i=e._queryIdentifier,a=t.views.get(i);if(!a){let l=nh(n,r?s:null),u=!1;l?u=!0:s instanceof ce?(l=hv(n,s),u=!1):(l=ce.EMPTY_NODE,u=!1);const d=Jh(new Gi(l,u,!1),new Gi(s,r,!1));return new S6(e,d)}return a}function P6(t,e,n,s,r,i){const a=A6(t,e,s,r,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),C6(a,n),E6(a,n)}function R6(t,e,n,s){const r=e._queryIdentifier,i=[];let a=[];const l=Kr(t);if(r==="default")for(const[u,d]of t.views.entries())a=a.concat(Ow(d,n,s)),Rw(d)&&(t.views.delete(u),d.query._queryParams.loadsAllData()||i.push(d.query));else{const u=t.views.get(r);u&&(a=a.concat(Ow(u,n,s)),Rw(u)&&(t.views.delete(r),u.query._queryParams.loadsAllData()||i.push(u.query)))}return l&&!Kr(t)&&i.push(new(I6())(e._repo,e._path)),{removed:i,events:a}}function _E(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function $o(t,e){let n=null;for(const s of t.views.values())n=n||N6(s,e);return n}function xE(t,e){if(e._queryParams.loadsAllData())return Xh(t);{const s=e._queryIdentifier;return t.views.get(s)}}function wE(t,e){return xE(t,e)!=null}function Kr(t){return Xh(t)!=null}function Xh(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oh;function O6(t){X(!oh,"__referenceConstructor has already been defined"),oh=t}function D6(){return X(oh,"Reference.ts has not been loaded"),oh}let L6=1;class Lw{constructor(e){this.listenProvider_=e,this.syncPointTree_=new $e(null),this.pendingWriteTree_=u6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function SE(t,e,n,s,r){return ZL(t.pendingWriteTree_,e,n,s,r),r?Rc(t,new Hi(cE(),e,n)):[]}function Ci(t,e,n=!1){const s=e6(t.pendingWriteTree_,e);if(t6(t.pendingWriteTree_,e)){let i=new $e(null);return s.snap!=null?i=i.set(Ae(),!0):cn(s.children,a=>{i=i.set(new De(a),!0)}),Rc(t,new th(s.path,i,n))}else return[]}function Zh(t,e,n){return Rc(t,new Hi(cv(),e,n))}function M6(t,e,n){const s=$e.fromObject(n);return Rc(t,new dc(cv(),e,s))}function U6(t,e){return Rc(t,new uc(cv(),e))}function F6(t,e,n){const s=yv(t,n);if(s){const r=vv(s),i=r.path,a=r.queryId,l=en(i,e),u=new uc(uv(a),l);return _v(t,i,u)}else return[]}function pg(t,e,n,s,r=!1){const i=e._path,a=t.syncPointTree_.get(i);let l=[];if(a&&(e._queryIdentifier==="default"||wE(a,e))){const u=R6(a,e,n,s);T6(a)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const d=u.removed;if(l=u.events,!r){const f=d.findIndex(h=>h._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(i,(h,_)=>Kr(_));if(f&&!p){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const _=$6(h);for(let C=0;C<_.length;++C){const j=_[C],b=j.query,S=CE(t,j);t.listenProvider_.startListening(kl(b),ah(t,b),S.hashFn,S.onComplete)}}}!p&&d.length>0&&!s&&(f?t.listenProvider_.stopListening(kl(e),null):d.forEach(h=>{const _=t.queryToTagMap.get(ef(h));t.listenProvider_.stopListening(kl(h),_)}))}V6(t,d)}return l}function z6(t,e,n,s){const r=yv(t,s);if(r!=null){const i=vv(r),a=i.path,l=i.queryId,u=en(a,e),d=new Hi(uv(l),u,n);return _v(t,a,d)}else return[]}function B6(t,e,n,s){const r=yv(t,s);if(r){const i=vv(r),a=i.path,l=i.queryId,u=en(a,e),d=$e.fromObject(n),f=new dc(uv(l),u,d);return _v(t,a,f)}else return[]}function Mw(t,e,n,s=!1){const r=e._path;let i=null,a=!1;t.syncPointTree_.foreachOnPath(r,(h,_)=>{const C=en(h,r);i=i||$o(_,C),a=a||Kr(_)});let l=t.syncPointTree_.get(r);l?(a=a||Kr(l),i=i||$o(l,Ae())):(l=new k6,t.syncPointTree_=t.syncPointTree_.set(r,l));let u;i!=null?u=!0:(u=!1,i=ce.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((_,C)=>{const j=$o(C,Ae());j&&(i=i.updateImmediateChild(_,j))}));const d=wE(l,e);if(!d&&!e._queryParams.loadsAllData()){const h=ef(e);X(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const _=q6();t.queryToTagMap.set(h,_),t.tagToQueryMap.set(_,h)}const f=dv(t.pendingWriteTree_,r);let p=P6(l,e,n,f,i,u);if(!d&&!a&&!s){const h=xE(l,e);p=p.concat(W6(t,e,h))}return p}function gv(t,e,n){const r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(a,l)=>{const u=en(a,e),d=$o(l,u);if(d)return d});return fE(r,e,i,n,!0)}function Rc(t,e){return bE(e,t.syncPointTree_,null,dv(t.pendingWriteTree_,Ae()))}function bE(t,e,n,s){if(_e(t.path))return NE(t,e,n,s);{const r=e.get(Ae());n==null&&r!=null&&(n=$o(r,Ae()));let i=[];const a=ye(t.path),l=t.operationForChild(a),u=e.children.get(a);if(u&&l){const d=n?n.getImmediateChild(a):null,f=pE(s,a);i=i.concat(bE(l,u,d,f))}return r&&(i=i.concat(mv(r,t,s,n))),i}}function NE(t,e,n,s){const r=e.get(Ae());n==null&&r!=null&&(n=$o(r,Ae()));let i=[];return e.children.inorderTraversal((a,l)=>{const u=n?n.getImmediateChild(a):null,d=pE(s,a),f=t.operationForChild(a);f&&(i=i.concat(NE(f,l,u,d)))}),r&&(i=i.concat(mv(r,t,s,n))),i}function CE(t,e){const n=e.query,s=ah(t,n);return{hashFn:()=>(b6(e)||ce.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?F6(t,n._path,s):U6(t,n._path);{const i=z3(r,n);return pg(t,n,null,i)}}}}function ah(t,e){const n=ef(e);return t.queryToTagMap.get(n)}function ef(t){return t._path.toString()+"$"+t._queryIdentifier}function yv(t,e){return t.tagToQueryMap.get(e)}function vv(t){const e=t.indexOf("$");return X(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new De(t.substr(0,e))}}function _v(t,e,n){const s=t.syncPointTree_.get(e);X(s,"Missing sync point for query tag that we're tracking");const r=dv(t.pendingWriteTree_,e);return mv(s,n,r,null)}function $6(t){return t.fold((e,n,s)=>{if(n&&Kr(n))return[Xh(n)];{let r=[];return n&&(r=_E(n)),cn(s,(i,a)=>{r=r.concat(a)}),r}})}function kl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(D6())(t._repo,t._path):t}function V6(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=ef(s),i=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i)}}}function q6(){return L6++}function W6(t,e,n){const s=e._path,r=ah(t,e),i=CE(t,n),a=t.listenProvider_.startListening(kl(e),r,i.hashFn,i.onComplete),l=t.syncPointTree_.subtree(s);if(r)X(!Kr(l.value),"If we're adding a query, it shouldn't be shadowed");else{const u=l.fold((d,f,p)=>{if(!_e(d)&&f&&Kr(f))return[Xh(f).query];{let h=[];return f&&(h=h.concat(_E(f).map(_=>_.query))),cn(p,(_,C)=>{h=h.concat(C)}),h}});for(let d=0;d<u.length;++d){const f=u[d];t.listenProvider_.stopListening(kl(f),ah(t,f))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new xv(n)}node(){return this.node_}}class wv{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ft(this.path_,e);return new wv(this.syncTree_,n)}node(){return gv(this.syncTree_,this.path_)}}const H6=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Uw=function(t,e,n){if(!t||typeof t!="object")return t;if(X(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return G6(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Q6(t[".sv"],e);X(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},G6=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:X(!1,"Unexpected server value: "+t)}},Q6=function(t,e,n){t.hasOwnProperty("increment")||X(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&X(!1,"Unexpected increment value: "+s);const r=e.node();if(X(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const a=r.getValue();return typeof a!="number"?s:a+s},K6=function(t,e,n,s){return Sv(e,new wv(n,t),s)},EE=function(t,e,n){return Sv(t,new xv(e),n)};function Sv(t,e,n){const s=t.getPriority().val(),r=Uw(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const a=t,l=Uw(a.getValue(),e,n);return l!==a.getValue()||r!==a.getPriority().val()?new gt(l,kt(r)):t}else{const a=t;return i=a,r!==a.getPriority().val()&&(i=i.updatePriority(new gt(r))),a.forEachChild(nt,(l,u)=>{const d=Sv(u,e.getImmediateChild(l),n);d!==u&&(i=i.updateImmediateChild(l,d))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function Nv(t,e){let n=e instanceof De?e:new De(e),s=t,r=ye(n);for(;r!==null;){const i=sa(s.node.children,r)||{children:{},childCount:0};s=new bv(r,s,i),n=Me(n),r=ye(n)}return s}function ba(t){return t.node.value}function kE(t,e){t.node.value=e,mg(t)}function jE(t){return t.node.childCount>0}function Y6(t){return ba(t)===void 0&&!jE(t)}function tf(t,e){cn(t.node.children,(n,s)=>{e(new bv(n,t,s))})}function IE(t,e,n,s){n&&e(t),tf(t,r=>{IE(r,e,!0)})}function J6(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function Oc(t){return new De(t.parent===null?t.name:Oc(t.parent)+"/"+t.name)}function mg(t){t.parent!==null&&X6(t.parent,t.name,t)}function X6(t,e,n){const s=Y6(n),r=ir(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,mg(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,mg(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=/[\[\].#$\/\u0000-\u001F\u007F]/,eM=/[\[\].#$\u0000-\u001F\u007F]/,kp=10*1024*1024,TE=function(t){return typeof t=="string"&&t.length!==0&&!Z6.test(t)},AE=function(t){return typeof t=="string"&&t.length!==0&&!eM.test(t)},tM=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),AE(t)},PE=function(t,e,n,s){s&&e===void 0||Cv(Gy(t,"value"),e,n)},Cv=function(t,e,n){const s=n instanceof De?new _L(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+yi(s));if(typeof e=="function")throw new Error(t+"contains a function "+yi(s)+" with contents = "+e.toString());if(AC(e))throw new Error(t+"contains "+e.toString()+" "+yi(s));if(typeof e=="string"&&e.length>kp/3&&Hh(e)>kp)throw new Error(t+"contains a string greater than "+kp+" utf8 bytes "+yi(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(cn(e,(a,l)=>{if(a===".value")r=!0;else if(a!==".priority"&&a!==".sv"&&(i=!0,!TE(a)))throw new Error(t+" contains an invalid key ("+a+") "+yi(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);xL(s,a),Cv(t,l,s),wL(s)}),r&&i)throw new Error(t+' contains ".value" child '+yi(s)+" in addition to actual children.")}},RE=function(t,e,n,s){if(!AE(n))throw new Error(Gy(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},nM=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),RE(t,e,n)},OE=function(t,e){if(ye(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},sM=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!TE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!tM(n))throw new Error(Gy(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ev(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();n!==null&&!rv(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(r)}n&&t.eventLists_.push(n)}function DE(t,e,n){Ev(t,n),LE(t,s=>rv(s,e))}function er(t,e,n){Ev(t,n),LE(t,s=>Hn(s,e)||Hn(e,s))}function LE(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const i=r.path;e(i)?(iM(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function iM(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();bl&&Mt("event: "+n.toString()),Sa(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM="repo_interrupt",aM=25;class lM{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rM,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=eh(),this.transactionQueueTree_=new bv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cM(t,e,n){if(t.stats_=nv(t.repoInfo_),t.forceRestClient_||q3())t.server_=new Zd(t.repoInfo_,(s,r,i,a)=>{Fw(t,s,r,i,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>zw(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xt(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Hs(t.repoInfo_,e,(s,r,i,a)=>{Fw(t,s,r,i,a)},s=>{zw(t,s)},s=>{uM(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=K3(t.repoInfo_,()=>new GL(t.stats_,t.server_)),t.infoData_=new $L,t.infoSyncTree_=new Lw({startListening:(s,r,i,a)=>{let l=[];const u=t.infoData_.getNode(s._path);return u.isEmpty()||(l=Zh(t.infoSyncTree_,s._path,u),setTimeout(()=>{a("ok")},0)),l},stopListening:()=>{}}),jv(t,"connected",!1),t.serverSyncTree_=new Lw({startListening:(s,r,i,a)=>(t.server_.listen(s,i,r,(l,u)=>{const d=a(l,u);er(t.eventQueue_,s._path,d)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function ME(t){const n=t.infoData_.getNode(new De(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function kv(t){return H6({timestamp:ME(t)})}function Fw(t,e,n,s,r){t.dataUpdateCount++;const i=new De(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(r)if(s){const u=Qd(n,d=>kt(d));a=B6(t.serverSyncTree_,i,u,r)}else{const u=kt(n);a=z6(t.serverSyncTree_,i,u,r)}else if(s){const u=Qd(n,d=>kt(d));a=M6(t.serverSyncTree_,i,u)}else{const u=kt(n);a=Zh(t.serverSyncTree_,i,u)}let l=i;a.length>0&&(l=nf(t,i)),er(t.eventQueue_,l,a)}function zw(t,e){jv(t,"connected",e),e===!1&&hM(t)}function uM(t,e){cn(e,(n,s)=>{jv(t,n,s)})}function jv(t,e,n){const s=new De("/.info/"+e),r=kt(n);t.infoData_.updateSnapshot(s,r);const i=Zh(t.infoSyncTree_,s,r);er(t.eventQueue_,s,i)}function UE(t){return t.nextWriteId_++}function dM(t,e,n,s,r){Iv(t,"set",{path:e.toString(),value:n,priority:s});const i=kv(t),a=kt(n,s),l=gv(t.serverSyncTree_,e),u=EE(a,l,i),d=UE(t),f=SE(t.serverSyncTree_,e,u,d,!0);Ev(t.eventQueue_,f),t.server_.put(e.toString(),a.val(!0),(h,_)=>{const C=h==="ok";C||an("set at "+e+" failed: "+h);const j=Ci(t.serverSyncTree_,d,!C);er(t.eventQueue_,e,j),mM(t,r,h,_)});const p=VE(t,e);nf(t,p),er(t.eventQueue_,p,[])}function hM(t){Iv(t,"onDisconnectEvents");const e=kv(t),n=eh();lg(t.onDisconnect_,Ae(),(r,i)=>{const a=K6(r,i,t.serverSyncTree_,e);lE(n,r,a)});let s=[];lg(n,Ae(),(r,i)=>{s=s.concat(Zh(t.serverSyncTree_,r,i));const a=VE(t,r);nf(t,a)}),t.onDisconnect_=eh(),er(t.eventQueue_,Ae(),s)}function fM(t,e,n){let s;ye(e._path)===".info"?s=Mw(t.infoSyncTree_,e,n):s=Mw(t.serverSyncTree_,e,n),DE(t.eventQueue_,e._path,s)}function gg(t,e,n){let s;ye(e._path)===".info"?s=pg(t.infoSyncTree_,e,n):s=pg(t.serverSyncTree_,e,n),DE(t.eventQueue_,e._path,s)}function pM(t){t.persistentConnection_&&t.persistentConnection_.interrupt(oM)}function Iv(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Mt(n,...e)}function mM(t,e,n,s){e&&Sa(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let i=r;s&&(i+=": "+s);const a=new Error(i);a.code=r,e(a)}})}function FE(t,e,n){return gv(t.serverSyncTree_,e,n)||ce.EMPTY_NODE}function Tv(t,e=t.transactionQueueTree_){if(e||sf(t,e),ba(e)){const n=BE(t,e);X(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&gM(t,Oc(e),n)}else jE(e)&&tf(e,n=>{Tv(t,n)})}function gM(t,e,n){const s=n.map(d=>d.currentWriteId),r=FE(t,e,s);let i=r;const a=r.hash();for(let d=0;d<n.length;d++){const f=n[d];X(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const p=en(e,f.path);i=i.updateChild(p,f.currentOutputSnapshotRaw)}const l=i.val(!0),u=e;t.server_.put(u.toString(),l,d=>{Iv(t,"transaction put response",{path:u.toString(),status:d});let f=[];if(d==="ok"){const p=[];for(let h=0;h<n.length;h++)n[h].status=2,f=f.concat(Ci(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&p.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();sf(t,Nv(t.transactionQueueTree_,e)),Tv(t,t.transactionQueueTree_),er(t.eventQueue_,e,f);for(let h=0;h<p.length;h++)Sa(p[h])}else{if(d==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{an("transaction at "+u.toString()+" failed: "+d);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=d}nf(t,e)}},a)}function nf(t,e){const n=zE(t,e),s=Oc(n),r=BE(t,n);return yM(t,r,s),s}function yM(t,e,n){if(e.length===0)return;const s=[];let r=[];const a=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const u=e[l],d=en(n,u.path);let f=!1,p;if(X(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,p=u.abortReason,r=r.concat(Ci(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=aM)f=!0,p="maxretry",r=r.concat(Ci(t.serverSyncTree_,u.currentWriteId,!0));else{const h=FE(t,u.path,a);u.currentInputSnapshot=h;const _=e[l].update(h.val());if(_!==void 0){Cv("transaction failed: Data returned ",_,u.path);let C=kt(_);typeof _=="object"&&_!=null&&ir(_,".priority")||(C=C.updatePriority(h.getPriority()));const b=u.currentWriteId,S=kv(t),E=EE(C,h,S);u.currentOutputSnapshotRaw=C,u.currentOutputSnapshotResolved=E,u.currentWriteId=UE(t),a.splice(a.indexOf(b),1),r=r.concat(SE(t.serverSyncTree_,u.path,E,u.currentWriteId,u.applyLocally)),r=r.concat(Ci(t.serverSyncTree_,b,!0))}else f=!0,p="nodata",r=r.concat(Ci(t.serverSyncTree_,u.currentWriteId,!0))}er(t.eventQueue_,n,r),r=[],f&&(e[l].status=2,function(h){setTimeout(h,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(p==="nodata"?s.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):s.push(()=>e[l].onComplete(new Error(p),!1,null))))}sf(t,t.transactionQueueTree_);for(let l=0;l<s.length;l++)Sa(s[l]);Tv(t,t.transactionQueueTree_)}function zE(t,e){let n,s=t.transactionQueueTree_;for(n=ye(e);n!==null&&ba(s)===void 0;)s=Nv(s,n),e=Me(e),n=ye(e);return s}function BE(t,e){const n=[];return $E(t,e,n),n.sort((s,r)=>s.order-r.order),n}function $E(t,e,n){const s=ba(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);tf(e,r=>{$E(t,r,n)})}function sf(t,e){const n=ba(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,kE(e,n.length>0?n:void 0)}tf(e,s=>{sf(t,s)})}function VE(t,e){const n=Oc(zE(t,e)),s=Nv(t.transactionQueueTree_,e);return J6(s,r=>{jp(t,r)}),jp(t,s),IE(s,r=>{jp(t,r)}),n}function jp(t,e){const n=ba(e);if(n){const s=[];let r=[],i=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(X(i===a-1,"All SENT items should be at beginning of queue."),i=a,n[a].status=3,n[a].abortReason="set"):(X(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),r=r.concat(Ci(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&s.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));i===-1?kE(e,void 0):n.length=i+1,er(t.eventQueue_,Oc(e),r);for(let a=0;a<s.length;a++)Sa(s[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function _M(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):an(`Invalid query segment '${n}' in query '${t}'`)}return e}const Bw=function(t,e){const n=xM(t),s=n.namespace;n.domain==="firebase.com"&&Zs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Zs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||D3();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new VC(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new De(n.pathString)}},xM=function(t){let e="",n="",s="",r="",i="",a=!0,l="https",u=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(l=t.substring(0,d-1),t=t.substring(d+2));let f=t.indexOf("/");f===-1&&(f=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(f,p)),f<p&&(r=vM(t.substring(f,p)));const h=_M(t.substring(Math.min(t.length,p)));d=e.indexOf(":"),d>=0?(a=l==="https"||l==="wss",u=parseInt(e.substring(d+1),10)):d=e.length;const _=e.slice(0,d);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const C=e.indexOf(".");s=e.substring(0,C).toLowerCase(),n=e.substring(C+1),i=s}"ns"in h&&(i=h.ns)}return{host:e,port:u,domain:n,subdomain:s,secure:a,scheme:l,pathString:r,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",wM=function(){let t=0;const e=[];return function(n){const s=n===t;t=n;let r;const i=new Array(8);for(r=7;r>=0;r--)i[r]=$w.charAt(n%64),n=Math.floor(n/64);X(n===0,"Cannot push at time == 0");let a=i.join("");if(s){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)a+=$w.charAt(e[r]);return X(a.length===20,"nextPushId: Length should be 20."),a}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+xt(this.snapshot.exportVal())}}class WE{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return X(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return _e(this._path)?null:XC(this._path)}get ref(){return new or(this._repo,this._path)}get _queryIdentifier(){const e=Cw(this._queryParams),n=ev(e);return n==="{}"?"default":n}get _queryObject(){return Cw(this._queryParams)}isEqual(e){if(e=wn(e),!(e instanceof Av))return!1;const n=this._repo===e._repo,s=rv(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+vL(this._path)}}class or extends Av{constructor(e,n){super(e,n,new lv,!1)}get parent(){const e=eE(this._path);return e===null?null:new or(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class hc{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new De(e),s=la(this.ref,e);return new hc(this._node.getChild(n),s,nt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,r)=>e(new hc(r,la(this.ref,s),nt)))}hasChild(e){const n=new De(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Vo(t,e){return t=wn(t),t._checkNotDeleted("ref"),e!==void 0?la(t._root,e):t._root}function la(t,e){return t=wn(t),ye(t._path)===null?nM("child","path",e):RE("child","path",e),new or(t._repo,ft(t._path,e))}function bM(t,e){t=wn(t),OE("push",t._path),PE("push",e,t._path,!0);const n=ME(t._repo),s=wM(n),r=la(t,s),i=la(t,s);let a;return a=Promise.resolve(i),r.then=a.then.bind(a),r.catch=a.then.bind(a,void 0),r}function Vw(t,e){t=wn(t),OE("set",t._path),PE("set",e,t._path,!1);const n=new Wh;return dM(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class Pv{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new qE("value",this,new hc(e.snapshotNode,new or(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new WE(this,e,n):null}matches(e){return e instanceof Pv?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Rv{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new WE(this,e,n):null}createEvent(e,n){X(e.childName!=null,"Child events should have a childName.");const s=la(new or(n._repo,n._path),e.childName),r=n._queryParams.getIndex();return new qE(e.type,this,new hc(e.snapshotNode,s,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Rv?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function rf(t,e,n,s,r){let i;if(typeof s=="object"&&(i=void 0,r=s),typeof s=="function"&&(i=s),r&&r.onlyOnce){const u=n,d=(f,p)=>{gg(t._repo,t,l),u(f,p)};d.userCallback=n.userCallback,d.context=n.context,n=d}const a=new SM(n,i||void 0),l=e==="value"?new Pv(a):new Rv(e,a);return fM(t._repo,t,l),()=>gg(t._repo,t,l)}function Ov(t,e,n,s){return rf(t,"value",e,n,s)}function HE(t,e,n,s){return rf(t,"child_added",e,n,s)}function NM(t,e,n,s){return rf(t,"child_changed",e,n,s)}function CM(t,e,n,s){return rf(t,"child_removed",e,n,s)}function EM(t,e,n){gg(t._repo,t,null)}j6(or);O6(or);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM="FIREBASE_DATABASE_EMULATOR_HOST",yg={};let jM=!1;function IM(t,e,n,s){const r=e.lastIndexOf(":"),i=e.substring(0,r),a=no(i);t.repoInfo_=new VC(e,a,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function TM(t,e,n,s,r){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||Zs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mt("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=Bw(i,r),l=a.repoInfo,u;typeof process<"u"&&aw&&(u=aw[kM]),u?(i=`http://${u}?ns=${l.namespace}`,a=Bw(i,r),l=a.repoInfo):a.repoInfo.secure;const d=new H3(t.name,t.options,e);sM("Invalid Firebase Database URL",a),_e(a.path)||Zs("Database URL must point to the root of a Firebase Database (not including a child path).");const f=PM(l,t,d,new W3(t,n));return new RM(f,t)}function AM(t,e){const n=yg[e];(!n||n[t.key]!==t)&&Zs(`Database ${e}(${t.repoInfo_}) has already been deleted.`),pM(t),delete n[t.key]}function PM(t,e,n,s){let r=yg[e.name];r||(r={},yg[e.name]=r);let i=r[t.toURLString()];return i&&Zs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new lM(t,jM,n,s),r[t.toURLString()]=i,i}class RM{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(cM(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new or(this._repo,Ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(AM(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Zs("Cannot call "+e+" on a deleted database.")}}function GE(t=Kh(),e){const n=ro(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=aC("database");s&&OM(n,...s)}return n}function OM(t,e,n,s={}){t=wn(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&Hr(s,i.repoInfo_.emulatorOptions))return;Zs("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&Zs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new rd(rd.OWNER);else if(s.mockUserToken){const l=typeof s.mockUserToken=="string"?s.mockUserToken:uC(s.mockUserToken,t.app.options.projectId);a=new rd(l)}no(e)&&(qy(e),Wy("Database",!0)),IM(i,r,s,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(t){I3(io),ns(new An("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return TM(s,r,i,n)},"PUBLIC").setMultipleInstances(!0)),on(lw,cw,t),on(lw,cw,"esm2020")}Hs.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Hs.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};DM();const QE="@firebase/installations",Dv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=1e4,YE=`w:${Dv}`,JE="FIS_v2",LM="https://firebaseinstallations.googleapis.com/v1",MM=60*60*1e3,UM="installations",FM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ki=new so(UM,FM,zM);function XE(t){return t instanceof Ns&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE({projectId:t}){return`${LM}/projects/${t}/installations`}function ek(t){return{token:t.token,requestStatus:2,expiresIn:$M(t.expiresIn),creationTime:Date.now()}}async function tk(t,e){const s=(await e.json()).error;return Ki.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function nk({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function BM(t,{refreshToken:e}){const n=nk(t);return n.append("Authorization",VM(e)),n}async function sk(t){const e=await t();return e.status>=500&&e.status<600?t():e}function $M(t){return Number(t.replace("s","000"))}function VM(t){return`${JE} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=ZE(t),r=nk(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}const a={fid:n,authVersion:JE,appId:t.appId,sdkVersion:YE},l={method:"POST",headers:r,body:JSON.stringify(a)},u=await sk(()=>fetch(s,l));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:ek(d.authToken)}}else throw await tk("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=/^[cdef][\w-]{21}$/,vg="";function GM(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=QM(t);return HM.test(n)?n:vg}catch{return vg}}function QM(t){return WM(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=new Map;function ok(t,e){const n=of(t);ak(n,e),KM(n,e)}function ak(t,e){const n=ik.get(t);if(n)for(const s of n)s(e)}function KM(t,e){const n=YM();n&&n.postMessage({key:t,fid:e}),JM()}let Ei=null;function YM(){return!Ei&&"BroadcastChannel"in self&&(Ei=new BroadcastChannel("[Firebase] FID Change"),Ei.onmessage=t=>{ak(t.data.key,t.data.fid)}),Ei}function JM(){ik.size===0&&Ei&&(Ei.close(),Ei=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM="firebase-installations-database",ZM=1,Yi="firebase-installations-store";let Ip=null;function Lv(){return Ip||(Ip=Qh(XM,ZM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Yi)}}})),Ip}async function lh(t,e){const n=of(t),r=(await Lv()).transaction(Yi,"readwrite"),i=r.objectStore(Yi),a=await i.get(n);return await i.put(e,n),await r.done,(!a||a.fid!==e.fid)&&ok(t,e.fid),e}async function lk(t){const e=of(t),s=(await Lv()).transaction(Yi,"readwrite");await s.objectStore(Yi).delete(e),await s.done}async function af(t,e){const n=of(t),r=(await Lv()).transaction(Yi,"readwrite"),i=r.objectStore(Yi),a=await i.get(n),l=e(a);return l===void 0?await i.delete(n):await i.put(l,n),await r.done,l&&(!a||a.fid!==l.fid)&&ok(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mv(t){let e;const n=await af(t.appConfig,s=>{const r=e5(s),i=t5(t,r);return e=i.registrationPromise,i.installationEntry});return n.fid===vg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function e5(t){const e=t||{fid:GM(),registrationStatus:0};return ck(e)}function t5(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Ki.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=n5(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:s5(t)}:{installationEntry:e}}async function n5(t,e){try{const n=await qM(t,e);return lh(t.appConfig,n)}catch(n){throw XE(n)&&n.customData.serverCode===409?await lk(t.appConfig):await lh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function s5(t){let e=await qw(t.appConfig);for(;e.registrationStatus===1;)await rk(100),e=await qw(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await Mv(t);return s||n}return e}function qw(t){return af(t,e=>{if(!e)throw Ki.create("installation-not-found");return ck(e)})}function ck(t){return r5(t)?{fid:t.fid,registrationStatus:0}:t}function r5(t){return t.registrationStatus===1&&t.registrationTime+KE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i5({appConfig:t,heartbeatServiceProvider:e},n){const s=o5(t,n),r=BM(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}const a={installation:{sdkVersion:YE,appId:t.appId}},l={method:"POST",headers:r,body:JSON.stringify(a)},u=await sk(()=>fetch(s,l));if(u.ok){const d=await u.json();return ek(d)}else throw await tk("Generate Auth Token",u)}function o5(t,{fid:e}){return`${ZE(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uv(t,e=!1){let n;const s=await af(t.appConfig,i=>{if(!uk(i))throw Ki.create("not-registered");const a=i.authToken;if(!e&&c5(a))return i;if(a.requestStatus===1)return n=a5(t,e),i;{if(!navigator.onLine)throw Ki.create("app-offline");const l=d5(i);return n=l5(t,l),l}});return n?await n:s.authToken}async function a5(t,e){let n=await Ww(t.appConfig);for(;n.authToken.requestStatus===1;)await rk(100),n=await Ww(t.appConfig);const s=n.authToken;return s.requestStatus===0?Uv(t,e):s}function Ww(t){return af(t,e=>{if(!uk(e))throw Ki.create("not-registered");const n=e.authToken;return h5(n)?{...e,authToken:{requestStatus:0}}:e})}async function l5(t,e){try{const n=await i5(t,e),s={...e,authToken:n};return await lh(t.appConfig,s),n}catch(n){if(XE(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await lk(t.appConfig);else{const s={...e,authToken:{requestStatus:0}};await lh(t.appConfig,s)}throw n}}function uk(t){return t!==void 0&&t.registrationStatus===2}function c5(t){return t.requestStatus===2&&!u5(t)}function u5(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+MM}function d5(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function h5(t){return t.requestStatus===1&&t.requestTime+KE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t){const e=t,{installationEntry:n,registrationPromise:s}=await Mv(e);return s?s.catch(console.error):Uv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(t,e=!1){const n=t;return await m5(n),(await Uv(n,e)).token}async function m5(t){const{registrationPromise:e}=await Mv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(t){if(!t||!t.options)throw Tp("App Configuration");if(!t.name)throw Tp("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Tp(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Tp(t){return Ki.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="installations",y5="installations-internal",v5=t=>{const e=t.getProvider("app").getImmediate(),n=g5(e),s=ro(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},_5=t=>{const e=t.getProvider("app").getImmediate(),n=ro(e,dk).getImmediate();return{getId:()=>f5(n),getToken:r=>p5(n,r)}};function x5(){ns(new An(dk,v5,"PUBLIC")),ns(new An(y5,_5,"PRIVATE"))}x5();on(QE,Dv);on(QE,Dv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5="/firebase-messaging-sw.js",S5="/firebase-cloud-messaging-push-scope",hk="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",b5="https://fcmregistrations.googleapis.com/v1",fk="google.c.a.c_id",N5="google.c.a.c_l",C5="google.c.a.ts",E5="google.c.a.e",Hw=1e4;var Gw;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Gw||(Gw={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var fc;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(fc||(fc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function k5(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(n),r=new Uint8Array(s.length);for(let i=0;i<s.length;++i)r[i]=s.charCodeAt(i);return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="fcm_token_details_db",j5=5,Qw="fcm_token_object_Store";async function I5(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(Ap))return null;let e=null;return(await Qh(Ap,j5,{upgrade:async(s,r,i,a)=>{if(r<2||!s.objectStoreNames.contains(Qw))return;const l=a.objectStore(Qw),u=await l.index("fcmSenderId").get(t);if(await l.clear(),!!u){if(r===2){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:d.createTime??Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Ds(d.vapidKey)}}}else if(r===3){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ds(d.auth),p256dh:Ds(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ds(d.vapidKey)}}}else if(r===4){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ds(d.auth),p256dh:Ds(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ds(d.vapidKey)}}}}}})).close(),await yp(Ap),await yp("fcm_vapid_details_db"),await yp("undefined"),T5(e)?e:null}function T5(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5="firebase-messaging-database",P5=1,pc="firebase-messaging-store";let Pp=null;function pk(){return Pp||(Pp=Qh(A5,P5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(pc)}}})),Pp}async function R5(t){const e=mk(t),s=await(await pk()).transaction(pc).objectStore(pc).get(e);if(s)return s;{const r=await I5(t.appConfig.senderId);if(r)return await Fv(t,r),r}}async function Fv(t,e){const n=mk(t),r=(await pk()).transaction(pc,"readwrite");return await r.objectStore(pc).put(e,n),await r.done,e}function mk({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Wt=new so("messaging","Messaging",O5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D5(t,e){const n=await Bv(t),s=gk(e),r={method:"POST",headers:n,body:JSON.stringify(s)};let i;try{i=await(await fetch(zv(t.appConfig),r)).json()}catch(a){throw Wt.create("token-subscribe-failed",{errorInfo:a==null?void 0:a.toString()})}if(i.error){const a=i.error.message;throw Wt.create("token-subscribe-failed",{errorInfo:a})}if(!i.token)throw Wt.create("token-subscribe-no-token");return i.token}async function L5(t,e){const n=await Bv(t),s=gk(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(s)};let i;try{i=await(await fetch(`${zv(t.appConfig)}/${e.token}`,r)).json()}catch(a){throw Wt.create("token-update-failed",{errorInfo:a==null?void 0:a.toString()})}if(i.error){const a=i.error.message;throw Wt.create("token-update-failed",{errorInfo:a})}if(!i.token)throw Wt.create("token-update-no-token");return i.token}async function M5(t,e){const s={method:"DELETE",headers:await Bv(t)};try{const i=await(await fetch(`${zv(t.appConfig)}/${e}`,s)).json();if(i.error){const a=i.error.message;throw Wt.create("token-unsubscribe-failed",{errorInfo:a})}}catch(r){throw Wt.create("token-unsubscribe-failed",{errorInfo:r==null?void 0:r.toString()})}}function zv({projectId:t}){return`${b5}/projects/${t}/registrations`}async function Bv({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function gk({p256dh:t,auth:e,endpoint:n,vapidKey:s}){const r={web:{endpoint:n,auth:e,p256dh:t}};return s!==hk&&(r.web.applicationPubKey=s),r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5=7*24*60*60*1e3;async function F5(t){const e=await B5(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Ds(e.getKey("auth")),p256dh:Ds(e.getKey("p256dh"))},s=await R5(t.firebaseDependencies);if(s){if($5(s.subscriptionOptions,n))return Date.now()>=s.createTime+U5?z5(t,{token:s.token,createTime:Date.now(),subscriptionOptions:n}):s.token;try{await M5(t.firebaseDependencies,s.token)}catch(r){console.warn(r)}return Kw(t.firebaseDependencies,n)}else return Kw(t.firebaseDependencies,n)}async function z5(t,e){try{const n=await L5(t.firebaseDependencies,e),s={...e,token:n,createTime:Date.now()};return await Fv(t.firebaseDependencies,s),n}catch(n){throw n}}async function Kw(t,e){const s={token:await D5(t,e),createTime:Date.now(),subscriptionOptions:e};return await Fv(t,s),s.token}async function B5(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:k5(e)})}function $5(t,e){const n=e.vapidKey===t.vapidKey,s=e.endpoint===t.endpoint,r=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&s&&r&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return V5(e,t),q5(e,t),W5(e,t),e}function V5(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const s=e.notification.body;s&&(t.notification.body=s);const r=e.notification.image;r&&(t.notification.image=r);const i=e.notification.icon;i&&(t.notification.icon=i)}function q5(t,e){e.data&&(t.data=e.data)}function W5(t,e){var r,i,a,l;if(!e.fcmOptions&&!((r=e.notification)!=null&&r.click_action))return;t.fcmOptions={};const n=((i=e.fcmOptions)==null?void 0:i.link)??((a=e.notification)==null?void 0:a.click_action);n&&(t.fcmOptions.link=n);const s=(l=e.fcmOptions)==null?void 0:l.analytics_label;s&&(t.fcmOptions.analyticsLabel=s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(t){return typeof t=="object"&&!!t&&fk in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(t){if(!t||!t.options)throw Rp("App Configuration Object");if(!t.name)throw Rp("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const s of e)if(!n[s])throw Rp(s);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Rp(t){return Wt.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e,n,s){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=G5(e);this.firebaseDependencies={app:e,appConfig:r,installations:n,analyticsProvider:s}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K5(t){try{t.swRegistration=await navigator.serviceWorker.register(w5,{scope:S5}),t.swRegistration.update().catch(()=>{}),await Y5(t.swRegistration)}catch(e){throw Wt.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function Y5(t){return new Promise((e,n)=>{const s=setTimeout(()=>n(new Error(`Service worker not registered after ${Hw} ms`)),Hw),r=t.installing||t.waiting;t.active?(clearTimeout(s),e()):r?r.onstatechange=i=>{var a;((a=i.target)==null?void 0:a.state)==="activated"&&(r.onstatechange=null,clearTimeout(s),e())}:(clearTimeout(s),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J5(t,e){if(!e&&!t.swRegistration&&await K5(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Wt.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X5(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=hk)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5(t,e){if(!navigator)throw Wt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Wt.create("permission-blocked");return await X5(t,e==null?void 0:e.vapidKey),await J5(t,e==null?void 0:e.serviceWorkerRegistration),F5(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eU(t,e,n){const s=tU(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(s,{message_id:n[fk],message_name:n[N5],message_time:n[C5],message_device_time:Math.floor(Date.now()/1e3)})}function tU(t){switch(t){case fc.NOTIFICATION_CLICKED:return"notification_open";case fc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nU(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===fc.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(Yw(n)):t.onMessageHandler.next(Yw(n)));const s=n.data;H5(s)&&s[E5]==="1"&&await eU(t,n.messageType,s)}const Jw="@firebase/messaging",Xw="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=t=>{const e=new Q5(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>nU(e,n)),e},rU=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:s=>Z5(e,s)}};function iU(){ns(new An("messaging",sU,"PUBLIC")),ns(new An("messaging-internal",rU,"PRIVATE")),on(Jw,Xw),on(Jw,Xw,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oU(){try{await fC()}catch{return!1}return typeof window<"u"&&hC()&&T4()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(t=Kh()){return oU().then(e=>{if(!e)throw Wt.create("unsupported-browser")},e=>{throw Wt.create("indexed-db-unsupported")}),ro(wn(t),"messaging").getImmediate()}iU();function yk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lU=yk,vk=new so("auth","Firebase",yk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Gh("@firebase/auth");function cU(t,...e){ch.logLevel<=Te.WARN&&ch.warn(`Auth (${io}): ${t}`,...e)}function id(t,...e){ch.logLevel<=Te.ERROR&&ch.error(`Auth (${io}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,...e){throw $v(t,...e)}function ms(t,...e){return $v(t,...e)}function _k(t,e,n){const s={...lU(),[e]:n};return new so("auth","Firebase",s).create(e,{appName:t.name})}function Ri(t){return _k(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $v(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return vk.create(t,...e)}function ue(t,e,...n){if(!t)throw $v(e,...n)}function $s(t){const e="INTERNAL ASSERTION FAILED: "+t;throw id(e),new Error(e)}function nr(t,e){t||$s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function uU(){return Zw()==="http:"||Zw()==="https:"}function Zw(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uU()||k4()||"connection"in navigator)?navigator.onLine:!0}function hU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n){this.shortDelay=e,this.longDelay=n,nr(n>e,"Short delay should be less than long delay!"),this.isMobile=Hy()||dC()}get(){return dU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t,e){nr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mU=new Dc(3e4,6e4);function qv(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Na(t,e,n,s,r={}){return wk(t,r,async()=>{let i={},a={};s&&(e==="GET"?a=s:i={body:JSON.stringify(s)});const l=xa({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return E4()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&no(t.emulatorConfig.host)&&(d.credentials="include"),xk.fetch()(await Sk(t,t.config.apiHost,n,l),d)})}async function wk(t,e,n){t._canInitEmulator=!1;const s={...fU,...e};try{const r=new yU(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Tu(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tu(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Tu(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Tu(t,"user-disabled",a);const f=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _k(t,f,d);tr(t,f)}}catch(r){if(r instanceof Ns)throw r;tr(t,"network-request-failed",{message:String(r)})}}async function gU(t,e,n,s,r={}){const i=await Na(t,e,n,s,r);return"mfaPendingCredential"in i&&tr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Sk(t,e,n,s){const r=`${e}${n}?${s}`,i=t,a=i.config.emulator?Vv(t.config,r):`${t.config.apiScheme}://${r}`;return pU.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}class yU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ms(this.auth,"network-request-failed")),mU.get())})}}function Tu(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=ms(t,e,s);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(t,e){return Na(t,"POST","/v1/accounts:delete",e)}async function uh(t,e){return Na(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _U(t,e=!1){const n=wn(t),s=await n.getIdToken(e),r=Wv(s);ue(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:jl(Op(r.auth_time)),issuedAtTime:jl(Op(r.iat)),expirationTime:jl(Op(r.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Op(t){return Number(t)*1e3}function Wv(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return id("JWT malformed, contained fewer than 3 sections"),null;try{const r=Gd(n);return r?JSON.parse(r):(id("Failed to decode base64 JWT payload"),null)}catch(r){return id("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function eS(t){const e=Wv(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ns&&xU(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function xU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=jl(this.lastLoginAt),this.creationTime=jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dh(t){var p;const e=t.auth,n=await t.getIdToken(),s=await mc(t,uh(e,{idToken:n}));ue(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=(p=r.providerUserInfo)!=null&&p.length?bk(r.providerUserInfo):[],a=bU(t.providerData,i),l=t.isAnonymous,u=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new xg(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function SU(t){const e=wn(t);await dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bU(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function bk(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(t,e){const n=await wk(t,{},async()=>{const s=xa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,a=await Sk(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:s};return t.emulatorConfig&&no(t.emulatorConfig.host)&&(u.credentials="include"),xk.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CU(t,e){return Na(t,"POST","/v2/accounts:revokeToken",qv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=eS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await NU(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,a=new qo;return s&&(ue(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),r&&(ue(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),i&&(ue(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qo,this.toJSON())}_performRefresh(){return $s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new wU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new xg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await mc(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _U(this,e)}reload(){return SU(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await dh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await mc(this,vU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:h,isAnonymous:_,providerData:C,stsTokenManager:j}=n;ue(p&&j,e,"internal-error");const b=qo.fromJSON(this.name,j);ue(typeof p=="string",e,"internal-error"),gr(s,e.name),gr(r,e.name),ue(typeof h=="boolean",e,"internal-error"),ue(typeof _=="boolean",e,"internal-error"),gr(i,e.name),gr(a,e.name),gr(l,e.name),gr(u,e.name),gr(d,e.name),gr(f,e.name);const S=new Qn({uid:p,auth:e,email:r,emailVerified:h,displayName:s,isAnonymous:_,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:b,createdAt:d,lastLoginAt:f});return C&&Array.isArray(C)&&(S.providerData=C.map(E=>({...E}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(e,n,s=!1){const r=new qo;r.updateFromServerResponse(n);const i=new Qn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await dh(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];ue(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?bk(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),l=new qo;l.updateFromIdToken(s);const u=new Qn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new xg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=new Map;function Vs(t){nr(t instanceof Function,"Expected a class definition");let e=tS.get(t);return e?(nr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Nk.type="NONE";const nS=Nk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t,e,n){return`firebase:${t}:${e}:${n}`}class Wo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=od(this.userKey,r.apiKey,i),this.fullPersistenceKey=od("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await uh(this.auth,{idToken:e}).catch(()=>{});return n?Qn._fromGetAccountInfoResponse(this.auth,n,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Wo(Vs(nS),e,s);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=r[0]||Vs(nS);const a=od(s,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(a);if(f){let p;if(typeof f=="string"){const h=await uh(e,{idToken:f}).catch(()=>{});if(!h)break;p=await Qn._fromGetAccountInfoResponse(e,h,f)}else p=Qn._fromJSON(e,f);d!==i&&(l=p),i=d;break}}catch{}const u=r.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Wo(i,e,s):(i=u[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new Wo(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ck(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Tk(e))return"Blackberry";if(Ak(e))return"Webos";if(Ek(e))return"Safari";if((e.includes("chrome/")||kk(e))&&!e.includes("edge/"))return"Chrome";if(Ik(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Ck(t=Ht()){return/firefox\//i.test(t)}function Ek(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kk(t=Ht()){return/crios\//i.test(t)}function jk(t=Ht()){return/iemobile/i.test(t)}function Ik(t=Ht()){return/android/i.test(t)}function Tk(t=Ht()){return/blackberry/i.test(t)}function Ak(t=Ht()){return/webos/i.test(t)}function Hv(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function EU(t=Ht()){var e;return Hv(t)&&!!((e=window.navigator)!=null&&e.standalone)}function kU(){return j4()&&document.documentMode===10}function Pk(t=Ht()){return Hv(t)||Ik(t)||Ak(t)||Tk(t)||/windows phone/i.test(t)||jk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t,e=[]){let n;switch(t){case"Browser":n=sS(Ht());break;case"Worker":n=`${sS(Ht())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${io}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((a,l)=>{try{const u=e(i);a(u)}catch(u){l(u)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(t,e={}){return Na(t,"GET","/v2/passwordPolicy",qv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=6;class AU{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??TU,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rS(this),this.idTokenSubscription=new rS(this),this.beforeStateQueue=new jU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vs(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await Wo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uh(this,{idToken:e}),s=await Qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Vn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(s=u.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await dh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(Ri(this));const n=e?wn(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(Ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IU(this),n=new AU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new so("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await CU(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vs(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Wo.create(this,[Vs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,r);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&cU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Gv(t){return wn(t)}class rS{constructor(e){this.auth=e,this.observer=null,this.addObserver=M4(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RU(t){Qv=t}function OU(t){return Qv.loadJS(t)}function DU(){return Qv.gapiScript}function LU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(t,e){const n=ro(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Hr(i,e??{}))return r;tr(r,"already-initialized")}return n.initialize({options:e})}function UU(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Vs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function FU(t,e,n){const s=Gv(t);ue(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=Ok(e),{host:a,port:l}=zU(e),u=l===null?"":`:${l}`,d={url:`${i}//${a}${u}/`},f=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){ue(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ue(Hr(d,s.config.emulator)&&Hr(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,no(a)?(qy(`${i}//${a}${u}`),Wy("Auth",!0)):BU()}function Ok(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zU(t){const e=Ok(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:iS(s.substr(i.length+1))}}else{const[i,a]=s.split(":");return{host:i,port:iS(a)}}}function iS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $s("not implemented")}_getIdTokenResponse(e){return $s("not implemented")}_linkToIdToken(e,n){return $s("not implemented")}_getReauthenticationResolver(e){return $s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(t,e){return gU(t,"POST","/v1/accounts:signInWithIdp",qv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U="http://localhost";class Ji extends Dk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ji(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const a=new Ji(s,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ho(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ho(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ho(e,n)}buildRequest(){const e={requestUri:$U,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends Lk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Lc{constructor(){super("facebook.com")}static credential(e){return Ji._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ji._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Sr.credential(n,s)}catch{return null}}}Sr.GOOGLE_SIGN_IN_METHOD="google.com";Sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Lc{constructor(){super("github.com")}static credential(e){return Ji._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return br.credential(e.oauthAccessToken)}catch{return null}}}br.GITHUB_SIGN_IN_METHOD="github.com";br.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Lc{constructor(){super("twitter.com")}static credential(e,n){return Ji._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Nr.credential(n,s)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await Qn._fromIdTokenResponse(e,s,r),a=oS(s);return new ca({user:i,providerId:a,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=oS(s);return new ca({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function oS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends Ns{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,hh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new hh(e,n,s,r)}}function Mk(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?hh._fromErrorAndOperation(t,i,e,s):i})}async function VU(t,e,n=!1){const s=await mc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ca._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qU(t,e,n=!1){const{auth:s}=t;if(Vn(s.app))return Promise.reject(Ri(s));const r="reauthenticate";try{const i=await mc(t,Mk(s,r,e,t),n);ue(i.idToken,s,"internal-error");const a=Wv(i.idToken);ue(a,s,"internal-error");const{sub:l}=a;return ue(t.uid===l,s,"user-mismatch"),ca._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&tr(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WU(t,e,n=!1){if(Vn(t.app))return Promise.reject(Ri(t));const s="signIn",r=await Mk(t,s,e),i=await ca._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function HU(t,e,n,s){return wn(t).onIdTokenChanged(e,n,s)}function GU(t,e,n){return wn(t).beforeAuthStateChanged(e,n)}const fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=1e3,KU=10;class Fk extends Uk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Pk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(s);!n&&this.localCache[s]===a||this.notifyListeners(s,a)},i=this.storage.getItem(s);kU()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,KU):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},QU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fk.type="LOCAL";const YU=Fk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk extends Uk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zk.type="SESSION";const Bk=zk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new lf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(a).map(async d=>d(n.origin,i)),u=await JU(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise((l,u)=>{const d=Kv("",20);r.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},s);a={messageChannel:r,onMessage(p){const h=p;if(h.data.eventId===d)switch(h.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(h.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(){return window}function ZU(t){gs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(){return typeof gs().WorkerGlobalScope<"u"&&typeof gs().importScripts=="function"}async function eF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function nF(){return $k()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="firebaseLocalStorageDb",sF=1,ph="firebaseLocalStorage",qk="fbase_key";class Mc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cf(t,e){return t.transaction([ph],e?"readwrite":"readonly").objectStore(ph)}function rF(){const t=indexedDB.deleteDatabase(Vk);return new Mc(t).toPromise()}function wg(){const t=indexedDB.open(Vk,sF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ph,{keyPath:qk})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ph)?e(s):(s.close(),await rF(),e(await wg()))})})}async function aS(t,e,n){const s=cf(t,!0).put({[qk]:e,value:n});return new Mc(s).toPromise()}async function iF(t,e){const n=cf(t,!1).get(e),s=await new Mc(n).toPromise();return s===void 0?null:s.value}function lS(t,e){const n=cf(t,!0).delete(e);return new Mc(n).toPromise()}const oF=800,aF=3;class Wk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>aF)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $k()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lf._getInstance(nF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await eF(),!this.activeServiceWorker)return;this.sender=new XU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wg();return await aS(e,fh,"1"),await lS(e,fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>aS(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>iF(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>lS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=cf(r,!1).getAll();return new Mc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wk.type="LOCAL";const lF=Wk;new Dc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t,e){return e?Vs(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv extends Dk{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ho(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ho(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function uF(t){return WU(t.auth,new Yv(t),t.bypassAuthState)}function dF(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),qU(n,new Yv(t),t.bypassAuthState)}async function hF(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),VU(n,new Yv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uF;case"linkViaPopup":case"linkViaRedirect":return hF;case"reauthViaPopup":case"reauthViaRedirect":return dF;default:tr(this.auth,"internal-error")}}resolve(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=new Dc(2e3,1e4);class Po extends Hk{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Po.currentPopupAction&&Po.currentPopupAction.cancel(),Po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){nr(this.filter.length===1,"Popup operations only handle one event");const e=Kv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fF.get())};e()}}Po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF="pendingRedirect",ad=new Map;class mF extends Hk{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ad.get(this.auth._key());if(!e){try{const s=await gF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ad.set(this.auth._key(),e)}return this.bypassAuthState||ad.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gF(t,e){const n=_F(e),s=vF(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function yF(t,e){ad.set(t._key(),e)}function vF(t){return Vs(t._redirectPersistence)}function _F(t){return od(pF,t.config.apiKey,t.name)}async function xF(t,e,n=!1){if(Vn(t.app))return Promise.reject(Ri(t));const s=Gv(t),r=cF(s,e),a=await new mF(s,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF=10*60*1e3;class SF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Gk(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(ms(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wF&&this.cachedEventUids.clear(),this.cachedEventUids.has(cS(e))}saveEventToCache(e){this.cachedEventUids.add(cS(e)),this.lastProcessedEventTime=Date.now()}}function cS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Gk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NF(t,e={}){return Na(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EF=/^https?/;async function kF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await NF(t);for(const n of e)try{if(jF(n))return}catch{}tr(t,"unauthorized-domain")}function jF(t){const e=_g(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===s}if(!EF.test(n))return!1;if(CF.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF=new Dc(3e4,6e4);function uS(){const t=gs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function TF(t){return new Promise((e,n)=>{var r,i,a;function s(){uS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uS(),n(ms(t,"network-request-failed"))},timeout:IF.get()})}if((i=(r=gs().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=gs().gapi)!=null&&a.load)s();else{const l=LU("iframefcb");return gs()[l]=()=>{gapi.load?s():n(ms(t,"network-request-failed"))},OU(`${DU()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw ld=null,e})}let ld=null;function AF(t){return ld=ld||TF(t),ld}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=new Dc(5e3,15e3),RF="__/auth/iframe",OF="emulator/auth/iframe",DF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MF(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vv(e,OF):`https://${t.config.authDomain}/${RF}`,s={apiKey:e.apiKey,appName:t.name,v:io},r=LF.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${xa(s).slice(1)}`}async function UF(t){const e=await AF(t),n=gs().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:MF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DF,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const a=ms(t,"network-request-failed"),l=gs().setTimeout(()=>{i(a)},PF.get());function u(){gs().clearTimeout(l),r(s)}s.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zF=500,BF=600,$F="_blank",VF="http://localhost";class dS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qF(t,e,n,s=zF,r=BF){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const u={...FF,width:s.toString(),height:r.toString(),top:i,left:a},d=Ht().toLowerCase();n&&(l=kk(d)?$F:n),Ck(d)&&(e=e||VF,u.scrollbars="yes");const f=Object.entries(u).reduce((h,[_,C])=>`${h}${_}=${C},`,"");if(EU(d)&&l!=="_self")return WF(e||"",l),new dS(null);const p=window.open(e||"",l,f);ue(p,t,"popup-blocked");try{p.focus()}catch{}return new dS(p)}function WF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF="__/auth/handler",GF="emulator/auth/handler",QF=encodeURIComponent("fac");async function hS(t,e,n,s,r,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:io,eventId:r};if(e instanceof Lk){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Xm(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))a[f]=p}if(e instanceof Lc){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${QF}=${encodeURIComponent(u)}`:"";return`${KF(t)}?${xa(l).slice(1)}${d}`}function KF({config:t}){return t.emulator?Vv(t,GF):`https://${t.authDomain}/${HF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="webStorageSupport";class YF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bk,this._completeRedirectFn=xF,this._overrideRedirectResult=yF}async _openPopup(e,n,s,r){var a;nr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await hS(e,n,s,_g(),r);return qF(e,i,Kv())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await hS(e,n,s,_g(),r);return ZU(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(nr(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await UF(e),s=new SF(e);return n.register("authEvent",r=>(ue(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dp,{type:Dp},r=>{var a;const i=(a=r==null?void 0:r[0])==null?void 0:a[Dp];i!==void 0&&n(!!i),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Pk()||Ek()||Hv()}}const JF=YF;var fS="@firebase/auth",pS="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e9(t){ns(new An("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=s.options;ue(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rk(t)},d=new PU(s,r,i,u);return UU(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ns(new An("auth-internal",e=>{const n=Gv(e.getProvider("auth").getImmediate());return(s=>new XF(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),on(fS,pS,ZF(t)),on(fS,pS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9=5*60,n9=cC("authIdTokenMaxAge")||t9;let mS=null;const s9=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>n9)return;const r=n==null?void 0:n.token;mS!==r&&(mS=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function r9(t=Kh()){const e=ro(t,"auth");if(e.isInitialized())return e.getImmediate();const n=MU(t,{popupRedirectResolver:JF,persistence:[lF,YU,Bk]}),s=cC("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const a=s9(i.toString());GU(n,a,()=>a(n.currentUser)),HU(n,l=>a(l))}}const r=oC("auth");return r&&FU(n,`http://${r}`),n}function i9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}RU({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=ms("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",i9().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e9("Browser");const go={apiKey:"AIzaSyBS4-raVIq_tX0rLrIE4P6nn0-3zYhE0FM",authDomain:"bookkeeping-cpa.firebaseapp.com",databaseURL:"https://bookkeeping-cpa-default-rtdb.firebaseio.com/",projectId:"bookkeeping-cpa",storageBucket:"bookkeeping-cpa.firebasestorage.app",messagingSenderId:"730366168239",appId:"1:730366168239:web:7cb447b2b596448462985a",measurementId:"G-VT8C6KXQ05"};let hi,Lp,il,Mp,Up;const Qk=()=>{try{const t=UD();if(t.length>0?(hi=t[0],console.log(" Firebase already initialized, reusing existing app")):(hi=yC(go),console.log(" Firebase initialized successfully"),console.log(" Firebase config:",{projectId:go.projectId,databaseURL:go.databaseURL,authDomain:go.authDomain})),Lp||(Lp=N3(hi)),!il){il=GE(hi,go.databaseURL),console.log(" Firebase Realtime Database initialized with URL:",go.databaseURL);const e=Vo(il,".info/connected");Ov(e,n=>{const s=n.val();window.__firebaseRealtimeConnected=s===!0,console.log(" Firebase Realtime Database connection:",s?" Connected":" Disconnected")})}return Up||(Up=r9(hi)),!Mp&&typeof window<"u"&&"Notification"in window&&"serviceWorker"in navigator&&(Mp=aU(hi),navigator.serviceWorker.register("/firebase-messaging-sw.js").then(e=>{console.log(" Service Worker registered:",e)}).catch(e=>{console.error(" Service Worker registration failed:",e)})),{app:hi,db:Lp,database:il,messaging:Mp,auth:Up}}catch(t){throw console.error(" Firebase initialization error:",t),console.error("Error details:",t.message),window.__firebaseRealtimeConnected=!1,t}},o9=()=>il,jr={ADMIN:"1",STAFF:"2",CLIENT:"3"},uf=t=>(t==null?void 0:t.role_id)===jr.CLIENT,Au=({children:t,redirectTo:e="/login"})=>{const n=bs();return Se(Dy)?t:o.jsx(gn,{to:e,state:{from:n.pathname},replace:!0})},Fp=({children:t,allowedRoles:e=[],fallbackPath:n="/dashboard"})=>{const s=Se(rr);return e.length===0||e.includes(s==null?void 0:s.role_id)?t:o.jsx(gn,{to:n,replace:!0})},gS=({children:t,requireIncomplete:e=!1,redirectTo:n="/onboarding"})=>{const s=Se(rr),r=Se(Ly);return uf(s)?e&&r?o.jsx(gn,{to:"/dashboard",replace:!0}):!e&&!r?o.jsx(gn,{to:n,replace:!0}):t:t},a9=({message:t="Loading...",inline:e=!1})=>{const n=e?{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",backgroundColor:"transparent",position:"relative"}:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999},s=e?{width:"30px",height:"30px",border:"3px solid rgba(102, 126, 234, 0.3)",borderTop:"3px solid #667eea",borderRadius:"50%",animation:"plurify-spin 1s linear infinite",marginBottom:"15px"}:{width:"50px",height:"50px",border:"4px solid rgba(255, 255, 255, 0.3)",borderTop:"4px solid #ffffff",borderRadius:"50%",animation:"plurify-spin 1s linear infinite",marginBottom:"20px"},r=e?{color:"#333",fontSize:"14px",fontWeight:"500",margin:0,textAlign:"center"}:{color:"#ffffff",fontSize:"18px",fontWeight:"500",margin:0,textAlign:"center"};return me.useEffect(()=>{const i="plurify-loading-animation";if(!document.getElementById(i)){const a=document.createElement("style");a.id=i,a.textContent=`
        @keyframes plurify-spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `,document.head.appendChild(a)}return()=>{const a=document.getElementById(i);a&&!document.querySelector("[data-plurify-loading]")&&a.remove()}},[]),o.jsxs("div",{style:n,"data-plurify-loading":"true",children:[o.jsx("div",{style:s}),o.jsx("p",{style:r,children:t})]})},l9=({children:t,redirectTo:e="/pricing"})=>{const n=bs(),s=Se(rr),r=uf(s),{data:i,isLoading:a,error:l}=My(void 0,{skip:!r});return r?a?o.jsx(a9,{message:"Checking subscription..."}):!(i!=null&&i.data)||i.data.status!=="active"?o.jsx(gn,{to:e,state:{from:n.pathname,message:"Please subscribe to access this feature"},replace:!0}):i.data.status==="past_due"||i.data.status==="canceled"?o.jsx(gn,{to:"/subscription",state:{from:n.pathname,message:"Your subscription needs attention. Please update your payment method."},replace:!0}):t:t},yS=({children:t,redirectTo:e=null})=>{const n=Se(Dy),s=Se(rr),r=Se(Ly);return n?e?o.jsx(gn,{to:e,replace:!0}):uf(s)&&!r?o.jsx(gn,{to:"/onboarding",replace:!0}):o.jsx(gn,{to:"/dashboard",replace:!0}):t},c9=()=>{var h;const t=Ft(),e=xs(),[n,{isLoading:s,error:r}]=nR(),[i,a]=D.useState({email:"",password:""}),[l,u]=D.useState({}),d=_=>{const{name:C,value:j}=_.target;a(b=>({...b,[C]:j})),l[C]&&u(b=>({...b,[C]:""}))},f=()=>{const _={};return i.email?/\S+@\S+\.\S+/.test(i.email)||(_.email="Email is invalid"):_.email="Email is required",i.password||(_.password="Password is required"),u(_),Object.keys(_).length===0},p=async _=>{if(_.preventDefault(),!!f())try{const C=await n(i).unwrap();if(C.success&&C.data){const{token:j,user:b}=C.data;localStorage.setItem("token",j),localStorage.setItem("user",JSON.stringify(b)),e(AN({data:{token:j,user:b}})),await new Promise(S=>setTimeout(S,100)),(b==null?void 0:b.role_id)==="3"?b.onboarding_completed?t("/dashboard"):t("/onboarding"):t("/dashboard")}}catch(C){console.error("Login failed:",C)}};return o.jsx("div",{className:"auth-container",children:o.jsxs("div",{className:"auth-card",children:[o.jsx("h2",{className:"auth-title",children:"Login to Plutify"}),r&&o.jsx("div",{className:"error-message",children:((h=r.data)==null?void 0:h.message)||"Login failed. Please try again."}),o.jsxs("form",{onSubmit:p,className:"auth-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:d,placeholder:"Enter your email",className:l.email?"error":""}),l.email&&o.jsx("span",{className:"field-error",children:l.email})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:"Password"}),o.jsx("input",{type:"password",id:"password",name:"password",value:i.password,onChange:d,placeholder:"Enter your password",className:l.password?"error":""}),l.password&&o.jsx("span",{className:"field-error",children:l.password})]}),o.jsx("button",{type:"submit",className:"auth-button",disabled:s,children:s?"Logging in...":"Login"})]}),o.jsx("div",{className:"auth-footer",children:o.jsxs("p",{children:["Don't have an account?",o.jsx(eC,{to:"/signup",className:"auth-link",children:" Sign up"})]})})]})})},u9=()=>{var h;const t=Ft(),e=xs(),[n,{isLoading:s,error:r}]=sR(),[i,a]=D.useState({first_name:"",last_name:"",email:"",password:"",confirmPassword:""}),[l,u]=D.useState({}),d=_=>{const{name:C,value:j}=_.target;a(b=>({...b,[C]:j})),l[C]&&u(b=>({...b,[C]:""}))},f=()=>{const _={};return i.first_name||(_.first_name="First name is required"),i.last_name||(_.last_name="Last name is required"),i.email?/\S+@\S+\.\S+/.test(i.email)||(_.email="Email is invalid"):_.email="Email is required",i.password?i.password.length<6&&(_.password="Password must be at least 6 characters"):_.password="Password is required",i.confirmPassword?i.password!==i.confirmPassword&&(_.confirmPassword="Passwords do not match"):_.confirmPassword="Please confirm your password",u(_),Object.keys(_).length===0},p=async _=>{if(_.preventDefault(),!!f())try{const C=await n(i).unwrap();if(C.success&&C.data){const{token:j,user:b}=C.data;localStorage.setItem("token",j),localStorage.setItem("user",JSON.stringify(b)),e(AN({data:{token:j,user:b}})),await new Promise(S=>setTimeout(S,100)),(b==null?void 0:b.role_id)==="3"?b.onboarding_completed?t("/dashboard"):t("/onboarding"):t("/dashboard")}else console.error("Signup failed:",C)}catch(C){console.error("Signup failed:",C)}};return o.jsx("div",{className:"auth-container",children:o.jsxs("div",{className:"auth-card",children:[o.jsx("h2",{className:"auth-title",children:"Sign Up for Plutify"}),r&&o.jsx("div",{className:"error-message",children:((h=r.data)==null?void 0:h.message)||"Signup failed. Please try again."}),o.jsxs("form",{onSubmit:p,className:"auth-form",children:[o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"first_name",children:"First Name"}),o.jsx("input",{type:"text",id:"first_name",name:"first_name",value:i.first_name,onChange:d,placeholder:"John",className:l.first_name?"error":""}),l.first_name&&o.jsx("span",{className:"field-error",children:l.first_name})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"last_name",children:"Last Name"}),o.jsx("input",{type:"text",id:"last_name",name:"last_name",value:i.last_name,onChange:d,placeholder:"Doe",className:l.last_name?"error":""}),l.last_name&&o.jsx("span",{className:"field-error",children:l.last_name})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:d,placeholder:"john.doe@example.com",className:l.email?"error":""}),l.email&&o.jsx("span",{className:"field-error",children:l.email})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:"Password"}),o.jsx("input",{type:"password",id:"password",name:"password",value:i.password,onChange:d,placeholder:"Enter your password",className:l.password?"error":""}),l.password&&o.jsx("span",{className:"field-error",children:l.password})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),o.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:i.confirmPassword,onChange:d,placeholder:"Confirm your password",className:l.confirmPassword?"error":""}),l.confirmPassword&&o.jsx("span",{className:"field-error",children:l.confirmPassword})]}),o.jsx("button",{type:"submit",className:"auth-button",disabled:s,children:s?"Creating account...":"Sign Up"})]}),o.jsx("div",{className:"auth-footer",children:o.jsxs("p",{children:["Already have an account?",o.jsx(eC,{to:"/login",className:"auth-link",children:" Login"})]})})]})})},d9=()=>{var E;const[t,e]=D.useState(!1),[n,s]=D.useState({first_name:"",last_name:"",email:"",password:"",phoneNumber:""}),[r,i]=D.useState({}),[a,{isLoading:l}]=rR(),{data:u,isLoading:d,refetch:f}=FN(),[p]=iR(),[h]=oR(),_=y=>{const{name:x,value:P}=y.target;s(O=>({...O,[x]:P})),r[x]&&i(O=>({...O,[x]:""}))},C=()=>{const y={};return n.first_name||(y.first_name="First name is required"),n.last_name||(y.last_name="Last name is required"),n.email?/\S+@\S+\.\S+/.test(n.email)||(y.email="Email is invalid"):y.email="Email is required",n.password?n.password.length<6&&(y.password="Password must be at least 6 characters"):y.password="Password is required",i(y),Object.keys(y).length===0},j=async y=>{var x;if(y.preventDefault(),!!C())try{(await a(n).unwrap()).success&&(alert("Staff member created successfully!"),e(!1),s({first_name:"",last_name:"",email:"",password:"",phoneNumber:""}),f())}catch(P){alert(((x=P.data)==null?void 0:x.message)||"Failed to create staff member")}},b=async(y,x)=>{if(window.confirm(`Are you sure you want to deactivate ${x}?`))try{(await p(y).unwrap()).success&&(alert("Staff member deactivated successfully"),f())}catch{alert("Failed to deactivate staff member")}},S=async(y,x)=>{if(window.confirm(`Are you sure you want to reactivate ${x}?`))try{(await h(y).unwrap()).success&&(alert("Staff member reactivated successfully"),f())}catch{alert("Failed to reactivate staff member")}};return o.jsxs("div",{className:"staff-management",children:[o.jsxs("div",{className:"staff-header",children:[o.jsx("h2",{children:"Staff Management"}),o.jsx("button",{className:"btn-primary",onClick:()=>e(!t),children:t?"Cancel":"Create New Staff"})]}),t&&o.jsxs("div",{className:"create-staff-form",children:[o.jsx("h3",{children:"Create Staff Member"}),o.jsxs("form",{onSubmit:j,children:[o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"first_name",children:"First Name *"}),o.jsx("input",{type:"text",id:"first_name",name:"first_name",value:n.first_name,onChange:_,className:r.first_name?"error":""}),r.first_name&&o.jsx("span",{className:"field-error",children:r.first_name})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"last_name",children:"Last Name *"}),o.jsx("input",{type:"text",id:"last_name",name:"last_name",value:n.last_name,onChange:_,className:r.last_name?"error":""}),r.last_name&&o.jsx("span",{className:"field-error",children:r.last_name})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email *"}),o.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:_,className:r.email?"error":""}),r.email&&o.jsx("span",{className:"field-error",children:r.email})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:"Password *"}),o.jsx("input",{type:"password",id:"password",name:"password",value:n.password,onChange:_,className:r.password?"error":"",placeholder:"Minimum 6 characters"}),r.password&&o.jsx("span",{className:"field-error",children:r.password})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"phoneNumber",children:"Phone Number (Optional)"}),o.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:n.phoneNumber,onChange:_})]}),o.jsx("button",{type:"submit",className:"btn-submit",disabled:l,children:l?"Creating...":"Create Staff Member"})]})]}),o.jsxs("div",{className:"staff-list",children:[o.jsx("h3",{children:"Current Staff Members"}),d?o.jsx("div",{className:"loading",children:"Loading staff members..."}):o.jsx("div",{className:"staff-table-container",children:o.jsxs("table",{className:"staff-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Name"}),o.jsx("th",{children:"Email"}),o.jsx("th",{children:"Phone"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Created By"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:((E=u==null?void 0:u.data)==null?void 0:E.length)>0?u.data.map(y=>o.jsxs("tr",{children:[o.jsxs("td",{children:[y.first_name," ",y.last_name]}),o.jsx("td",{children:y.email}),o.jsx("td",{children:y.phoneNumber||"N/A"}),o.jsx("td",{children:o.jsx("span",{className:`status-badge ${y.active?"active":"inactive"}`,children:y.active?"Active":"Inactive"})}),o.jsx("td",{children:y.createdBy?`${y.createdBy.first_name} ${y.createdBy.last_name}`:"System"}),o.jsx("td",{children:y.active?o.jsx("button",{className:"btn-danger",onClick:()=>b(y._id,`${y.first_name} ${y.last_name}`),children:"Deactivate"}):o.jsx("button",{className:"btn-success",onClick:()=>S(y._id,`${y.first_name} ${y.last_name}`),children:"Reactivate"})})]},y._id)):o.jsx("tr",{children:o.jsx("td",{colSpan:"6",className:"text-center",children:"No staff members found"})})})]})})]})]})},ua=Math.min,Oi=Math.max,mh=Math.round,Pu=Math.floor,ys=t=>({x:t,y:t}),h9={left:"right",right:"left",bottom:"top",top:"bottom"},f9={start:"end",end:"start"};function Sg(t,e,n){return Oi(t,ua(e,n))}function Uc(t,e){return typeof t=="function"?t(e):t}function Xi(t){return t.split("-")[0]}function Fc(t){return t.split("-")[1]}function Kk(t){return t==="x"?"y":"x"}function Jv(t){return t==="y"?"height":"width"}const p9=new Set(["top","bottom"]);function Ir(t){return p9.has(Xi(t))?"y":"x"}function Xv(t){return Kk(Ir(t))}function m9(t,e,n){n===void 0&&(n=!1);const s=Fc(t),r=Xv(t),i=Jv(r);let a=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=gh(a)),[a,gh(a)]}function g9(t){const e=gh(t);return[bg(t),e,bg(e)]}function bg(t){return t.replace(/start|end/g,e=>f9[e])}const vS=["left","right"],_S=["right","left"],y9=["top","bottom"],v9=["bottom","top"];function _9(t,e,n){switch(t){case"top":case"bottom":return n?e?_S:vS:e?vS:_S;case"left":case"right":return e?y9:v9;default:return[]}}function x9(t,e,n,s){const r=Fc(t);let i=_9(Xi(t),n==="start",s);return r&&(i=i.map(a=>a+"-"+r),e&&(i=i.concat(i.map(bg)))),i}function gh(t){return t.replace(/left|right|bottom|top/g,e=>h9[e])}function w9(t){return{top:0,right:0,bottom:0,left:0,...t}}function Yk(t){return typeof t!="number"?w9(t):{top:t,right:t,bottom:t,left:t}}function yh(t){const{x:e,y:n,width:s,height:r}=t;return{width:s,height:r,top:n,left:e,right:e+s,bottom:n+r,x:e,y:n}}function xS(t,e,n){let{reference:s,floating:r}=t;const i=Ir(e),a=Xv(e),l=Jv(a),u=Xi(e),d=i==="y",f=s.x+s.width/2-r.width/2,p=s.y+s.height/2-r.height/2,h=s[l]/2-r[l]/2;let _;switch(u){case"top":_={x:f,y:s.y-r.height};break;case"bottom":_={x:f,y:s.y+s.height};break;case"right":_={x:s.x+s.width,y:p};break;case"left":_={x:s.x-r.width,y:p};break;default:_={x:s.x,y:s.y}}switch(Fc(e)){case"start":_[a]-=h*(n&&d?-1:1);break;case"end":_[a]+=h*(n&&d?-1:1);break}return _}const S9=async(t,e,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:r}),{x:f,y:p}=xS(d,s,u),h=s,_={},C=0;for(let j=0;j<l.length;j++){const{name:b,fn:S}=l[j],{x:E,y,data:x,reset:P}=await S({x:f,y:p,initialPlacement:s,placement:h,strategy:r,middlewareData:_,rects:d,platform:a,elements:{reference:t,floating:e}});f=E??f,p=y??p,_={..._,[b]:{..._[b],...x}},P&&C<=50&&(C++,typeof P=="object"&&(P.placement&&(h=P.placement),P.rects&&(d=P.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:r}):P.rects),{x:f,y:p}=xS(d,h,u)),j=-1)}return{x:f,y:p,placement:h,strategy:r,middlewareData:_}};async function Jk(t,e){var n;e===void 0&&(e={});const{x:s,y:r,platform:i,rects:a,elements:l,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:h=!1,padding:_=0}=Uc(e,t),C=Yk(_),b=l[h?p==="floating"?"reference":"floating":p],S=yh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:u})),E=p==="floating"?{x:s,y:r,width:a.floating.width,height:a.floating.height}:a.reference,y=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),x=await(i.isElement==null?void 0:i.isElement(y))?await(i.getScale==null?void 0:i.getScale(y))||{x:1,y:1}:{x:1,y:1},P=yh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:E,offsetParent:y,strategy:u}):E);return{top:(S.top-P.top+C.top)/x.y,bottom:(P.bottom-S.bottom+C.bottom)/x.y,left:(S.left-P.left+C.left)/x.x,right:(P.right-S.right+C.right)/x.x}}const b9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:r,rects:i,platform:a,elements:l,middlewareData:u}=e,{element:d,padding:f=0}=Uc(t,e)||{};if(d==null)return{};const p=Yk(f),h={x:n,y:s},_=Xv(r),C=Jv(_),j=await a.getDimensions(d),b=_==="y",S=b?"top":"left",E=b?"bottom":"right",y=b?"clientHeight":"clientWidth",x=i.reference[C]+i.reference[_]-h[_]-i.floating[C],P=h[_]-i.reference[_],O=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let v=O?O[y]:0;(!v||!await(a.isElement==null?void 0:a.isElement(O)))&&(v=l.floating[y]||i.floating[C]);const g=x/2-P/2,N=v/2-j[C]/2-1,w=ua(p[S],N),A=ua(p[E],N),T=w,I=v-j[C]-A,L=v/2-j[C]/2+g,V=Sg(T,L,I),M=!u.arrow&&Fc(r)!=null&&L!==V&&i.reference[C]/2-(L<T?w:A)-j[C]/2<0,U=M?L<T?L-T:L-I:0;return{[_]:h[_]+U,data:{[_]:V,centerOffset:L-V-U,...M&&{alignmentOffset:U}},reset:M}}}),N9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:r,middlewareData:i,rects:a,initialPlacement:l,platform:u,elements:d}=e,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:h,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:j=!0,...b}=Uc(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const S=Xi(r),E=Ir(l),y=Xi(l)===l,x=await(u.isRTL==null?void 0:u.isRTL(d.floating)),P=h||(y||!j?[gh(l)]:g9(l)),O=C!=="none";!h&&O&&P.push(...x9(l,j,C,x));const v=[l,...P],g=await Jk(e,b),N=[];let w=((s=i.flip)==null?void 0:s.overflows)||[];if(f&&N.push(g[S]),p){const L=m9(r,a,x);N.push(g[L[0]],g[L[1]])}if(w=[...w,{placement:r,overflows:N}],!N.every(L=>L<=0)){var A,T;const L=(((A=i.flip)==null?void 0:A.index)||0)+1,V=v[L];if(V&&(!(p==="alignment"?E!==Ir(V):!1)||w.every(F=>Ir(F.placement)===E?F.overflows[0]>0:!0)))return{data:{index:L,overflows:w},reset:{placement:V}};let M=(T=w.filter(U=>U.overflows[0]<=0).sort((U,F)=>U.overflows[1]-F.overflows[1])[0])==null?void 0:T.placement;if(!M)switch(_){case"bestFit":{var I;const U=(I=w.filter(F=>{if(O){const B=Ir(F.placement);return B===E||B==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(B=>B>0).reduce((B,q)=>B+q,0)]).sort((F,B)=>F[1]-B[1])[0])==null?void 0:I[0];U&&(M=U);break}case"initialPlacement":M=l;break}if(r!==M)return{reset:{placement:M}}}return{}}}},C9=new Set(["left","top"]);async function E9(t,e){const{placement:n,platform:s,elements:r}=t,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),a=Xi(n),l=Fc(n),u=Ir(n)==="y",d=C9.has(a)?-1:1,f=i&&u?-1:1,p=Uc(e,t);let{mainAxis:h,crossAxis:_,alignmentAxis:C}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof C=="number"&&(_=l==="end"?C*-1:C),u?{x:_*f,y:h*d}:{x:h*d,y:_*f}}const k9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:r,y:i,placement:a,middlewareData:l}=e,u=await E9(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:r+u.x,y:i+u.y,data:{...u,placement:a}}}}},j9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:r}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:S,y:E}=b;return{x:S,y:E}}},...u}=Uc(t,e),d={x:n,y:s},f=await Jk(e,u),p=Ir(Xi(r)),h=Kk(p);let _=d[h],C=d[p];if(i){const b=h==="y"?"top":"left",S=h==="y"?"bottom":"right",E=_+f[b],y=_-f[S];_=Sg(E,_,y)}if(a){const b=p==="y"?"top":"left",S=p==="y"?"bottom":"right",E=C+f[b],y=C-f[S];C=Sg(E,C,y)}const j=l.fn({...e,[h]:_,[p]:C});return{...j,data:{x:j.x-n,y:j.y-s,enabled:{[h]:i,[p]:a}}}}}};function df(){return typeof window<"u"}function Ca(t){return Xk(t)?(t.nodeName||"").toLowerCase():"#document"}function yn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Cs(t){var e;return(e=(Xk(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Xk(t){return df()?t instanceof Node||t instanceof yn(t).Node:!1}function ss(t){return df()?t instanceof Element||t instanceof yn(t).Element:!1}function _s(t){return df()?t instanceof HTMLElement||t instanceof yn(t).HTMLElement:!1}function wS(t){return!df()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof yn(t).ShadowRoot}const I9=new Set(["inline","contents"]);function zc(t){const{overflow:e,overflowX:n,overflowY:s,display:r}=rs(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!I9.has(r)}const T9=new Set(["table","td","th"]);function A9(t){return T9.has(Ca(t))}const P9=[":popover-open",":modal"];function hf(t){return P9.some(e=>{try{return t.matches(e)}catch{return!1}})}const R9=["transform","translate","scale","rotate","perspective"],O9=["transform","translate","scale","rotate","perspective","filter"],D9=["paint","layout","strict","content"];function Zv(t){const e=e_(),n=ss(t)?rs(t):t;return R9.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||O9.some(s=>(n.willChange||"").includes(s))||D9.some(s=>(n.contain||"").includes(s))}function L9(t){let e=Yr(t);for(;_s(e)&&!da(e);){if(Zv(e))return e;if(hf(e))return null;e=Yr(e)}return null}function e_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const M9=new Set(["html","body","#document"]);function da(t){return M9.has(Ca(t))}function rs(t){return yn(t).getComputedStyle(t)}function ff(t){return ss(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Yr(t){if(Ca(t)==="html")return t;const e=t.assignedSlot||t.parentNode||wS(t)&&t.host||Cs(t);return wS(e)?e.host:e}function Zk(t){const e=Yr(t);return da(e)?t.ownerDocument?t.ownerDocument.body:t.body:_s(e)&&zc(e)?e:Zk(e)}function gc(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=Zk(t),i=r===((s=t.ownerDocument)==null?void 0:s.body),a=yn(r);if(i){const l=Ng(a);return e.concat(a,a.visualViewport||[],zc(r)?r:[],l&&n?gc(l):[])}return e.concat(r,gc(r,[],n))}function Ng(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ej(t){const e=rs(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=_s(t),i=r?t.offsetWidth:n,a=r?t.offsetHeight:s,l=mh(n)!==i||mh(s)!==a;return l&&(n=i,s=a),{width:n,height:s,$:l}}function t_(t){return ss(t)?t:t.contextElement}function Go(t){const e=t_(t);if(!_s(e))return ys(1);const n=e.getBoundingClientRect(),{width:s,height:r,$:i}=ej(e);let a=(i?mh(n.width):n.width)/s,l=(i?mh(n.height):n.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const U9=ys(0);function tj(t){const e=yn(t);return!e_()||!e.visualViewport?U9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function F9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==yn(t)?!1:e}function Zi(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=t_(t);let a=ys(1);e&&(s?ss(s)&&(a=Go(s)):a=Go(t));const l=F9(i,n,s)?tj(i):ys(0);let u=(r.left+l.x)/a.x,d=(r.top+l.y)/a.y,f=r.width/a.x,p=r.height/a.y;if(i){const h=yn(i),_=s&&ss(s)?yn(s):s;let C=h,j=Ng(C);for(;j&&s&&_!==C;){const b=Go(j),S=j.getBoundingClientRect(),E=rs(j),y=S.left+(j.clientLeft+parseFloat(E.paddingLeft))*b.x,x=S.top+(j.clientTop+parseFloat(E.paddingTop))*b.y;u*=b.x,d*=b.y,f*=b.x,p*=b.y,u+=y,d+=x,C=yn(j),j=Ng(C)}}return yh({width:f,height:p,x:u,y:d})}function pf(t,e){const n=ff(t).scrollLeft;return e?e.left+n:Zi(Cs(t)).left+n}function nj(t,e){const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-pf(t,n),r=n.top+e.scrollTop;return{x:s,y:r}}function z9(t){let{elements:e,rect:n,offsetParent:s,strategy:r}=t;const i=r==="fixed",a=Cs(s),l=e?hf(e.floating):!1;if(s===a||l&&i)return n;let u={scrollLeft:0,scrollTop:0},d=ys(1);const f=ys(0),p=_s(s);if((p||!p&&!i)&&((Ca(s)!=="body"||zc(a))&&(u=ff(s)),_s(s))){const _=Zi(s);d=Go(s),f.x=_.x+s.clientLeft,f.y=_.y+s.clientTop}const h=a&&!p&&!i?nj(a,u):ys(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+f.x+h.x,y:n.y*d.y-u.scrollTop*d.y+f.y+h.y}}function B9(t){return Array.from(t.getClientRects())}function $9(t){const e=Cs(t),n=ff(t),s=t.ownerDocument.body,r=Oi(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=Oi(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let a=-n.scrollLeft+pf(t);const l=-n.scrollTop;return rs(s).direction==="rtl"&&(a+=Oi(e.clientWidth,s.clientWidth)-r),{width:r,height:i,x:a,y:l}}const SS=25;function V9(t,e){const n=yn(t),s=Cs(t),r=n.visualViewport;let i=s.clientWidth,a=s.clientHeight,l=0,u=0;if(r){i=r.width,a=r.height;const f=e_();(!f||f&&e==="fixed")&&(l=r.offsetLeft,u=r.offsetTop)}const d=pf(s);if(d<=0){const f=s.ownerDocument,p=f.body,h=getComputedStyle(p),_=f.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,C=Math.abs(s.clientWidth-p.clientWidth-_);C<=SS&&(i-=C)}else d<=SS&&(i+=d);return{width:i,height:a,x:l,y:u}}const q9=new Set(["absolute","fixed"]);function W9(t,e){const n=Zi(t,!0,e==="fixed"),s=n.top+t.clientTop,r=n.left+t.clientLeft,i=_s(t)?Go(t):ys(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,u=r*i.x,d=s*i.y;return{width:a,height:l,x:u,y:d}}function bS(t,e,n){let s;if(e==="viewport")s=V9(t,n);else if(e==="document")s=$9(Cs(t));else if(ss(e))s=W9(e,n);else{const r=tj(t);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return yh(s)}function sj(t,e){const n=Yr(t);return n===e||!ss(n)||da(n)?!1:rs(n).position==="fixed"||sj(n,e)}function H9(t,e){const n=e.get(t);if(n)return n;let s=gc(t,[],!1).filter(l=>ss(l)&&Ca(l)!=="body"),r=null;const i=rs(t).position==="fixed";let a=i?Yr(t):t;for(;ss(a)&&!da(a);){const l=rs(a),u=Zv(a);!u&&l.position==="fixed"&&(r=null),(i?!u&&!r:!u&&l.position==="static"&&!!r&&q9.has(r.position)||zc(a)&&!u&&sj(t,a))?s=s.filter(f=>f!==a):r=l,a=Yr(a)}return e.set(t,s),s}function G9(t){let{element:e,boundary:n,rootBoundary:s,strategy:r}=t;const a=[...n==="clippingAncestors"?hf(e)?[]:H9(e,this._c):[].concat(n),s],l=a[0],u=a.reduce((d,f)=>{const p=bS(e,f,r);return d.top=Oi(p.top,d.top),d.right=ua(p.right,d.right),d.bottom=ua(p.bottom,d.bottom),d.left=Oi(p.left,d.left),d},bS(e,l,r));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Q9(t){const{width:e,height:n}=ej(t);return{width:e,height:n}}function K9(t,e,n){const s=_s(e),r=Cs(e),i=n==="fixed",a=Zi(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const u=ys(0);function d(){u.x=pf(r)}if(s||!s&&!i)if((Ca(e)!=="body"||zc(r))&&(l=ff(e)),s){const _=Zi(e,!0,i,e);u.x=_.x+e.clientLeft,u.y=_.y+e.clientTop}else r&&d();i&&!s&&r&&d();const f=r&&!s&&!i?nj(r,l):ys(0),p=a.left+l.scrollLeft-u.x-f.x,h=a.top+l.scrollTop-u.y-f.y;return{x:p,y:h,width:a.width,height:a.height}}function zp(t){return rs(t).position==="static"}function NS(t,e){if(!_s(t)||rs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Cs(t)===n&&(n=n.ownerDocument.body),n}function rj(t,e){const n=yn(t);if(hf(t))return n;if(!_s(t)){let r=Yr(t);for(;r&&!da(r);){if(ss(r)&&!zp(r))return r;r=Yr(r)}return n}let s=NS(t,e);for(;s&&A9(s)&&zp(s);)s=NS(s,e);return s&&da(s)&&zp(s)&&!Zv(s)?n:s||L9(t)||n}const Y9=async function(t){const e=this.getOffsetParent||rj,n=this.getDimensions,s=await n(t.floating);return{reference:K9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function J9(t){return rs(t).direction==="rtl"}const X9={convertOffsetParentRelativeRectToViewportRelativeRect:z9,getDocumentElement:Cs,getClippingRect:G9,getOffsetParent:rj,getElementRects:Y9,getClientRects:B9,getDimensions:Q9,getScale:Go,isElement:ss,isRTL:J9};function ij(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Z9(t,e){let n=null,s;const r=Cs(t);function i(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function a(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),i();const d=t.getBoundingClientRect(),{left:f,top:p,width:h,height:_}=d;if(l||e(),!h||!_)return;const C=Pu(p),j=Pu(r.clientWidth-(f+h)),b=Pu(r.clientHeight-(p+_)),S=Pu(f),y={rootMargin:-C+"px "+-j+"px "+-b+"px "+-S+"px",threshold:Oi(0,ua(1,u))||1};let x=!0;function P(O){const v=O[0].intersectionRatio;if(v!==u){if(!x)return a();v?a(!1,v):s=setTimeout(()=>{a(!1,1e-7)},1e3)}v===1&&!ij(d,t.getBoundingClientRect())&&a(),x=!1}try{n=new IntersectionObserver(P,{...y,root:r.ownerDocument})}catch{n=new IntersectionObserver(P,y)}n.observe(t)}return a(!0),i}function e8(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=s,d=t_(t),f=r||i?[...d?gc(d):[],...gc(e)]:[];f.forEach(S=>{r&&S.addEventListener("scroll",n,{passive:!0}),i&&S.addEventListener("resize",n)});const p=d&&l?Z9(d,n):null;let h=-1,_=null;a&&(_=new ResizeObserver(S=>{let[E]=S;E&&E.target===d&&_&&(_.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var y;(y=_)==null||y.observe(e)})),n()}),d&&!u&&_.observe(d),_.observe(e));let C,j=u?Zi(t):null;u&&b();function b(){const S=Zi(t);j&&!ij(j,S)&&n(),j=S,C=requestAnimationFrame(b)}return n(),()=>{var S;f.forEach(E=>{r&&E.removeEventListener("scroll",n),i&&E.removeEventListener("resize",n)}),p==null||p(),(S=_)==null||S.disconnect(),_=null,u&&cancelAnimationFrame(C)}}const t8=k9,n8=j9,s8=N9,r8=b9,CS=(t,e,n)=>{const s=new Map,r={platform:X9,...n},i={...r.platform,_c:s};return S9(t,e,{...r,platform:i})};var oj={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(i=r(i,s(l)))}return i}function s(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var a="";for(var l in i)e.call(i,l)&&i[l]&&(a=r(a,l));return a}function r(i,a){return a?i?i+" "+a:i+a:i}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(oj);var i8=oj.exports;const Cg=Ig(i8);var ES={};const o8="react-tooltip-core-styles",a8="react-tooltip-base-styles",kS={core:!1,base:!1};function jS({css:t,id:e=a8,type:n="base",ref:s}){var r,i;if(!t||typeof document>"u"||kS[n]||n==="core"&&typeof process<"u"&&(!((r=process==null?void 0:ES)===null||r===void 0)&&r.REACT_TOOLTIP_DISABLE_CORE_STYLES)||n!=="base"&&typeof process<"u"&&(!((i=process==null?void 0:ES)===null||i===void 0)&&i.REACT_TOOLTIP_DISABLE_BASE_STYLES))return;n==="core"&&(e=o8),s||(s={});const{insertAt:a}=s;if(document.getElementById(e))return void console.warn(`[react-tooltip] Element with id '${e}' already exists. Call \`removeStyle()\` first`);const l=document.head||document.getElementsByTagName("head")[0],u=document.createElement("style");u.id=e,u.type="text/css",a==="top"&&l.firstChild?l.insertBefore(u,l.firstChild):l.appendChild(u),u.styleSheet?u.styleSheet.cssText=t:u.appendChild(document.createTextNode(t)),kS[n]=!0}const IS=async({elementReference:t=null,tooltipReference:e=null,tooltipArrowReference:n=null,place:s="top",offset:r=10,strategy:i="absolute",middlewares:a=[t8(Number(r)),s8({fallbackAxisSideDirection:"start"}),n8({padding:5})],border:l})=>{if(!t)return{tooltipStyles:{},tooltipArrowStyles:{},place:s};if(e===null)return{tooltipStyles:{},tooltipArrowStyles:{},place:s};const u=a;return n?(u.push(r8({element:n,padding:5})),CS(t,e,{placement:s,strategy:i,middleware:u}).then(({x:d,y:f,placement:p,middlewareData:h})=>{var _,C;const j={left:`${d}px`,top:`${f}px`,border:l},{x:b,y:S}=(_=h.arrow)!==null&&_!==void 0?_:{x:0,y:0},E=(C={top:"bottom",right:"left",bottom:"top",left:"right"}[p.split("-")[0]])!==null&&C!==void 0?C:"bottom",y=l&&{borderBottom:l,borderRight:l};let x=0;if(l){const P=`${l}`.match(/(\d+)px/);x=P!=null&&P[1]?Number(P[1]):1}return{tooltipStyles:j,tooltipArrowStyles:{left:b!=null?`${b}px`:"",top:S!=null?`${S}px`:"",right:"",bottom:"",...y,[E]:`-${4+x}px`},place:p}})):CS(t,e,{placement:"bottom",strategy:i,middleware:u}).then(({x:d,y:f,placement:p})=>({tooltipStyles:{left:`${d}px`,top:`${f}px`},tooltipArrowStyles:{},place:p}))},TS=(t,e)=>!("CSS"in window&&"supports"in window.CSS)||window.CSS.supports(t,e),AS=(t,e,n)=>{let s=null;const r=function(...i){const a=()=>{s=null};!s&&(t.apply(this,i),s=setTimeout(a,e))};return r.cancel=()=>{s&&(clearTimeout(s),s=null)},r},PS=t=>t!==null&&!Array.isArray(t)&&typeof t=="object",Eg=(t,e)=>{if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every((r,i)=>Eg(r,e[i]));if(Array.isArray(t)!==Array.isArray(e))return!1;if(!PS(t)||!PS(e))return t===e;const n=Object.keys(t),s=Object.keys(e);return n.length===s.length&&n.every(r=>Eg(t[r],e[r]))},l8=t=>{if(!(t instanceof HTMLElement||t instanceof SVGElement))return!1;const e=getComputedStyle(t);return["overflow","overflow-x","overflow-y"].some(n=>{const s=e.getPropertyValue(n);return s==="auto"||s==="scroll"})},RS=t=>{if(!t)return null;let e=t.parentElement;for(;e;){if(l8(e))return e;e=e.parentElement}return document.scrollingElement||document.documentElement},c8=typeof window<"u"?D.useLayoutEffect:D.useEffect,u8="DEFAULT_TOOLTIP_ID",d8={anchorRefs:new Set,activeAnchor:{current:null},attach:()=>{},detach:()=>{},setActiveAnchor:()=>{}},h8=D.createContext({getTooltipData:()=>d8});function aj(t=u8){return D.useContext(h8).getTooltipData(t)}var yo={tooltip:"core-styles-module_tooltip__3vRRp",fixed:"core-styles-module_fixed__pcSol",arrow:"core-styles-module_arrow__cvMwQ",noArrow:"core-styles-module_noArrow__xock6",clickable:"core-styles-module_clickable__ZuTTB",show:"core-styles-module_show__Nt9eE",closing:"core-styles-module_closing__sGnxF"},Bp={tooltip:"styles-module_tooltip__mnnfp",arrow:"styles-module_arrow__K0L3T",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"};const f8=({forwardRef:t,id:e,className:n,classNameArrow:s,variant:r="dark",anchorId:i,anchorSelect:a,place:l="top",offset:u=10,events:d=["hover"],openOnClick:f=!1,positionStrategy:p="absolute",middlewares:h,wrapper:_,delayShow:C=0,delayHide:j=0,float:b=!1,hidden:S=!1,noArrow:E=!1,clickable:y=!1,closeOnEsc:x=!1,closeOnScroll:P=!1,closeOnResize:O=!1,openEvents:v,closeEvents:g,globalCloseEvents:N,imperativeModeOnly:w,style:A,position:T,afterShow:I,afterHide:L,content:V,contentWrapperRef:M,isOpen:U,defaultIsOpen:F=!1,setIsOpen:B,activeAnchor:q,setActiveAnchor:Y,border:ee,opacity:z,arrowColor:Q,role:G="tooltip"})=>{var W;const K=D.useRef(null),ne=D.useRef(null),oe=D.useRef(null),ae=D.useRef(null),de=D.useRef(null),[Ce,St]=D.useState({tooltipStyles:{},tooltipArrowStyles:{},place:l}),[Ie,mt]=D.useState(!1),[re,fe]=D.useState(!1),[pe,zt]=D.useState(null),Kt=D.useRef(!1),Yt=D.useRef(null),{anchorRefs:Es,setActiveAnchor:ar}=aj(e),is=D.useRef(!1),[Pn,Je]=D.useState([]),He=D.useRef(!1),Rn=f||d.includes("click"),lr=Rn||(v==null?void 0:v.click)||(v==null?void 0:v.dblclick)||(v==null?void 0:v.mousedown),ks=v?{...v}:{mouseenter:!0,focus:!0,click:!1,dblclick:!1,mousedown:!1};!v&&Rn&&Object.assign(ks,{mouseenter:!1,focus:!1,click:!0});const ni=g?{...g}:{mouseleave:!0,blur:!0,click:!1,dblclick:!1,mouseup:!1};!g&&Rn&&Object.assign(ni,{mouseleave:!1,blur:!1});const bt=N?{...N}:{escape:x||!1,scroll:P||!1,resize:O||!1,clickOutsideAnchor:lr||!1};w&&(Object.assign(ks,{mouseenter:!1,focus:!1,click:!1,dblclick:!1,mousedown:!1}),Object.assign(ni,{mouseleave:!1,blur:!1,click:!1,dblclick:!1,mouseup:!1}),Object.assign(bt,{escape:!1,scroll:!1,resize:!1,clickOutsideAnchor:!1})),c8(()=>(He.current=!0,()=>{He.current=!1}),[]);const Ge=te=>{He.current&&(te&&fe(!0),setTimeout(()=>{He.current&&(B==null||B(te),U===void 0&&mt(te))},10))};D.useEffect(()=>{if(U===void 0)return()=>null;U&&fe(!0);const te=setTimeout(()=>{mt(U)},10);return()=>{clearTimeout(te)}},[U]),D.useEffect(()=>{if(Ie!==Kt.current)if(de.current&&clearTimeout(de.current),Kt.current=Ie,Ie)I==null||I();else{const te=(ie=>{const he=ie.match(/^([\d.]+)(ms|s)$/);if(!he)return 0;const[,qe,Ze]=he;return Number(qe)*(Ze==="ms"?1:1e3)})(getComputedStyle(document.body).getPropertyValue("--rt-transition-show-delay"));de.current=setTimeout(()=>{fe(!1),zt(null),L==null||L()},te+25)}},[Ie]);const si=te=>{St(ie=>Eg(ie,te)?ie:te)},js=(te=C)=>{oe.current&&clearTimeout(oe.current),re?Ge(!0):oe.current=setTimeout(()=>{Ge(!0)},te)},cr=(te=j)=>{ae.current&&clearTimeout(ae.current),ae.current=setTimeout(()=>{is.current||Ge(!1)},te)},ri=te=>{var ie;if(!te)return;const he=(ie=te.currentTarget)!==null&&ie!==void 0?ie:te.target;if(!(he!=null&&he.isConnected))return Y(null),void ar({current:null});C?js():Ge(!0),Y(he),ar({current:he}),ae.current&&clearTimeout(ae.current)},os=()=>{y?cr(j||100):j?cr():Ge(!1),oe.current&&clearTimeout(oe.current)},Is=({x:te,y:ie})=>{var he;const qe={getBoundingClientRect:()=>({x:te,y:ie,width:0,height:0,top:ie,left:te,right:te,bottom:ie})};IS({place:(he=pe==null?void 0:pe.place)!==null&&he!==void 0?he:l,offset:u,elementReference:qe,tooltipReference:K.current,tooltipArrowReference:ne.current,strategy:p,middlewares:h,border:ee}).then(Ze=>{si(Ze)})},ur=te=>{if(!te)return;const ie=te,he={x:ie.clientX,y:ie.clientY};Is(he),Yt.current=he},On=te=>{var ie;if(!Ie)return;const he=te.target;he.isConnected&&(!((ie=K.current)===null||ie===void 0)&&ie.contains(he)||[document.querySelector(`[id='${i}']`),...Pn].some(qe=>qe==null?void 0:qe.contains(he))||(Ge(!1),oe.current&&clearTimeout(oe.current)))},dr=AS(ri,50),Xe=AS(os,50),dt=te=>{Xe.cancel(),dr(te)},le=()=>{dr.cancel(),Xe()},ge=D.useCallback(()=>{var te,ie;const he=(te=pe==null?void 0:pe.position)!==null&&te!==void 0?te:T;he?Is(he):b?Yt.current&&Is(Yt.current):q!=null&&q.isConnected&&IS({place:(ie=pe==null?void 0:pe.place)!==null&&ie!==void 0?ie:l,offset:u,elementReference:q,tooltipReference:K.current,tooltipArrowReference:ne.current,strategy:p,middlewares:h,border:ee}).then(qe=>{He.current&&si(qe)})},[Ie,q,V,A,l,pe==null?void 0:pe.place,u,p,T,pe==null?void 0:pe.position,b]);D.useEffect(()=>{var te,ie;const he=new Set(Es);Pn.forEach(Pe=>{he.add({current:Pe})});const qe=document.querySelector(`[id='${i}']`);qe&&he.add({current:qe});const Ze=()=>{Ge(!1)},Sn=RS(q),bn=RS(K.current);bt.scroll&&(window.addEventListener("scroll",Ze),Sn==null||Sn.addEventListener("scroll",Ze),bn==null||bn.addEventListener("scroll",Ze));let et=null;bt.resize?window.addEventListener("resize",Ze):q&&K.current&&(et=e8(q,K.current,ge,{ancestorResize:!0,elementResize:!0,layoutShift:!0}));const Jt=Pe=>{Pe.key==="Escape"&&Ge(!1)};bt.escape&&window.addEventListener("keydown",Jt),bt.clickOutsideAnchor&&window.addEventListener("click",On);const Le=[],Ts=Pe=>{Ie&&(Pe==null?void 0:Pe.target)===q||ri(Pe)},gf=Pe=>{Ie&&(Pe==null?void 0:Pe.target)===q&&os()},ao=["mouseenter","mouseleave","focus","blur"],ii=["click","dblclick","mousedown","mouseup"];Object.entries(ks).forEach(([Pe,dn])=>{dn&&(ao.includes(Pe)?Le.push({event:Pe,listener:dt}):ii.includes(Pe)&&Le.push({event:Pe,listener:Ts}))}),Object.entries(ni).forEach(([Pe,dn])=>{dn&&(ao.includes(Pe)?Le.push({event:Pe,listener:le}):ii.includes(Pe)&&Le.push({event:Pe,listener:gf}))}),b&&Le.push({event:"pointermove",listener:ur});const Dn=()=>{is.current=!0},Ea=()=>{is.current=!1,os()};return y&&!lr&&((te=K.current)===null||te===void 0||te.addEventListener("mouseenter",Dn),(ie=K.current)===null||ie===void 0||ie.addEventListener("mouseleave",Ea)),Le.forEach(({event:Pe,listener:dn})=>{he.forEach(oi=>{var hr;(hr=oi.current)===null||hr===void 0||hr.addEventListener(Pe,dn)})}),()=>{var Pe,dn;bt.scroll&&(window.removeEventListener("scroll",Ze),Sn==null||Sn.removeEventListener("scroll",Ze),bn==null||bn.removeEventListener("scroll",Ze)),bt.resize?window.removeEventListener("resize",Ze):et==null||et(),bt.clickOutsideAnchor&&window.removeEventListener("click",On),bt.escape&&window.removeEventListener("keydown",Jt),y&&!lr&&((Pe=K.current)===null||Pe===void 0||Pe.removeEventListener("mouseenter",Dn),(dn=K.current)===null||dn===void 0||dn.removeEventListener("mouseleave",Ea)),Le.forEach(({event:oi,listener:hr})=>{he.forEach(Bc=>{var ka;(ka=Bc.current)===null||ka===void 0||ka.removeEventListener(oi,hr)})})}},[q,ge,re,Es,Pn,v,g,N,Rn,C,j]),D.useEffect(()=>{var te,ie;let he=(ie=(te=pe==null?void 0:pe.anchorSelect)!==null&&te!==void 0?te:a)!==null&&ie!==void 0?ie:"";!he&&e&&(he=`[data-tooltip-id='${e}']`);const qe=new MutationObserver(Ze=>{const Sn=[],bn=[];Ze.forEach(et=>{if(et.type==="attributes"&&et.attributeName==="data-tooltip-id"&&(et.target.getAttribute("data-tooltip-id")===e?Sn.push(et.target):et.oldValue===e&&bn.push(et.target)),et.type==="childList"){if(q){const Jt=[...et.removedNodes].filter(Le=>Le.nodeType===1);if(he)try{bn.push(...Jt.filter(Le=>Le.matches(he))),bn.push(...Jt.flatMap(Le=>[...Le.querySelectorAll(he)]))}catch{}Jt.some(Le=>{var Ts;return!!(!((Ts=Le==null?void 0:Le.contains)===null||Ts===void 0)&&Ts.call(Le,q))&&(fe(!1),Ge(!1),Y(null),oe.current&&clearTimeout(oe.current),ae.current&&clearTimeout(ae.current),!0)})}if(he)try{const Jt=[...et.addedNodes].filter(Le=>Le.nodeType===1);Sn.push(...Jt.filter(Le=>Le.matches(he))),Sn.push(...Jt.flatMap(Le=>[...Le.querySelectorAll(he)]))}catch{}}}),(Sn.length||bn.length)&&Je(et=>[...et.filter(Jt=>!bn.includes(Jt)),...Sn])});return qe.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"],attributeOldValue:!0}),()=>{qe.disconnect()}},[e,a,pe==null?void 0:pe.anchorSelect,q]),D.useEffect(()=>{ge()},[ge]),D.useEffect(()=>{if(!(M!=null&&M.current))return()=>null;const te=new ResizeObserver(()=>{setTimeout(()=>ge())});return te.observe(M.current),()=>{te.disconnect()}},[V,M==null?void 0:M.current]),D.useEffect(()=>{var te;const ie=document.querySelector(`[id='${i}']`),he=[...Pn,ie];q&&he.includes(q)||Y((te=Pn[0])!==null&&te!==void 0?te:ie)},[i,Pn,q]),D.useEffect(()=>(F&&Ge(!0),()=>{oe.current&&clearTimeout(oe.current),ae.current&&clearTimeout(ae.current)}),[]),D.useEffect(()=>{var te;let ie=(te=pe==null?void 0:pe.anchorSelect)!==null&&te!==void 0?te:a;if(!ie&&e&&(ie=`[data-tooltip-id='${e}']`),ie)try{const he=Array.from(document.querySelectorAll(ie));Je(he)}catch{Je([])}},[e,a,pe==null?void 0:pe.anchorSelect]),D.useEffect(()=>{oe.current&&(clearTimeout(oe.current),js(C))},[C]);const At=(W=pe==null?void 0:pe.content)!==null&&W!==void 0?W:V,un=Ie&&Object.keys(Ce.tooltipStyles).length>0;return D.useImperativeHandle(t,()=>({open:te=>{if(te!=null&&te.anchorSelect)try{document.querySelector(te.anchorSelect)}catch{return void console.warn(`[react-tooltip] "${te.anchorSelect}" is not a valid CSS selector`)}zt(te??null),te!=null&&te.delay?js(te.delay):Ge(!0)},close:te=>{te!=null&&te.delay?cr(te.delay):Ge(!1)},activeAnchor:q,place:Ce.place,isOpen:!!(re&&!S&&At&&un)})),re&&!S&&At?me.createElement(_,{id:e,role:G,className:Cg("react-tooltip",yo.tooltip,Bp.tooltip,Bp[r],n,`react-tooltip__place-${Ce.place}`,yo[un?"show":"closing"],un?"react-tooltip__show":"react-tooltip__closing",p==="fixed"&&yo.fixed,y&&yo.clickable),onTransitionEnd:te=>{de.current&&clearTimeout(de.current),Ie||te.propertyName!=="opacity"||(fe(!1),zt(null),L==null||L())},style:{...A,...Ce.tooltipStyles,opacity:z!==void 0&&un?z:void 0},ref:K},At,me.createElement(_,{className:Cg("react-tooltip-arrow",yo.arrow,Bp.arrow,s,E&&yo.noArrow),style:{...Ce.tooltipArrowStyles,background:Q?`linear-gradient(to right bottom, transparent 50%, ${Q} 50%)`:void 0},ref:ne})):null},p8=({content:t})=>me.createElement("span",{dangerouslySetInnerHTML:{__html:t}}),m8=me.forwardRef(({id:t,anchorId:e,anchorSelect:n,content:s,html:r,render:i,className:a,classNameArrow:l,variant:u="dark",place:d="top",offset:f=10,wrapper:p="div",children:h=null,events:_=["hover"],openOnClick:C=!1,positionStrategy:j="absolute",middlewares:b,delayShow:S=0,delayHide:E=0,float:y=!1,hidden:x=!1,noArrow:P=!1,clickable:O=!1,closeOnEsc:v=!1,closeOnScroll:g=!1,closeOnResize:N=!1,openEvents:w,closeEvents:A,globalCloseEvents:T,imperativeModeOnly:I=!1,style:L,position:V,isOpen:M,defaultIsOpen:U=!1,disableStyleInjection:F=!1,border:B,opacity:q,arrowColor:Y,setIsOpen:ee,afterShow:z,afterHide:Q,role:G="tooltip"},W)=>{const[K,ne]=D.useState(s),[oe,ae]=D.useState(r),[de,Ce]=D.useState(d),[St,Ie]=D.useState(u),[mt,re]=D.useState(f),[fe,pe]=D.useState(S),[zt,Kt]=D.useState(E),[Yt,Es]=D.useState(y),[ar,is]=D.useState(x),[Pn,Je]=D.useState(p),[He,Rn]=D.useState(_),[lr,ks]=D.useState(j),[ni,bt]=D.useState(null),[Ge,si]=D.useState(null),js=D.useRef(F),{anchorRefs:cr,activeAnchor:ri}=aj(t),os=Xe=>Xe==null?void 0:Xe.getAttributeNames().reduce((dt,le)=>{var ge;return le.startsWith("data-tooltip-")&&(dt[le.replace(/^data-tooltip-/,"")]=(ge=Xe==null?void 0:Xe.getAttribute(le))!==null&&ge!==void 0?ge:null),dt},{}),Is=Xe=>{const dt={place:le=>{var ge;Ce((ge=le)!==null&&ge!==void 0?ge:d)},content:le=>{ne(le??s)},html:le=>{ae(le??r)},variant:le=>{var ge;Ie((ge=le)!==null&&ge!==void 0?ge:u)},offset:le=>{re(le===null?f:Number(le))},wrapper:le=>{var ge;Je((ge=le)!==null&&ge!==void 0?ge:p)},events:le=>{const ge=le==null?void 0:le.split(" ");Rn(ge??_)},"position-strategy":le=>{var ge;ks((ge=le)!==null&&ge!==void 0?ge:j)},"delay-show":le=>{pe(le===null?S:Number(le))},"delay-hide":le=>{Kt(le===null?E:Number(le))},float:le=>{Es(le===null?y:le==="true")},hidden:le=>{is(le===null?x:le==="true")},"class-name":le=>{bt(le)}};Object.values(dt).forEach(le=>le(null)),Object.entries(Xe).forEach(([le,ge])=>{var At;(At=dt[le])===null||At===void 0||At.call(dt,ge)})};D.useEffect(()=>{ne(s)},[s]),D.useEffect(()=>{ae(r)},[r]),D.useEffect(()=>{Ce(d)},[d]),D.useEffect(()=>{Ie(u)},[u]),D.useEffect(()=>{re(f)},[f]),D.useEffect(()=>{pe(S)},[S]),D.useEffect(()=>{Kt(E)},[E]),D.useEffect(()=>{Es(y)},[y]),D.useEffect(()=>{is(x)},[x]),D.useEffect(()=>{ks(j)},[j]),D.useEffect(()=>{js.current!==F&&console.warn("[react-tooltip] Do not change `disableStyleInjection` dynamically.")},[F]),D.useEffect(()=>{typeof window<"u"&&window.dispatchEvent(new CustomEvent("react-tooltip-inject-styles",{detail:{disableCore:F==="core",disableBase:F}}))},[]),D.useEffect(()=>{var Xe;const dt=new Set(cr);let le=n;if(!le&&t&&(le=`[data-tooltip-id='${t}']`),le)try{document.querySelectorAll(le).forEach(ie=>{dt.add({current:ie})})}catch{console.warn(`[react-tooltip] "${le}" is not a valid CSS selector`)}const ge=document.querySelector(`[id='${e}']`);if(ge&&dt.add({current:ge}),!dt.size)return()=>null;const At=(Xe=Ge??ge)!==null&&Xe!==void 0?Xe:ri.current,un=new MutationObserver(ie=>{ie.forEach(he=>{var qe;if(!At||he.type!=="attributes"||!(!((qe=he.attributeName)===null||qe===void 0)&&qe.startsWith("data-tooltip-")))return;const Ze=os(At);Is(Ze)})}),te={attributes:!0,childList:!1,subtree:!1};if(At){const ie=os(At);Is(ie),un.observe(At,te)}return()=>{un.disconnect()}},[cr,ri,Ge,e,n]),D.useEffect(()=>{L!=null&&L.border&&console.warn("[react-tooltip] Do not set `style.border`. Use `border` prop instead."),B&&!TS("border",`${B}`)&&console.warn(`[react-tooltip] "${B}" is not a valid \`border\`.`),L!=null&&L.opacity&&console.warn("[react-tooltip] Do not set `style.opacity`. Use `opacity` prop instead."),q&&!TS("opacity",`${q}`)&&console.warn(`[react-tooltip] "${q}" is not a valid \`opacity\`.`)},[]);let ur=h;const On=D.useRef(null);if(i){const Xe=i({content:(Ge==null?void 0:Ge.getAttribute("data-tooltip-content"))||K||null,activeAnchor:Ge});ur=Xe?me.createElement("div",{ref:On,className:"react-tooltip-content-wrapper"},Xe):null}else K&&(ur=K);oe&&(ur=me.createElement(p8,{content:oe}));const dr={forwardRef:W,id:t,anchorId:e,anchorSelect:n,className:Cg(a,ni),classNameArrow:l,content:ur,contentWrapperRef:On,place:de,variant:St,offset:mt,wrapper:Pn,events:He,openOnClick:C,positionStrategy:lr,middlewares:b,delayShow:fe,delayHide:zt,float:Yt,hidden:ar,noArrow:P,clickable:O,closeOnEsc:v,closeOnScroll:g,closeOnResize:N,openEvents:w,closeEvents:A,globalCloseEvents:T,imperativeModeOnly:I,style:L,position:V,isOpen:M,defaultIsOpen:U,border:B,opacity:q,arrowColor:Y,setIsOpen:ee,afterShow:z,afterHide:Q,activeAnchor:Ge,setActiveAnchor:Xe=>si(Xe),role:G};return me.createElement(f8,{...dr})});typeof window<"u"&&window.addEventListener("react-tooltip-inject-styles",t=>{t.detail.disableCore||jS({css:":root{--rt-color-white:#fff;--rt-color-dark:#222;--rt-color-success:#8dc572;--rt-color-error:#be6464;--rt-color-warning:#f0ad4e;--rt-color-info:#337ab7;--rt-opacity:0.9;--rt-transition-show-delay:0.15s;--rt-transition-closing-delay:0.15s}.core-styles-module_tooltip__3vRRp{position:absolute;top:0;left:0;pointer-events:none;opacity:0;will-change:opacity}.core-styles-module_fixed__pcSol{position:fixed}.core-styles-module_arrow__cvMwQ{position:absolute;background:inherit}.core-styles-module_noArrow__xock6{display:none}.core-styles-module_clickable__ZuTTB{pointer-events:auto}.core-styles-module_show__Nt9eE{opacity:var(--rt-opacity);transition:opacity var(--rt-transition-show-delay)ease-out}.core-styles-module_closing__sGnxF{opacity:0;transition:opacity var(--rt-transition-closing-delay)ease-in}",type:"core"}),t.detail.disableBase||jS({css:`
.styles-module_tooltip__mnnfp{padding:8px 16px;border-radius:3px;font-size:90%;width:max-content}.styles-module_arrow__K0L3T{width:8px;height:8px}[class*='react-tooltip__place-top']>.styles-module_arrow__K0L3T{transform:rotate(45deg)}[class*='react-tooltip__place-right']>.styles-module_arrow__K0L3T{transform:rotate(135deg)}[class*='react-tooltip__place-bottom']>.styles-module_arrow__K0L3T{transform:rotate(225deg)}[class*='react-tooltip__place-left']>.styles-module_arrow__K0L3T{transform:rotate(315deg)}.styles-module_dark__xNqje{background:var(--rt-color-dark);color:var(--rt-color-white)}.styles-module_light__Z6W-X{background-color:var(--rt-color-white);color:var(--rt-color-dark)}.styles-module_success__A2AKt{background-color:var(--rt-color-success);color:var(--rt-color-white)}.styles-module_warning__SCK0X{background-color:var(--rt-color-warning);color:var(--rt-color-white)}.styles-module_error__JvumD{background-color:var(--rt-color-error);color:var(--rt-color-white)}.styles-module_info__BWdHW{background-color:var(--rt-color-info);color:var(--rt-color-white)}`,type:"base"})});const yc=({status:t,type:e="info",tooltip:n,id:s,children:r})=>{const i=`status-indicator status-${e} ${t?"active":"inactive"}`;return o.jsxs(o.Fragment,{children:[o.jsx("span",{className:i,"data-tooltip-id":s,"data-tooltip-content":n,children:r}),n&&o.jsx(m8,{id:s})]})},g8=({onboarding:t,clientId:e})=>{const n=`onboarding-${e}`;if(t.completed)return o.jsx(yc,{status:!0,type:"success",tooltip:"Onboarding completed",id:n,children:""});const s=t.step?`Step ${t.step}`:"Not started";return o.jsx(yc,{status:!1,type:"error",tooltip:`Onboarding incomplete - ${s}`,id:n,children:""})},y8=({subscription:t,clientId:e})=>{const n=`subscription-${e}`,r=(()=>{switch(t.status){case"active":return{emoji:"",type:"success",text:"Active",tooltip:`Active - ${t.planName||"Standard"} (${t.interval||"monthly"})`};case"trial":return{emoji:"",type:"warning",text:"Trial",tooltip:`Trial period - ${t.planName||"Standard"}`};case"expired":return{emoji:"",type:"error",text:"Expired",tooltip:"Subscription expired"};case"none":default:return{emoji:"",type:"error",text:"None",tooltip:"No subscription"}}})();return o.jsx(yc,{status:t.status==="active"||t.status==="trial",type:r.type,tooltip:r.tooltip,id:n,children:o.jsxs("span",{className:"status-text",children:[o.jsx("span",{className:"status-emoji",children:r.emoji}),o.jsx("span",{className:"status-label",children:r.text})]})})},OS=({platform:t,connected:e,clientId:n})=>{const s=`${t}-${n}`,r=t.charAt(0).toUpperCase()+t.slice(1);return e?o.jsx(yc,{status:!0,type:"success",tooltip:`${r} connected`,id:s,children:""}):o.jsx(yc,{status:!1,type:"error",tooltip:`${r} not connected`,id:s,children:""})},v8=()=>{var A,T,I,L,V,M,U,F,B,q,Y,ee;const[t,e]=D.useState(""),[n,s]=D.useState(""),[r,i]=D.useState(!1),[a,l]=D.useState([]),{data:u,refetch:d}=UN(),{data:f,refetch:p}=FN(),{data:h,isLoading:_,refetch:C}=cR(),[j,{isLoading:b}]=aR(),[S,{isLoading:E}]=lR(),y=((A=u==null?void 0:u.data)==null?void 0:A.filter(z=>z.role_id==="3"))||[],x=((T=f==null?void 0:f.data)==null?void 0:T.filter(z=>z.active))||[],P=()=>{let z=(h==null?void 0:h.data)||[];return a.forEach(Q=>{switch(Q){case"onboarding_complete":z=z.filter(G=>{var W,K;return((K=(W=G.progress)==null?void 0:W.onboarding)==null?void 0:K.completed)===!0});break;case"onboarding_incomplete":z=z.filter(G=>{var W,K;return((K=(W=G.progress)==null?void 0:W.onboarding)==null?void 0:K.completed)===!1});break;case"subscription_active":z=z.filter(G=>{var W,K,ne,oe;return((K=(W=G.progress)==null?void 0:W.subscription)==null?void 0:K.status)==="active"||((oe=(ne=G.progress)==null?void 0:ne.subscription)==null?void 0:oe.status)==="trial"});break;case"subscription_expired":z=z.filter(G=>{var W,K,ne,oe;return((K=(W=G.progress)==null?void 0:W.subscription)==null?void 0:K.status)==="expired"||((oe=(ne=G.progress)==null?void 0:ne.subscription)==null?void 0:oe.status)==="none"});break;case"amazon_connected":z=z.filter(G=>{var W,K;return((K=(W=G.progress)==null?void 0:W.integrations)==null?void 0:K.amazon)===!0});break;case"amazon_disconnected":z=z.filter(G=>{var W,K;return((K=(W=G.progress)==null?void 0:W.integrations)==null?void 0:K.amazon)===!1});break;case"shopify_connected":z=z.filter(G=>{var W,K;return((K=(W=G.progress)==null?void 0:W.integrations)==null?void 0:K.shopify)===!0});break;case"shopify_disconnected":z=z.filter(G=>{var W,K;return((K=(W=G.progress)==null?void 0:W.integrations)==null?void 0:K.shopify)===!1});break;case"unassigned":z=z.filter(G=>!G.assignedStaff);break}}),z},O=z=>{a.includes(z)?l(a.filter(Q=>Q!==z)):l([...a,z])},v=P(),g={onboarding_complete:((I=h==null?void 0:h.data)==null?void 0:I.filter(z=>{var Q,G;return((G=(Q=z.progress)==null?void 0:Q.onboarding)==null?void 0:G.completed)===!0}).length)||0,onboarding_incomplete:((L=h==null?void 0:h.data)==null?void 0:L.filter(z=>{var Q,G;return((G=(Q=z.progress)==null?void 0:Q.onboarding)==null?void 0:G.completed)===!1}).length)||0,subscription_active:((V=h==null?void 0:h.data)==null?void 0:V.filter(z=>{var Q,G,W,K;return((G=(Q=z.progress)==null?void 0:Q.subscription)==null?void 0:G.status)==="active"||((K=(W=z.progress)==null?void 0:W.subscription)==null?void 0:K.status)==="trial"}).length)||0,subscription_expired:((M=h==null?void 0:h.data)==null?void 0:M.filter(z=>{var Q,G,W,K;return((G=(Q=z.progress)==null?void 0:Q.subscription)==null?void 0:G.status)==="expired"||((K=(W=z.progress)==null?void 0:W.subscription)==null?void 0:K.status)==="none"}).length)||0,amazon_connected:((U=h==null?void 0:h.data)==null?void 0:U.filter(z=>{var Q,G;return((G=(Q=z.progress)==null?void 0:Q.integrations)==null?void 0:G.amazon)===!0}).length)||0,amazon_disconnected:((F=h==null?void 0:h.data)==null?void 0:F.filter(z=>{var Q,G;return((G=(Q=z.progress)==null?void 0:Q.integrations)==null?void 0:G.amazon)===!1}).length)||0,shopify_connected:((B=h==null?void 0:h.data)==null?void 0:B.filter(z=>{var Q,G;return((G=(Q=z.progress)==null?void 0:Q.integrations)==null?void 0:G.shopify)===!0}).length)||0,shopify_disconnected:((q=h==null?void 0:h.data)==null?void 0:q.filter(z=>{var Q,G;return((G=(Q=z.progress)==null?void 0:Q.integrations)==null?void 0:G.shopify)===!1}).length)||0,unassigned:((Y=h==null?void 0:h.data)==null?void 0:Y.filter(z=>!z.assignedStaff).length)||0},N=async z=>{var Q;if(z.preventDefault(),!t||!n){alert("Please select both client and staff member");return}try{(await j({clientId:t,staffId:n}).unwrap()).success&&(alert("Client assigned successfully!"),e(""),s(""),i(!1),C())}catch(G){alert(((Q=G.data)==null?void 0:Q.message)||"Failed to assign client")}},w=async(z,Q,G,W)=>{if(window.confirm(`Are you sure you want to unassign ${G} from ${W}?`))try{(await S({clientId:z,staffId:Q}).unwrap()).success&&(alert("Client unassigned successfully"),C())}catch{alert("Failed to unassign client")}};return o.jsxs("div",{className:"client-assignment",children:[o.jsxs("div",{className:"assignment-header",children:[o.jsx("h2",{children:"Client Assignment Management"}),o.jsx("button",{className:"btn-primary",onClick:()=>i(!r),children:r?"Cancel":"Assign Client"})]}),r&&o.jsxs("div",{className:"assign-form-card",children:[o.jsx("h3",{children:"Assign Client to Staff"}),o.jsxs("form",{onSubmit:N,children:[o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"client",children:"Select Client *"}),o.jsxs("select",{id:"client",value:t,onChange:z=>e(z.target.value),className:"form-select",required:!0,children:[o.jsx("option",{value:"",children:"-- Select Client --"}),y.map(z=>o.jsxs("option",{value:z._id,children:[z.first_name," ",z.last_name," (",z.email,")"]},z._id))]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"staff",children:"Select Staff Member *"}),o.jsxs("select",{id:"staff",value:n,onChange:z=>s(z.target.value),className:"form-select",required:!0,children:[o.jsx("option",{value:"",children:"-- Select Staff --"}),x.map(z=>o.jsxs("option",{value:z._id,children:[z.first_name," ",z.last_name," (",z.email,")"]},z._id))]})]})]}),o.jsx("button",{type:"submit",className:"btn-submit",disabled:b,children:b?"Assigning...":"Assign Client"})]})]}),o.jsxs("div",{className:"filter-pills-container",children:[o.jsx("h3",{children:"Quick Filters"}),o.jsxs("div",{className:"filter-pills",children:[o.jsxs("div",{className:"filter-group",children:[o.jsx("span",{className:"filter-group-label",children:"Onboarding:"}),o.jsxs("button",{className:`filter-pill ${a.includes("onboarding_complete")?"active":""}`,onClick:()=>O("onboarding_complete"),children:[" Complete ",o.jsx("span",{className:"count",children:g.onboarding_complete})]}),o.jsxs("button",{className:`filter-pill ${a.includes("onboarding_incomplete")?"active":""}`,onClick:()=>O("onboarding_incomplete"),children:[" Incomplete ",o.jsx("span",{className:"count",children:g.onboarding_incomplete})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("span",{className:"filter-group-label",children:"Subscription:"}),o.jsxs("button",{className:`filter-pill ${a.includes("subscription_active")?"active":""}`,onClick:()=>O("subscription_active"),children:[" Active/Trial ",o.jsx("span",{className:"count",children:g.subscription_active})]}),o.jsxs("button",{className:`filter-pill ${a.includes("subscription_expired")?"active":""}`,onClick:()=>O("subscription_expired"),children:[" Expired/None ",o.jsx("span",{className:"count",children:g.subscription_expired})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("span",{className:"filter-group-label",children:"Amazon:"}),o.jsxs("button",{className:`filter-pill ${a.includes("amazon_connected")?"active":""}`,onClick:()=>O("amazon_connected"),children:[" Connected ",o.jsx("span",{className:"count",children:g.amazon_connected})]}),o.jsxs("button",{className:`filter-pill ${a.includes("amazon_disconnected")?"active":""}`,onClick:()=>O("amazon_disconnected"),children:[" Not Connected ",o.jsx("span",{className:"count",children:g.amazon_disconnected})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("span",{className:"filter-group-label",children:"Shopify:"}),o.jsxs("button",{className:`filter-pill ${a.includes("shopify_connected")?"active":""}`,onClick:()=>O("shopify_connected"),children:[" Connected ",o.jsx("span",{className:"count",children:g.shopify_connected})]}),o.jsxs("button",{className:`filter-pill ${a.includes("shopify_disconnected")?"active":""}`,onClick:()=>O("shopify_disconnected"),children:[" Not Connected ",o.jsx("span",{className:"count",children:g.shopify_disconnected})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("span",{className:"filter-group-label",children:"Assignment:"}),o.jsxs("button",{className:`filter-pill ${a.includes("unassigned")?"active":""}`,onClick:()=>O("unassigned"),children:[" Unassigned ",o.jsx("span",{className:"count",children:g.unassigned})]})]}),a.length>0&&o.jsx("button",{className:"clear-filters-btn",onClick:()=>l([]),children:"Clear Filters"})]})]}),o.jsxs("div",{className:"assignments-list",children:[o.jsxs("h3",{children:["Current Assignments",a.length>0&&o.jsxs("span",{className:"filtered-count",children:["(Showing ",v.length," of ",((ee=h==null?void 0:h.data)==null?void 0:ee.length)||0,")"]})]}),_?o.jsx("div",{className:"loading",children:"Loading assignments..."}):o.jsx("div",{className:"assignments-table-container",children:o.jsxs("table",{className:"assignments-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Client Name"}),o.jsx("th",{children:"Client Email"}),o.jsx("th",{children:"Phone"}),o.jsx("th",{children:"Onboarding"}),o.jsx("th",{children:"Subscription"}),o.jsx("th",{children:"Amazon"}),o.jsx("th",{children:"Shopify"}),o.jsx("th",{children:"Assigned Staff"}),o.jsx("th",{children:"Staff Email"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:(v==null?void 0:v.length)>0?v.map(z=>{var Q,G,W,K,ne,oe,ae;return o.jsxs("tr",{children:[o.jsxs("td",{children:[z.first_name," ",z.last_name]}),o.jsx("td",{children:z.email}),o.jsx("td",{children:z.phoneNumber||"N/A"}),o.jsx("td",{children:o.jsx(g8,{onboarding:((Q=z.progress)==null?void 0:Q.onboarding)||{},clientId:z._id})}),o.jsx("td",{children:o.jsx(y8,{subscription:((G=z.progress)==null?void 0:G.subscription)||{},clientId:z._id})}),o.jsx("td",{children:o.jsx(OS,{platform:"amazon",connected:((K=(W=z.progress)==null?void 0:W.integrations)==null?void 0:K.amazon)||!1,clientId:z._id})}),o.jsx("td",{children:o.jsx(OS,{platform:"shopify",connected:((oe=(ne=z.progress)==null?void 0:ne.integrations)==null?void 0:oe.shopify)||!1,clientId:z._id})}),o.jsx("td",{children:z.assignedStaff?o.jsx("span",{className:"staff-badge",children:z.assignedStaff.staffName}):o.jsx("span",{className:"unassigned-badge",children:"Unassigned"})}),o.jsx("td",{children:((ae=z.assignedStaff)==null?void 0:ae.staffEmail)||"-"}),o.jsx("td",{children:o.jsx("span",{className:`status-badge ${z.active?"active":"inactive"}`,children:z.active?"Active":"Inactive"})}),o.jsx("td",{children:z.assignedStaff?o.jsx("button",{className:"btn-danger-small",onClick:()=>w(z._id,z.assignedStaff.staffId,`${z.first_name} ${z.last_name}`,z.assignedStaff.staffName),disabled:E,children:"Unassign"}):o.jsx("button",{className:"btn-primary-small",onClick:()=>{e(z._id),i(!0)},children:"Assign"})})]},z._id)}):o.jsx("tr",{children:o.jsx("td",{colSpan:"11",className:"text-center",children:a.length>0?"No clients match the selected filters":"No clients found"})})})]})})]}),o.jsxs("div",{className:"staff-overview",children:[o.jsx("h3",{children:"Staff Assignment Overview"}),o.jsx("div",{className:"staff-cards",children:x.map(z=>{var G;const Q=((G=h==null?void 0:h.data)==null?void 0:G.filter(W=>{var K;return((K=W.assignedStaff)==null?void 0:K.staffId)===z._id}))||[];return o.jsxs("div",{className:"staff-card",children:[o.jsxs("div",{className:"staff-card-header",children:[o.jsxs("h4",{children:[z.first_name," ",z.last_name]}),o.jsxs("span",{className:"client-count-badge",children:[Q.length," clients"]})]}),o.jsxs("div",{className:"staff-card-body",children:[o.jsx("p",{className:"staff-email",children:z.email}),Q.length>0?o.jsxs("div",{className:"assigned-clients-list",children:[o.jsx("strong",{children:"Assigned Clients:"}),o.jsxs("ul",{children:[Q.slice(0,3).map(W=>o.jsxs("li",{children:[W.first_name," ",W.last_name]},W._id)),Q.length>3&&o.jsxs("li",{className:"more-clients",children:["+",Q.length-3," more..."]})]})]}):o.jsx("p",{className:"no-clients",children:"No clients assigned"})]})]},z._id)})})]}),o.jsx("style",{jsx:!0,children:`
        .client-assignment {
          padding: 20px;
        }
        
        .assignment-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 30px;
        }
        
        .assign-form-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
          margin-bottom: 30px;
        }
        
        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 20px;
        }
        
        .form-group {
          display: flex;
          flex-direction: column;
        }
        
        .form-group label {
          margin-bottom: 5px;
          font-weight: 500;
        }
        
        .form-select {
          padding: 8px 12px;
          border: 1px solid #ddd;
          border-radius: 4px;
          font-size: 14px;
        }
        
        .assignments-table {
          width: 100%;
          border-collapse: collapse;
        }
        
        .assignments-table th,
        .assignments-table td {
          padding: 12px;
          text-align: left;
          border-bottom: 1px solid #eee;
        }
        
        .assignments-table th {
          background: #f5f5f5;
          font-weight: 600;
        }
        
        .staff-badge {
          background: #4CAF50;
          color: white;
          padding: 4px 8px;
          border-radius: 4px;
          font-size: 12px;
        }
        
        .unassigned-badge {
          background: #ff9800;
          color: white;
          padding: 4px 8px;
          border-radius: 4px;
          font-size: 12px;
        }
        
        .btn-danger-small,
        .btn-primary-small {
          padding: 4px 12px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 12px;
        }
        
        .btn-danger-small {
          background: #f44336;
          color: white;
        }
        
        .btn-primary-small {
          background: #2196F3;
          color: white;
        }
        
        .staff-overview {
          margin-top: 40px;
        }
        
        .staff-cards {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
          gap: 20px;
          margin-top: 20px;
        }
        
        .staff-card {
          background: white;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
          overflow: hidden;
        }
        
        .staff-card-header {
          background: #f5f5f5;
          padding: 15px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        
        .staff-card-header h4 {
          margin: 0;
          font-size: 16px;
        }
        
        .client-count-badge {
          background: #2196F3;
          color: white;
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 12px;
        }
        
        .staff-card-body {
          padding: 15px;
        }
        
        .staff-email {
          color: #666;
          font-size: 14px;
          margin-bottom: 10px;
        }
        
        .assigned-clients-list ul {
          list-style: none;
          padding: 0;
          margin: 5px 0 0 0;
        }
        
        .assigned-clients-list li {
          padding: 3px 0;
          font-size: 14px;
        }
        
        .more-clients {
          color: #2196F3;
          font-style: italic;
        }
        
        .no-clients {
          color: #999;
          font-style: italic;
          font-size: 14px;
        }
        
        /* Filter Pills Styles */
        .filter-pills-container {
          background: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
          margin-bottom: 30px;
        }
        
        .filter-pills {
          display: flex;
          flex-wrap: wrap;
          gap: 15px;
          margin-top: 15px;
        }
        
        .filter-group {
          display: flex;
          align-items: center;
          gap: 8px;
        }
        
        .filter-group-label {
          font-size: 13px;
          color: #666;
          font-weight: 500;
        }
        
        .filter-pill {
          display: inline-flex;
          align-items: center;
          padding: 6px 12px;
          border-radius: 20px;
          font-size: 13px;
          font-weight: 500;
          background-color: #f8f9fa;
          border: 1px solid #dee2e6;
          cursor: pointer;
          transition: all 0.2s ease;
        }
        
        .filter-pill:hover {
          background-color: #e9ecef;
          border-color: #adb5bd;
        }
        
        .filter-pill.active {
          background-color: #007bff;
          color: white;
          border-color: #007bff;
        }
        
        .filter-pill .count {
          margin-left: 6px;
          padding: 2px 6px;
          background-color: rgba(0, 0, 0, 0.1);
          border-radius: 10px;
          font-size: 11px;
        }
        
        .filter-pill.active .count {
          background-color: rgba(255, 255, 255, 0.2);
        }
        
        .clear-filters-btn {
          padding: 6px 12px;
          border-radius: 20px;
          font-size: 13px;
          font-weight: 500;
          background-color: #dc3545;
          color: white;
          border: none;
          cursor: pointer;
          transition: all 0.2s ease;
        }
        
        .clear-filters-btn:hover {
          background-color: #c82333;
        }
        
        .filtered-count {
          font-size: 14px;
          color: #666;
          font-weight: normal;
          margin-left: 10px;
        }
      `})]})};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),x8=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),DS=t=>{const e=x8(t);return e.charAt(0).toUpperCase()+e.slice(1)},lj=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),w8=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var S8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=D.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:a,...l},u)=>D.createElement("svg",{ref:u,...S8,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:lj("lucide",r),...!i&&!w8(l)&&{"aria-hidden":"true"},...l},[...a.map(([d,f])=>D.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(t,e)=>{const n=D.forwardRef(({className:s,...r},i)=>D.createElement(b8,{ref:i,iconNode:e,className:lj(`lucide-${_8(DS(t))}`,`lucide-${t}`,s),...r}));return n.displayName=DS(t),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],C8=je("arrow-left",N8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],cd=je("bell",E8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],j8=je("calendar",k8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],T8=je("check-check",I8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vh=je("check",A8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Di=je("circle-alert",P8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],cj=je("circle-check-big",R8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],D8=je("circle-x",O8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],M8=je("clock",L8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],uj=je("credit-card",U8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],dj=je("dollar-sign",F8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],B8=je("download",z8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],V8=je("external-link",$8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ud=je("file-text",q8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],H8=je("funnel",W8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],LS=je("info",G8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],dd=je("loader-circle",Q8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],MS=je("lock",K8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],J8=je("pen",Y8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Z8=je("plus",X8);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Il=je("refresh-cw",e7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],n7=je("save",t7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],r7=je("settings",s7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],_h=je("shield",i7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],a7=je("shopping-bag",o7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ol=je("star",l7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],u7=je("store",c7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],hj=je("trash-2",d7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],f7=je("user",h7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],m7=je("users",p7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fj=je("x",g7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],v7=je("zap",y7),_7=()=>{const[t,e]=D.useState(""),[n,s]=D.useState("shopify"),{data:r,isLoading:i,error:a}=BR(),{data:l,isLoading:u,error:d}=$R(t,{skip:!t}),[f,{data:p,isLoading:h}]=JR(),[_,{data:C,isLoading:j}]=AR(),[b,{data:S,isLoading:E}]=lO(),y=(r==null?void 0:r.data)||[],x=l==null?void 0:l.data,P=a||d,O=L=>{const V=L.target.value;e(V)},v=()=>{t&&f({clientId:t})},g=()=>{t&&_({clientId:t})},N=()=>{t&&b({clientId:t})},w=L=>L.connected?o.jsxs("div",{children:[o.jsxs("span",{className:"badge bg-success mb-2",children:[o.jsx(cj,{size:14,className:"me-1"}),"Connected"]}),o.jsxs("div",{className:"small text-muted mt-2",children:[o.jsx("strong",{children:"Last Sync:"})," ",new Date(L.lastSync).toLocaleString()]}),o.jsxs("div",{className:"small text-muted",children:[o.jsx("strong",{children:"Connected Since:"})," ",new Date(L.connectedSince).toLocaleString()]})]}):o.jsxs("span",{className:"badge bg-secondary",children:[o.jsx(D8,{size:14,className:"me-1"}),"Not Connected"]}),A=()=>x?o.jsx("div",{className:"card mb-4",children:o.jsxs("div",{className:"card-body",children:[o.jsxs("h5",{className:"card-title",children:[o.jsx(f7,{size:20,className:"me-2"}),"Client Information"]}),o.jsxs("div",{className:"row",children:[o.jsxs("div",{className:"col-md-6 mb-3",children:[o.jsx("label",{className:"text-muted small",children:"Name"}),o.jsx("div",{className:"fw-semibold",children:x.client.name||"N/A"})]}),o.jsxs("div",{className:"col-md-6 mb-3",children:[o.jsx("label",{className:"text-muted small",children:"Email"}),o.jsx("div",{className:"fw-semibold",children:x.client.email})]}),o.jsxs("div",{className:"col-md-6 mb-3",children:[o.jsx("label",{className:"text-muted small",children:"Business Name"}),o.jsx("div",{className:"fw-semibold",children:x.client.businessName||"N/A"})]}),o.jsxs("div",{className:"col-md-6 mb-3",children:[o.jsx("label",{className:"text-muted small",children:"Phone"}),o.jsx("div",{className:"fw-semibold",children:x.client.phone||"N/A"})]}),o.jsxs("div",{className:"col-md-6 mb-3",children:[o.jsx("label",{className:"text-muted small",children:"Status"}),o.jsx("div",{children:o.jsx("span",{className:`badge ${x.client.active?"bg-success":"bg-secondary"}`,children:x.client.active?"Active":"Inactive"})})]}),o.jsxs("div",{className:"col-md-6 mb-3",children:[o.jsx("label",{className:"text-muted small",children:"Member Since"}),o.jsx("div",{className:"fw-semibold",children:new Date(x.client.createdAt).toLocaleDateString()})]})]})]})}):null,T=()=>x?o.jsxs("div",{className:"row mb-4",children:[o.jsx("div",{className:"col-md-4",children:o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body",children:[o.jsxs("h6",{className:"card-title",children:[o.jsx(u7,{size:20,className:"me-2"}),"Shopify"]}),w(x.integrations.shopify),x.integrations.shopify.connected&&o.jsxs("div",{className:"mt-3",children:[o.jsxs("div",{className:"small",children:[o.jsx("strong",{children:"Store:"})," ",x.integrations.shopify.shopName]}),o.jsxs("div",{className:"small",children:[o.jsx("strong",{children:"Domain:"})," ",x.integrations.shopify.shopDomain]}),o.jsx("button",{className:"btn btn-sm btn-primary mt-2",onClick:v,disabled:h,children:h?o.jsxs(o.Fragment,{children:[o.jsx(dd,{size:14,className:"spinner-border spinner-border-sm me-2"}),"Loading..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Il,{size:14,className:"me-2"}),"Load Orders"]})})]})]})})}),o.jsx("div",{className:"col-md-4",children:o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body",children:[o.jsxs("h6",{className:"card-title",children:[o.jsx(a7,{size:20,className:"me-2"}),"Amazon"]}),w(x.integrations.amazon),x.integrations.amazon.connected&&o.jsxs("div",{className:"mt-3",children:[o.jsxs("div",{className:"small",children:[o.jsx("strong",{children:"Seller:"})," ",x.integrations.amazon.sellerName]}),o.jsxs("div",{className:"small",children:[o.jsx("strong",{children:"ID:"})," ",x.integrations.amazon.sellerId]}),o.jsx("button",{className:"btn btn-sm btn-primary mt-2",onClick:g,disabled:j,children:j?o.jsxs(o.Fragment,{children:[o.jsx(dd,{size:14,className:"spinner-border spinner-border-sm me-2"}),"Loading..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Il,{size:14,className:"me-2"}),"Load Orders"]})})]})]})})}),o.jsx("div",{className:"col-md-4",children:o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body",children:[o.jsxs("h6",{className:"card-title",children:[o.jsx(dj,{size:20,className:"me-2"}),"QuickBooks"]}),w(x.integrations.quickbooks),x.integrations.quickbooks.connected&&o.jsxs("div",{className:"mt-3",children:[o.jsxs("div",{className:"small",children:[o.jsx("strong",{children:"Company:"})," ",x.integrations.quickbooks.companyName]}),o.jsxs("div",{className:"small",children:[o.jsx("strong",{children:"ID:"})," ",x.integrations.quickbooks.companyId]}),o.jsx("button",{className:"btn btn-sm btn-primary mt-2",onClick:N,disabled:E,children:E?o.jsxs(o.Fragment,{children:[o.jsx(dd,{size:14,className:"spinner-border spinner-border-sm me-2"}),"Loading..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Il,{size:14,className:"me-2"}),"Load Data"]})})]})]})})})]}):null,I=()=>{var L,V,M,U;return o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsxs("ul",{className:"nav nav-tabs card-header-tabs",children:[o.jsx("li",{className:"nav-item",children:o.jsx("button",{className:`nav-link ${n==="shopify"?"active":""}`,onClick:()=>s("shopify"),children:"Shopify Orders"})}),o.jsx("li",{className:"nav-item",children:o.jsx("button",{className:`nav-link ${n==="amazon"?"active":""}`,onClick:()=>s("amazon"),children:"Amazon Orders"})}),o.jsx("li",{className:"nav-item",children:o.jsx("button",{className:`nav-link ${n==="quickbooks"?"active":""}`,onClick:()=>s("quickbooks"),children:"QuickBooks Data"})})]})}),o.jsxs("div",{className:"card-body",children:[n==="shopify"&&o.jsxs("div",{children:[o.jsx("h6",{children:"Shopify Orders"}),p?o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"text-muted",children:["Total Orders: ",((V=(L=p.data)==null?void 0:L.orders)==null?void 0:V.length)||0]}),o.jsx("pre",{className:"bg-light p-3",style:{maxHeight:"400px",overflow:"auto"},children:JSON.stringify(p.data,null,2)})]}):o.jsx("p",{className:"text-muted",children:'Click "Load Orders" to fetch Shopify data'})]}),n==="amazon"&&o.jsxs("div",{children:[o.jsx("h6",{children:"Amazon Orders"}),C?o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"text-muted",children:["Total Orders: ",((U=(M=C.data)==null?void 0:M.orders)==null?void 0:U.length)||0]}),o.jsx("pre",{className:"bg-light p-3",style:{maxHeight:"400px",overflow:"auto"},children:JSON.stringify(C.data,null,2)})]}):o.jsx("p",{className:"text-muted",children:'Click "Load Orders" to fetch Amazon data'})]}),n==="quickbooks"&&o.jsxs("div",{children:[o.jsx("h6",{children:"QuickBooks Data"}),S?o.jsx("pre",{className:"bg-light p-3",style:{maxHeight:"400px",overflow:"auto"},children:JSON.stringify(S.data,null,2)}):o.jsx("p",{className:"text-muted",children:'Click "Load Data" to fetch QuickBooks data'})]})]})]})};return o.jsx("div",{className:"admin-client-viewer",children:o.jsxs("div",{className:"container-fluid",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("h4",{children:"Admin Client Viewer"}),o.jsx("p",{className:"text-muted",children:"View client profiles and access their integration data"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"form-label",children:"Select Client"}),o.jsxs("select",{className:"form-select",value:t,onChange:O,disabled:i,children:[o.jsx("option",{value:"",children:"Choose a client..."}),y.map(L=>o.jsxs("option",{value:L.id,children:[L.name||L.email,L.businessName&&` - ${L.businessName}`]},L.id))]})]}),P&&o.jsx("div",{className:"alert alert-danger",role:"alert",children:(P==null?void 0:P.message)||"An error occurred"}),u&&o.jsx("div",{className:"text-center py-4",children:o.jsx("div",{className:"spinner-border",role:"status",children:o.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),!u&&x&&o.jsxs(o.Fragment,{children:[A(),T(),I()]})]})})},x7=()=>{var d,f,p,h,_;const[t,e]=D.useState("overview"),n=Ft(),s=xs(),r=Se(rr),{data:i,isLoading:a,error:l}=UN(),u=()=>{s(kc()),n("/login")};return o.jsxs("div",{className:"dashboard-container",children:[o.jsx("header",{className:"dashboard-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("h1",{children:"Admin Dashboard"}),o.jsxs("div",{className:"user-section",children:[o.jsxs("span",{className:"welcome-text",children:["Welcome, ",r==null?void 0:r.first_name," ",r==null?void 0:r.last_name,"!"]}),o.jsx("span",{className:"role-badge",children:"Super Admin"}),o.jsx("button",{onClick:u,className:"logout-button",children:"Logout"})]})]})}),o.jsx("main",{className:"dashboard-main",children:o.jsxs("div",{className:"dashboard-content",children:[o.jsxs("section",{className:"user-info-card",children:[o.jsx("h2",{children:"Admin Profile"}),o.jsxs("div",{className:"info-grid",children:[o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Name:"}),o.jsxs("span",{children:[r==null?void 0:r.first_name," ",r==null?void 0:r.last_name]})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Email:"}),o.jsx("span",{children:r==null?void 0:r.email})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Role:"}),o.jsx("span",{children:"Super Admin"})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Account Status:"}),o.jsx("span",{className:"status-active",children:"Active"})]})]})]}),o.jsxs("section",{className:"stats-section",children:[o.jsx("h2",{children:"System Overview"}),o.jsxs("div",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-number",children:((d=i==null?void 0:i.data)==null?void 0:d.filter(C=>C.role_id==="2").length)||0}),o.jsx("div",{className:"stat-label",children:"Total Staff"})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-number",children:((f=i==null?void 0:i.data)==null?void 0:f.filter(C=>C.role_id==="2"&&C.active).length)||0}),o.jsx("div",{className:"stat-label",children:"Active Staff"})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-number",children:((p=i==null?void 0:i.data)==null?void 0:p.filter(C=>C.role_id==="3").length)||0}),o.jsx("div",{className:"stat-label",children:"Total Clients"})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-number",children:((h=i==null?void 0:i.data)==null?void 0:h.filter(C=>C.active).length)||0}),o.jsx("div",{className:"stat-label",children:"Active Users"})]})]})]}),o.jsxs("section",{className:"admin-actions",children:[o.jsx("h2",{children:"Administration"}),o.jsxs("div",{className:"action-buttons",children:[o.jsx("button",{className:`action-btn ${t==="staff"?"active":""}`,onClick:()=>e("staff"),children:"Manage Staff"}),o.jsx("button",{className:`action-btn ${t==="overview"?"active":""}`,onClick:()=>e("overview"),children:"Overview"}),o.jsx("button",{className:`action-btn ${t==="users"?"active":""}`,onClick:()=>e("users"),children:"All Users"}),o.jsx("button",{className:`action-btn ${t==="assignments"?"active":""}`,onClick:()=>e("assignments"),children:"Client Assignments"}),o.jsx("button",{className:`action-btn ${t==="client-viewer"?"active":""}`,onClick:()=>e("client-viewer"),children:"Client Viewer"}),o.jsx("button",{className:"action-btn",children:"System Settings"}),o.jsx("button",{className:"action-btn",children:"Reports"})]})]}),t==="staff"&&o.jsx(d9,{}),t==="assignments"&&o.jsx(v8,{}),t==="client-viewer"&&o.jsx(_7,{}),t==="users"&&o.jsxs("section",{className:"users-section",children:[o.jsx("h2",{children:"All System Users"}),a?o.jsx("div",{className:"loading",children:"Loading users..."}):l?o.jsx("div",{className:"error-message",children:"Failed to load users"}):o.jsx("div",{className:"users-table-container",children:o.jsxs("table",{className:"users-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Name"}),o.jsx("th",{children:"Email"}),o.jsx("th",{children:"Phone"}),o.jsx("th",{children:"Role"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Created At"})]})}),o.jsx("tbody",{children:(_=i==null?void 0:i.data)==null?void 0:_.map(C=>o.jsxs("tr",{children:[o.jsxs("td",{children:[C.first_name," ",C.last_name]}),o.jsx("td",{children:C.email}),o.jsx("td",{children:C.phoneNumber||"N/A"}),o.jsx("td",{children:o.jsx("span",{className:"role-tag",children:C.role_id==="1"?"Super Admin":C.role_id==="2"?"Staff":"Client"})}),o.jsx("td",{children:o.jsx("span",{className:`status-badge ${C.active?"active":"inactive"}`,children:C.active?"Active":"Inactive"})}),o.jsx("td",{children:new Date(C.createdAt).toLocaleDateString()})]},C._id))})]})})]}),t==="overview"&&o.jsxs(o.Fragment,{children:[o.jsxs("section",{className:"recent-activity",children:[o.jsx("h2",{children:"Recent Activity"}),o.jsxs("div",{className:"activity-list",children:[o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{className:"activity-icon",children:""}),o.jsxs("div",{className:"activity-details",children:[o.jsx("p",{children:"New client registered"}),o.jsx("span",{className:"activity-time",children:"2 hours ago"})]})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{className:"activity-icon",children:""}),o.jsxs("div",{className:"activity-details",children:[o.jsx("p",{children:"Staff member added"}),o.jsx("span",{className:"activity-time",children:"5 hours ago"})]})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{className:"activity-icon",children:""}),o.jsxs("div",{className:"activity-details",children:[o.jsx("p",{children:"System backup completed"}),o.jsx("span",{className:"activity-time",children:"1 day ago"})]})]})]})]}),o.jsxs("section",{className:"system-health",children:[o.jsx("h2",{children:"System Health"}),o.jsxs("div",{className:"health-indicators",children:[o.jsxs("div",{className:"health-item",children:[o.jsx("span",{className:"health-status good",children:""}),o.jsx("span",{children:"Database: Operational"})]}),o.jsxs("div",{className:"health-item",children:[o.jsx("span",{className:"health-status good",children:""}),o.jsx("span",{children:"API: Responsive"})]}),o.jsxs("div",{className:"health-item",children:[o.jsx("span",{className:"health-status good",children:""}),o.jsx("span",{children:"Storage: 45% Used"})]})]})]})]})]})})]})},w7=()=>{var p,h,_,C,j,b,S,E,y,x,P,O;const[t,e]=D.useState("clients"),n=Ft(),s=xs(),r=Se(rr),{data:i,isLoading:a,refetch:l}=uR(),{data:u,isLoading:d}=dR(),f=()=>{s(kc()),n("/login")};return o.jsxs("div",{className:"dashboard-container",children:[o.jsx("header",{className:"dashboard-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("h1",{children:"Staff Dashboard"}),o.jsxs("div",{className:"user-section",children:[o.jsxs("span",{className:"welcome-text",children:["Welcome, ",r==null?void 0:r.first_name," ",r==null?void 0:r.last_name,"!"]}),o.jsx("span",{className:"role-badge",children:"Staff Member"}),o.jsx("button",{onClick:f,className:"logout-button",children:"Logout"})]})]})}),o.jsx("main",{className:"dashboard-main",children:o.jsxs("div",{className:"dashboard-content",children:[o.jsxs("section",{className:"user-info-card",children:[o.jsx("h2",{children:"Staff Profile"}),o.jsxs("div",{className:"info-grid",children:[o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Name:"}),o.jsxs("span",{children:[r==null?void 0:r.first_name," ",r==null?void 0:r.last_name]})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Email:"}),o.jsx("span",{children:r==null?void 0:r.email})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Phone:"}),o.jsx("span",{children:(r==null?void 0:r.phoneNumber)||"Not provided"})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Role:"}),o.jsx("span",{children:"Staff Member"})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Account Status:"}),o.jsx("span",{className:"status-active",children:"Active"})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Created By:"}),o.jsxs("span",{children:[(p=r==null?void 0:r.createdBy)==null?void 0:p.first_name," ",((h=r==null?void 0:r.createdBy)==null?void 0:h.last_name)||"System Admin"]})]})]})]}),o.jsxs("section",{className:"stats-section",children:[o.jsx("h2",{children:"Work Overview"}),o.jsxs("div",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-number",children:((C=(_=u==null?void 0:u.data)==null?void 0:_.stats)==null?void 0:C.assignedClients)||0}),o.jsx("div",{className:"stat-label",children:"Assigned Clients"})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-number",children:((b=(j=u==null?void 0:u.data)==null?void 0:j.stats)==null?void 0:b.pendingTasks)||0}),o.jsx("div",{className:"stat-label",children:"Pending Tasks"})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-number",children:((E=(S=u==null?void 0:u.data)==null?void 0:S.stats)==null?void 0:E.completedToday)||0}),o.jsx("div",{className:"stat-label",children:"Completed Today"})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-number",children:((y=i==null?void 0:i.data)==null?void 0:y.filter(v=>v.active).length)||0}),o.jsx("div",{className:"stat-label",children:"Active Clients"})]})]})]}),o.jsxs("section",{className:"staff-navigation",children:[o.jsx("h2",{children:"Quick Access"}),o.jsxs("div",{className:"action-buttons",children:[o.jsx("button",{className:`action-btn ${t==="clients"?"active":""}`,onClick:()=>e("clients"),children:"My Clients"}),o.jsx("button",{className:`action-btn ${t==="tasks"?"active":""}`,onClick:()=>e("tasks"),children:"Tasks"}),o.jsx("button",{className:`action-btn ${t==="schedule"?"active":""}`,onClick:()=>e("schedule"),children:"Schedule"}),o.jsx("button",{className:`action-btn ${t==="reports"?"active":""}`,onClick:()=>e("reports"),children:"Reports"})]})]}),t==="tasks"&&o.jsxs("section",{className:"tasks-section",children:[o.jsx("h2",{children:"My Tasks"}),o.jsx("div",{className:"task-list",children:o.jsxs("div",{className:"empty-state",children:[o.jsx("p",{children:"No tasks assigned yet."}),o.jsx("span",{children:"Tasks assigned by the admin will appear here."})]})})]}),t==="clients"&&o.jsxs("section",{className:"clients-section",children:[o.jsx("h2",{children:"My Assigned Clients"}),a?o.jsx("div",{className:"loading",children:"Loading clients..."}):((x=i==null?void 0:i.data)==null?void 0:x.length)>0?o.jsx("div",{className:"clients-table-container",children:o.jsxs("table",{className:"clients-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Name"}),o.jsx("th",{children:"Email"}),o.jsx("th",{children:"Phone"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Member Since"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:i.data.map(v=>o.jsxs("tr",{children:[o.jsxs("td",{children:[v.first_name," ",v.last_name]}),o.jsx("td",{children:v.email}),o.jsx("td",{children:v.phoneNumber||"N/A"}),o.jsx("td",{children:o.jsx("span",{className:`status-badge ${v.active?"active":"inactive"}`,children:v.active?"Active":"Inactive"})}),o.jsx("td",{children:new Date(v.createdAt).toLocaleDateString()}),o.jsx("td",{children:o.jsx("button",{className:"btn-primary-small",children:"View Details"})})]},v._id))})]})}):o.jsxs("div",{className:"empty-state",children:[o.jsx("p",{children:"No clients assigned to you yet."}),o.jsx("span",{children:"Clients assigned by the admin will appear here."})]})]}),t==="schedule"&&o.jsxs("section",{className:"schedule-section",children:[o.jsx("h2",{children:"My Schedule"}),o.jsxs("div",{className:"schedule-view",children:[o.jsx("div",{className:"schedule-header",children:o.jsxs("h3",{children:["Today - ",new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})}),o.jsx("div",{className:"schedule-content",children:o.jsx("div",{className:"empty-state",children:o.jsx("p",{children:"No scheduled items for today."})})})]})]}),t==="reports"&&o.jsxs("section",{className:"reports-section",children:[o.jsx("h2",{children:"My Reports"}),o.jsxs("div",{className:"reports-summary",children:[o.jsxs("div",{className:"report-card",children:[o.jsx("h3",{children:"Weekly Summary"}),o.jsxs("div",{className:"report-stats",children:[o.jsxs("div",{className:"report-item",children:[o.jsx("span",{className:"report-label",children:"Tasks Completed:"}),o.jsx("span",{className:"report-value",children:"0"})]}),o.jsxs("div",{className:"report-item",children:[o.jsx("span",{className:"report-label",children:"Clients Served:"}),o.jsx("span",{className:"report-value",children:"0"})]}),o.jsxs("div",{className:"report-item",children:[o.jsx("span",{className:"report-label",children:"Hours Logged:"}),o.jsx("span",{className:"report-value",children:"0"})]})]})]}),o.jsxs("div",{className:"report-card",children:[o.jsx("h3",{children:"Monthly Performance"}),o.jsxs("div",{className:"report-stats",children:[o.jsxs("div",{className:"report-item",children:[o.jsx("span",{className:"report-label",children:"Total Tasks:"}),o.jsx("span",{className:"report-value",children:"0"})]}),o.jsxs("div",{className:"report-item",children:[o.jsx("span",{className:"report-label",children:"Completion Rate:"}),o.jsx("span",{className:"report-value",children:"N/A"})]}),o.jsxs("div",{className:"report-item",children:[o.jsx("span",{className:"report-label",children:"Client Satisfaction:"}),o.jsx("span",{className:"report-value",children:"N/A"})]})]})]})]})]}),((O=(P=u==null?void 0:u.data)==null?void 0:P.recentClients)==null?void 0:O.length)>0&&o.jsxs("section",{className:"recent-clients",children:[o.jsx("h2",{children:"Recent Clients"}),o.jsx("div",{className:"recent-clients-list",children:u.data.recentClients.map(v=>o.jsxs("div",{className:"recent-client-card",children:[o.jsxs("div",{className:"client-info",children:[o.jsxs("h4",{children:[v.first_name," ",v.last_name]}),o.jsx("p",{children:v.email}),v.phoneNumber&&o.jsxs("p",{children:[" ",v.phoneNumber]})]}),o.jsx("span",{className:`status-badge ${v.active?"active":"inactive"}`,children:v.active?"Active":"Inactive"})]},v._id))})]}),o.jsx("style",{jsx:!0,children:`
            .clients-table {
              width: 100%;
              border-collapse: collapse;
            }
            
            .clients-table th,
            .clients-table td {
              padding: 12px;
              text-align: left;
              border-bottom: 1px solid #eee;
            }
            
            .clients-table th {
              background: #f5f5f5;
              font-weight: 600;
            }
            
            .status-badge {
              padding: 4px 8px;
              border-radius: 4px;
              font-size: 12px;
              font-weight: 500;
            }
            
            .status-badge.active {
              background: #e8f5e9;
              color: #2e7d32;
            }
            
            .status-badge.inactive {
              background: #ffebee;
              color: #c62828;
            }
            
            .btn-primary-small {
              padding: 4px 12px;
              background: #2196F3;
              color: white;
              border: none;
              border-radius: 4px;
              cursor: pointer;
              font-size: 12px;
            }
            
            .btn-primary-small:hover {
              background: #1976D2;
            }
            
            .recent-clients {
              margin-top: 30px;
            }
            
            .recent-clients-list {
              display: grid;
              gap: 15px;
              margin-top: 15px;
            }
            
            .recent-client-card {
              background: white;
              padding: 15px;
              border-radius: 8px;
              box-shadow: 0 2px 4px rgba(0,0,0,0.1);
              display: flex;
              justify-content: space-between;
              align-items: center;
            }
            
            .client-info h4 {
              margin: 0 0 5px 0;
              color: #333;
            }
            
            .client-info p {
              margin: 3px 0;
              color: #666;
              font-size: 14px;
            }
            
            .empty-state {
              text-align: center;
              padding: 40px 20px;
              color: #666;
            }
            
            .empty-state p {
              font-size: 16px;
              margin-bottom: 5px;
            }
            
            .empty-state span {
              font-size: 14px;
              color: #999;
            }
          `})]})})]})},S7=()=>{var f,p,h;const[t,e]=D.useState({createdAfter:new Date(Date.now()-2592e6).toISOString().split("T")[0],createdBefore:new Date().toISOString().split("T")[0]}),{data:n,isLoading:s,error:r,refetch:i}=IR({createdAfter:t.createdAfter+"T00:00:00Z",createdBefore:t.createdBefore+"T23:59:59Z",maxResults:100}),a=((f=n==null?void 0:n.data)==null?void 0:f.Orders)||[],l=_=>{e({...t,[_.target.name]:_.target.value})},u=_=>({Unshipped:"#ff9800",PartiallyShipped:"#2196f3",Shipped:"#4caf50",Canceled:"#f44336",Unfulfillable:"#9e9e9e"})[_]||"#757575",d=(_,C)=>_?new Intl.NumberFormat("en-US",{style:"currency",currency:C||"USD"}).format(_):"N/A";return s?o.jsx("div",{className:"amazon-orders-container",children:o.jsx("div",{className:"loading",children:"Loading orders..."})}):r?o.jsx("div",{className:"amazon-orders-container",children:o.jsxs("div",{className:"error",children:["Failed to load orders: ",((p=r==null?void 0:r.data)==null?void 0:p.message)||"Unknown error",o.jsx("button",{onClick:i,className:"retry-btn",children:"Retry"})]})}):o.jsxs("div",{className:"amazon-orders-container",children:[o.jsxs("div",{className:"orders-header",children:[o.jsx("h3",{children:"Amazon Orders"}),o.jsxs("div",{className:"date-filters",children:[o.jsxs("div",{className:"date-input-group",children:[o.jsx("label",{children:"From:"}),o.jsx("input",{type:"date",name:"createdAfter",value:t.createdAfter,onChange:l,max:t.createdBefore})]}),o.jsxs("div",{className:"date-input-group",children:[o.jsx("label",{children:"To:"}),o.jsx("input",{type:"date",name:"createdBefore",value:t.createdBefore,onChange:l,min:t.createdAfter,max:new Date().toISOString().split("T")[0]})]}),o.jsx("button",{onClick:i,className:"refresh-btn",children:" Refresh"})]})]}),a.length===0?o.jsx("div",{className:"no-orders",children:"No orders found for the selected date range."}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"orders-summary",children:[o.jsxs("div",{className:"summary-card",children:[o.jsx("span",{className:"summary-label",children:"Total Orders"}),o.jsx("span",{className:"summary-value",children:a.length})]}),o.jsxs("div",{className:"summary-card",children:[o.jsx("span",{className:"summary-label",children:"Unshipped"}),o.jsx("span",{className:"summary-value",children:a.filter(_=>_.OrderStatus==="Unshipped").length})]}),o.jsxs("div",{className:"summary-card",children:[o.jsx("span",{className:"summary-label",children:"Shipped"}),o.jsx("span",{className:"summary-value",children:a.filter(_=>_.OrderStatus==="Shipped").length})]})]}),o.jsx("div",{className:"orders-table-container",children:o.jsxs("table",{className:"orders-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Order ID"}),o.jsx("th",{children:"Purchase Date"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Customer"}),o.jsx("th",{children:"Total"}),o.jsx("th",{children:"Items"}),o.jsx("th",{children:"Ship By"}),o.jsx("th",{children:"Fulfillment"})]})}),o.jsx("tbody",{children:a.map(_=>{var C,j,b,S;return o.jsxs("tr",{children:[o.jsx("td",{className:"order-id",children:_.AmazonOrderId}),o.jsx("td",{children:new Date(_.PurchaseDate).toLocaleDateString()}),o.jsx("td",{children:o.jsx("span",{className:"status-badge",style:{backgroundColor:u(_.OrderStatus)},children:_.OrderStatus})}),o.jsx("td",{children:((C=_.BuyerInfo)==null?void 0:C.BuyerName)||"N/A"}),o.jsx("td",{className:"order-total",children:d((j=_.OrderTotal)==null?void 0:j.Amount,(b=_.OrderTotal)==null?void 0:b.CurrencyCode)}),o.jsxs("td",{children:[_.NumberOfItemsShipped||0," / ",_.NumberOfItemsUnshipped||0]}),o.jsx("td",{children:_.LatestShipDate?new Date(_.LatestShipDate).toLocaleDateString():"N/A"}),o.jsx("td",{children:o.jsx("span",{className:`fulfillment-type ${(S=_.FulfillmentChannel)==null?void 0:S.toLowerCase()}`,children:_.FulfillmentChannel||"MFN"})})]},_.AmazonOrderId)})})]})}),((h=n==null?void 0:n.data)==null?void 0:h.NextToken)&&o.jsxs("div",{className:"pagination-info",children:["More orders available. Showing first ",a.length," results."]})]})]})},b7=()=>{var _,C,j,b,S,E,y,x;const{data:t,isLoading:e,refetch:n}=kR(),[s,{isLoading:r}]=TR(),[i,{isLoading:a}]=jR(),[l,u]=D.useState(!1),d=(_=t==null?void 0:t.data)==null?void 0:_.connected,f=async()=>{var P;try{const O=await s().unwrap();(P=O==null?void 0:O.data)!=null&&P.authUrl&&(window.location.href=O.data.authUrl)}catch(O){console.error("Failed to get Amazon authorization URL:",O),alert("Failed to connect to Amazon. Please try again.")}},p=async()=>{if(window.confirm("Are you sure you want to disconnect your Amazon seller account?"))try{await i().unwrap(),u(!1),n(),alert("Amazon account disconnected successfully")}catch(P){console.error("Failed to disconnect Amazon:",P),alert("Failed to disconnect Amazon account. Please try again.")}},h=()=>{u(!l)};return e?o.jsx("div",{className:"amazon-integration-container",children:o.jsx("div",{className:"loading",children:"Checking Amazon connection status..."})}):o.jsxs("div",{className:"amazon-integration-container",children:[o.jsxs("div",{className:"amazon-header",children:[o.jsx("h2",{children:"Amazon Seller Integration"}),d&&o.jsxs("span",{className:"connection-status connected",children:[o.jsx("span",{className:"status-dot"}),"Connected"]})]}),d?o.jsxs("div",{className:"amazon-connected-section",children:[o.jsxs("div",{className:"connection-details",children:[o.jsxs("div",{className:"seller-info",children:[o.jsx("h3",{children:"Seller Information"}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Seller ID:"}),o.jsx("span",{className:"value",children:(C=t==null?void 0:t.data)==null?void 0:C.sellerId})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Seller Name:"}),o.jsx("span",{className:"value",children:(j=t==null?void 0:t.data)==null?void 0:j.sellerName})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Email:"}),o.jsx("span",{className:"value",children:(b=t==null?void 0:t.data)==null?void 0:b.sellerEmail})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Marketplace:"}),o.jsx("span",{className:"value",children:((E=(S=t==null?void 0:t.data)==null?void 0:S.marketplaceIds)==null?void 0:E.join(", "))||"US"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Last Synced:"}),o.jsx("span",{className:"value",children:(y=t==null?void 0:t.data)!=null&&y.lastSyncedAt?new Date(t.data.lastSyncedAt).toLocaleString():"Never"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Connected Since:"}),o.jsx("span",{className:"value",children:(x=t==null?void 0:t.data)!=null&&x.connectedSince?new Date(t.data.connectedSince).toLocaleDateString():"N/A"})]})]}),o.jsxs("div",{className:"action-buttons",children:[o.jsx("button",{className:"view-orders-btn",onClick:h,children:l?"Hide Orders":"View Orders"}),o.jsx("button",{className:"disconnect-btn",onClick:p,disabled:a,children:a?"Disconnecting...":"Disconnect Amazon"})]})]}),l&&o.jsx(S7,{})]}):o.jsxs("div",{className:"amazon-connect-section",children:[o.jsxs("div",{className:"connect-info",children:[o.jsx("h3",{children:"Connect Your Amazon Seller Account"}),o.jsx("p",{children:"Connect your Amazon Seller account to view and manage your orders, inventory, and sales data directly from this dashboard."}),o.jsxs("ul",{className:"benefits-list",children:[o.jsx("li",{children:" View and manage orders"}),o.jsx("li",{children:" Track inventory levels"}),o.jsx("li",{children:" Monitor financial data"}),o.jsx("li",{children:" Generate sales reports"})]})]}),o.jsx("button",{className:"amazon-connect-btn",onClick:f,disabled:r,children:r?"Connecting...":"Connect with Amazon"})]})]})},N7=()=>{var I,L,V,M,U,F,B,q,Y,ee;const[t,e]=D.useState(""),[n,s]=D.useState(!1),[r,i]=D.useState(!1),[a,l]=D.useState({maxResults:10,createdAfter:new Date(Date.now()-7*24*60*60*1e3).toISOString().split("T")[0]}),{data:u,isLoading:d,refetch:f}=RR(),[p,{isLoading:h}]=PR(),[_,{isLoading:C}]=OR(),[j,{data:b}]=MR(),{data:S,isLoading:E,refetch:y}=DR(a,{skip:!n||!((I=u==null?void 0:u.data)!=null&&I.connected)}),{data:x,isLoading:P,refetch:O}=LR({},{skip:!r||!((L=u==null?void 0:u.data)!=null&&L.connected)}),v=(V=u==null?void 0:u.data)==null?void 0:V.connected;(M=u==null?void 0:u.data)==null||M.isSandbox;const g=async()=>{var z;try{const G=await p(t?{refreshToken:t}:{}).unwrap();G.success?(alert("Sandbox initialized successfully!"),e(""),f()):alert(`Failed to initialize: ${G.message}`)}catch(Q){console.error("Initialize error:",Q),alert(`Error: ${((z=Q.data)==null?void 0:z.message)||Q.message}`)}},N=async()=>{var z;if(confirm("Are you sure you want to reset the sandbox configuration?"))try{(await _().unwrap()).success&&(alert("Sandbox reset successfully!"),s(!1),i(!1),f())}catch(Q){console.error("Reset error:",Q),alert(`Error: ${((z=Q.data)==null?void 0:z.message)||Q.message}`)}},w=async()=>{var z;try{const Q=await j().unwrap();Q.success&&Q.data.tokenValid?alert("Connection test successful! Token is valid."):alert("Connection test failed! Token may be invalid.")}catch(Q){console.error("Test error:",Q),alert(`Test failed: ${((z=Q.data)==null?void 0:z.message)||Q.message}`)}},A=z=>z?new Date(z).toLocaleString():"N/A",T=(z,Q="USD")=>z==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:Q}).format(z);return o.jsxs("div",{className:"amazon-sandbox-container",children:[o.jsxs("div",{className:"sandbox-header",children:[o.jsx("h2",{children:" Amazon Sandbox Testing"}),o.jsx("div",{className:"sandbox-badge",children:"SANDBOX MODE"})]}),o.jsxs("div",{className:"sandbox-section",children:[o.jsx("h3",{children:"Connection Status"}),d?o.jsx("div",{className:"loading",children:"Loading status..."}):o.jsxs("div",{className:"status-grid",children:[o.jsxs("div",{className:"status-item",children:[o.jsx("span",{className:"status-label",children:"Connected:"}),o.jsx("span",{className:`status-value ${v?"connected":"disconnected"}`,children:v?" Yes":" No"})]}),v&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"status-item",children:[o.jsx("span",{className:"status-label",children:"Seller ID:"}),o.jsx("span",{className:"status-value",children:(U=u==null?void 0:u.data)==null?void 0:U.sellerId})]}),o.jsxs("div",{className:"status-item",children:[o.jsx("span",{className:"status-label",children:"Marketplaces:"}),o.jsx("span",{className:"status-value",children:(B=(F=u==null?void 0:u.data)==null?void 0:F.marketplaceIds)==null?void 0:B.join(", ")})]}),o.jsxs("div",{className:"status-item",children:[o.jsx("span",{className:"status-label",children:"Last Synced:"}),o.jsx("span",{className:"status-value",children:A((q=u==null?void 0:u.data)==null?void 0:q.lastSyncedAt)})]}),o.jsxs("div",{className:"status-item",children:[o.jsx("span",{className:"status-label",children:"Token Expired:"}),o.jsx("span",{className:`status-value ${(Y=u==null?void 0:u.data)!=null&&Y.tokenExpired?"error":"success"}`,children:(ee=u==null?void 0:u.data)!=null&&ee.tokenExpired?" Yes":" No"})]})]})]})]}),!v&&o.jsxs("div",{className:"sandbox-section",children:[o.jsx("h3",{children:"Initialize Sandbox"}),o.jsxs("div",{className:"init-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"refreshToken",children:"Refresh Token (Optional - uses env variable if not provided):"}),o.jsx("input",{type:"text",id:"refreshToken",value:t,onChange:z=>e(z.target.value),placeholder:"Atzr|...",className:"token-input"})]}),o.jsx("button",{onClick:g,disabled:h,className:"btn btn-primary",children:h?"Initializing...":"Initialize Sandbox"})]})]}),v&&o.jsxs("div",{className:"sandbox-section",children:[o.jsx("h3",{children:"Actions"}),o.jsxs("div",{className:"action-buttons",children:[o.jsx("button",{onClick:w,className:"btn btn-secondary",children:"Test Connection"}),o.jsx("button",{onClick:()=>s(!n),className:`btn ${n?"btn-active":"btn-secondary"}`,children:n?"Hide Orders":"Show Orders"}),o.jsx("button",{onClick:()=>i(!r),className:`btn ${r?"btn-active":"btn-secondary"}`,children:r?"Hide Inventory":"Show Inventory"}),o.jsx("button",{onClick:N,disabled:C,className:"btn btn-danger",children:C?"Resetting...":"Reset Sandbox"})]})]}),n&&v&&o.jsxs("div",{className:"sandbox-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx("h3",{children:"Orders"}),o.jsx("button",{onClick:()=>y(),className:"btn-small",children:"Refresh"})]}),o.jsxs("div",{className:"filters",children:[o.jsx("input",{type:"date",value:a.createdAfter,onChange:z=>l({...a,createdAfter:z.target.value}),className:"filter-input"}),o.jsx("input",{type:"number",value:a.maxResults,onChange:z=>l({...a,maxResults:z.target.value}),placeholder:"Max Results",min:"1",max:"100",className:"filter-input"})]}),(()=>{var Q,G;if(console.log("Full Orders Response:",S),console.log("Orders success?:",S==null?void 0:S.success),console.log("Orders data field:",S==null?void 0:S.data),console.log("Orders Array:",(Q=S==null?void 0:S.data)==null?void 0:Q.Orders),E)return o.jsx("div",{className:"loading",children:"Loading orders..."});const z=(G=S==null?void 0:S.data)==null?void 0:G.Orders;return!z||!Array.isArray(z)||z.length===0?o.jsx("div",{className:"no-data",children:"No orders found"}):o.jsx("div",{className:"orders-list",children:z.map(W=>{var K,ne,oe;return o.jsxs("div",{className:"order-card",children:[o.jsxs("div",{className:"order-header",children:[o.jsx("span",{className:"order-id",children:W.AmazonOrderId}),o.jsx("span",{className:`order-status status-${(K=W.OrderStatus)==null?void 0:K.toLowerCase()}`,children:W.OrderStatus})]}),o.jsxs("div",{className:"order-details",children:[o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Purchase Date:"}),o.jsx("span",{children:A(W.PurchaseDate)})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Total:"}),o.jsx("span",{children:T((ne=W.OrderTotal)==null?void 0:ne.Amount,(oe=W.OrderTotal)==null?void 0:oe.CurrencyCode)})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Items:"}),o.jsxs("span",{children:[W.NumberOfItemsShipped||0," shipped, ",W.NumberOfItemsUnshipped||0," unshipped"]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Fulfillment:"}),o.jsx("span",{children:W.FulfillmentChannel})]})]})]},W.AmazonOrderId)})})})()]}),r&&v&&o.jsxs("div",{className:"sandbox-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx("h3",{children:"Inventory"}),o.jsx("button",{onClick:()=>O(),className:"btn-small",children:"Refresh"})]}),(()=>{var Q,G;if(console.log("Full Inventory Response:",x),console.log("Inventory data field:",x==null?void 0:x.data),console.log("Inventory Array:",(Q=x==null?void 0:x.data)==null?void 0:Q.inventorySummaries),P)return o.jsx("div",{className:"loading",children:"Loading inventory..."});const z=(G=x==null?void 0:x.data)==null?void 0:G.inventorySummaries;return!z||!Array.isArray(z)||z.length===0?o.jsx("div",{className:"no-data",children:"No inventory found"}):o.jsx("div",{className:"inventory-list",children:z.map((W,K)=>o.jsxs("div",{className:"inventory-card",children:[o.jsxs("div",{className:"inventory-header",children:[o.jsx("span",{className:"sku",children:W.sellerSku}),o.jsx("span",{className:"asin",children:W.asin})]}),o.jsxs("div",{className:"inventory-details",children:[o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Fulfillable:"}),o.jsx("span",{className:"quantity",children:W.totalQuantity||0})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Condition:"}),o.jsx("span",{children:W.condition||"N/A"})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Product Name:"}),o.jsx("span",{children:W.productName||"N/A"})]})]})]},K))})})()]}),b&&o.jsxs("div",{className:"sandbox-section",children:[o.jsx("h3",{children:"Test Result"}),o.jsx("pre",{className:"test-result",children:JSON.stringify(b,null,2)})]})]})},C7=()=>{var j,b,S,E;const[t,e]=D.useState({status:"any",limit:20}),{data:n,isLoading:s,error:r,refetch:i}=KR(t),a=((j=n==null?void 0:n.data)==null?void 0:j.orders)||[],l=((b=n==null?void 0:n.data)==null?void 0:b.pagination)||{},u=((S=n==null?void 0:n.data)==null?void 0:S.store)||{},d=(y,x="USD")=>y==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:x}).format(y),f=y=>y?new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",p=y=>({pending:"status-pending",paid:"status-paid",partially_paid:"status-partial",refunded:"status-refunded",voided:"status-voided",authorized:"status-authorized"})[y]||"status-default",h=y=>y==="fulfilled"?"status-fulfilled":y==="partial"?"status-partial":y==="unfulfilled"||!y?"status-unfulfilled":"status-default",_=(y,x)=>{e(P=>({...P,[y]:x}))},C=y=>{e(x=>({...x,page_info:y}))};return s?o.jsx("div",{className:"shopify-orders-container",children:o.jsxs("div",{className:"loading-state",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Loading orders..."})]})}):r?o.jsx("div",{className:"shopify-orders-container",children:o.jsxs("div",{className:"error-state",children:[o.jsx("span",{className:"error-icon",children:""}),o.jsx("p",{children:"Failed to load orders"}),o.jsx("small",{children:((E=r==null?void 0:r.data)==null?void 0:E.message)||(r==null?void 0:r.message)||"Unknown error occurred"}),o.jsx("button",{onClick:i,className:"retry-btn",children:"Try Again"})]})}):o.jsxs("div",{className:"shopify-orders-container",children:[o.jsxs("div",{className:"orders-header",children:[o.jsxs("h3",{children:[" Orders (",a.length,")"]}),o.jsxs("div",{className:"orders-filters",children:[o.jsxs("select",{value:t.status,onChange:y=>_("status",y.target.value),className:"filter-select",children:[o.jsx("option",{value:"any",children:"All Orders"}),o.jsx("option",{value:"open",children:"Open"}),o.jsx("option",{value:"closed",children:"Closed"}),o.jsx("option",{value:"cancelled",children:"Cancelled"})]}),o.jsxs("select",{value:t.limit,onChange:y=>_("limit",parseInt(y.target.value)),className:"filter-select",children:[o.jsx("option",{value:"10",children:"10 per page"}),o.jsx("option",{value:"20",children:"20 per page"}),o.jsx("option",{value:"50",children:"50 per page"}),o.jsx("option",{value:"100",children:"100 per page"})]}),o.jsx("button",{onClick:i,className:"refresh-btn",title:"Refresh orders",children:" Refresh"})]})]}),a.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("span",{className:"empty-icon",children:""}),o.jsx("p",{children:"No orders found"}),o.jsx("small",{children:"Try adjusting your filters or check back later"})]}):o.jsx("div",{className:"orders-table-wrapper",children:o.jsxs("table",{className:"orders-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Order #"}),o.jsx("th",{children:"Date"}),o.jsx("th",{children:"Customer"}),o.jsx("th",{children:"Total"}),o.jsx("th",{children:"Payment"}),o.jsx("th",{children:"Fulfillment"}),o.jsx("th",{children:"Items"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:a.map(y=>{var x,P;return o.jsxs("tr",{children:[o.jsxs("td",{className:"order-number",children:[o.jsxs("strong",{children:["#",y.order_number||((x=y.name)==null?void 0:x.replace("#",""))]}),y.name&&o.jsxs(o.Fragment,{children:[o.jsx("br",{}),o.jsx("small",{className:"text-muted",children:y.name})]})]}),o.jsx("td",{className:"order-date",children:f(y.created_at)}),o.jsx("td",{className:"customer-info",children:y.customer?o.jsxs(o.Fragment,{children:[o.jsxs("strong",{children:[y.customer.first_name," ",y.customer.last_name]}),y.customer.email&&o.jsxs(o.Fragment,{children:[o.jsx("br",{}),o.jsx("small",{children:y.customer.email})]})]}):y.email?o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Guest Customer"}),o.jsx("br",{}),o.jsx("small",{children:y.email})]}):o.jsx("span",{className:"text-muted",children:"Guest"})}),o.jsxs("td",{className:"order-total",children:[o.jsx("strong",{children:d(y.total_price||y.current_total_price,y.currency)}),y.total_discounts&&parseFloat(y.total_discounts)>0&&o.jsxs(o.Fragment,{children:[o.jsx("br",{}),o.jsxs("small",{className:"discount",children:["-",d(y.total_discounts,y.currency)," discount"]})]})]}),o.jsx("td",{children:o.jsx("span",{className:`status-badge ${p(y.financial_status)}`,children:y.financial_status||"pending"})}),o.jsx("td",{children:o.jsx("span",{className:`status-badge ${h(y.fulfillment_status)}`,children:y.fulfillment_status||"unfulfilled"})}),o.jsxs("td",{className:"order-items",children:[((P=y.line_items)==null?void 0:P.length)||0," items"]}),o.jsx("td",{className:"order-actions",children:o.jsx("button",{className:"action-btn view-btn",onClick:()=>{var v,g;const O=(u==null?void 0:u.shopDomain)||((g=(v=n==null?void 0:n.data)==null?void 0:v.store)==null?void 0:g.shopDomain);O?window.open(`https://${O}/admin/orders/${y.id}`,"_blank"):alert("Unable to open order in Shopify admin")},title:"View in Shopify Admin",children:" View"})})]},y.id)})})]})}),(l.previous||l.next)&&o.jsxs("div",{className:"pagination",children:[o.jsx("button",{disabled:!l.previous,onClick:()=>C(l.previous),className:"pagination-btn",children:" Previous"}),o.jsxs("span",{className:"pagination-info",children:["Page ",t.page_info?"...":"1"]}),o.jsx("button",{disabled:!l.next,onClick:()=>C(l.next),className:"pagination-btn",children:"Next "})]})]})},E7=()=>{var P,O;const{data:t,isLoading:e,refetch:n}=GR(),[s,{isLoading:r}]=YR(),[i,{isLoading:a}]=QR(),[l,u]=D.useState(""),[d,f]=D.useState(!1),[p,h]=D.useState(null),[_,C]=D.useState(""),j=(P=t==null?void 0:t.data)==null?void 0:P.connected,b=(O=t==null?void 0:t.data)==null?void 0:O.store;D.useEffect(()=>{b!=null&&b.shopDomain&&!_&&(C(b.shopDomain),!j&&b.shopDomain&&u(b.shopDomain))},[b,_,j]),D.useEffect(()=>{if(p){const v=setTimeout(()=>h(null),5e3);return()=>clearTimeout(v)}},[p]);const S=v=>{let g=v.trim().toLowerCase();return g=g.replace(/^https?:\/\//,""),g.includes(".myshopify.com")||g.includes(".")||(g=`${g}.myshopify.com`),g},E=async()=>{var v,g;if(!l){h("Please enter your shop domain");return}try{h(null);const N=S(l);console.log("Requesting auth URL for shop:",N);const w=await s(N).unwrap();console.log("Auth URL response:",w),(v=w==null?void 0:w.data)!=null&&v.authUrl?(console.log("Redirecting to:",w.data.authUrl),window.location.href=w.data.authUrl):w!=null&&w.authUrl?(console.log("Redirecting to:",w.authUrl),window.location.href=w.authUrl):(console.error("No auth URL in response:",w),h("Failed to get authorization URL from server."))}catch(N){console.error("Failed to get Shopify authorization URL:",N),h(((g=N==null?void 0:N.data)==null?void 0:g.message)||"Failed to connect to Shopify. Please check your shop domain and try again.")}},y=async()=>{if(window.confirm("Are you sure you want to disconnect your Shopify store?"))try{console.log("Disconnecting Shopify store...");const v=b==null?void 0:b.shopDomain;await i().unwrap(),f(!1),v&&(u(v),C(v)),setTimeout(()=>{n()},500),h(null),console.log(" Shopify store disconnected successfully")}catch(v){console.error("Failed to disconnect Shopify:",v),h("Failed to disconnect Shopify store. Please try again.")}},x=()=>{f(!d)};return e?o.jsx("div",{className:"shopify-integration-container",children:o.jsx("div",{className:"loading",children:"Checking Shopify connection status..."})}):o.jsxs("div",{className:"shopify-integration-container",children:[o.jsxs("div",{className:"shopify-header",children:[o.jsx("h2",{children:" Shopify Store Integration"}),j&&o.jsxs("span",{className:"connection-status connected",children:[o.jsx("span",{className:"status-dot"}),"Connected"]})]}),p&&o.jsxs("div",{className:"error-message",children:[o.jsx("span",{className:"error-icon",children:""}),p]}),j?o.jsxs("div",{className:"shopify-connected-section",children:[o.jsxs("div",{className:"connection-details",children:[o.jsxs("div",{className:"store-info",children:[o.jsx("h3",{children:"Store Information"}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Store Name:"}),o.jsx("span",{className:"value",children:(b==null?void 0:b.shopName)||"N/A"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Domain:"}),o.jsx("span",{className:"value",children:(b==null?void 0:b.shopDomain)||"N/A"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Email:"}),o.jsx("span",{className:"value",children:(b==null?void 0:b.shopEmail)||"N/A"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Plan:"}),o.jsx("span",{className:"value",children:(b==null?void 0:b.shopPlan)||"N/A"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Country:"}),o.jsx("span",{className:"value",children:(b==null?void 0:b.shopCountry)||"N/A"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Currency:"}),o.jsx("span",{className:"value",children:(b==null?void 0:b.shopCurrency)||"N/A"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Last Synced:"}),o.jsx("span",{className:"value",children:b!=null&&b.lastSyncedAt?new Date(b.lastSyncedAt).toLocaleString():"Never"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Connected Since:"}),o.jsx("span",{className:"value",children:b!=null&&b.connectedAt?new Date(b.connectedAt).toLocaleDateString():"N/A"})]})]}),o.jsxs("div",{className:"action-buttons",children:[o.jsx("button",{className:"view-orders-btn",onClick:x,children:d?"Hide Orders":"View Orders"}),o.jsx("button",{className:"disconnect-btn",onClick:y,disabled:a,children:a?"Disconnecting...":"Disconnect Shopify"})]})]}),d&&o.jsx(C7,{})]}):o.jsxs("div",{className:"shopify-connect-section",children:[o.jsxs("div",{className:"connect-info",children:[o.jsx("h3",{children:"Connect Your Shopify Store"}),o.jsx("p",{children:"Connect your Shopify store to view and manage orders directly from this dashboard."}),o.jsxs("ul",{className:"benefits-list",children:[o.jsx("li",{children:" View and manage orders"}),o.jsx("li",{children:" Real-time order sync"}),o.jsx("li",{children:" Order analytics and insights"}),o.jsx("li",{children:" Streamlined workflow"})]})]}),o.jsxs("div",{className:"connect-form",children:[o.jsx("label",{htmlFor:"shop-domain",children:"Store Domain"}),o.jsx("input",{id:"shop-domain",type:"text",placeholder:"your-store.myshopify.com",value:l,onChange:v=>u(v.target.value),onKeyPress:v=>v.key==="Enter"&&E(),className:"shop-domain-input"}),o.jsx("span",{className:"input-hint",children:_?`Previously connected: ${_}`:"Enter your Shopify store domain (e.g., store-name.myshopify.com)"}),o.jsx("button",{className:"shopify-connect-btn",onClick:E,disabled:r||!l,children:r?"Connecting...":"Connect with Shopify"})]})]})]})},k7=({activeTab:t})=>{const[e,n]=D.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),{data:s,isLoading:r,error:i,refetch:a}=aO({startDate:e.startDate,endDate:e.endDate},{skip:t!=="invoices"}),{data:l,isLoading:u,error:d,refetch:f}=cO({limit:100},{skip:t!=="customers"}),{data:p,isLoading:h,error:_,refetch:C}=uO({startDate:e.startDate,endDate:e.endDate},{skip:t!=="expenses"}),{data:j,isLoading:b,error:S}=dO({startDate:e.startDate,endDate:e.endDate},{skip:t!=="reports"}),{data:E,isLoading:y,error:x}=hO({date:e.endDate},{skip:t!=="reports"}),[P,{isLoading:O}]=oO(),v=async()=>{try{switch(await P().unwrap(),t){case"invoices":a();break;case"customers":f();break;case"expenses":C();break;default:break}alert("QuickBooks data synced successfully!")}catch(M){console.error("Sync failed:",M),alert("Failed to sync QuickBooks data. Please try again.")}},g=M=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(M||0),N=M=>M?new Date(M).toLocaleDateString():"N/A",w=()=>o.jsxs("div",{className:"loading-container",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Loading QuickBooks data..."})]}),A=M=>{var U;return o.jsxs("div",{className:"error-container",children:[o.jsx("span",{className:"error-icon",children:""}),o.jsxs("p",{children:["Error loading data: ",((U=M==null?void 0:M.data)==null?void 0:U.message)||(M==null?void 0:M.message)||"Unknown error"]}),o.jsx("button",{onClick:v,className:"retry-btn",children:"Retry"})]})},T=()=>{if(r)return w();if(i)return A(i);const M=(s==null?void 0:s.data)||[];return o.jsxs("div",{className:"data-content",children:[o.jsxs("div",{className:"data-header",children:[o.jsx("h3",{children:"Invoices"}),o.jsxs("div",{className:"header-actions",children:[o.jsx("input",{type:"date",value:e.startDate,onChange:U=>n({...e,startDate:U.target.value}),className:"date-input"}),o.jsx("span",{children:"to"}),o.jsx("input",{type:"date",value:e.endDate,onChange:U=>n({...e,endDate:U.target.value}),className:"date-input"}),o.jsx("button",{onClick:v,disabled:O,className:"sync-btn",children:O?"Syncing...":" Sync"})]})]}),M.length===0?o.jsx("div",{className:"no-data",children:o.jsx("p",{children:"No invoices found for the selected date range."})}):o.jsx("div",{className:"table-container",children:o.jsxs("table",{className:"data-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Invoice #"}),o.jsx("th",{children:"Customer"}),o.jsx("th",{children:"Date"}),o.jsx("th",{children:"Due Date"}),o.jsx("th",{children:"Amount"}),o.jsx("th",{children:"Balance"}),o.jsx("th",{children:"Status"})]})}),o.jsx("tbody",{children:M.map(U=>o.jsxs("tr",{children:[o.jsx("td",{children:U.DocNumber||"N/A"}),o.jsx("td",{children:U.CustomerName||"N/A"}),o.jsx("td",{children:N(U.TxnDate)}),o.jsx("td",{children:N(U.DueDate)}),o.jsx("td",{children:g(U.TotalAmt)}),o.jsx("td",{children:g(U.Balance)}),o.jsx("td",{children:o.jsx("span",{className:`status ${U.Balance>0?"unpaid":"paid"}`,children:U.Balance>0?"Unpaid":"Paid"})})]},U.Id))})]})}),M.length>0&&o.jsxs("div",{className:"summary",children:[o.jsxs("div",{className:"summary-item",children:[o.jsx("span",{children:"Total Invoices:"}),o.jsx("strong",{children:M.length})]}),o.jsxs("div",{className:"summary-item",children:[o.jsx("span",{children:"Total Amount:"}),o.jsx("strong",{children:g(M.reduce((U,F)=>U+F.TotalAmt,0))})]}),o.jsxs("div",{className:"summary-item",children:[o.jsx("span",{children:"Outstanding Balance:"}),o.jsx("strong",{children:g(M.reduce((U,F)=>U+F.Balance,0))})]})]})]})},I=()=>{if(u)return w();if(d)return A(d);const M=(l==null?void 0:l.data)||[];return o.jsxs("div",{className:"data-content",children:[o.jsxs("div",{className:"data-header",children:[o.jsx("h3",{children:"Customers"}),o.jsx("div",{className:"header-actions",children:o.jsx("button",{onClick:v,disabled:O,className:"sync-btn",children:O?"Syncing...":" Sync"})})]}),M.length===0?o.jsx("div",{className:"no-data",children:o.jsx("p",{children:"No customers found."})}):o.jsx("div",{className:"table-container",children:o.jsxs("table",{className:"data-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Name"}),o.jsx("th",{children:"Company"}),o.jsx("th",{children:"Email"}),o.jsx("th",{children:"Phone"}),o.jsx("th",{children:"Balance"}),o.jsx("th",{children:"Status"})]})}),o.jsx("tbody",{children:M.map(U=>{var F,B;return o.jsxs("tr",{children:[o.jsx("td",{children:U.DisplayName||"N/A"}),o.jsx("td",{children:U.CompanyName||"-"}),o.jsx("td",{children:((F=U.PrimaryEmailAddr)==null?void 0:F.Address)||"-"}),o.jsx("td",{children:((B=U.PrimaryPhone)==null?void 0:B.FreeFormNumber)||"-"}),o.jsx("td",{children:g(U.Balance)}),o.jsx("td",{children:o.jsx("span",{className:`status ${U.Active?"active":"inactive"}`,children:U.Active?"Active":"Inactive"})})]},U.Id)})})]})}),M.length>0&&o.jsxs("div",{className:"summary",children:[o.jsxs("div",{className:"summary-item",children:[o.jsx("span",{children:"Total Customers:"}),o.jsx("strong",{children:M.length})]}),o.jsxs("div",{className:"summary-item",children:[o.jsx("span",{children:"Active Customers:"}),o.jsx("strong",{children:M.filter(U=>U.Active).length})]}),o.jsxs("div",{className:"summary-item",children:[o.jsx("span",{children:"Total Outstanding:"}),o.jsx("strong",{children:g(M.reduce((U,F)=>U+(F.Balance||0),0))})]})]})]})},L=()=>{if(h)return w();if(_)return A(_);const M=(p==null?void 0:p.data)||[];return o.jsxs("div",{className:"data-content",children:[o.jsxs("div",{className:"data-header",children:[o.jsx("h3",{children:"Expenses"}),o.jsxs("div",{className:"header-actions",children:[o.jsx("input",{type:"date",value:e.startDate,onChange:U=>n({...e,startDate:U.target.value}),className:"date-input"}),o.jsx("span",{children:"to"}),o.jsx("input",{type:"date",value:e.endDate,onChange:U=>n({...e,endDate:U.target.value}),className:"date-input"}),o.jsx("button",{onClick:v,disabled:O,className:"sync-btn",children:O?"Syncing...":" Sync"})]})]}),M.length===0?o.jsx("div",{className:"no-data",children:o.jsx("p",{children:"No expenses found for the selected date range."})}):o.jsx("div",{className:"table-container",children:o.jsxs("table",{className:"data-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Date"}),o.jsx("th",{children:"Vendor"}),o.jsx("th",{children:"Account"}),o.jsx("th",{children:"Description"}),o.jsx("th",{children:"Amount"}),o.jsx("th",{children:"Payment Method"})]})}),o.jsx("tbody",{children:M.map(U=>{var F,B,q,Y;return o.jsxs("tr",{children:[o.jsx("td",{children:N(U.TxnDate)}),o.jsx("td",{children:U.VendorName||((F=U.EntityRef)==null?void 0:F.name)||"-"}),o.jsx("td",{children:((B=U.AccountRef)==null?void 0:B.name)||"-"}),o.jsx("td",{children:U.PrivateNote||((Y=(q=U.Line)==null?void 0:q[0])==null?void 0:Y.Description)||"-"}),o.jsx("td",{children:g(U.TotalAmt)}),o.jsx("td",{children:U.PaymentType||"-"})]},U.Id)})})]})}),M.length>0&&o.jsxs("div",{className:"summary",children:[o.jsxs("div",{className:"summary-item",children:[o.jsx("span",{children:"Total Expenses:"}),o.jsx("strong",{children:M.length})]}),o.jsxs("div",{className:"summary-item",children:[o.jsx("span",{children:"Total Amount:"}),o.jsx("strong",{children:g(M.reduce((U,F)=>U+F.TotalAmt,0))})]}),o.jsxs("div",{className:"summary-item",children:[o.jsx("span",{children:"Average Expense:"}),o.jsx("strong",{children:g(M.reduce((U,F)=>U+F.TotalAmt,0)/M.length)})]})]})]})},V=()=>{const M=b||y,U=S||x;return M?w():U?A(S||x):o.jsxs("div",{className:"data-content",children:[o.jsxs("div",{className:"data-header",children:[o.jsx("h3",{children:"Financial Reports"}),o.jsxs("div",{className:"header-actions",children:[o.jsx("input",{type:"date",value:e.startDate,onChange:F=>n({...e,startDate:F.target.value}),className:"date-input"}),o.jsx("span",{children:"to"}),o.jsx("input",{type:"date",value:e.endDate,onChange:F=>n({...e,endDate:F.target.value}),className:"date-input"}),o.jsx("button",{onClick:v,disabled:O,className:"sync-btn",children:O?"Syncing...":" Sync"})]})]}),o.jsxs("div",{className:"reports-container",children:[(j==null?void 0:j.data)&&o.jsxs("div",{className:"report-section",children:[o.jsx("h4",{children:" Profit & Loss Statement"}),o.jsxs("div",{className:"report-period",children:["Period: ",N(e.startDate)," to ",N(e.endDate)]}),o.jsxs("div",{className:"report-table",children:[o.jsxs("div",{className:"report-row header",children:[o.jsx("span",{children:"Item"}),o.jsx("span",{children:"Amount"})]}),o.jsxs("div",{className:"report-row",children:[o.jsx("span",{children:"Total Income"}),o.jsx("span",{className:"amount income",children:g(j.data.totalIncome)})]}),o.jsxs("div",{className:"report-row",children:[o.jsx("span",{children:"Total Expenses"}),o.jsx("span",{className:"amount expense",children:g(j.data.totalExpenses)})]}),o.jsxs("div",{className:"report-row divider",children:[o.jsx("span",{children:"Net Income"}),o.jsx("span",{className:`amount ${j.data.netIncome>=0?"income":"expense"}`,children:g(j.data.netIncome)})]}),o.jsxs("div",{className:"report-row",children:[o.jsx("span",{children:"Profit Margin"}),o.jsx("span",{className:"amount",children:j.data.totalIncome>0?`${(j.data.netIncome/j.data.totalIncome*100).toFixed(2)}%`:"0%"})]})]})]}),(E==null?void 0:E.data)&&o.jsxs("div",{className:"report-section",children:[o.jsx("h4",{children:" Balance Sheet"}),o.jsxs("div",{className:"report-period",children:["As of: ",N(e.endDate)]}),o.jsxs("div",{className:"report-table",children:[o.jsxs("div",{className:"report-row header",children:[o.jsx("span",{children:"Category"}),o.jsx("span",{children:"Amount"})]}),o.jsxs("div",{className:"report-row section-header",children:[o.jsx("span",{children:"Assets"}),o.jsx("span",{})]}),o.jsxs("div",{className:"report-row",children:[o.jsx("span",{className:"indent",children:"Current Assets"}),o.jsx("span",{className:"amount",children:g(E.data.currentAssets)})]}),o.jsxs("div",{className:"report-row",children:[o.jsx("span",{className:"indent",children:"Fixed Assets"}),o.jsx("span",{className:"amount",children:g(E.data.fixedAssets)})]}),o.jsxs("div",{className:"report-row subtotal",children:[o.jsx("span",{children:"Total Assets"}),o.jsx("span",{className:"amount",children:g(E.data.totalAssets)})]}),o.jsxs("div",{className:"report-row section-header",children:[o.jsx("span",{children:"Liabilities"}),o.jsx("span",{})]}),o.jsxs("div",{className:"report-row",children:[o.jsx("span",{className:"indent",children:"Current Liabilities"}),o.jsx("span",{className:"amount",children:g(E.data.currentLiabilities)})]}),o.jsxs("div",{className:"report-row",children:[o.jsx("span",{className:"indent",children:"Long-term Liabilities"}),o.jsx("span",{className:"amount",children:g(E.data.longTermLiabilities)})]}),o.jsxs("div",{className:"report-row subtotal",children:[o.jsx("span",{children:"Total Liabilities"}),o.jsx("span",{className:"amount",children:g(E.data.totalLiabilities)})]}),o.jsxs("div",{className:"report-row divider",children:[o.jsx("span",{children:"Equity"}),o.jsx("span",{className:"amount income",children:g(E.data.equity)})]}),o.jsxs("div",{className:"report-row total",children:[o.jsx("span",{children:"Total Liabilities & Equity"}),o.jsx("span",{className:"amount",children:g(E.data.totalLiabilities+E.data.equity)})]})]}),o.jsxs("div",{className:"financial-ratios",children:[o.jsx("h5",{children:"Key Financial Ratios"}),o.jsxs("div",{className:"ratio-grid",children:[o.jsxs("div",{className:"ratio-item",children:[o.jsx("span",{className:"ratio-label",children:"Current Ratio"}),o.jsx("span",{className:"ratio-value",children:E.data.currentLiabilities>0?(E.data.currentAssets/E.data.currentLiabilities).toFixed(2):"N/A"})]}),o.jsxs("div",{className:"ratio-item",children:[o.jsx("span",{className:"ratio-label",children:"Debt to Equity"}),o.jsx("span",{className:"ratio-value",children:E.data.equity>0?(E.data.totalLiabilities/E.data.equity).toFixed(2):"N/A"})]}),o.jsxs("div",{className:"ratio-item",children:[o.jsx("span",{className:"ratio-label",children:"Working Capital"}),o.jsx("span",{className:"ratio-value",children:g(E.data.currentAssets-E.data.currentLiabilities)})]})]})]})]})]})]})};switch(t){case"invoices":return T();case"customers":return I();case"expenses":return L();case"reports":return V();default:return o.jsx("div",{className:"no-data",children:"Please select a tab to view data."})}},j7=()=>{var x;const{data:t,isLoading:e,refetch:n}=sO(),[s,{isLoading:r}]=nO(),[i,{isLoading:a}]=rO(),[l,u]=D.useState(!1),[d,f]=D.useState("invoices"),[p,h]=D.useState(null),[_,C]=D.useState(null),j=(x=t==null?void 0:t.data)==null?void 0:x.connected,b=t==null?void 0:t.data;D.useEffect(()=>{const P=new URLSearchParams(window.location.search),O=P.get("qb_connected"),v=P.get("company"),g=P.get("qb_error");O==="true"&&v&&(C(`QuickBooks account "${v}" connected successfully!`),window.history.replaceState({},document.title,window.location.pathname)),g&&(h(decodeURIComponent(g)),window.history.replaceState({},document.title,window.location.pathname))},[]),D.useEffect(()=>{if(p){const P=setTimeout(()=>h(null),5e3);return()=>clearTimeout(P)}},[p]),D.useEffect(()=>{if(_){const P=setTimeout(()=>C(null),5e3);return()=>clearTimeout(P)}},[_]);const S=async()=>{var P,O;try{h(null),console.log("Requesting QuickBooks auth URL...");const v=await s().unwrap();console.log("Auth URL response:",v),(P=v==null?void 0:v.data)!=null&&P.authUrl?(console.log("Redirecting to QuickBooks OAuth:",v.data.authUrl),window.location.href=v.data.authUrl):(console.error("No auth URL in response:",v),h("Failed to get authorization URL from server."))}catch(v){console.error("Failed to get QuickBooks authorization URL:",v),h(((O=v==null?void 0:v.data)==null?void 0:O.message)||"Failed to connect to QuickBooks. Please try again.")}},E=async()=>{if(window.confirm("Are you sure you want to disconnect your QuickBooks account? This will remove access to all QuickBooks data."))try{console.log("Disconnecting QuickBooks..."),await i().unwrap(),u(!1),setTimeout(()=>{n()},500),h(null),alert("QuickBooks account disconnected successfully"),console.log(" QuickBooks disconnected successfully")}catch(P){console.error("Failed to disconnect QuickBooks:",P),h("Failed to disconnect QuickBooks account. Please try again.")}},y=()=>{u(!l)};return e?o.jsx("div",{className:"quickbooks-integration-container",children:o.jsx("div",{className:"loading",children:"Checking QuickBooks connection status..."})}):o.jsxs("div",{className:"quickbooks-integration-container",children:[o.jsxs("div",{className:"quickbooks-header",children:[o.jsxs("div",{className:"header-title",children:[o.jsx("span",{className:"qb-logo",children:""}),o.jsx("h2",{children:"QuickBooks Integration"})]}),j&&o.jsxs("span",{className:"connection-status connected",children:[o.jsx("span",{className:"status-dot"}),"Connected"]})]}),p&&o.jsxs("div",{className:"error-message",children:[o.jsx("span",{className:"error-icon",children:""}),p]}),_&&o.jsxs("div",{className:"success-message",children:[o.jsx("span",{className:"success-icon",children:""}),_]}),j?o.jsxs("div",{className:"quickbooks-connected-section",children:[o.jsxs("div",{className:"connection-details",children:[o.jsxs("div",{className:"company-info",children:[o.jsx("h3",{children:"Company Information"}),o.jsxs("div",{className:"info-grid",children:[o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Company Name:"}),o.jsx("span",{className:"value",children:(b==null?void 0:b.companyName)||"N/A"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Company ID:"}),o.jsx("span",{className:"value",children:(b==null?void 0:b.companyId)||"N/A"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Email:"}),o.jsx("span",{className:"value",children:(b==null?void 0:b.companyEmail)||"N/A"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Currency:"}),o.jsx("span",{className:"value",children:(b==null?void 0:b.baseCurrency)||"USD"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Address:"}),o.jsx("span",{className:"value",children:b!=null&&b.companyAddress?`${b.companyAddress.city||""}, ${b.companyAddress.state||""} ${b.companyAddress.postalCode||""}`.trim():"N/A"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Last Synced:"}),o.jsx("span",{className:"value",children:b!=null&&b.lastSyncedAt?new Date(b.lastSyncedAt).toLocaleString():"Never"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Connected Since:"}),o.jsx("span",{className:"value",children:b!=null&&b.connectedSince?new Date(b.connectedSince).toLocaleDateString():"N/A"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"label",children:"Status:"}),o.jsx("span",{className:"value",children:b!=null&&b.isPaused?o.jsx("span",{className:"status-paused",children:" Paused"}):b!=null&&b.tokenExpired?o.jsx("span",{className:"status-expired",children:" Token Expired"}):o.jsx("span",{className:"status-active",children:" Active"})})]})]}),(b==null?void 0:b.stats)&&o.jsxs("div",{className:"company-stats",children:[o.jsx("h4",{children:"Quick Stats"}),o.jsxs("div",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-value",children:b.stats.totalInvoices||0}),o.jsx("span",{className:"stat-label",children:"Invoices"})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-value",children:b.stats.totalCustomers||0}),o.jsx("span",{className:"stat-label",children:"Customers"})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-value",children:b.stats.totalExpenses||0}),o.jsx("span",{className:"stat-label",children:"Expenses"})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-value",children:b.stats.totalBills||0}),o.jsx("span",{className:"stat-label",children:"Bills"})]})]})]})]}),o.jsxs("div",{className:"action-buttons",children:[o.jsx("button",{className:"view-data-btn",onClick:y,children:l?"Hide Data":"View QuickBooks Data"}),o.jsx("button",{className:"disconnect-btn",onClick:E,disabled:a,children:a?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"spinner"}),"Disconnecting..."]}):"Disconnect QuickBooks"})]})]}),l&&o.jsxs("div",{className:"quickbooks-data-section",children:[o.jsxs("div",{className:"data-tabs",children:[o.jsx("button",{className:`tab-btn ${d==="invoices"?"active":""}`,onClick:()=>f("invoices"),children:" Invoices"}),o.jsx("button",{className:`tab-btn ${d==="customers"?"active":""}`,onClick:()=>f("customers"),children:" Customers"}),o.jsx("button",{className:`tab-btn ${d==="expenses"?"active":""}`,onClick:()=>f("expenses"),children:" Expenses"}),o.jsx("button",{className:`tab-btn ${d==="reports"?"active":""}`,onClick:()=>f("reports"),children:" Reports"})]}),o.jsx(k7,{activeTab:d})]})]}):o.jsxs("div",{className:"quickbooks-connect-section",children:[o.jsxs("div",{className:"connect-info",children:[o.jsx("h3",{children:"Connect Your QuickBooks Account"}),o.jsx("p",{children:"Connect your QuickBooks Online account to sync financial data, manage invoices, track expenses, and generate comprehensive financial reports directly from this dashboard."}),o.jsxs("ul",{className:"benefits-list",children:[o.jsx("li",{children:" Manage invoices and bills"}),o.jsx("li",{children:" Sync customers and vendors"}),o.jsx("li",{children:" Track expenses and revenue"}),o.jsx("li",{children:" Generate financial reports (P&L, Balance Sheet)"}),o.jsx("li",{children:" Export tax-ready documents"}),o.jsx("li",{children:" Real-time data synchronization"})]}),o.jsxs("div",{className:"quickbooks-badges",children:[o.jsx("span",{className:"badge",children:"QuickBooks Online"}),o.jsx("span",{className:"badge",children:"Bank-Level Security"}),o.jsx("span",{className:"badge",children:"OAuth 2.0"})]})]}),o.jsx("button",{className:"quickbooks-connect-btn",onClick:S,disabled:r,children:r?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"spinner"}),"Connecting..."]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"qb-icon",children:""}),"Connect with QuickBooks"]})})]})]})},I7=({onClose:t})=>{const{data:e,isLoading:n,refetch:s}=UR(),[r,{isLoading:i}]=FR(),[a,{isLoading:l}]=zR(),u=D.useRef(null),[d,f]=D.useState(null),[p,h]=D.useState({}),[_,C]=D.useState({first_name:"",last_name:"",phoneNumber:"",dob:"",address:""});D.useEffect(()=>{if(e!=null&&e.data){const P=e.data;C({first_name:P.first_name||"",last_name:P.last_name||"",phoneNumber:P.phoneNumber||"",dob:P.dob||"",address:P.address||""}),P.profile&&f(`${it.api.baseUrl}${P.profile}`)}},[e]);const j=P=>{const{name:O,value:v}=P.target;C(g=>({...g,[O]:v})),p[O]&&h(g=>({...g,[O]:null}))},b=()=>{const P={};if(_.phoneNumber&&(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test(_.phoneNumber)||(P.phoneNumber="Invalid phone number format")),_.dob){const O=new Date(_.dob);O>new Date&&(P.dob="Date of birth cannot be in the future");const g=new Date;g.setFullYear(g.getFullYear()-13),O>g&&(P.dob="You must be at least 13 years old")}return h(P),Object.keys(P).length===0},S=P=>{const O=P.target.files[0];if(!O)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(O.type)){h(N=>({...N,picture:"Only JPEG, PNG, GIF, and WebP images are allowed"}));return}if(O.size>5*1024*1024){h(N=>({...N,picture:"Image size must be less than 5MB"}));return}const g=new FileReader;g.onloadend=()=>{f(g.result)},g.readAsDataURL(O),h(N=>({...N,picture:null})),E(O)},E=async P=>{const O=new FormData;O.append("profilePicture",P);try{(await a(O).unwrap()).success&&(alert("Profile picture updated successfully!"),s())}catch(v){console.error("Upload error:",v),h(g=>({...g,picture:"Failed to upload picture"}))}},y=async P=>{var O;if(P.preventDefault(),!!b())try{(await r(_).unwrap()).success&&(alert("Profile updated successfully!"),t&&t())}catch(v){console.error("Update error:",v),alert(`Failed to update profile: ${((O=v.data)==null?void 0:O.message)||v.message}`)}};if(n)return o.jsx("div",{className:"profile-loading",children:"Loading profile..."});const x=e==null?void 0:e.data;return o.jsx("div",{className:"profile-edit-container",children:o.jsxs("div",{className:"profile-edit-modal",children:[o.jsxs("div",{className:"profile-header",children:[o.jsx("h2",{children:"Edit Profile"}),t&&o.jsx("button",{className:"close-btn",onClick:t,children:""})]}),o.jsxs("form",{onSubmit:y,className:"profile-form",children:[o.jsxs("div",{className:"profile-picture-section",children:[o.jsx("div",{className:"current-picture",children:d?o.jsx("img",{src:d,alt:"Profile"}):o.jsx("div",{className:"no-picture",children:o.jsx("span",{children:"No Picture"})})}),o.jsxs("div",{className:"picture-actions",children:[o.jsx("input",{ref:u,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:S,style:{display:"none"}}),o.jsx("button",{type:"button",className:"upload-btn",onClick:()=>{var P;return(P=u.current)==null?void 0:P.click()},disabled:l,children:l?"Uploading...":"Change Picture"}),p.picture&&o.jsx("span",{className:"error-text",children:p.picture})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsx("h3",{children:"Account Information"}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Email (Cannot be changed)"}),o.jsx("input",{type:"email",value:(x==null?void 0:x.email)||"",disabled:!0,className:"disabled-input"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Role"}),o.jsx("input",{type:"text",value:(x==null?void 0:x.role_id)==="1"?"Admin":(x==null?void 0:x.role_id)==="2"?"Staff":(x==null?void 0:x.role_id)==="3"?"Client":"Unknown",disabled:!0,className:"disabled-input"})]})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsx("h3",{children:"Personal Information"}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"first_name",children:"First Name"}),o.jsx("input",{type:"text",id:"first_name",name:"first_name",value:_.first_name,onChange:j,placeholder:"Enter your first name"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"last_name",children:"Last Name"}),o.jsx("input",{type:"text",id:"last_name",name:"last_name",value:_.last_name,onChange:j,placeholder:"Enter your last name"})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"phoneNumber",children:"Phone Number"}),o.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:_.phoneNumber,onChange:j,placeholder:"+1234567890",className:p.phoneNumber?"error":""}),p.phoneNumber&&o.jsx("span",{className:"error-text",children:p.phoneNumber})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"dob",children:"Date of Birth"}),o.jsx("input",{type:"date",id:"dob",name:"dob",value:_.dob,onChange:j,max:new Date().toISOString().split("T")[0],className:p.dob?"error":""}),p.dob&&o.jsx("span",{className:"error-text",children:p.dob})]})]}),o.jsxs("div",{className:"form-group full-width",children:[o.jsx("label",{htmlFor:"address",children:"Address"}),o.jsx("textarea",{id:"address",name:"address",value:_.address,onChange:j,placeholder:"Enter your address",rows:"3"})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsx("h3",{children:"Account Details"}),o.jsxs("div",{className:"info-grid",children:[o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"info-label",children:"Member Since:"}),o.jsx("span",{className:"info-value",children:x!=null&&x.createdAt?new Date(x.createdAt).toLocaleDateString():"N/A"})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"info-label",children:"Last Updated:"}),o.jsx("span",{className:"info-value",children:x!=null&&x.updatedAt?new Date(x.updatedAt).toLocaleDateString():"N/A"})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"info-label",children:"Account Status:"}),o.jsx("span",{className:`info-value status-${x!=null&&x.active?"active":"inactive"}`,children:x!=null&&x.active?"Active":"Inactive"})]})]})]}),o.jsxs("div",{className:"form-actions",children:[t&&o.jsx("button",{type:"button",className:"cancel-btn",onClick:t,disabled:i,children:"Cancel"}),o.jsx("button",{type:"submit",className:"save-btn",disabled:i,children:i?"Saving...":"Save Changes"})]})]})]})})},T7=({notification:t,onMarkAsRead:e,onDelete:n,icon:s})=>{const r=Ft(),i=u=>{const d=Math.floor((new Date-new Date(u))/1e3);return d<60?"just now":d<3600?`${Math.floor(d/60)}m ago`:d<86400?`${Math.floor(d/3600)}h ago`:d<604800?`${Math.floor(d/86400)}d ago`:new Date(u).toLocaleDateString()},a=u=>{switch(u){case"urgent":return"#dc3545";case"high":return"#ffc107";case"medium":return"#28a745";case"low":return"#6c757d";default:return"#6c757d"}},l=()=>{t.isRead||e(t._id),t.actionUrl&&(t.actionType==="external"?window.open(t.actionUrl,"_blank"):t.actionType==="modal"||r(t.actionUrl))};return o.jsxs("div",{className:`notification-item ${t.isRead?"":"unread"} priority-${t.priority}`,onClick:l,children:[o.jsx("div",{className:"priority-indicator",style:{backgroundColor:a(t.priority)}}),o.jsx("div",{className:"notification-icon",children:s}),o.jsxs("div",{className:"notification-content",children:[o.jsxs("div",{className:"notification-header",children:[o.jsx("h4",{className:"notification-title",children:t.title}),o.jsx("span",{className:"notification-time",children:i(t.createdAt)})]}),o.jsx("p",{className:"notification-message",children:t.message}),t.senderName&&o.jsxs("div",{className:"notification-meta",children:[o.jsxs("span",{className:"sender",children:["From: ",t.senderName]}),t.category&&o.jsx("span",{className:"category-tag",children:t.category})]}),t.actionUrl&&o.jsx("div",{className:"notification-action",children:o.jsxs("span",{className:"action-link",children:[t.actionLabel||"View Details",t.actionType==="external"&&o.jsx(V8,{size:12})]})})]}),o.jsxs("div",{className:"notification-actions",children:[!t.isRead&&o.jsx("button",{className:"action-btn mark-read",onClick:u=>{u.stopPropagation(),e(t._id)},title:"Mark as read",children:o.jsx(vh,{size:14})}),o.jsx("button",{className:"action-btn delete",onClick:u=>{u.stopPropagation(),window.confirm("Delete this notification?")&&n(t._id)},title:"Delete",children:o.jsx(hj,{size:14})})]})]})},A7=()=>{const t=xs(),[e,n]=D.useState(!1),[s,r]=D.useState(!1),i=Se(MP),a=Se(zP),l=Se(BP),u=Se($P),d=Se(w=>w.notifications.unreadCount),f=Se(w=>w.notifications.notifications),[p]=qR(),[h]=WR(),[_]=HR(),C=u,j=async()=>{var w;n(!0);try{const T=await(await fetch("/api/notifications?limit=100",{headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}})).json();if(T.success&&((w=T.data)!=null&&w.notifications)){if(f.length===0)t(ON(T.data.notifications));else{const I=new Set(f.map(V=>V._id||V.id));T.data.notifications.filter(V=>!I.has(V._id)&&!I.has(V.id)).forEach(V=>{t(DN(V))})}T.data.unreadCount!==void 0&&t(qd(T.data.unreadCount))}}catch(A){console.error("Failed to refresh notifications:",A)}finally{n(!1)}},b=[{value:"all",label:"All",icon:cd},{value:"unread",label:"Unread",icon:Di},{value:"announcements",label:"Announcements",icon:LS},{value:"tasks",label:"Tasks",icon:ud},{value:"alerts",label:"Alerts",icon:Di}],S=[{value:"all",label:"All Categories"},{value:"general",label:"General"},{value:"task",label:"Task"},{value:"alert",label:"Alert"},{value:"update",label:"Update"},{value:"warning",label:"Warning"}],E=[{value:"all",label:"All Priorities"},{value:"urgent",label:"Urgent",color:"#dc3545"},{value:"high",label:"High",color:"#ffc107"},{value:"medium",label:"Medium",color:"#28a745"},{value:"low",label:"Low",color:"#6c757d"}],y=async w=>{console.log(" Marking notification as read:",w),console.log(" Current filter:",i);try{t(IP(w)),console.log(" Redux state updated");const A=await p(w);A.error?(console.error(" Backend error marking as read:",A.error),j()):console.log(" Backend successfully updated")}catch(A){console.error(" Unexpected error marking notification as read:",A),j()}},x=async()=>{try{n(!0),await h(),t(TP())}catch(w){console.error("Error marking all as read:",w)}finally{n(!1)}},P=async w=>{try{await _(w),t(LN(w))}catch(A){console.error("Error deleting notification:",A)}},O=w=>{t(AP(w)),t(lp())},v=w=>{t(PP(w)),t(lp())},g=w=>{t(RP(w)),t(lp())},N=w=>{switch(w){case"announcement":return o.jsx(LS,{size:16});case"assignment":case"task":return o.jsx(ud,{size:16});case"document":return o.jsx(ud,{size:16});case"payment":return o.jsx(dj,{size:16});case"reminder":return o.jsx(M8,{size:16});case"alert":return o.jsx(Di,{size:16});default:return o.jsx(cd,{size:16})}};return o.jsxs("div",{className:"notification-panel",children:[o.jsxs("div",{className:"panel-header",children:[o.jsxs("div",{className:"header-title",children:[o.jsx("h3",{children:"Notifications"}),d>0&&o.jsxs("span",{className:"unread-count",children:[d," unread"]})]}),o.jsxs("div",{className:"header-actions",children:[o.jsx("button",{className:"action-btn",onClick:j,title:"Refresh",disabled:e,children:o.jsx(Il,{size:16,className:e?"spinning":""})}),o.jsx("button",{className:"action-btn",onClick:()=>r(!s),title:"Filters",children:o.jsx(H8,{size:16})}),d>0&&o.jsx("button",{className:"action-btn",onClick:x,disabled:e,title:"Mark all as read",children:o.jsx(T8,{size:16})})]})]}),o.jsx("div",{className:"filter-tabs",children:b.map(w=>{const A=w.icon;return o.jsxs("button",{className:`filter-tab ${i===w.value?"active":""}`,onClick:()=>O(w.value),children:[o.jsx(A,{size:14}),o.jsx("span",{children:w.label})]},w.value)})}),s&&o.jsxs("div",{className:"advanced-filters",children:[o.jsxs("div",{className:"filter-group",children:[o.jsx("label",{children:"Category:"}),o.jsx("select",{value:a,onChange:w=>v(w.target.value),children:S.map(w=>o.jsx("option",{value:w.value,children:w.label},w.value))})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("label",{children:"Priority:"}),o.jsx("select",{value:l,onChange:w=>g(w.target.value),children:E.map(w=>o.jsx("option",{value:w.value,children:w.label},w.value))})]})]}),o.jsx("div",{className:"notification-list",children:e?o.jsxs("div",{className:"loading-state",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Loading notifications..."})]}):C.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx(cd,{size:48}),o.jsx("h4",{children:"No notifications"}),o.jsx("p",{children:"You're all caught up!"})]}):o.jsx(o.Fragment,{children:C.map(w=>o.jsx(T7,{notification:w,onMarkAsRead:y,onDelete:P,icon:N(w.type)},w._id||w.id))})}),o.jsx("div",{className:"panel-footer",children:o.jsxs("a",{href:"/settings/notifications",className:"footer-link",children:[o.jsx(r7,{size:14}),o.jsx("span",{children:"Notification Settings"})]})})]})},P7=()=>{const t=xs(),e=Se(i=>{var a,l,u,d,f,p,h,_,C;if((l=(a=i.user)==null?void 0:a.currentUser)!=null&&l.id)return i.user.currentUser.id;if((d=(u=i.user)==null?void 0:u.currentUser)!=null&&d._id)return i.user.currentUser._id;if((p=(f=i.auth)==null?void 0:f.user)!=null&&p.id)return i.auth.user.id;if((_=(h=i.auth)==null?void 0:h.user)!=null&&_._id)return i.auth.user._id;if((C=i.auth)!=null&&C.userId)return i.auth.userId;try{const j=localStorage.getItem("userInfo");if(j){const b=JSON.parse(j);return b.id||b._id||b.userId}}catch{console.debug("Could not parse user info from localStorage")}return null}),n=Se(i=>{var a,l,u,d;return((a=i.user)==null?void 0:a.isAuthenticated)!==void 0?i.user.isAuthenticated:((l=i.auth)==null?void 0:l.isAuthenticated)!==void 0?i.auth.isAuthenticated:!!((u=i.auth)!=null&&u.token||(d=i.user)!=null&&d.currentUser)}),s=D.useRef(null),r=D.useRef(new Set);return D.useEffect(()=>{var l,u;const i=t((d,f)=>f()),a=((u=(l=i.notifications)==null?void 0:l.notifications)==null?void 0:u.length)>0;n&&e&&!a?(console.log(" Store is empty, fetching initial notifications..."),fetch("/api/notifications?limit=100",{headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}}).then(d=>d.json()).then(d=>{var f;d.success&&((f=d.data)!=null&&f.notifications)&&(console.log(" Initializing Redux store with",d.data.notifications.length,"notifications"),t(ON(d.data.notifications)),d.data.unreadCount!==void 0&&t(qd(d.data.unreadCount)))}).catch(d=>{console.error("Failed to fetch initial notifications:",d)})):a&&console.log(" Store already has",i.notifications.notifications.length,"notifications, skipping init")},[n,e,t]),D.useEffect(()=>{if(!n||!e){console.log("User not authenticated, skipping real-time listeners");return}return console.log("Setting up Firebase real-time listeners for user:",e),(async()=>{try{Qk();const a=o9();if(!a){console.error("Failed to get Firebase Realtime Database instance");return}const l=Vo(a,".info/connected"),u=Ov(l,j=>{const b=j.val();console.log("Firebase connection status:",b?" Connected":" Disconnected"),b||console.warn("Firebase Realtime Database is not connected yet, waiting...")}),d=Vo(a,`notifications/${e}`),f=[];s.current=d,(async()=>{try{const j=await fetch("/api/notifications?unreadOnly=true",{headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}});if(j.ok){const b=await j.json();console.log("Fetched initial notifications:",b)}}catch(j){console.debug("Could not fetch initial notifications:",j)}})(),console.log("Setting up onChildAdded listener...");const h=HE(d,j=>{const b=j.val();if(console.log(" FIREBASE onChildAdded TRIGGERED!",b),!b)return;const S=`${b.id}-${b.timestamp}`;r.current.has(S)||(r.current.add(S),b.action==="new"&&(console.log(" REAL-TIME: New notification received via Firebase:",b.id),t(Ti.endpoints.getNotificationById.initiate(b.id)).then(({data:E})=>{if(console.log(" Notification API response:",E),E){const{notification:y,unreadCount:x}=E;console.log(" Extracted notification:",y),console.log(" Extracted unreadCount:",x),y?(console.log(" Dispatching addNotification with:",y),t(DN(y)),x!=null&&(console.log(" Dispatching updateUnreadCount with:",x),t(qd(x))),t(OP(!0)),R7(),window.dispatchEvent(new CustomEvent("new-notification",{detail:{notification:y,unreadCount:x}})),console.log(" All dispatches completed")):console.error(" No notification in response data")}else console.error(" No data returned from API")}).catch(E=>{console.error("Failed to fetch notification details:",E)})))},j=>{console.error("Firebase onChildAdded error:",j)});f.push(h),console.log("Setting up onChildChanged listener...");const _=NM(d,j=>{const b=j.val();console.log(" FIREBASE onChildChanged TRIGGERED!",b),b&&(b.action==="read"||b.action==="update")&&t(Ti.endpoints.getNotificationById.initiate(b.id)).then(({data:S})=>{S&&t(jP({id:S._id,updates:S}))}).catch(S=>{console.error("Failed to fetch updated notification:",S)})},j=>{console.error("Firebase onChildChanged error:",j)});f.push(_),console.log("Setting up onChildRemoved listener...");const C=CM(d,j=>{const b=j.val();console.log(" FIREBASE onChildRemoved TRIGGERED!",b),t(LN(b.id))},j=>{console.error("Firebase onChildRemoved error:",j)});f.push(C),console.log(" All Firebase real-time listeners are now active"),console.log("Listening on path:",`notifications/${e}`),f.push(u),s.current=f,window.__firebaseRealtimeActive=!0}catch(a){console.error(" Error setting up real-time notifications:",a),console.error("Error details:",a.message,a.code),window.__firebaseRealtimeActive=!1}})(),()=>{console.log("Cleaning up Firebase listeners"),Array.isArray(s.current)?s.current.forEach(a=>{typeof a=="function"&&a()}):s.current&&EM(s.current),r.current.clear(),window.__firebaseRealtimeActive=!1}},[e,n,t]),null},R7=()=>{try{if(localStorage.getItem("notificationSound")!=="false"&&typeof Audio<"u"){const e=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBi6Gy/DaiToGGGS47OmuVRUIPlyx6OWkUBUMP1+y6OmqWBUGOlyx6OOiURUMPlux5+OmUxQGO12w6OatVxUGO12w6OmpUxUGPV+x5+OlUBUKQmG05+OlVBUGPV2w6OetVxUGP12w6OGlUxQIQmG05+OlVRUIRWO35+agVRUIQmG05+OlVRUGPVyx6OatVxUGO12w6OatVxUGO12w6OmpVRUGPV+x5+OlUxUGPV+x5+OlUxUGO12w6OatVxUGO12w6OatVxUGO12w6OWnUxUGPV+x5+OlUxUGO12w6OOlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPVyx5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGO12w6OOlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxUGPV+x5+OlUxU=");e.volume=.3,e.play().catch(n=>{console.debug("Could not play notification sound:",n)})}}catch(t){console.debug("Error playing notification sound:",t)}},O7=()=>{const t=xs(),[e,n]=D.useState(!1),[s,r]=D.useState("checking"),i=D.useRef(null),a=Se(DP),l=Se(LP),u=Se(UP),d=Se(FP);P7();const{data:f}=VR();D.useEffect(()=>{const h=()=>{const C=window.__firebaseRealtimeConnected,j=window.__firebaseRealtimeActive;r(C&&j?"connected":C&&!j?"initializing":"disconnected")};h();const _=setInterval(h,2e3);return()=>clearInterval(_)},[]),D.useEffect(()=>{f!==void 0&&t(qd(f))},[f,t]),D.useEffect(()=>{const h=()=>{n(!0),setTimeout(()=>n(!1),1e3),u&&i.current&&i.current.play().catch(_=>console.log("Sound play failed:",_))};return window.addEventListener("new-notification",h),()=>{window.removeEventListener("new-notification",h)}},[u]),D.useEffect(()=>{d&&"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[d]);const p=()=>{t(b0())};return D.useEffect(()=>{const h=_=>{l&&!_.target.closest(".notification-container")&&t(b0())};return l&&document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[l,t]),o.jsxs("div",{className:"notification-container",children:[o.jsxs("button",{className:`notification-bell ${e?"animate":""}`,onClick:p,"aria-label":"Notifications","aria-expanded":l,title:`Notifications (Real-time: ${s})`,children:[o.jsx(cd,{size:24}),a>0&&o.jsx("span",{className:"notification-badge",children:a>99?"99+":a}),s!=="connected"&&o.jsx("span",{className:`connection-indicator ${s}`,title:s==="initializing"?"Connecting...":"Disconnected"})]}),l&&o.jsx(A7,{}),o.jsx("audio",{ref:i,src:"/notification-sound.mp3",preload:"auto",style:{display:"none"}}),!1]})},D7=({onUploadSuccess:t,multipleFiles:e=!1})=>{const[n,s]=D.useState(!1),[r,i]=D.useState([]),[a,l]=D.useState(""),[u,d]=D.useState({}),[f,p]=D.useState({}),h=D.useRef(null),_=D.useRef(0),[C,{isLoading:j}]=XR(),[b,{isLoading:S}]=ZR(),{data:E,isLoading:y}=$N(),x=(E==null?void 0:E.data)||[],P=M=>{const F=["application/pdf","image/jpeg","image/jpg","image/png","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];return M.size>10485760?{valid:!1,error:`${M.name}: File size exceeds 10MB`}:F.includes(M.type)?{valid:!0}:{valid:!1,error:`${M.name}: File type not supported`}},O=D.useCallback(M=>{M.preventDefault(),M.stopPropagation(),_.current++,M.dataTransfer.items&&M.dataTransfer.items.length>0&&s(!0)},[]),v=D.useCallback(M=>{M.preventDefault(),M.stopPropagation(),_.current--,_.current===0&&s(!1)},[]),g=D.useCallback(M=>{M.preventDefault(),M.stopPropagation()},[]),N=D.useCallback(M=>{M.preventDefault(),M.stopPropagation(),s(!1),_.current=0;const U=[...M.dataTransfer.files];w(U)},[]),w=M=>{const U=[],F={};M.forEach(B=>{const q=P(B);q.valid?U.push(B):F[B.name]=q.error}),p(F),i(e?B=>[...B,...U]:U.slice(0,1))},A=M=>{const U=[...M.target.files];w(U)},T=M=>{var F;i(B=>B.filter((q,Y)=>Y!==M));const U=(F=r[M])==null?void 0:F.name;U&&(p(B=>{const q={...B};return delete q[U],q}),d(B=>{const q={...B};return delete q[U],q}))},I=async()=>{var U;if(!a){alert("Please select a document category");return}if(r.length===0){alert("Please select files to upload");return}const M=new FormData;e?r.forEach(F=>{M.append("documents",F)}):M.append("document",r[0]),M.append("category",a);try{let F;e?F=await b(M).unwrap():F=await C(M).unwrap(),i([]),l(""),p({}),d({}),t&&t(F.data),alert("Documents uploaded successfully!")}catch(F){console.error("Upload failed:",F),alert(`Upload failed: ${((U=F.data)==null?void 0:U.message)||F.message}`)}},L=M=>{if(M===0)return"0 Bytes";const U=1024,F=["Bytes","KB","MB","GB"],B=Math.floor(Math.log(M)/Math.log(U));return Math.round(M/Math.pow(U,B)*100)/100+" "+F[B]},V=j||S;return o.jsxs("div",{className:"document-upload-container",children:[o.jsx("h2",{children:"Upload Documents"}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{htmlFor:"category",children:["Document Category ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("select",{id:"category",value:a,onChange:M=>l(M.target.value),required:!0,disabled:V,children:[o.jsx("option",{value:"",children:"Select Category"}),x.map(M=>o.jsx("option",{value:M.value,children:M.label},M.value))]})]}),o.jsxs("div",{className:`dropzone ${n?"dragging":""}`,onDragEnter:O,onDragLeave:v,onDragOver:g,onDrop:N,onClick:()=>{var M;return!V&&((M=h.current)==null?void 0:M.click())},children:[o.jsx("div",{className:"dropzone-icon",children:""}),o.jsx("p",{children:n?"Drop files here...":`Drag and drop ${e?"files":"a file"} here, or click to browse`}),o.jsx("p",{className:"format-text",children:"Supported formats: PDF, JPG, PNG, DOC, DOCX, XLS, XLSX"}),o.jsx("p",{className:"size-text",children:"Maximum file size: 10MB"}),o.jsx("input",{ref:h,type:"file",onChange:A,multiple:e,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx",style:{display:"none"},disabled:V})]}),Object.keys(f).length>0&&o.jsxs("div",{className:"error-container",children:[o.jsx("h4",{children:"Upload Errors:"}),o.jsx("ul",{children:Object.entries(f).map(([M,U])=>o.jsx("li",{children:U},M))})]}),r.length>0&&o.jsxs("div",{className:"selected-files",children:[o.jsx("h3",{children:"Selected Files:"}),o.jsx("ul",{children:r.map((M,U)=>o.jsxs("li",{className:"file-item",children:[o.jsxs("div",{className:"file-info",children:[o.jsx("span",{className:"file-icon",children:""}),o.jsx("span",{className:"file-name",children:M.name}),o.jsxs("span",{className:"file-size",children:["(",L(M.size),")"]}),u[M.name]&&o.jsxs("span",{className:"file-progress",children:["Uploading: ",u[M.name],"%"]})]}),o.jsx("button",{onClick:()=>T(U),disabled:V,className:"btn-remove",children:"Remove"})]},U))})]}),o.jsxs("div",{className:"action-buttons",children:[o.jsx("button",{onClick:I,disabled:V||r.length===0||!a,className:"btn-primary",children:V?"Uploading...":"Upload Documents"}),r.length>0&&o.jsx("button",{onClick:()=>{i([]),p({}),d({})},disabled:V,className:"btn-secondary",children:"Clear All"})]})]})},L7=({onDocumentSelect:t})=>{var O,v;const[e,n]=D.useState({category:"",search:"",status:"active"}),[s,r]=D.useState(1),{data:i,isLoading:a,isFetching:l,refetch:u}=eO({...e,page:s,limit:20}),{data:d}=$N(),f=(d==null?void 0:d.data)||[],[p]=tO(),h=((O=i==null?void 0:i.data)==null?void 0:O.documents)||[],_=((v=i==null?void 0:i.data)==null?void 0:v.pagination)||{},C=g=>{if(g===0)return"0 Bytes";const N=1024,w=["Bytes","KB","MB","GB"],A=Math.floor(Math.log(g)/Math.log(N));return Math.round(g/Math.pow(N,A)*100)/100+" "+w[A]},j=g=>new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),b=g=>{const N=f.find(w=>w.value===g);return(N==null?void 0:N.label)||g},S=(g,N)=>{n(w=>({...w,[g]:N})),r(1)},E=async g=>{var N;if(window.confirm("Are you sure you want to delete this document?"))try{await p(g).unwrap(),alert("Document deleted successfully"),u()}catch(w){console.error("Delete failed:",w),alert(`Failed to delete document: ${((N=w.data)==null?void 0:N.message)||w.message}`)}},y=(g,N)=>{const w=localStorage.getItem("token"),T=`${it.api.baseUrl}/documents/${g}/download`,I=document.createElement("a");I.href=T,I.download=N,fetch(T,{headers:{Authorization:`Bearer ${w}`}}).then(L=>L.blob()).then(L=>{const V=window.URL.createObjectURL(L);I.href=V,document.body.appendChild(I),I.click(),document.body.removeChild(I),window.URL.revokeObjectURL(V)}).catch(L=>{console.error("Download failed:",L),alert("Failed to download document")})},x=()=>{n({category:"",search:"",status:"active"}),r(1)},P=g=>({pdf:"",doc:"",docx:"",xls:"",xlsx:"",jpg:"",jpeg:"",png:""})[g==null?void 0:g.toLowerCase()]||"";return o.jsxs("div",{className:"document-list-container",children:[o.jsx("h2",{children:"My Documents"}),o.jsxs("div",{className:"filters-section",children:[o.jsx("h3",{children:"Filters"}),o.jsxs("div",{className:"filters-grid",children:[o.jsx("input",{type:"text",placeholder:"Search documents...",value:e.search,onChange:g=>S("search",g.target.value),className:"filter-input"}),o.jsxs("select",{value:e.category,onChange:g=>S("category",g.target.value),className:"filter-select",children:[o.jsx("option",{value:"",children:"All Categories"}),f.map(g=>o.jsx("option",{value:g.value,children:g.label},g.value))]}),o.jsx("button",{onClick:x,className:"btn-clear-filters",children:"Clear Filters"})]})]}),a&&o.jsx("p",{className:"loading-message",children:"Loading documents..."}),!a&&h.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("p",{children:"No documents found."}),o.jsx("span",{children:"Upload your first document to get started!"})]}):o.jsxs("table",{className:"documents-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Type"}),o.jsx("th",{children:"Name"}),o.jsx("th",{children:"Category"}),o.jsx("th",{children:"Size"}),o.jsx("th",{children:"Uploaded"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:h.map(g=>o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx("span",{className:"file-icon",children:P(g.fileType)})}),o.jsx("td",{children:o.jsx("div",{className:"file-name",children:g.originalName})}),o.jsx("td",{children:b(g.category)}),o.jsx("td",{children:C(g.fileSize)}),o.jsx("td",{children:j(g.createdAt)}),o.jsx("td",{children:o.jsx("span",{className:`status-badge ${g.status}`,children:g.status})}),o.jsxs("td",{className:"action-buttons",children:[o.jsx("button",{onClick:()=>y(g._id,g.originalName),className:"btn-action download",title:"Download",children:""}),o.jsx("button",{onClick:()=>E(g._id),className:"btn-action delete",title:"Delete",children:""})]})]},g._id))})]}),_.pages>1&&o.jsxs("div",{className:"pagination",children:[o.jsx("button",{onClick:()=>r(g=>Math.max(1,g-1)),disabled:s===1,children:"Previous"}),o.jsxs("span",{className:"pagination-info",children:["Page ",_.currentPage," of ",_.pages,"(",_.total," total documents)"]}),o.jsx("button",{onClick:()=>r(g=>Math.min(_.pages,g+1)),disabled:s===_.pages,children:"Next"})]})]})},M7=()=>{const[t,e]=D.useState("list"),[n,s]=D.useState(0),r=i=>{e("list"),s(a=>a+1)};return o.jsxs("div",{className:"document-management-container",children:[o.jsx("h1",{children:"Document Management"}),o.jsxs("div",{className:"tab-navigation",children:[o.jsxs("button",{onClick:()=>e("list"),className:`tab-button ${t==="list"?"active":""}`,children:[o.jsx("span",{className:"tab-icon",children:""})," My Documents"]}),o.jsxs("button",{onClick:()=>e("upload"),className:`tab-button ${t==="upload"?"active":""}`,children:[o.jsx("span",{className:"tab-icon",children:""})," Upload Documents"]})]}),o.jsxs("div",{className:"tab-content",children:[t==="list"&&o.jsx(L7,{},n),t==="upload"&&o.jsx(D7,{onUploadSuccess:r,multipleFiles:!0})]})]})},U7=()=>{const[t,e]=D.useState("overview"),[n,s]=D.useState(!1),[r,i]=D.useState(null),a=Ft(),l=bs(),u=xs(),d=Se(rr);D.useEffect(()=>{const p=new URLSearchParams(l.search),h=p.get("tab"),_=p.get("connected"),C=p.get("error"),j=p.get("company");h==="quickbooks"&&(e("quickbooks"),_==="true"?i({success:!0,message:"QuickBooks connected successfully!",company:j}):C&&i({success:!1,message:"QuickBooks connection failed. Please try again."}),window.history.replaceState({},"","/dashboard"),setTimeout(()=>{i(null)},5e3))},[l.search]);const f=()=>{u(kc()),a("/login")};return o.jsxs("div",{className:"dashboard-container",children:[o.jsx("header",{className:"dashboard-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("h1",{children:"Client Dashboard"}),o.jsxs("div",{className:"user-section",children:[o.jsxs("span",{className:"welcome-text",children:["Welcome, ",d==null?void 0:d.first_name," ",d==null?void 0:d.last_name,"!"]}),o.jsx("span",{className:"role-badge",children:"Client"}),o.jsx(O7,{}),o.jsx("button",{onClick:f,className:"logout-button",children:"Logout"})]})]})}),o.jsx("main",{className:"dashboard-main",children:o.jsxs("div",{className:"dashboard-content",children:[o.jsxs("section",{className:"user-info-card",children:[o.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[o.jsx("h2",{children:"My Profile"}),o.jsx("button",{className:"btn-primary",onClick:()=>s(!0),style:{padding:"8px 16px",background:"#4299e1",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Edit Profile"})]}),o.jsxs("div",{className:"info-grid",children:[o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Name:"}),o.jsxs("span",{children:[d==null?void 0:d.first_name," ",d==null?void 0:d.last_name]})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Email:"}),o.jsx("span",{children:d==null?void 0:d.email})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Phone:"}),o.jsx("span",{children:(d==null?void 0:d.phoneNumber)||"Not provided"})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Address:"}),o.jsx("span",{children:(d==null?void 0:d.address)||"Not provided"})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Date of Birth:"}),o.jsx("span",{children:d!=null&&d.dob?new Date(d.dob).toLocaleDateString():"Not provided"})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Account Type:"}),o.jsx("span",{children:"Client"})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Account Status:"}),o.jsx("span",{className:"status-active",children:"Active"})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("label",{children:"Member Since:"}),o.jsx("span",{children:d!=null&&d.createdAt?new Date(d.createdAt).toLocaleDateString():"N/A"})]})]})]}),o.jsxs("section",{className:"stats-section",children:[o.jsx("h2",{children:"Account Overview"}),o.jsxs("div",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-number",children:"0"}),o.jsx("div",{className:"stat-label",children:"Documents"})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-number",children:"0"}),o.jsx("div",{className:"stat-label",children:"Messages"})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-number",children:"0"}),o.jsx("div",{className:"stat-label",children:"Pending Items"})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-number",children:new Date().toLocaleDateString()}),o.jsx("div",{className:"stat-label",children:"Last Login"})]})]})]}),o.jsxs("section",{className:"client-navigation",children:[o.jsx("h2",{children:"Services"}),o.jsxs("div",{className:"action-buttons",children:[o.jsx("button",{className:`action-btn ${t==="overview"?"active":""}`,onClick:()=>e("overview"),children:"Overview"}),o.jsx("button",{className:`action-btn ${t==="documents"?"active":""}`,onClick:()=>e("documents"),children:"My Documents"}),o.jsx("button",{className:`action-btn ${t==="services"?"active":""}`,onClick:()=>e("services"),children:"Services"}),o.jsx("button",{className:`action-btn ${t==="billing"?"active":""}`,onClick:()=>e("billing"),children:"Billing"}),o.jsx("button",{className:`action-btn ${t==="support"?"active":""}`,onClick:()=>e("support"),children:"Support"}),o.jsx("button",{className:`action-btn ${t==="amazon"?"active":""}`,onClick:()=>e("amazon"),children:"Amazon Integration"}),o.jsx("button",{className:`action-btn ${t==="amazon-sandbox"?"active":""}`,onClick:()=>e("amazon-sandbox"),children:"Amazon Sandbox"}),o.jsx("button",{className:`action-btn ${t==="shopify"?"active":""}`,onClick:()=>e("shopify"),children:"Shopify Integration"}),o.jsx("button",{className:`action-btn ${t==="quickbooks"?"active":""}`,onClick:()=>e("quickbooks"),children:"QuickBooks Integration"})]})]}),t==="overview"&&o.jsxs(o.Fragment,{children:[o.jsxs("section",{className:"welcome-section",children:[o.jsx("h2",{children:"Welcome to Plurify"}),o.jsxs("div",{className:"welcome-content",children:[o.jsx("p",{children:"We're glad to have you as our valued client. This dashboard is your central hub for accessing all our services and managing your account."}),o.jsxs("div",{className:"quick-links",children:[o.jsx("h3",{children:"Quick Links"}),o.jsxs("ul",{children:[o.jsx("li",{children:o.jsx("a",{href:"#",onClick:p=>{p.preventDefault(),e("documents")},children:"Upload Documents"})}),o.jsx("li",{children:o.jsx("a",{href:"#",onClick:p=>{p.preventDefault(),e("services")},children:"View Available Services"})}),o.jsx("li",{children:o.jsx("a",{href:"#",onClick:p=>{p.preventDefault(),e("support")},children:"Contact Support"})})]})]})]})]}),o.jsxs("section",{className:"announcements",children:[o.jsx("h2",{children:"Announcements"}),o.jsx("div",{className:"announcement-list",children:o.jsxs("div",{className:"announcement-item",children:[o.jsxs("div",{className:"announcement-header",children:[o.jsx("span",{className:"announcement-badge",children:"New"}),o.jsx("span",{className:"announcement-date",children:new Date().toLocaleDateString()})]}),o.jsx("h4",{children:"Welcome to Plurify!"}),o.jsx("p",{children:"Your account has been successfully created. Explore our services and features."})]})})]})]}),t==="documents"&&o.jsx("section",{className:"documents-section",children:o.jsx(M7,{})}),t==="services"&&o.jsxs("section",{className:"services-section",children:[o.jsx("h2",{children:"Available Services"}),o.jsxs("div",{className:"services-grid",children:[o.jsxs("div",{className:"service-card",children:[o.jsx("div",{className:"service-icon",children:""}),o.jsx("h3",{children:"Tax Planning"}),o.jsx("p",{children:"Professional tax planning and preparation services."}),o.jsx("button",{className:"btn-outline",children:"Learn More"})]}),o.jsxs("div",{className:"service-card",children:[o.jsx("div",{className:"service-icon",children:""}),o.jsx("h3",{children:"Financial Consulting"}),o.jsx("p",{children:"Expert financial advice and consulting services."}),o.jsx("button",{className:"btn-outline",children:"Learn More"})]}),o.jsxs("div",{className:"service-card",children:[o.jsx("div",{className:"service-icon",children:""}),o.jsx("h3",{children:"Document Management"}),o.jsx("p",{children:"Secure document storage and management."}),o.jsx("button",{className:"btn-outline",children:"Learn More"})]}),o.jsxs("div",{className:"service-card",children:[o.jsx("div",{className:"service-icon",children:""}),o.jsx("h3",{children:"Business Advisory"}),o.jsx("p",{children:"Strategic business advisory services."}),o.jsx("button",{className:"btn-outline",children:"Learn More"})]})]})]}),t==="billing"&&o.jsxs("section",{className:"billing-section",children:[o.jsx("h2",{children:"Billing & Payments"}),o.jsxs("div",{className:"billing-summary",children:[o.jsxs("div",{className:"billing-card",children:[o.jsx("h3",{children:"Current Balance"}),o.jsx("div",{className:"balance-amount",children:"$0.00"}),o.jsx("button",{className:"btn-primary",children:"Make Payment"})]}),o.jsxs("div",{className:"billing-history",children:[o.jsx("h3",{children:"Payment History"}),o.jsx("div",{className:"empty-state",children:o.jsx("p",{children:"No payment history available."})})]})]})]}),t==="support"&&o.jsxs("section",{className:"support-section",children:[o.jsx("h2",{children:"Support Center"}),o.jsxs("div",{className:"support-options",children:[o.jsxs("div",{className:"support-card",children:[o.jsx("div",{className:"support-icon",children:""}),o.jsx("h3",{children:"Email Support"}),o.jsx("p",{children:"Send us an email and we'll respond within 24 hours."}),o.jsx("a",{href:"mailto:support@plurify.com",className:"btn-primary",children:"Send Email"})]}),o.jsxs("div",{className:"support-card",children:[o.jsx("div",{className:"support-icon",children:""}),o.jsx("h3",{children:"Live Chat"}),o.jsx("p",{children:"Chat with our support team in real-time."}),o.jsx("button",{className:"btn-primary",children:"Start Chat"})]}),o.jsxs("div",{className:"support-card",children:[o.jsx("div",{className:"support-icon",children:""}),o.jsx("h3",{children:"Phone Support"}),o.jsx("p",{children:"Call us directly for immediate assistance."}),o.jsx("a",{href:"tel:1-800-PLURIFY",className:"btn-primary",children:"Call Now"})]})]}),o.jsxs("div",{className:"faq-section",children:[o.jsx("h3",{children:"Frequently Asked Questions"}),o.jsxs("div",{className:"faq-list",children:[o.jsxs("details",{className:"faq-item",children:[o.jsx("summary",{children:"How do I upload documents?"}),o.jsx("p",{children:'Navigate to the Documents tab and click on "Upload Document" button to upload your files.'})]}),o.jsxs("details",{className:"faq-item",children:[o.jsx("summary",{children:"How can I contact my assigned staff?"}),o.jsx("p",{children:"You can send messages through the messaging system or use the support options above."})]}),o.jsxs("details",{className:"faq-item",children:[o.jsx("summary",{children:"What payment methods do you accept?"}),o.jsx("p",{children:"We accept all major credit cards, bank transfers, and online payment methods."})]})]})]})]}),t==="amazon"&&o.jsx("section",{className:"amazon-section",children:o.jsx(b7,{})}),t==="amazon-sandbox"&&o.jsx("section",{className:"amazon-sandbox-section",children:o.jsx(N7,{})}),t==="shopify"&&o.jsx("section",{className:"shopify-section",children:o.jsx(E7,{})}),t==="quickbooks"&&o.jsxs("section",{className:"quickbooks-section",children:[r&&o.jsx("div",{style:{padding:"12px 16px",borderRadius:"8px",marginBottom:"16px",backgroundColor:r.success?"#D1FAE5":"#FEE2E2",color:r.success?"#065F46":"#991B1B",border:`1px solid ${r.success?"#34D399":"#F87171"}`},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("span",{style:{fontSize:"18px"},children:r.success?"":""}),o.jsxs("div",{children:[o.jsx("strong",{children:r.message}),r.company&&o.jsxs("div",{style:{fontSize:"14px",marginTop:"4px"},children:["Company: ",r.company]})]})]})}),o.jsx(j7,{})]}),o.jsxs("section",{className:"recent-activity",children:[o.jsx("h2",{children:"Recent Activity"}),o.jsxs("div",{className:"activity-list",children:[o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{className:"activity-icon",children:""}),o.jsxs("div",{className:"activity-details",children:[o.jsx("p",{children:"Account created successfully"}),o.jsx("span",{className:"activity-time",children:"Today"})]})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{className:"activity-icon",children:""}),o.jsxs("div",{className:"activity-details",children:[o.jsx("p",{children:"Logged in to your account"}),o.jsx("span",{className:"activity-time",children:"Just now"})]})]})]})]})]})}),n&&o.jsx(I7,{onClose:()=>s(!1)})]})},F7=()=>{const t=Se(rr);if(!t)return o.jsx(gn,{to:"/login",replace:!0});switch(t.role_id){case jr.ADMIN:return o.jsx(x7,{});case jr.STAFF:return o.jsx(w7,{});case jr.CLIENT:return o.jsx(U7,{});default:return console.error("Unknown user role:",t.role_id),o.jsx(gn,{to:"/login",replace:!0})}},z7="/assets/plutus-logo-COgl9FC1.svg",B7=({children:t,question:e,subtext:n,currentStep:s,totalSteps:r,onNext:i,onBack:a,isSubmitting:l,isFirstStep:u,isLastStep:d,className:f=""})=>{const p=s/r*100,h=d?l?"Completing...":"Complete":"Next";return o.jsx("div",{className:`main_wrapper ${f}`,children:o.jsxs("div",{className:"outer-container",children:[o.jsx("div",{className:"left-panel",children:o.jsx("img",{src:z7,alt:"Plutus Logo"})}),o.jsxs("div",{className:"right-panel",children:[o.jsx("div",{className:"progress",children:o.jsx("div",{className:"progress-bar",style:{width:`${p}%`},role:"progressbar","aria-valuenow":s,"aria-valuemin":1,"aria-valuemax":r})}),o.jsxs("div",{className:"ques-outer-wrapper",children:[o.jsxs("div",{className:"heading_stepper",children:[o.jsx("div",{className:"question",children:e}),n&&o.jsx("div",{className:"subtext",children:n})]}),o.jsx("div",{className:"question_sec",children:t})]}),o.jsxs("div",{className:"buttons",children:[o.jsx("button",{className:"btn-back",onClick:a,disabled:u||l,type:"button","aria-label":"Go to previous step",children:"Back"}),o.jsx("button",{className:"btn btn-next",onClick:()=>{console.log("Next button clicked!"),i()},disabled:l,type:"button","aria-label":d?"Complete onboarding":"Go to next step",children:h})]})]})]})})},Ru={BUSINESS_NEEDS:"businessNeeds",PREVIOUS_BOOKKEEPER:"previousBookkeeper",BUSINESS_DETAILS:"businessDetails",INDUSTRY:"industry"},ki=[{id:1,type:Ru.BUSINESS_NEEDS,title:"Business Needs",component:"BusinessNeedsStep",question:"What kind of help does your business need?",subtext:"So we can focus on the areas that matter most to you.",autoAdvance:!0,validation:"validateBusinessNeeds",reduxAction:"updateBusinessNeeds",dataField:"businessNeeds"},{id:2,type:Ru.PREVIOUS_BOOKKEEPER,component:"PreviousBookkeeperStep",title:"Previous Bookkeeper",question:"Were you previously working with a bookkeeper?",subtext:"Helps us understand your bookkeeping history.",autoAdvance:!0,validation:"validatePreviousBookkeeper",reduxAction:"updatePreviousBookkeeper",dataField:"previousBookkeeper"},{id:3,type:Ru.BUSINESS_DETAILS,component:"BusinessDetailsStep",title:"Business Details",question:"Tell us about your business",subtext:"This helps us customize your experience.",autoAdvance:!1,validation:"validateBusinessDetails",reduxAction:"updateBusinessDetails",dataField:"businessDetails"},{id:4,type:Ru.INDUSTRY,component:"IndustryStep",title:"Industry",question:"Select Your Industry",subtext:"So we can tailor your setup to your field.",autoAdvance:!1,validation:"validateIndustry",reduxAction:"updateIndustry",dataField:"industry"}],Qo={businessNeeds:[{id:"browsing",label:"Nothing yet, just browsing",value:"browsing"},{id:"bookkeeping",label:"Bookkeeping with Plutify expert support.",value:"bookkeeping"},{id:"comprehensive",label:"Clear understanding of where my business stands, maximizing my tax savings, and advisory from a licensed professional.",value:"comprehensive"}],previousBookkeeper:[{id:"yes",label:"Yes",value:"yes"},{id:"no",label:"No",value:"no"}],businessType:[{value:"",label:"Select business type"},{value:"sole_proprietorship",label:"Sole Proprietorship"},{value:"llc",label:"LLC"},{value:"corporation",label:"Corporation"},{value:"partnership",label:"Partnership"},{value:"s_corp",label:"S Corporation"},{value:"nonprofit",label:"Non-Profit"}],employeeCount:[{value:"",label:"Select range"},{value:"1",label:"Just me"},{value:"2-5",label:"2-5 employees"},{value:"6-10",label:"6-10 employees"},{value:"11-25",label:"11-25 employees"},{value:"26-50",label:"26-50 employees"},{value:"50+",label:"More than 50"}],monthlyRevenue:[{value:"",label:"Select revenue range"},{value:"0-10k",label:"Less than $10,000"},{value:"10k-50k",label:"$10,000 - $50,000"},{value:"50k-100k",label:"$50,000 - $100,000"},{value:"100k-500k",label:"$100,000 - $500,000"},{value:"500k-1m",label:"$500,000 - $1M"},{value:"1m+",label:"More than $1M"}],industry:[{id:"ecommerce",label:"Ecommerce",value:"ecommerce",icon:"professional"},{id:"professional_services",label:"Professional Services",value:"professional_services",icon:"professional"},{id:"social_media",label:"Social Media",value:"social_media",icon:"socialicon"},{id:"real_estate",label:"Real Estate",value:"real_estate",icon:"realstate"},{id:"agency",label:"Agency",value:"agency",icon:"Agency"},{id:"saas",label:"Saas",value:"saas",icon:"saas"},{id:"3pl",label:"3PL",value:"3pl",icon:"pllimg"},{id:"retail",label:"Retail",value:"retail",icon:"retails"},{id:"ai_ventures",label:"AI Ventures",value:"ai_ventures",icon:"ventures"},{id:"others",label:"Others",value:"others",icon:"others"}]},vo=t=>ki.find(e=>e.id===t),$7=({value:t,onChange:e,fieldErrors:n,isSubmitting:s})=>{const r=Qo.businessNeeds;n!=null&&n.businessNeeds||(n==null||n.general);const i=a=>{s||e("businessNeeds",a,!0)};return o.jsx("div",{className:"business-needs-step",children:o.jsx("div",{className:"options-container",children:r.map(a=>o.jsx("div",{className:`option ${t===a.value?"selected":""} ${s?"disabled":""}`,onClick:()=>i(a.value),role:"button",tabIndex:0,onKeyPress:l=>{(l.key==="Enter"||l.key===" ")&&i(a.value)},"aria-label":a.label,"aria-selected":t===a.value,children:a.label},a.id))})})},V7=({value:t,onChange:e,fieldErrors:n,isSubmitting:s})=>{const r=Qo.previousBookkeeper;n!=null&&n.previousBookkeeper||(n==null||n.general);const i=a=>{s||e("previousBookkeeper",a,!0)};return o.jsx("div",{className:"previous-bookkeeper-step",children:o.jsx("div",{className:"options-container",children:r.map(a=>o.jsx("div",{className:`option ${t===a.value?"selected":""} ${s?"disabled":""}`,onClick:()=>i(a.value),role:"button",tabIndex:0,onKeyPress:l=>{(l.key==="Enter"||l.key===" ")&&i(a.value)},"aria-label":a.label,"aria-selected":t===a.value,children:a.label},a.id))})})},q7=({value:t={},onChange:e,fieldErrors:n={},isSubmitting:s})=>{const{businessName:r="",businessType:i="",yearStarted:a="",employeeCount:l="",monthlyRevenue:u=""}=t,d=(f,p)=>{if(s)return;let h=p.target.value;f==="yearStarted"&&(h=h.replace(/\D/g,"").substring(0,4)),e(f,h,!1)};return o.jsxs("div",{className:"business-details-step form_section",children:[o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{children:["Business Name ",o.jsx("span",{className:"required",children:"*"})]}),o.jsx("input",{type:"text",className:`form-control ${n.businessName?"error":""}`,placeholder:"Enter your business name",value:r,onChange:f=>d("businessName",f),disabled:s,required:!0,"aria-label":"Business Name","aria-invalid":!!n.businessName,"aria-describedby":n.businessName?"businessName-error":void 0}),n.businessName&&o.jsx("span",{id:"businessName-error",className:"error-message",children:n.businessName})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{children:["Business Type ",o.jsx("span",{className:"required",children:"*"})]}),o.jsx("select",{className:`form-control ${i===""?"placeholder":""} ${n.businessType?"error":""}`,value:i,onChange:f=>d("businessType",f),disabled:s,required:!0,"aria-label":"Business Type","aria-invalid":!!n.businessType,"aria-describedby":n.businessType?"businessType-error":void 0,children:Qo.businessType.map(f=>o.jsx("option",{value:f.value,children:f.label},f.value))}),n.businessType&&o.jsx("span",{id:"businessType-error",className:"error-message",children:n.businessType})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{children:["Year Started ",o.jsx("span",{className:"required",children:"*"})]}),o.jsx("input",{type:"text",className:`form-control ${n.yearStarted?"error":""}`,placeholder:"YYYY",maxLength:"4",pattern:"[0-9]{4}",value:a,onChange:f=>d("yearStarted",f),disabled:s,required:!0,"aria-label":"Year Started","aria-invalid":!!n.yearStarted,"aria-describedby":n.yearStarted?"yearStarted-error":void 0}),n.yearStarted&&o.jsx("span",{id:"yearStarted-error",className:"error-message",children:n.yearStarted})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{children:["Number of Employees ",o.jsx("span",{className:"required",children:"*"})]}),o.jsx("select",{className:`form-control ${l===""?"placeholder":""} ${n.employeeCount?"error":""}`,value:l,onChange:f=>d("employeeCount",f),disabled:s,required:!0,"aria-label":"Number of Employees","aria-invalid":!!n.employeeCount,"aria-describedby":n.employeeCount?"employeeCount-error":void 0,children:Qo.employeeCount.map(f=>o.jsx("option",{value:f.value,children:f.label},f.value))}),n.employeeCount&&o.jsx("span",{id:"employeeCount-error",className:"error-message",children:n.employeeCount})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{children:["Monthly Revenue Range ",o.jsx("span",{className:"required",children:"*"})]}),o.jsx("select",{className:`form-control ${u===""?"placeholder":""} ${n.monthlyRevenue?"error":""}`,value:u,onChange:f=>d("monthlyRevenue",f),disabled:s,required:!0,"aria-label":"Monthly Revenue Range","aria-invalid":!!n.monthlyRevenue,"aria-describedby":n.monthlyRevenue?"monthlyRevenue-error":void 0,children:Qo.monthlyRevenue.map(f=>o.jsx("option",{value:f.value,children:f.label},f.value))}),n.monthlyRevenue&&o.jsx("span",{id:"monthlyRevenue-error",className:"error-message",children:n.monthlyRevenue})]})]})},W7="data:image/svg+xml,%3csvg%20width='32'%20height='26'%20viewBox='0%200%2032%2026'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4.25174%2025.0002H27.663C28.736%2025.0002%2029.6139%2024.1224%2029.6139%2023.0493L29.6146%204.33887H2.30152L2.30078%2023.0493C2.30078%2024.1224%203.17874%2025.0002%204.25174%2025.0002Z'%20fill='%23A04331'/%3e%3cpath%20d='M22.9156%208.80469L8.95273%208.82088L8.94922%2011.9328C8.94922%2011.9328%2013.3601%2012.7595%2016.3723%2012.7903C19.3845%2012.8212%2023.2474%2011.6529%2023.2474%2011.6529L22.9156%208.80469Z'%20fill='white'/%3e%3cpath%20d='M29.5624%204.68165V23.0126C29.5624%2024.0813%2028.6881%2024.9556%2027.6194%2024.9556H4.30336C3.2347%2024.9556%202.36035%2024.0813%202.36035%2023.0126V4.62012'%20stroke='%23C46D5D'%20stroke-width='0.46262'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M10.7803%203.91451L11.6998%201.8455C11.9072%201.37887%2012.4902%201%2013.0009%201H18.9224C19.433%201%2020.016%201.37887%2020.2234%201.8455L21.143%203.91451'%20stroke='%23C46D5D'%20stroke-width='0.539724'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M26.4747%2011.0811C19.6074%2013.0754%2012.3145%2013.0754%205.44727%2011.0811'%20stroke='%23C56E5D'%20stroke-width='0.46262'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M2.95096%204.19043H28.9636C30.0366%204.19043%2030.9145%205.06848%2030.9145%206.14139V10.3684L15.9573%2013.3912L1%2010.3684V6.14139C1%205.0683%201.87796%204.19043%202.95096%204.19043Z'%20fill='%23903827'/%3e%3cpath%20d='M14.2666%2010.1396H17.6482V14.952C17.6482%2015.8819%2016.8873%2016.6428%2015.9574%2016.6428C15.0274%2016.6428%2014.2666%2015.8819%2014.2666%2014.952V10.1396Z'%20fill='%239F4230'/%3e%3cpath%20d='M14.0014%2012.9984L1.06445%2010.3838V6.17396C1.06445%205.10531%201.93881%204.23096%203.00746%204.23096H28.9142C29.9829%204.23096%2030.8572%205.10549%2030.8572%206.17396V10.3838L17.9576%2012.9908'%20stroke='%23B96859'%20stroke-width='0.46262'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M14.2773%2010.1558H17.6452V14.9485C17.6452%2015.8747%2016.8874%2016.6324%2015.9613%2016.6324C15.0351%2016.6324%2014.2773%2015.8747%2014.2773%2014.9485V10.1558Z'%20stroke='%23C56D5D'%20stroke-width='0.46262'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",H7="/assets/social-icons-4qAsHS8A.svg",G7="/assets/real-estate-BJa4yaEA.svg",Q7="/assets/agency-C31Yq3_U.svg",K7="/assets/saas-DVne8fUY.svg",Y7="data:image/svg+xml,%3csvg%20width='22'%20height='26'%20viewBox='0%200%2022%2026'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.2'%3e%3cpath%20d='M10.5324%2023.0562C12.6566%2023.0562%2014.3812%2023.4917%2014.3812%2024.0281C14.3812%2024.5645%2012.6566%2025%2010.5324%2025C8.40825%2025%206.68359%2024.5645%206.68359%2024.0281C6.68359%2023.4917%208.40825%2023.0562%2010.5324%2023.0562Z'%20fill='%230A9048'/%3e%3c/g%3e%3cpath%20d='M3.80515%2017.286C2.07239%2015.5599%201%2013.1714%201%2010.5323C1%205.26783%205.26783%201%2010.5323%201C15.7968%201%2020.0646%205.26783%2020.0646%2010.5323C20.0646%2013.1714%2018.9922%2015.5599%2017.2593%2017.286L17.2725%2017.2992L10.5323%2024.0396L3.79191%2017.2992L3.80515%2017.286Z'%20fill='%2302A292'/%3e%3cpath%20d='M3.80515%2017.286C2.07239%2015.5599%201%2013.1714%201%2010.5323C1%205.26783%205.26783%201%2010.5323%201C15.7968%201%2020.0646%205.26783%2020.0646%2010.5323C20.0646%2013.1714%2018.9922%2015.5599%2017.2593%2017.286L17.2725%2017.2992L10.5323%2024.0396L3.79191%2017.2992L3.80515%2017.286Z'%20stroke='%2302A292'%20stroke-width='2'/%3e%3cpath%20d='M10.5322%203.27295C14.6268%203.27295%2017.9462%206.59231%2017.9462%2010.687C17.9462%2014.7816%2014.6268%2018.101%2010.5322%2018.101C6.43753%2018.101%203.11816%2014.7816%203.11816%2010.687C3.11816%206.59231%206.43753%203.27295%2010.5322%203.27295Z'%20fill='white'/%3e%3cpath%20d='M4.28125%2015.0761C6.36507%2014.8414%208.44908%2014.7241%2010.5331%2014.7241C12.6169%2014.7241%2014.7009%2014.8414%2016.7847%2015.0761C15.3326%2016.9319%2013.0722%2018.1244%2010.5331%2018.1244C7.994%2018.1244%205.73337%2016.9319%204.28125%2015.0761Z'%20fill='%230A9048'%20fill-opacity='0.3'/%3e%3cpath%20d='M6.2959%2012.6089V12.1164H7.61983C7.76617%2012.1164%207.88462%2012.2266%207.88462%2012.3626C7.88462%2012.4986%207.76617%2012.6089%207.61983%2012.6089H6.82547V14.0862H12.1212V9.16186H6.82547V10.1467H9.73812C9.88446%2010.1467%2010.0029%2010.2569%2010.0029%2010.3929C10.0029%2010.529%209.88446%2010.6391%209.73812%2010.6391H6.2959V10.1467V9.16301C6.2959%208.89382%206.53368%208.66943%206.82671%208.66943H12.1198C12.4095%208.66943%2012.6508%208.89053%2012.6508%209.16301V10.6391H13.4499C13.5892%2010.6391%2013.7925%2010.716%2013.8944%2010.8107L14.5846%2011.4525C14.6859%2011.5467%2014.7691%2011.7337%2014.7691%2011.8691V14.3324C14.7691%2014.4645%2014.6504%2014.5786%2014.5043%2014.5786H13.7099C13.7099%2015.1224%2013.2356%2015.5634%2012.6508%2015.5634C12.0659%2015.5634%2011.5916%2015.1224%2011.5916%2014.5786H9.47334C9.47334%2015.1224%208.99902%2015.5634%208.41419%2015.5634C7.82937%2015.5634%207.35504%2015.1224%207.35504%2014.5786H6.82671C6.53721%2014.5786%206.2959%2014.3575%206.2959%2014.0848V12.6089ZM14.2395%2012.6089H13.4427C13.2946%2012.6089%2013.1803%2012.4986%2013.1803%2012.3626C13.1803%2012.2307%2013.2977%2012.1164%2013.4427%2012.1164H14.2395V11.8691C14.2395%2011.8643%2014.2121%2011.8024%2014.2102%2011.8006L13.52%2011.159C13.5186%2011.1577%2013.4506%2011.1316%2013.4499%2011.1316H12.6508V14.0862H14.2395V12.6089ZM6.56068%2011.1316H8.67898C8.82532%2011.1316%208.94376%2011.2417%208.94376%2011.3778C8.94376%2011.5139%208.82532%2011.624%208.67898%2011.624H6.56068C6.41435%2011.624%206.2959%2011.5139%206.2959%2011.3778C6.2959%2011.2417%206.41435%2011.1316%206.56068%2011.1316ZM13.1803%2014.5786H12.1212C12.1212%2014.8506%2012.3583%2015.071%2012.6508%2015.071C12.9433%2015.071%2013.1803%2014.8506%2013.1803%2014.5786ZM8.94376%2014.5786H7.88462C7.88462%2014.8506%208.12169%2015.071%208.41419%2015.071C8.70669%2015.071%208.94376%2014.8506%208.94376%2014.5786Z'%20fill='black'/%3e%3cg%20opacity='0.455055'%3e%3cpath%20d='M15.9212%209.00845C15.3341%208.66052%2015.1402%207.90254%2015.4882%207.31545C15.8361%206.72837%2016.5941%206.5345%2017.1812%206.88244C17.7683%207.23037%2017.9621%207.98835%2017.6142%208.57544C17.2663%209.16252%2016.5083%209.35639%2015.9212%209.00845ZM16.1012%208.70474C16.5206%208.95332%2017.0619%208.81487%2017.3105%208.39544C17.559%207.97616%2017.4206%207.43473%2017.0012%207.18615C16.5819%206.93767%2016.0404%207.07617%2015.7919%207.49545C15.5433%207.91488%2015.6819%208.45625%2016.1012%208.70474Z'%20fill='%23F8E71C'/%3e%3c/g%3e%3c/svg%3e",J7="/assets/retails-BJZdO8pw.svg",X7="/assets/ventures-9IpxC3hq.svg",pj="data:image/svg+xml,%3csvg%20width='21'%20height='21'%20viewBox='0%200%2021%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3.275%207.5459C1.77644%207.55598%200.839844%208.56482%200.839844%2010.0659C0.839844%2011.6535%201.75544%2012.6044%203.28676%2012.6145C4.808%2012.6044%205.69504%2011.6863%205.72276%2010.0667C5.69672%208.52282%204.76348%207.55682%203.275%207.54674V7.5459Z'%20fill='%234A5565'/%3e%3cpath%20d='M10.0738%207.5459C8.57527%207.55598%207.63867%208.56482%207.63867%2010.0659C7.63867%2011.6535%208.55427%2012.6044%2010.0856%2012.6145C11.6068%2012.6044%2012.4939%2011.6863%2012.5216%2010.0667C12.4956%208.52282%2011.5623%207.55682%2010.0738%207.54674V7.5459Z'%20fill='%234A5565'/%3e%3cpath%20d='M16.8727%207.5459C15.3741%207.55598%2014.4375%208.56482%2014.4375%2010.0659C14.4375%2011.6535%2015.3531%2012.6044%2016.8844%2012.6145C18.4057%2012.6044%2019.2927%2011.6863%2019.3204%2010.0667C19.2944%208.52282%2018.3611%207.55682%2016.8727%207.54674V7.5459Z'%20fill='%234A5565'/%3e%3c/svg%3e",Z7={professional:W7,socialicon:H7,realstate:G7,Agency:Q7,saas:K7,pllimg:Y7,retails:J7,ventures:X7,others:pj},ez=({value:t,onChange:e,fieldErrors:n,isSubmitting:s})=>{const r=Qo.industry;n!=null&&n.industry||(n==null||n.general);const i=l=>{s||e("industry",l,!1)},a=l=>Z7[l]||pj;return o.jsx("div",{className:"industry-step",children:o.jsx("div",{className:"industry_sec",children:r.map(l=>o.jsxs("div",{className:`industry_option option ${t===l.value?"selected":""} ${s?"disabled":""}`,onClick:()=>i(l.value),role:"button",tabIndex:0,onKeyPress:u=>{(u.key==="Enter"||u.key===" ")&&i(l.value)},"aria-label":l.label,"aria-selected":t===l.value,children:[o.jsx("img",{src:a(l.icon),alt:`${l.label} icon`,className:"industry-icon"}),o.jsx("span",{className:"industry-label",children:l.label})]},l.id))})})},tz=t=>t==null||t===""||typeof t=="string"&&t.trim()===""?"Please select what kind of help your business needs":null,nz=t=>t==null||t===""||typeof t=="string"&&t.trim()===""?"Please indicate if you had a previous bookkeeper":t!=="yes"&&t!=="no"?"Please select either Yes or No":null,sz=t=>{const e={};if(!t.businessName||t.businessName.trim()===""?e.businessName="Business Name is required":t.businessName.trim().length<2?e.businessName="Business Name must be at least 2 characters":t.businessName.trim().length>100&&(e.businessName="Business Name must be less than 100 characters"),(!t.businessType||t.businessType==="")&&(e.businessType="Business Type is required"),!t.yearStarted||t.yearStarted.trim()==="")e.yearStarted="Year Started is required";else{const n=t.yearStarted.trim(),s=parseInt(n,10),r=new Date().getFullYear();/^\d{4}$/.test(n)?s<1800?e.yearStarted="Year must be 1800 or later":s>r&&(e.yearStarted=`Year cannot be later than ${r}`):e.yearStarted="Year must be exactly 4 digits"}return(!t.employeeCount||t.employeeCount==="")&&(e.employeeCount="Number of Employees is required"),(!t.monthlyRevenue||t.monthlyRevenue==="")&&(e.monthlyRevenue="Monthly Revenue Range is required"),Object.keys(e).length>0?e:null},rz=t=>t==null||t===""||typeof t=="string"&&t.trim()===""?"Please select your industry":["ecommerce","professional_services","social_media","real_estate","agency","saas","3pl","retail","ai_ventures","others"].includes(t)?null:"Please select a valid industry from the list",iz=(t,e)=>{const s={validateBusinessNeeds:tz,validatePreviousBookkeeper:nz,validateBusinessDetails:sz,validateIndustry:rz}[t];return s?s(e):(console.error(`Validator ${t} not found`),null)},oz=()=>{const t=xs(),e=Ft(),{currentStep:n,data:s,isSubmitting:r,isLoadingFromStorage:i,isCompleted:a}=Se(y=>y.onboarding),[l]=CR(),{data:u,isLoading:d}=BN(),[f,p]=D.useState({});D.useEffect(()=>{t(NP())},[t]),D.useEffect(()=>{u&&console.log("Onboarding record initialized on backend")},[u]),D.useEffect(()=>{a&&e("/pricing")},[a,e]),D.useEffect(()=>{!i&&s&&t(CP())},[s,n,t,i]);const h=y=>({businessNeeds:_P,previousBookkeeper:xP,businessDetails:wP,industry:SP})[y],_=D.useCallback((y,x=null)=>{const P=vo(y);if(!P)return!1;const O=x||s[P.dataField],v=iz(P.validation,O);return v?(typeof v=="object"&&!Array.isArray(v)?p(v):p({[P.dataField]:v}),!1):(p({}),!0)},[s]),C=D.useCallback(async(y=!1,x=null)=>{var v,g;if(console.log("=== handleNext called ===",{currentStep:n,autoAdvance:y,currentData:s,stepDataField:(v=vo(n))==null?void 0:v.dataField,actualValue:s[(g=vo(n))==null?void 0:g.dataField]}),r)return console.log("Blocked: isSubmitting is true"),!1;const P=vo(n);if(!y){console.log("Running validation for step",n),console.log("Current data value:",s[P.dataField]);const N=_(n,x);if(console.log("Validation result:",N),!N)return console.log(" Validation FAILED - blocking navigation"),console.log("Current errors:",f),!1}if(p({}),n===ki.length){t(w0(!0));try{const N=yt.getSubmissionData()||{data:s};console.log("Submitting onboarding data:",N);const w=await l(N).unwrap();if(console.log("Onboarding completion result:",w),w.success)return t(bP()),t(yP(!0)),t(EP()),e("/pricing"),!0;throw new Error(w.message||"Failed to complete onboarding")}catch(N){return console.error("Failed to complete onboarding:",N),alert(`Failed to complete onboarding: ${N.message||"Please try again."}`),!1}finally{t(w0(!1))}}else return t(x0(n+1)),!0},[n,r,_,s,t,l,e]),j=D.useCallback(()=>{n>1&&!r&&(t(x0(n-1)),p({}))},[n,r,t]),b=D.useCallback((y,x,P=!1)=>{const O=vo(n);if(!O)return;const v=h(O.type);if(!v){console.error(`No update action found for step type: ${O.type}`);return}if(O.type==="businessDetails"){const g={...s.businessDetails,[y]:x};t(v(g)),f[y]&&p(N=>{const w={...N};return delete w[y],w})}else t(v(x)),p({}),P&&O.autoAdvance&&setTimeout(()=>{C(!0)},100)},[n,s,t,f,C]),S=D.useCallback(y=>{p(x=>{if(!x[y])return x;const P={...x};return delete P[y],P})},[]),E=vo(n);return{currentStep:n,totalSteps:ki.length,stepData:s,fieldErrors:f,isSubmitting:r,isLoadingFromStorage:i,currentStepConfig:E,handleNext:C,handleBack:j,handleFieldChange:b,clearFieldError:S,validateStep:_,isFirstStep:n===1,isLastStep:n===ki.length,progressPercentage:n/ki.length*100,formData:s}},az=()=>{const t=Ft(),e=Se(j=>{var b;return(b=j.auth.user)==null?void 0:b.id}),{data:n,isLoading:s}=BN(e,{skip:!e}),{currentStep:r,stepData:i,fieldErrors:a,isSubmitting:l,handleNext:u,handleBack:d,handleFieldChange:f,isFirstStep:p,isLastStep:h}=oz();if(D.useEffect(()=>{n!=null&&n.is_onboarding_complete&&t("/dashboard")},[n,t]),s)return o.jsx("div",{className:"onboarding-loader",children:o.jsx("div",{className:"spinner-border",role:"status",children:o.jsx("span",{className:"sr-only",children:"Loading..."})})});const _=()=>{const j=Object.keys(a).length>0,b=(()=>{switch(r){case 1:return o.jsx($7,{value:i.businessNeeds,onChange:f,fieldErrors:a,isSubmitting:l});case 2:return o.jsx(V7,{value:i.previousBookkeeper,onChange:f,fieldErrors:a,isSubmitting:l});case 3:return o.jsx(q7,{value:i.businessDetails,onChange:f,fieldErrors:a,isSubmitting:l});case 4:return o.jsx(ez,{value:i.industry,onChange:f,fieldErrors:a,isSubmitting:l});default:return null}})();return o.jsxs(o.Fragment,{children:[j&&r!==3&&o.jsx("div",{className:"validation-error-banner",style:{backgroundColor:"#fee",border:"1px solid #fcc",borderRadius:"4px",padding:"12px",marginBottom:"16px",color:"#c00"},children:"Please select an option to continue."}),b]})},C=ki[r-1];return o.jsx(B7,{currentStep:r,totalSteps:ki.length,question:C.question,subtext:C.subtext,onBack:d,onNext:u,isFirstStep:p,isLastStep:h,isSubmitting:l,children:_()})};class PB extends me.Component{constructor(n){super(n);ho(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});ho(this,"handleRecoverBackup",()=>{try{const n=localStorage.getItem("onboarding_backup");if(n){const{data:s}=JSON.parse(n);yt.save(s),this.handleReset()}}catch(n){console.error("Failed to recover backup:",n),alert("Failed to recover backup data. Please try again.")}});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,s){console.error("Onboarding Error:",n,s);try{const r=yt.get();r&&localStorage.setItem("onboarding_backup",JSON.stringify({data:r,error:n.toString(),timestamp:new Date().toISOString()}))}catch(r){console.error("Failed to save backup:",r)}this.setState({error:n,errorInfo:s})}render(){return this.state.hasError?o.jsx("div",{className:"onboarding-error-boundary",children:o.jsxs("div",{className:"error-container",children:[o.jsx("h2",{children:"Oops! Something went wrong"}),o.jsx("p",{children:"We encountered an error while processing your onboarding information."}),o.jsx("p",{children:"Don't worry, your progress has been saved."}),!1,o.jsxs("div",{className:"error-actions",children:[o.jsx("button",{onClick:this.handleReset,className:"btn btn-primary",children:"Try Again"}),o.jsx("button",{onClick:this.handleRecoverBackup,className:"btn btn-secondary",children:"Recover Last Save"})]})]})}):this.props.children}}var mj={exports:{}},lz="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",cz=lz,uz=cz;function gj(){}function yj(){}yj.resetWarningCache=gj;var dz=function(){function t(s,r,i,a,l,u){if(u!==uz){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:yj,resetWarningCache:gj};return n.PropTypes=n,n};mj.exports=dz();var hz=mj.exports;const Be=Ig(hz);function US(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function FS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?US(Object(n),!0).forEach(function(s){vj(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):US(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function hd(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hd=function(e){return typeof e}:hd=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hd(t)}function vj(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fz(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function pz(t,e){if(t==null)return{};var n=fz(t,e),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function _j(t,e){return mz(t)||gz(t,e)||yz(t,e)||vz()}function mz(t){if(Array.isArray(t))return t}function gz(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var s=[],r=!0,i=!1,a,l;try{for(n=n.call(t);!(r=(a=n.next()).done)&&(s.push(a.value),!(e&&s.length===e));r=!0);}catch(u){i=!0,l=u}finally{try{!r&&n.return!=null&&n.return()}finally{if(i)throw l}}return s}}function yz(t,e){if(t){if(typeof t=="string")return zS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zS(t,e)}}function zS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function vz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Bt=function(e,n,s){var r=!!s,i=me.useRef(s);me.useEffect(function(){i.current=s},[s]),me.useEffect(function(){if(!r||!e)return function(){};var a=function(){i.current&&i.current.apply(i,arguments)};return e.on(n,a),function(){e.off(n,a)}},[r,n,e,i])},kg=function(e){var n=me.useRef(e);return me.useEffect(function(){n.current=e},[e]),n.current},ha=function(e){return e!==null&&hd(e)==="object"},_z=function(e){return ha(e)&&typeof e.then=="function"},xz=function(e){return ha(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},BS="[object Object]",wz=function t(e,n){if(!ha(e)||!ha(n))return e===n;var s=Array.isArray(e),r=Array.isArray(n);if(s!==r)return!1;var i=Object.prototype.toString.call(e)===BS,a=Object.prototype.toString.call(n)===BS;if(i!==a)return!1;if(!i&&!s)return e===n;var l=Object.keys(e),u=Object.keys(n);if(l.length!==u.length)return!1;for(var d={},f=0;f<l.length;f+=1)d[l[f]]=!0;for(var p=0;p<u.length;p+=1)d[u[p]]=!0;var h=Object.keys(d);if(h.length!==l.length)return!1;var _=e,C=n,j=function(S){return t(_[S],C[S])};return h.every(j)},xj=function(e,n,s){return ha(e)?Object.keys(e).reduce(function(r,i){var a=!ha(n)||!wz(e[i],n[i]);return s.includes(i)?(a&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),r):a?FS(FS({},r||{}),{},vj({},i,e[i])):r},null):null},wj="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",$S=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wj;if(e===null||xz(e))return e;throw new Error(n)},Sz=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wj;if(_z(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(r){return $S(r,n)})};var s=$S(e,n);return s===null?{tag:"empty"}:{tag:"sync",stripe:s}},bz=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.10.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.10.0",url:"https://stripe.com/docs/stripe-js/react"}))},mf=me.createContext(null);mf.displayName="ElementsContext";var Sj=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},bj=function(e){var n=e.stripe,s=e.options,r=e.children,i=me.useMemo(function(){return Sz(n)},[n]),a=me.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(s):null}}),l=_j(a,2),u=l[0],d=l[1];me.useEffect(function(){var h=!0,_=function(j){d(function(b){return b.stripe?b:{stripe:j,elements:j.elements(s)}})};return i.tag==="async"&&!u.stripe?i.stripePromise.then(function(C){C&&h&&_(C)}):i.tag==="sync"&&!u.stripe&&_(i.stripe),function(){h=!1}},[i,u,s]);var f=kg(n);me.useEffect(function(){f!==null&&f!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[f,n]);var p=kg(s);return me.useEffect(function(){if(u.elements){var h=xj(s,p,["clientSecret","fonts"]);h&&u.elements.update(h)}},[s,p,u.elements]),me.useEffect(function(){bz(u.stripe)},[u.stripe]),me.createElement(mf.Provider,{value:u},r)};bj.propTypes={stripe:Be.any,options:Be.object};var Nz=function(e){var n=me.useContext(mf);return Sj(n,e)},Cz=function(){var e=Nz("calls useElements()"),n=e.elements;return n};Be.func.isRequired;var Nj=me.createContext(null);Nj.displayName="CheckoutSdkContext";var Ez=function(e,n){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CheckoutProvider> provider."));return e},kz=me.createContext(null);kz.displayName="CheckoutContext";Be.any,Be.shape({fetchClientSecret:Be.func.isRequired,elementsOptions:Be.object}).isRequired;var jg=function(e){var n=me.useContext(Nj),s=me.useContext(mf);if(n&&s)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n?Ez(n,e):Sj(s,e)},jz=["mode"],Iz=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},at=function(e,n){var s="".concat(Iz(e),"Element"),r=function(u){var d=u.id,f=u.className,p=u.options,h=p===void 0?{}:p,_=u.onBlur,C=u.onFocus,j=u.onReady,b=u.onChange,S=u.onEscape,E=u.onClick,y=u.onLoadError,x=u.onLoaderStart,P=u.onNetworksChange,O=u.onConfirm,v=u.onCancel,g=u.onShippingAddressChange,N=u.onShippingRateChange,w=u.onSavedPaymentMethodRemove,A=u.onSavedPaymentMethodUpdate,T=jg("mounts <".concat(s,">")),I="elements"in T?T.elements:null,L="checkoutSdk"in T?T.checkoutSdk:null,V=me.useState(null),M=_j(V,2),U=M[0],F=M[1],B=me.useRef(null),q=me.useRef(null);Bt(U,"blur",_),Bt(U,"focus",C),Bt(U,"escape",S),Bt(U,"click",E),Bt(U,"loaderror",y),Bt(U,"loaderstart",x),Bt(U,"networkschange",P),Bt(U,"confirm",O),Bt(U,"cancel",v),Bt(U,"shippingaddresschange",g),Bt(U,"shippingratechange",N),Bt(U,"savedpaymentmethodremove",w),Bt(U,"savedpaymentmethodupdate",A),Bt(U,"change",b);var Y;j&&(e==="expressCheckout"?Y=j:Y=function(){j(U)}),Bt(U,"ready",Y),me.useLayoutEffect(function(){if(B.current===null&&q.current!==null&&(I||L)){var z=null;if(L)switch(e){case"payment":z=L.createPaymentElement(h);break;case"address":if("mode"in h){var Q=h.mode,G=pz(h,jz);if(Q==="shipping")z=L.createShippingAddressElement(G);else if(Q==="billing")z=L.createBillingAddressElement(G);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":z=L.createExpressCheckoutElement(h);break;case"currencySelector":z=L.createCurrencySelectorElement();break;case"taxId":z=L.createTaxIdElement(h);break;default:throw new Error("Invalid Element type ".concat(s,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else I&&(z=I.create(e,h));B.current=z,F(z),z&&z.mount(q.current)}},[I,L,h]);var ee=kg(h);return me.useEffect(function(){if(B.current){var z=xj(h,ee,["paymentRequest"]);z&&"update"in B.current&&B.current.update(z)}},[h,ee]),me.useLayoutEffect(function(){return function(){if(B.current&&typeof B.current.destroy=="function")try{B.current.destroy(),B.current=null}catch{}}},[]),me.createElement("div",{id:d,className:f,ref:q})},i=function(u){jg("mounts <".concat(s,">"));var d=u.id,f=u.className;return me.createElement("div",{id:d,className:f})},a=n?i:r;return a.propTypes={id:Be.string,className:Be.string,onChange:Be.func,onBlur:Be.func,onFocus:Be.func,onReady:Be.func,onEscape:Be.func,onClick:Be.func,onLoadError:Be.func,onLoaderStart:Be.func,onNetworksChange:Be.func,onConfirm:Be.func,onCancel:Be.func,onShippingAddressChange:Be.func,onShippingRateChange:Be.func,onSavedPaymentMethodRemove:Be.func,onSavedPaymentMethodUpdate:Be.func,options:Be.object},a.displayName=s,a.__elementType=e,a},lt=typeof window>"u",Tz=me.createContext(null);Tz.displayName="EmbeddedCheckoutProviderContext";var Az=function(){var e=jg("calls useStripe()"),n=e.stripe;return n};at("auBankAccount",lt);var VS=at("card",lt);at("cardNumber",lt);at("cardExpiry",lt);at("cardCvc",lt);at("fpxBank",lt);at("iban",lt);at("idealBank",lt);at("p24Bank",lt);at("epsBank",lt);at("payment",lt);at("expressCheckout",lt);at("currencySelector",lt);at("paymentRequestButton",lt);at("linkAuthentication",lt);at("address",lt);at("shippingAddress",lt);at("paymentMethodMessaging",lt);at("affirmMessage",lt);at("afterpayClearpayMessage",lt);at("taxId",lt);var Cj="basil",Pz=function(e){return e===3?"v3":e},Ej="https://js.stripe.com",Rz="".concat(Ej,"/").concat(Cj,"/stripe.js"),Oz=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Dz=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var Lz=function(e){return Oz.test(e)||Dz.test(e)},Mz=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Ej,'"]')),n=0;n<e.length;n++){var s=e[n];if(Lz(s.src))return s}return null},qS=function(e){var n="",s=document.createElement("script");s.src="".concat(Rz).concat(n);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(s),s},Uz=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:n})},Xa=null,Ou=null,Du=null,Fz=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},zz=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},Bz=function(e){return Xa!==null?Xa:(Xa=new Promise(function(n,s){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var r=Mz();if(!(r&&e)){if(!r)r=qS(e);else if(r&&Du!==null&&Ou!==null){var i;r.removeEventListener("load",Du),r.removeEventListener("error",Ou),(i=r.parentNode)===null||i===void 0||i.removeChild(r),r=qS(e)}}Du=zz(n,s),Ou=Fz(s),r.addEventListener("load",Du),r.addEventListener("error",Ou)}catch(a){s(a);return}}),Xa.catch(function(n){return Xa=null,Promise.reject(n)}))},$z=function(e,n,s){if(e===null)return null;var r=n[0],i=r.match(/^pk_test/),a=Pz(e.version),l=Cj;i&&a!==l&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var u=e.apply(void 0,n);return Uz(u,s),u},Za,kj=!1,jj=function(){return Za||(Za=Bz(null).catch(function(e){return Za=null,Promise.reject(e)}),Za)};Promise.resolve().then(function(){return jj()}).catch(function(t){kj||console.warn(t)});var Vz=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];kj=!0;var r=Date.now();return jj().then(function(i){return $z(i,n,r)})};const qz={style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"},fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},invalid:{color:"#dc3545",iconColor:"#dc3545"}},hidePostalCode:!1},Wz=({plan:t,billingPeriod:e,onSuccess:n,onCancel:s})=>{const r=Az(),i=Cz(),{user:a}=Se(w=>w.auth),[l]=gR(),[u]=vR(),[d]=wR(),[f,p]=D.useState({name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||"",address:"",city:"",state:"",zipCode:"",country:"US"}),[h,_]=D.useState(!1),[C,j]=D.useState(!1),[b,S]=D.useState(""),[E,y]=D.useState(""),x=w=>{const{name:A,value:T}=w.target;p(I=>({...I,[A]:T}))},P=w=>{_(w.complete),w.error?S(w.error.message):S("")},O=()=>!f.name||!f.email?(S("Please fill in all required fields"),!1):h?!0:(S("Please enter valid card details"),!1),v=async w=>{var A,T,I,L,V,M,U,F,B,q,Y,ee,z,Q,G;if(w.preventDefault(),!!O()){if(!r||!i){S("Stripe has not loaded yet. Please try again.");return}if(!t){S("No plan selected. Please go back and select a plan.");return}j(!0),S(""),console.log("[DEBUG] Starting checkout process:",{planId:t._id,planName:t.name,billingPeriod:e,stripeLoaded:!!r,elementsLoaded:!!i});try{const{error:W,paymentMethod:K}=await r.createPaymentMethod({type:"card",card:i.getElement(VS),billing_details:{name:f.name,email:f.email,address:{line1:f.address,city:f.city,state:f.state,postal_code:f.zipCode,country:f.country}}});if(W){S(W.message),j(!1);return}await d({...f,paymentMethodId:K.id}).unwrap(),console.log("[DEBUG] Creating subscription with:",{planId:t._id,billingPeriod:e,paymentMethodId:K.id,apiEndpoint:(A=it==null?void 0:it.api)==null?void 0:A.baseUrl});const ne=await l({planId:t._id,billingPeriod:e,paymentMethodId:K.id,billingInfo:f}).unwrap();console.log("[DEBUG] Subscription API Response:",{status:((T=ne==null?void 0:ne.data)==null?void 0:T.status)||(ne==null?void 0:ne.status),requiresAction:((I=ne==null?void 0:ne.data)==null?void 0:I.requiresAction)||(ne==null?void 0:ne.requiresAction),hasClientSecret:!!((L=ne==null?void 0:ne.data)!=null&&L.clientSecret||ne!=null&&ne.clientSecret)});const oe=ne.data||ne;if(oe.requiresAction||oe.status==="incomplete"||oe.paymentIntentStatus==="requires_confirmation"||oe.paymentIntentStatus==="requires_action"){if(!oe.clientSecret){S("Payment confirmation required but no client secret provided"),j(!1);return}const{error:ae,paymentIntent:de}=await r.confirmCardPayment(oe.clientSecret,{payment_method:K.id});if(ae){S(ae.message),j(!1);return}if(oe.paymentIntentId&&(de==null?void 0:de.status)==="succeeded")try{await u({subscriptionId:oe.subscriptionId,paymentIntentId:oe.paymentIntentId}).unwrap()}catch(Ce){console.warn("Payment processing notification failed:",Ce)}}y("Payment successful! Redirecting to your dashboard..."),j(!1),setTimeout(()=>{n()},2e3)}catch(W){console.error("[DEBUG] Payment error full details:",{errorType:(M=(V=W==null?void 0:W.data)==null?void 0:V.error)==null?void 0:M.type,errorMessage:((F=(U=W==null?void 0:W.data)==null?void 0:U.error)==null?void 0:F.message)||((B=W==null?void 0:W.data)==null?void 0:B.message),errorStatus:W==null?void 0:W.status,fullError:W}),(ee=(Y=(q=W==null?void 0:W.data)==null?void 0:q.error)==null?void 0:Y.message)!=null&&ee.includes("Invalid API Key")&&console.error("[CRITICAL] Stripe API Key Error Detected!",{errorMessage:W.data.error.message,suggestedFix:"Backend is likely using publishable key (pk_) instead of secret key (sk_)"}),S(((Q=(z=W==null?void 0:W.data)==null?void 0:z.error)==null?void 0:Q.message)||((G=W==null?void 0:W.data)==null?void 0:G.message)||(W==null?void 0:W.message)||"Payment failed. Please try again."),j(!1)}}},g=()=>t?e==="yearly"?t.pricePerYear||0:t.pricePerMonth||0:0,N=()=>e==="yearly"?"per year":"per month";return o.jsxs("div",{className:"checkout-form-container",children:[E&&o.jsxs("div",{className:"alert alert-success",children:[o.jsx(cj,{className:"w-5 h-5"}),o.jsx("span",{children:E})]}),b&&o.jsxs("div",{className:"alert alert-error",children:[o.jsx(Di,{className:"w-5 h-5"}),o.jsx("span",{children:b})]}),o.jsxs("form",{onSubmit:v,className:"checkout-form",children:[o.jsxs("div",{className:"form-section",children:[o.jsx("h2",{className:"section-title",children:"Billing Information"}),o.jsxs("div",{className:"form-grid",children:[o.jsxs("div",{className:"form-group full-width",children:[o.jsx("label",{htmlFor:"name",children:"Full Name *"}),o.jsx("input",{type:"text",id:"name",name:"name",value:f.name,onChange:x,required:!0,disabled:C,placeholder:"John Doe"})]}),o.jsxs("div",{className:"form-group full-width",children:[o.jsx("label",{htmlFor:"email",children:"Email Address *"}),o.jsx("input",{type:"email",id:"email",name:"email",value:f.email,onChange:x,required:!0,disabled:C,placeholder:"john@example.com"})]}),o.jsxs("div",{className:"form-group full-width",children:[o.jsx("label",{htmlFor:"address",children:"Street Address"}),o.jsx("input",{type:"text",id:"address",name:"address",value:f.address,onChange:x,disabled:C,placeholder:"123 Main St"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"city",children:"City"}),o.jsx("input",{type:"text",id:"city",name:"city",value:f.city,onChange:x,disabled:C,placeholder:"New York"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"state",children:"State"}),o.jsx("input",{type:"text",id:"state",name:"state",value:f.state,onChange:x,disabled:C,placeholder:"NY"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"zipCode",children:"ZIP Code"}),o.jsx("input",{type:"text",id:"zipCode",name:"zipCode",value:f.zipCode,onChange:x,disabled:C,placeholder:"10001"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"country",children:"Country"}),o.jsxs("select",{id:"country",name:"country",value:f.country,onChange:x,disabled:C,children:[o.jsx("option",{value:"US",children:"United States"}),o.jsx("option",{value:"CA",children:"Canada"}),o.jsx("option",{value:"GB",children:"United Kingdom"}),o.jsx("option",{value:"AU",children:"Australia"}),o.jsx("option",{value:"IN",children:"India"})]})]})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h2",{className:"section-title",children:[o.jsx(uj,{className:"w-5 h-5"}),"Payment Details"]}),o.jsx("div",{className:"card-element-wrapper",children:o.jsx(VS,{options:qz,onChange:P})}),o.jsxs("div",{className:"security-badges",children:[o.jsxs("div",{className:"badge",children:[o.jsx(MS,{className:"w-4 h-4"}),o.jsx("span",{children:"Secure SSL Encryption"})]}),o.jsxs("div",{className:"badge",children:[o.jsx(_h,{className:"w-4 h-4"}),o.jsx("span",{children:"PCI Compliant"})]})]})]}),o.jsxs("div",{className:"order-summary-inline",children:[o.jsxs("div",{className:"summary-row",children:[o.jsx("span",{children:"Total Due Today"}),o.jsxs("span",{className:"total-amount",children:["$",(t==null?void 0:t.trialDays)>0?"0.00":g()]})]}),(t==null?void 0:t.trialDays)>0&&o.jsxs("p",{className:"trial-note",children:["You won't be charged until after your ",t.trialDays,"-day trial ends."]})]}),o.jsx("button",{type:"submit",className:"submit-button",disabled:C||!r||!h,children:C?o.jsxs(o.Fragment,{children:[o.jsx(dd,{className:"spinner mr-2"}),"Processing..."]}):o.jsxs(o.Fragment,{children:[o.jsx(MS,{className:"w-5 h-5 mr-2"}),"Pay $",g()," ",N()]})}),o.jsxs("p",{className:"terms-text",children:["By confirming your subscription, you agree to our"," ",o.jsx("a",{href:"/terms",children:"Terms of Service"})," and"," ",o.jsx("a",{href:"/privacy",children:"Privacy Policy"}),". You can cancel your subscription at any time."]})]}),o.jsxs("div",{className:"need-help",children:[o.jsx("h3",{children:"Need Help?"}),o.jsx("p",{children:"Contact our support team"}),o.jsx("a",{href:"mailto:support@plurify.com",children:"support@plurify.com"})]})]})},Hz=Vz("pk_test_51S0gniDBKob6EriCGAcsv8r6PFJX9I0Vi8EnjXpew9qfEg64YgKzbpj2TjC31piigQNSlv0Tw9bUBDJBWQMelQt600e8nOWh6Q"),Gz=()=>{var w,A;const t=Ft(),[e,n]=D.useState(null),[s,r]=D.useState("monthly"),[i,a]=D.useState(!1),{isAuthenticated:l,user:u}=Se(T=>T.auth),{data:d,isLoading:f,error:p,refetch:h}=zN(void 0,{refetchOnMountOrArgChange:!0}),{data:_,isLoading:C}=My(void 0,{skip:!l,refetchOnMountOrArgChange:!0}),j=(d==null?void 0:d.data)||[],b=_==null?void 0:_.data,S=j.find(T=>T._id===e),E=T=>{if(!P(T)){if(!l){sessionStorage.setItem("selectedPlan",JSON.stringify(T)),sessionStorage.setItem("billingPeriod",s),t("/login",{state:{from:"/pricing",message:"Please login to continue with your purchase"}});return}n(T._id),a(!0)}},y=()=>{a(!1),setTimeout(()=>{n(null)},600)},x=()=>{t("/dashboard",{state:{message:"Welcome! Your subscription is now active.",subscriptionSuccess:!0}})},P=T=>{var I;return((I=b==null?void 0:b.subscriptionPlanId)==null?void 0:I._id)===T._id},O=T=>s==="yearly"?T.pricePerYear:T.pricePerMonth,v=T=>{if(T.features&&Array.isArray(T.features)&&typeof T.features[0]=="string")return T.features;const I=[];return T.features&&(T.features.amazonIntegration&&I.push("Amazon Integration"),T.features.walmartIntegration&&I.push("Walmart Integration"),T.features.shopifyIntegration&&I.push("Shopify Integration"),T.features.advancedAnalytics&&I.push("Advanced Analytics"),T.features.prioritySupport&&I.push("Priority Support"),T.features.customReports&&I.push("Custom Reports")),I},g=T=>{const I=T.toLowerCase();return I.includes("starter")||I.includes("basic")?o.jsx(v7,{className:"w-8 h-8"}):I.includes("pro")||I.includes("professional")?o.jsx(ol,{className:"w-8 h-8"}):I.includes("enterprise")||I.includes("business")?o.jsx(_h,{className:"w-8 h-8"}):I.includes("team")?o.jsx(m7,{className:"w-8 h-8"}):o.jsx(ol,{className:"w-8 h-8"})},N=T=>{const I=(T.pricePerMonth||0)*12,L=T.pricePerYear||I,V=I-L,M=I>0?Math.round(V/I*100):0;return{amount:V,percent:M}};return f||C?o.jsxs("div",{className:"pricing-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Loading plans..."})]}):p?o.jsxs("div",{className:"pricing-error",children:[o.jsxs("p",{children:["Error loading plans: ",((w=p==null?void 0:p.data)==null?void 0:w.message)||"An error occurred"]}),o.jsx("button",{onClick:()=>h(),children:"Try Again"})]}):o.jsxs("div",{className:`pricing-checkout-container ${i?"checkout-mode":"plans-mode"}`,children:[o.jsx("div",{className:"pricing-header",children:i?o.jsxs("button",{className:"back-button",onClick:y,children:[o.jsx(C8,{className:"w-5 h-5"}),o.jsx("span",{children:"Back to all plans"})]}):o.jsxs(o.Fragment,{children:[o.jsx("h1",{className:"pricing-title",children:"Choose Your Plan"}),o.jsx("p",{className:"pricing-subtitle",children:"Select the perfect plan for your e-commerce business"}),b&&o.jsx("div",{className:"current-subscription-info",children:o.jsxs("p",{children:["You are currently on the ",o.jsx("strong",{children:(A=b.subscriptionPlanId)==null?void 0:A.name})," plan.",o.jsx("button",{onClick:()=>t("/dashboard"),className:"dashboard-btn",style:{marginLeft:"10px",padding:"5px 15px",backgroundColor:"#667eea",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Go to Dashboard"}),o.jsx("a",{href:"/subscription",style:{marginLeft:"10px"},children:" Manage Subscription"})]})}),o.jsxs("div",{className:"billing-toggle",children:[o.jsx("button",{className:`toggle-btn ${s==="monthly"?"active":""}`,onClick:()=>r("monthly"),children:"Monthly"}),o.jsxs("button",{className:`toggle-btn ${s==="yearly"?"active":""}`,onClick:()=>r("yearly"),children:["Yearly",j.length>0&&o.jsxs("span",{className:"save-badge",children:["Save up to ",Math.max(...j.map(T=>N(T).percent)),"%"]})]})]})]})}),o.jsxs("div",{className:"content-area",children:[o.jsx("div",{className:"plans-section",children:o.jsx("div",{className:"plans-grid",children:j.map(T=>{const I=N(T),L=P(T),V=T._id===e;return o.jsxs("div",{className:`plan-card ${T.isPopular?"popular":""} ${L?"current":""} ${V?"selected":""} ${i&&!V?"hidden":""}`,children:[T.isPopular&&o.jsxs("div",{className:"popular-badge",children:[o.jsx(ol,{className:"w-4 h-4 mr-1"}),"Most Popular"]}),L&&o.jsx("div",{className:"current-badge",children:"Your Current Plan"}),o.jsx("div",{className:"plan-icon",children:g(T.name)}),o.jsx("h3",{className:"plan-name",children:T.name}),T.description&&o.jsx("p",{className:"plan-description",children:T.description}),o.jsxs("div",{className:"plan-pricing",children:[o.jsxs("div",{className:"price-container",children:[o.jsx("span",{className:"currency",children:"$"}),o.jsx("span",{className:"price",children:O(T)}),o.jsxs("span",{className:"period",children:["/",s==="yearly"?"year":"month"]})]}),s==="yearly"&&I.amount>0&&o.jsxs("div",{className:"savings-text",children:["Save $",I.amount.toFixed(2)," (",I.percent,"% off)"]})]}),o.jsx("ul",{className:"features-list",children:v(T).map((M,U)=>o.jsxs("li",{className:"feature-item",children:[o.jsx(vh,{className:"feature-check"}),o.jsx("span",{children:M})]},U))}),T.trialDays>0&&!L&&o.jsx("div",{className:"trial-info",children:o.jsxs("span",{className:"trial-badge",children:[T.trialDays," day free trial"]})}),(!i||!V)&&o.jsx("button",{className:`plan-button ${L?"current":""}`,onClick:()=>E(T),disabled:L,children:L?"Current Plan":"Choose This Plan"}),i&&V&&o.jsxs("div",{className:"billing-toggle-selected",children:[o.jsx("label",{children:"Billing Period:"}),o.jsxs("div",{className:"toggle-buttons",children:[o.jsx("button",{className:s==="monthly"?"active":"",onClick:()=>r("monthly"),children:"Monthly"}),o.jsx("button",{className:s==="yearly"?"active":"",onClick:()=>r("yearly"),children:"Yearly"})]})]})]},T._id)})})}),o.jsx("div",{className:`checkout-section ${i?"visible":""}`,children:i&&S&&o.jsx(bj,{stripe:Hz,children:o.jsx(Wz,{plan:S,billingPeriod:s,onSuccess:x,onCancel:y})})})]}),!i&&o.jsx("div",{className:"trust-section",children:o.jsxs("div",{className:"trust-badges",children:[o.jsxs("div",{className:"trust-badge",children:[o.jsx(_h,{className:"w-6 h-6"}),o.jsx("span",{children:"Secure Payments"})]}),o.jsxs("div",{className:"trust-badge",children:[o.jsx(vh,{className:"w-6 h-6"}),o.jsx("span",{children:"Cancel Anytime"})]}),o.jsxs("div",{className:"trust-badge",children:[o.jsx(ol,{className:"w-6 h-6"}),o.jsx("span",{children:"24/7 Support"})]})]})})]})},Qz=()=>{var Y,ee,z,Q,G,W,K,ne,oe,ae,de,Ce,St,Ie,mt;const t=Ft(),[e,n]=D.useState("overview"),{token:s,isAuthenticated:r}=Se(re=>re.auth),[i,a]=D.useState(1),[l,u]=D.useState(!1),[d,f]=D.useState(!1),{data:p,isLoading:h,refetch:_}=My(void 0,{skip:!r||!s}),{data:C,isLoading:j}=xR(void 0,{skip:!r||!s}),{data:b,isLoading:S}=SR(void 0,{skip:!r||!s}),{data:E,isLoading:y}=_R({page:i,limit:10},{skip:!r||!s||e!=="transactions"}),[x,{isLoading:P}]=yR(),[O]=bR(),[v]=NR(),g=p==null?void 0:p.data,N=C==null?void 0:C.data,w=(b==null?void 0:b.data)||[],A=((Y=E==null?void 0:E.data)==null?void 0:Y.transactions)||[],T=((z=(ee=E==null?void 0:E.data)==null?void 0:ee.pagination)==null?void 0:z.totalPages)||1,I=h||j||S;D.useEffect(()=>{(!r||!s)&&(console.warn("[SubscriptionManagement] User not authenticated, redirecting to login"),t("/login"))},[r,s,t]);const L=async(re=!1)=>{try{const fe=await x({subscriptionId:g._id,cancelImmediately:re}).unwrap();fe.success?(u(!1),_(),alert(fe.message)):alert("Failed to cancel subscription: "+fe.message)}catch(fe){console.error("Error cancelling subscription:",fe),alert("An error occurred while cancelling subscription")}},V=async re=>{var fe;try{const pe=await O(re).unwrap();(fe=pe==null?void 0:pe.data)!=null&&fe.invoicePdf&&window.open(pe.data.invoicePdf,"_blank")}catch(pe){console.error("Error downloading invoice:",pe),alert("Failed to download invoice")}},M=async()=>{var re;try{const fe=await v({returnUrl:window.location.href}).unwrap();(re=fe==null?void 0:fe.data)!=null&&re.url&&(window.location.href=fe.data.url)}catch(fe){console.error("Error creating portal session:",fe),alert("Failed to open customer portal")}},U=re=>new Date(re).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"}),F=re=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(re),B=re=>({active:"success",trialing:"info",past_due:"warning",cancelled:"danger",unpaid:"danger",succeeded:"success",failed:"danger",pending:"warning",refunded:"secondary"})[re]||"secondary",q=()=>{if(!(g!=null&&g.currentPeriodEnd))return 0;const re=new Date(g.currentPeriodEnd);return Math.ceil((re-new Date)/(1e3*60*60*24))};return I?o.jsxs("div",{className:"subscription-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Loading subscription details..."})]}):g?o.jsxs("div",{className:"subscription-management-container",children:[o.jsxs("div",{className:"subscription-header",children:[o.jsxs("div",{className:"header-content",children:[o.jsx("h1",{children:"Subscription Management"}),o.jsx("p",{children:"Manage your subscription, billing, and payment methods"})]}),o.jsx("div",{className:"header-actions",children:o.jsx("button",{className:"btn-secondary",onClick:()=>t("/pricing"),children:"Upgrade Plan"})})]}),o.jsxs("div",{className:"subscription-tabs",children:[o.jsx("button",{className:`tab ${e==="overview"?"active":""}`,onClick:()=>n("overview"),children:"Overview"}),o.jsx("button",{className:`tab ${e==="billing"?"active":""}`,onClick:()=>n("billing"),children:"Billing & Payment"}),o.jsx("button",{className:`tab ${e==="transactions"?"active":""}`,onClick:()=>n("transactions"),children:"Transaction History"})]}),o.jsxs("div",{className:"tab-content",children:[e==="overview"&&o.jsxs("div",{className:"overview-tab",children:[o.jsxs("div",{className:"current-plan-card",children:[o.jsxs("div",{className:"plan-header",children:[o.jsx("h2",{children:"Current Plan"}),o.jsx("span",{className:`status-badge ${B(g.status)}`,children:g.status})]}),o.jsxs("div",{className:"plan-details",children:[o.jsxs("div",{className:"plan-info",children:[o.jsx("h3",{children:((Q=g.subscriptionPlanId)==null?void 0:Q.name)||"Plan Name"}),o.jsxs("p",{className:"plan-price",children:[F(((G=g.subscriptionPlanId)==null?void 0:G.pricePerMonth)||0),o.jsxs("span",{children:["/",g.billingPeriod]})]})]}),o.jsxs("div",{className:"plan-meta",children:[o.jsxs("div",{className:"meta-item",children:[o.jsx(j8,{size:16}),o.jsxs("div",{children:[o.jsx("span",{children:"Current Period"}),o.jsxs("p",{children:[U(g.currentPeriodStart)," - ",U(g.currentPeriodEnd)]})]})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx(Il,{size:16}),o.jsxs("div",{children:[o.jsx("span",{children:"Next Billing"}),o.jsxs("p",{children:[U(g.currentPeriodEnd)," (",q()," days)"]})]})]})]}),g.trialEnd&&new Date(g.trialEnd)>new Date&&o.jsxs("div",{className:"trial-banner",children:[o.jsx(Di,{size:16}),"Trial ends on ",U(g.trialEnd)]}),g.cancelAtPeriodEnd&&o.jsxs("div",{className:"cancel-banner",children:[o.jsx(Di,{size:16}),"Subscription will be cancelled on ",U(g.currentPeriodEnd)]})]}),o.jsxs("div",{className:"plan-features",children:[o.jsx("h4",{children:"Included Features:"}),o.jsx("ul",{children:(K=(W=g.subscriptionPlanId)==null?void 0:W.features)==null?void 0:K.map((re,fe)=>o.jsxs("li",{children:[o.jsx(vh,{size:16}),re]},fe))})]}),o.jsx("div",{className:"plan-actions",children:!g.cancelAtPeriodEnd&&o.jsx("button",{className:"btn-danger",onClick:()=>u(!0),children:"Cancel Subscription"})})]}),o.jsxs("div",{className:"usage-stats",children:[o.jsx("h3",{children:"Usage Statistics"}),o.jsxs("div",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-value",children:((ne=g.subscriptionPlanId)==null?void 0:ne.maxProducts)||0}),o.jsx("div",{className:"stat-label",children:"Products Limit"})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-value",children:((oe=g.subscriptionPlanId)==null?void 0:oe.maxStores)||0}),o.jsx("div",{className:"stat-label",children:"Stores Limit"})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-value",children:q()}),o.jsx("div",{className:"stat-label",children:"Days Remaining"})]})]})]})]}),e==="billing"&&o.jsxs("div",{className:"billing-tab",children:[o.jsxs("div",{className:"payment-method-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx("h3",{children:"Payment Method"}),o.jsx("button",{className:"btn-link",onClick:M,children:"Manage Payment Methods"})]}),w.length>0?o.jsx("div",{className:"payment-methods",children:w.map(re=>{var fe,pe,zt,Kt,Yt;return o.jsxs("div",{className:"payment-method-card",children:[o.jsx(uj,{size:24}),o.jsxs("div",{className:"method-details",children:[o.jsxs("p",{className:"method-brand",children:[(pe=(fe=re.card)==null?void 0:fe.brand)==null?void 0:pe.toUpperCase(),"  ",(zt=re.card)==null?void 0:zt.last4]}),o.jsxs("p",{className:"method-exp",children:["Expires ",(Kt=re.card)==null?void 0:Kt.exp_month,"/",(Yt=re.card)==null?void 0:Yt.exp_year]})]}),g.defaultPaymentMethod===re.id&&o.jsx("span",{className:"default-badge",children:"Default"})]},re.id)})}):o.jsxs("div",{className:"no-payment-methods",children:[o.jsx("p",{children:"No payment methods on file"}),o.jsx("button",{className:"btn-primary",onClick:M,children:"Add Payment Method"})]})]}),o.jsxs("div",{className:"billing-info-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx("h3",{children:"Billing Information"}),o.jsx("button",{className:"btn-link",onClick:()=>t("/settings/billing"),children:"Edit"})]}),N?o.jsxs("div",{className:"billing-details",children:[o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{children:"Name:"}),o.jsx("p",{children:N.name})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{children:"Email:"}),o.jsx("p",{children:N.email})]}),N.companyName&&o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{children:"Company:"}),o.jsx("p",{children:N.companyName})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{children:"Address:"}),o.jsxs("p",{children:[(ae=N.address)==null?void 0:ae.line1,o.jsx("br",{}),((de=N.address)==null?void 0:de.line2)&&`${N.address.line2}<br />`,(Ce=N.address)==null?void 0:Ce.city,", ",(St=N.address)==null?void 0:St.state," ",(Ie=N.address)==null?void 0:Ie.postal_code,o.jsx("br",{}),(mt=N.address)==null?void 0:mt.country]})]})]}):o.jsx("div",{className:"no-billing-info",children:o.jsx("p",{children:"No billing information on file"})})]})]}),e==="transactions"&&o.jsxs("div",{className:"transactions-tab",children:[o.jsx("h3",{children:"Transaction History"}),A.length>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"transactions-table",children:o.jsxs("table",{children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Date"}),o.jsx("th",{children:"Description"}),o.jsx("th",{children:"Amount"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Invoice"})]})}),o.jsx("tbody",{children:A.map(re=>o.jsxs("tr",{children:[o.jsx("td",{children:U(re.createdAt)}),o.jsx("td",{children:re.description}),o.jsx("td",{children:F(re.amount)}),o.jsx("td",{children:o.jsx("span",{className:`status-badge ${B(re.status)}`,children:re.status})}),o.jsx("td",{children:re.invoiceUrl&&o.jsx("button",{className:"btn-icon",onClick:()=>V(re._id),title:"Download Invoice",children:o.jsx(B8,{size:16})})})]},re._id))})]})}),T>1&&o.jsxs("div",{className:"pagination",children:[o.jsx("button",{disabled:i===1,onClick:()=>a(re=>re-1),children:"Previous"}),o.jsxs("span",{children:["Page ",i," of ",T]}),o.jsx("button",{disabled:i===T,onClick:()=>a(re=>re+1),children:"Next"})]})]}):o.jsxs("div",{className:"no-transactions",children:[o.jsx(ud,{size:48}),o.jsx("p",{children:"No transactions found"})]})]})]}),l&&o.jsx("div",{className:"modal-overlay",onClick:()=>u(!1),children:o.jsxs("div",{className:"modal-content",onClick:re=>re.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h3",{children:"Cancel Subscription"}),o.jsx("button",{onClick:()=>u(!1),children:o.jsx(fj,{size:20})})]}),o.jsxs("div",{className:"modal-body",children:[o.jsx("p",{children:"Are you sure you want to cancel your subscription?"}),o.jsxs("div",{className:"cancel-options",children:[o.jsxs("div",{className:"option",children:[o.jsx("input",{type:"radio",id:"cancel-end",name:"cancel-type",value:"end",defaultChecked:!0}),o.jsxs("label",{htmlFor:"cancel-end",children:[o.jsx("strong",{children:"Cancel at period end"}),o.jsxs("p",{children:["Keep access until ",U(g.currentPeriodEnd)]})]})]}),o.jsxs("div",{className:"option",children:[o.jsx("input",{type:"radio",id:"cancel-now",name:"cancel-type",value:"now"}),o.jsxs("label",{htmlFor:"cancel-now",children:[o.jsx("strong",{children:"Cancel immediately"}),o.jsx("p",{children:"Lose access immediately (no refund)"})]})]})]})]}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"btn-secondary",onClick:()=>u(!1),children:"Keep Subscription"}),o.jsx("button",{className:"btn-danger",onClick:()=>{const re=document.getElementById("cancel-now").checked;L(re)},disabled:P,children:P?"Cancelling...":"Cancel Subscription"})]})]})})]}):o.jsxs("div",{className:"no-subscription",children:[o.jsx(Di,{size:48}),o.jsx("h2",{children:"No Active Subscription"}),o.jsx("p",{children:"You don't have an active subscription."}),o.jsx("button",{onClick:()=>t("/pricing"),className:"btn-primary",children:"View Plans"})]})},Kz=()=>{const t=Se(v=>v.auth.user);if(!((t==null?void 0:t.role_id)==="1"))return o.jsx(gn,{to:"/dashboard",replace:!0});const[n,s]=D.useState(!1),[r,i]=D.useState(null),[a,l]=D.useState({name:"",description:"",pricePerMonth:"",pricePerYear:"",features:{amazonIntegration:!1,walmartIntegration:!1,shopifyIntegration:!1,advancedAnalytics:!1,prioritySupport:!1,customReports:!1},trialDays:0,isPopular:!1,isActive:!0}),{data:u,isLoading:d,refetch:f}=zN(),p=(u==null?void 0:u.data)||[],[h,{isLoading:_}]=fR(),[C,{isLoading:j}]=pR(),[b,{isLoading:S}]=mR(),E=v=>{const{name:g,value:N,type:w,checked:A}=v.target;if(g.startsWith("features.")){const T=g.split(".")[1];l(I=>({...I,features:{...I.features,[T]:A}}))}else l(T=>({...T,[g]:w==="checkbox"?A:N}))},y=async v=>{var g;v.preventDefault();try{const N={...a,pricePerMonth:parseFloat(a.pricePerMonth),pricePerYear:parseFloat(a.pricePerYear),trialDays:parseInt(a.trialDays)||0};r?(await C({id:r._id,...N}).unwrap(),alert("Plan updated successfully!"),i(null)):(await h(N).unwrap(),alert("Plan created successfully!"),s(!1)),O(),f()}catch(N){alert("Error: "+(((g=N==null?void 0:N.data)==null?void 0:g.message)||N.message))}},x=v=>{i(v),l({name:v.name,description:v.description||"",pricePerMonth:v.pricePerMonth,pricePerYear:v.pricePerYear,features:v.features||{amazonIntegration:!1,walmartIntegration:!1,shopifyIntegration:!1,advancedAnalytics:!1,prioritySupport:!1,customReports:!1},trialDays:v.trialDays||0,isPopular:v.isPopular||!1,isActive:v.isActive!==!1}),s(!0)},P=async v=>{var g;if(window.confirm("Are you sure you want to delete this plan?"))try{await b(v).unwrap(),alert("Plan deleted successfully!"),f()}catch(N){alert("Error deleting plan: "+(((g=N==null?void 0:N.data)==null?void 0:g.message)||N.message))}},O=()=>{l({name:"",description:"",pricePerMonth:"",pricePerYear:"",features:{amazonIntegration:!1,walmartIntegration:!1,shopifyIntegration:!1,advancedAnalytics:!1,prioritySupport:!1,customReports:!1},trialDays:0,isPopular:!1,isActive:!0}),i(null),s(!1)};return d?o.jsx("div",{className:"loading",children:"Loading plans..."}):o.jsxs("div",{className:"subscription-plan-manager",children:[o.jsxs("div",{className:"manager-header",children:[o.jsx("h1",{children:"Subscription Plans Management (Admin Only)"}),!n&&o.jsxs("button",{className:"btn btn-primary",onClick:()=>s(!0),children:[o.jsx(Z8,{className:"w-5 h-5 mr-2"}),"Add New Plan"]})]}),n&&o.jsxs("div",{className:"plan-form-container",children:[o.jsxs("div",{className:"form-header",children:[o.jsx("h2",{children:r?"Edit Plan":"Create New Plan"}),o.jsx("button",{className:"btn-close",onClick:O,children:o.jsx(fj,{className:"w-5 h-5"})})]}),o.jsxs("form",{onSubmit:y,className:"plan-form",children:[o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Plan Name *"}),o.jsx("input",{type:"text",name:"name",value:a.name,onChange:E,placeholder:"e.g., Professional",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Description"}),o.jsx("input",{type:"text",name:"description",value:a.description,onChange:E,placeholder:"Perfect for growing businesses"})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Monthly Price ($) *"}),o.jsx("input",{type:"number",name:"pricePerMonth",value:a.pricePerMonth,onChange:E,placeholder:"49.99",step:"0.01",min:"0",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Yearly Price ($) *"}),o.jsx("input",{type:"number",name:"pricePerYear",value:a.pricePerYear,onChange:E,placeholder:"499.99",step:"0.01",min:"0",required:!0})]})]}),o.jsx("div",{className:"form-row",children:o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Trial Days"}),o.jsx("input",{type:"number",name:"trialDays",value:a.trialDays,onChange:E,placeholder:"14",min:"0"})]})}),o.jsxs("div",{className:"features-section",children:[o.jsx("label",{children:"Features"}),o.jsxs("div",{className:"features-grid",children:[o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",name:"features.amazonIntegration",checked:a.features.amazonIntegration,onChange:E}),"Amazon Integration"]}),o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",name:"features.walmartIntegration",checked:a.features.walmartIntegration,onChange:E}),"Walmart Integration"]}),o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",name:"features.shopifyIntegration",checked:a.features.shopifyIntegration,onChange:E}),"Shopify Integration"]}),o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",name:"features.advancedAnalytics",checked:a.features.advancedAnalytics,onChange:E}),"Advanced Analytics"]}),o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",name:"features.prioritySupport",checked:a.features.prioritySupport,onChange:E}),"Priority Support"]}),o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",name:"features.customReports",checked:a.features.customReports,onChange:E}),"Custom Reports"]})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",name:"isPopular",checked:a.isPopular,onChange:E}),"Mark as Popular"]}),o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",name:"isActive",checked:a.isActive,onChange:E}),"Active Plan"]})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"button",className:"btn btn-secondary",onClick:O,children:"Cancel"}),o.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:_||j,children:[o.jsx(n7,{className:"w-5 h-5 mr-2"}),r?"Update Plan":"Create Plan"]})]})]})]}),o.jsxs("div",{className:"plans-list",children:[o.jsx("h2",{children:"Existing Plans"}),o.jsxs("div",{className:"plans-table",children:[o.jsxs("table",{children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Name"}),o.jsx("th",{children:"Monthly Price"}),o.jsx("th",{children:"Yearly Price"}),o.jsx("th",{children:"Trial Days"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:p.map(v=>o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{className:"plan-name-cell",children:[v.name,v.isPopular&&o.jsx(ol,{className:"popular-icon"})]})}),o.jsxs("td",{children:["$",v.pricePerMonth]}),o.jsxs("td",{children:["$",v.pricePerYear]}),o.jsx("td",{children:v.trialDays||0}),o.jsx("td",{children:o.jsx("span",{className:`status ${v.isActive?"active":"inactive"}`,children:v.isActive?"Active":"Inactive"})}),o.jsx("td",{children:o.jsxs("div",{className:"actions",children:[o.jsx("button",{className:"btn-icon btn-edit",onClick:()=>x(v),title:"Edit Plan",children:o.jsx(J8,{className:"w-4 h-4"})}),o.jsx("button",{className:"btn-icon btn-delete",onClick:()=>P(v._id),title:"Delete Plan",disabled:S,children:o.jsx(hj,{className:"w-4 h-4"})})]})})]},v._id))})]}),p.length===0&&o.jsxs("div",{className:"no-plans",children:[o.jsx(_h,{className:"w-12 h-12 mb-3"}),o.jsx("p",{children:"No subscription plans found"}),o.jsx("p",{className:"text-sm",children:"Create your first plan to get started"})]})]})]})]})},Yz=()=>{const t=Ft(),[e]=tC(),[n,{isLoading:s}]=ER(),[r,i]=D.useState(null);return D.useEffect(()=>{(async()=>{var p;const l=e.get("code"),u=e.get("state"),d=e.get("error"),f=e.get("error_description");if(d){i(`Amazon authorization failed: ${f||d}`),setTimeout(()=>{t("/dashboard")},5e3);return}if(!l||!u){i("Missing authorization code or state parameter"),setTimeout(()=>{t("/dashboard")},5e3);return}try{const h=await n({code:l,state:u}).unwrap();h.success?setTimeout(()=>{t("/dashboard",{state:{amazonConnected:!0,message:"Amazon account connected successfully!"}})},2e3):(i(h.message||"Failed to connect Amazon account"),setTimeout(()=>{t("/dashboard")},5e3))}catch(h){console.error("Callback processing error:",h),i(((p=h.data)==null?void 0:p.message)||"Failed to process Amazon authorization"),setTimeout(()=>{t("/dashboard")},5e3)}})()},[e,n,t]),o.jsx("div",{className:"amazon-callback-container",children:o.jsx("div",{className:"callback-content",children:r?o.jsx(o.Fragment,{children:o.jsxs("div",{className:"callback-error",children:[o.jsx("div",{className:"error-icon",children:""}),o.jsx("h2",{children:"Connection Failed"}),o.jsx("p",{children:r}),o.jsx("p",{className:"redirect-message",children:"Redirecting to dashboard..."})]})}):s?o.jsx(o.Fragment,{children:o.jsxs("div",{className:"callback-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("h2",{children:"Connecting to Amazon"}),o.jsx("p",{children:"Please wait while we complete the connection..."})]})}):o.jsx(o.Fragment,{children:o.jsxs("div",{className:"callback-success",children:[o.jsx("div",{className:"success-icon",children:""}),o.jsx("h2",{children:"Successfully Connected!"}),o.jsx("p",{children:"Your Amazon seller account has been connected."}),o.jsx("p",{className:"redirect-message",children:"Redirecting to dashboard..."})]})})})})},Jz=()=>{const t=Ft(),[e]=tC(),[n,s]=D.useState("processing"),[r,i]=D.useState("Connecting to Shopify...");return D.useEffect(()=>{const a=e.get("success"),l=e.get("shop"),u=e.get("error");if(console.log(" Shopify Callback Debug:"),console.log("  - Current URL:",window.location.href),console.log("  - Search params:",Object.fromEntries(e)),console.log("  - Success:",a),console.log("  - Shop:",l),console.log("  - Error:",u),a==="true")s("success"),i(`Successfully connected to ${l||"your Shopify store"}!`),console.log(" Success! Redirecting to dashboard..."),setTimeout(()=>{t("/dashboard")},2e3);else if(a==="false"){s("error");const d=u?decodeURIComponent(u):"Failed to connect to Shopify";i(d),console.log(" Error occurred. Redirecting to dashboard..."),setTimeout(()=>{t("/dashboard")},3e3)}else s("error"),i("Invalid callback parameters. Please try connecting again."),console.log(" Invalid parameters. Redirecting to dashboard..."),setTimeout(()=>{t("/dashboard")},3e3)},[e,t]),o.jsx("div",{className:"shopify-callback-container",children:o.jsxs("div",{className:"callback-card",children:[o.jsxs("div",{className:`status-icon ${n}`,children:[n==="processing"&&o.jsx("div",{className:"spinner-icon",children:o.jsx("div",{className:"spinner"})}),n==="success"&&o.jsx("div",{className:"success-icon",children:""}),n==="error"&&o.jsx("div",{className:"error-icon",children:""})]}),o.jsxs("h2",{className:`status-title ${n}`,children:[n==="processing"&&"Connecting to Shopify",n==="success"&&"Connection Successful!",n==="error"&&"Connection Failed"]}),o.jsx("p",{className:"message",children:r}),o.jsxs("div",{className:"redirect-info",children:[o.jsx("p",{className:"redirect-message",children:"Redirecting you back to the dashboard..."}),n==="processing"&&o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-bar-fill"})})]}),o.jsx("button",{className:"manual-redirect-btn",onClick:()=>t("/dashboard"),children:"Go to Dashboard Now"})]})})},Xz=()=>{const t=Ft(),e=bs(),[n]=iO(),[s,r]=D.useState("processing"),[i,a]=D.useState("");return D.useEffect(()=>{(async()=>{var j;console.log("Processing QuickBooks OAuth callback...");const u=new URLSearchParams(e.search),d=u.get("code"),f=u.get("state"),p=u.get("realmId"),h=u.get("error"),_=u.get("error_description");u.get("qb_connected");const C=u.get("company");if(h){console.error("OAuth error:",h,_),r("error"),a(_||"Authorization denied or cancelled."),setTimeout(()=>{t("/dashboard?tab=quickbooks&error=true")},3e3);return}if(!d||!p){console.error("Missing required OAuth parameters"),r("error"),a("Invalid authorization response. Missing required parameters."),setTimeout(()=>{t("/dashboard?tab=quickbooks&error=true")},3e3);return}try{console.log("Sending callback data to backend:",{code:d.substring(0,20)+"...",realmId:p,state:f});const b=await n({code:d,realmId:p,state:f}).unwrap();console.log("QuickBooks connection successful:",b),r("success");const S=new URLSearchParams({tab:"quickbooks",connected:"true",...C&&{company:C}});setTimeout(()=>{t(`/dashboard?${S.toString()}`)},2e3)}catch(b){console.error("Failed to connect QuickBooks:",b),r("error"),a(((j=b==null?void 0:b.data)==null?void 0:j.message)||(b==null?void 0:b.message)||"Failed to connect your QuickBooks account. Please try again."),setTimeout(()=>{t("/dashboard?tab=quickbooks&error=true")},3e3)}})()},[e,n,t]),o.jsx("div",{className:"quickbooks-callback-container",children:o.jsxs("div",{className:"callback-card",children:[o.jsx("div",{className:"qb-logo-container",children:o.jsx("span",{className:"qb-logo-large",children:""})}),s==="processing"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-container",children:o.jsx("div",{className:"spinner"})}),o.jsx("h2",{children:"Connecting to QuickBooks..."}),o.jsx("p",{children:"Please wait while we establish a secure connection with your QuickBooks account."}),o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-fill"})})]}),s==="success"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"success-icon",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#48BB78"}),o.jsx("path",{d:"M8 12l2 2 4-4",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),o.jsx("h2",{children:"Successfully Connected!"}),o.jsx("p",{children:"Your QuickBooks account has been connected successfully."}),o.jsx("p",{className:"redirect-message",children:"Redirecting to your integration dashboard..."})]}),s==="error"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"error-icon",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#F56565"}),o.jsx("path",{d:"M15 9l-6 6M9 9l6 6",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),o.jsx("h2",{children:"Connection Failed"}),o.jsx("p",{className:"error-message",children:i}),o.jsx("p",{className:"redirect-message",children:"Redirecting back to QuickBooks integration..."})]}),o.jsx("div",{className:"manual-nav",children:o.jsx("button",{onClick:()=>t("/dashboard?tab=quickbooks"),className:"back-btn",children:"Return to QuickBooks Integration"})})]})})},Zz=async()=>{console.log(` Testing Firebase Realtime Database Connection...
`);try{const t=GE();console.log(" Step 1: Firebase database instance obtained");const e=Vo(t,".info/connected");Ov(e,d=>{d.val()===!0?console.log(" Step 2: Connected to Firebase Realtime Database"):console.log(" Step 2: NOT connected to Firebase Realtime Database")});const n=localStorage.getItem("userInfo"),s=n?JSON.parse(n).id||JSON.parse(n)._id:"test-user";console.log(` Step 3: Using user ID: ${s}`);const r=Vo(t,`test/${s}/connection-test`),i={timestamp:Date.now(),message:"Testing Firebase connection",browser:navigator.userAgent};await Vw(r,i),console.log(" Step 4: Successfully wrote test data to Firebase"),console.log("   Data written:",i);const a=Vo(t,`notifications/${s}`);let l=!1;const u=HE(a,d=>{l=!0,console.log(" FIREBASE LISTENER TRIGGERED!"),console.log("   Notification signal received:",d.val())});return console.log(" Step 5: Listener set up for notifications path"),setTimeout(async()=>{const d=bM(a);await Vw(d,{id:"test-notification-"+Date.now(),timestamp:Date.now(),action:"new",test:!0}),console.log(" Step 6: Test notification signal sent to Firebase")},1e3),setTimeout(()=>{l?(console.log(`
 FIREBASE IS WORKING! `),console.log("Real-time listeners are active and receiving signals.")):(console.log(`
 FIREBASE LISTENERS NOT TRIGGERED `),console.log("Possible issues:"),console.log("1. Firebase credentials not configured"),console.log("2. Firebase Realtime Database not enabled"),console.log("3. Security rules blocking access"),console.log("4. Network/firewall issues")),u()},3e3),!0}catch(t){return console.error(" Firebase test failed:",t),console.log(`
Error details:`),console.log("- Message:",t.message),console.log("- Code:",t.code),console.log(`
This likely means Firebase is not properly configured.`),!1}};window.testFirebaseConnection=Zz;console.log("Firebase test ready! Run: testFirebaseConnection()");const eB=(t,e,n)=>e?uf(t)&&!n?"/onboarding":"/dashboard":"/login";function tB(){const t=Se(Dy),e=Se(rr),n=Se(Ly);me.useEffect(()=>{Qk(),console.log(" Firebase initialized")},[]);const s=eB(e,t,n);return o.jsx(d4,{children:o.jsx("div",{className:"app",children:o.jsxs(s4,{children:[o.jsx(hn,{path:"/login",element:o.jsx(yS,{children:o.jsx(c9,{})})}),o.jsx(hn,{path:"/signup",element:o.jsx(yS,{children:o.jsx(u9,{})})}),o.jsx(hn,{path:"/pricing",element:o.jsx(Gz,{})}),o.jsx(hn,{path:"/amazon-callback",element:o.jsx(Yz,{})}),o.jsx(hn,{path:"/shopify-callback",element:o.jsx(Jz,{})}),o.jsx(hn,{path:"/quickbooks-callback",element:o.jsx(Xz,{})}),o.jsx(hn,{path:"/onboarding",element:o.jsx(Au,{children:o.jsx(Fp,{allowedRoles:[jr.CLIENT],children:o.jsx(gS,{requireIncomplete:!0,children:o.jsx(az,{})})})})}),o.jsx(hn,{path:"/subscription",element:o.jsx(Au,{children:o.jsx(Fp,{allowedRoles:[jr.CLIENT,jr.ADMIN],children:o.jsx(Qz,{})})})}),o.jsx(hn,{path:"/admin/plans",element:o.jsx(Au,{children:o.jsx(Fp,{allowedRoles:[jr.ADMIN],children:o.jsx(Kz,{})})})}),o.jsx(hn,{path:"/dashboard",element:o.jsx(Au,{children:o.jsx(gS,{children:o.jsx(l9,{children:o.jsx(F7,{})})})})}),o.jsx(hn,{path:"/",element:o.jsx(gn,{to:s,replace:!0})}),o.jsx(hn,{path:"*",element:o.jsxs("div",{className:"not-found",children:[o.jsx("h2",{children:"404 - Page Not Found"}),o.jsx("p",{children:"The page you're looking for doesn't exist."})]})})]})})})}$p.createRoot(document.getElementById("root")).render(o.jsx(me.StrictMode,{children:o.jsx(BT,{store:VN,children:o.jsx(tB,{})})}));
